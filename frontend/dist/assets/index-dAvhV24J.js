(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function An(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gx={exports:{}},cg={},Zx={exports:{}},Rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA;function x5(){if(XA)return Rr;XA=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.iterator;function E(Se){return Se===null||typeof Se!="object"?null:(Se=S&&Se[S]||Se["@@iterator"],typeof Se=="function"?Se:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,L={};function R(Se,De,ft){this.props=Se,this.context=De,this.refs=L,this.updater=ft||I}R.prototype.isReactComponent={},R.prototype.setState=function(Se,De){if(typeof Se!="object"&&typeof Se!="function"&&Se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Se,De,"setState")},R.prototype.forceUpdate=function(Se){this.updater.enqueueForceUpdate(this,Se,"forceUpdate")};function U(){}U.prototype=R.prototype;function X(Se,De,ft){this.props=Se,this.context=De,this.refs=L,this.updater=ft||I}var K=X.prototype=new U;K.constructor=X,F(K,R.prototype),K.isPureReactComponent=!0;var re=Array.isArray,W=Object.prototype.hasOwnProperty,J={current:null},ie={key:!0,ref:!0,__self:!0,__source:!0};function he(Se,De,ft){var At,jt={},Nt=null,or=null;if(De!=null)for(At in De.ref!==void 0&&(or=De.ref),De.key!==void 0&&(Nt=""+De.key),De)W.call(De,At)&&!ie.hasOwnProperty(At)&&(jt[At]=De[At]);var er=arguments.length-2;if(er===1)jt.children=ft;else if(1<er){for(var ct=Array(er),Ht=0;Ht<er;Ht++)ct[Ht]=arguments[Ht+2];jt.children=ct}if(Se&&Se.defaultProps)for(At in er=Se.defaultProps,er)jt[At]===void 0&&(jt[At]=er[At]);return{$$typeof:t,type:Se,key:Nt,ref:or,props:jt,_owner:J.current}}function ve(Se,De){return{$$typeof:t,type:Se.type,key:De,ref:Se.ref,props:Se.props,_owner:Se._owner}}function Re(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===t}function de(Se){var De={"=":"=0",":":"=2"};return"$"+Se.replace(/[=:]/g,function(ft){return De[ft]})}var Oe=/\/+/g;function Le(Se,De){return typeof Se=="object"&&Se!==null&&Se.key!=null?de(""+Se.key):De.toString(36)}function Ge(Se,De,ft,At,jt){var Nt=typeof Se;(Nt==="undefined"||Nt==="boolean")&&(Se=null);var or=!1;if(Se===null)or=!0;else switch(Nt){case"string":case"number":or=!0;break;case"object":switch(Se.$$typeof){case t:case e:or=!0}}if(or)return or=Se,jt=jt(or),Se=At===""?"."+Le(or,0):At,re(jt)?(ft="",Se!=null&&(ft=Se.replace(Oe,"$&/")+"/"),Ge(jt,De,ft,"",function(Ht){return Ht})):jt!=null&&(Re(jt)&&(jt=ve(jt,ft+(!jt.key||or&&or.key===jt.key?"":(""+jt.key).replace(Oe,"$&/")+"/")+Se)),De.push(jt)),1;if(or=0,At=At===""?".":At+":",re(Se))for(var er=0;er<Se.length;er++){Nt=Se[er];var ct=At+Le(Nt,er);or+=Ge(Nt,De,ft,ct,jt)}else if(ct=E(Se),typeof ct=="function")for(Se=ct.call(Se),er=0;!(Nt=Se.next()).done;)Nt=Nt.value,ct=At+Le(Nt,er++),or+=Ge(Nt,De,ft,ct,jt);else if(Nt==="object")throw De=String(Se),Error("Objects are not valid as a React child (found: "+(De==="[object Object]"?"object with keys {"+Object.keys(Se).join(", ")+"}":De)+"). If you meant to render a collection of children, use an array instead.");return or}function Ne(Se,De,ft){if(Se==null)return Se;var At=[],jt=0;return Ge(Se,At,"","",function(Nt){return De.call(ft,Nt,jt++)}),At}function Ue(Se){if(Se._status===-1){var De=Se._result;De=De(),De.then(function(ft){(Se._status===0||Se._status===-1)&&(Se._status=1,Se._result=ft)},function(ft){(Se._status===0||Se._status===-1)&&(Se._status=2,Se._result=ft)}),Se._status===-1&&(Se._status=0,Se._result=De)}if(Se._status===1)return Se._result.default;throw Se._result}var Qe={current:null},$e={transition:null},Ye={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:$e,ReactCurrentOwner:J};function nt(){throw Error("act(...) is not supported in production builds of React.")}return Rr.Children={map:Ne,forEach:function(Se,De,ft){Ne(Se,function(){De.apply(this,arguments)},ft)},count:function(Se){var De=0;return Ne(Se,function(){De++}),De},toArray:function(Se){return Ne(Se,function(De){return De})||[]},only:function(Se){if(!Re(Se))throw Error("React.Children.only expected to receive a single React element child.");return Se}},Rr.Component=R,Rr.Fragment=r,Rr.Profiler=i,Rr.PureComponent=X,Rr.StrictMode=n,Rr.Suspense=m,Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ye,Rr.act=nt,Rr.cloneElement=function(Se,De,ft){if(Se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Se+".");var At=F({},Se.props),jt=Se.key,Nt=Se.ref,or=Se._owner;if(De!=null){if(De.ref!==void 0&&(Nt=De.ref,or=J.current),De.key!==void 0&&(jt=""+De.key),Se.type&&Se.type.defaultProps)var er=Se.type.defaultProps;for(ct in De)W.call(De,ct)&&!ie.hasOwnProperty(ct)&&(At[ct]=De[ct]===void 0&&er!==void 0?er[ct]:De[ct])}var ct=arguments.length-2;if(ct===1)At.children=ft;else if(1<ct){er=Array(ct);for(var Ht=0;Ht<ct;Ht++)er[Ht]=arguments[Ht+2];At.children=er}return{$$typeof:t,type:Se.type,key:jt,ref:Nt,props:At,_owner:or}},Rr.createContext=function(Se){return Se={$$typeof:u,_currentValue:Se,_currentValue2:Se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Se.Provider={$$typeof:l,_context:Se},Se.Consumer=Se},Rr.createElement=he,Rr.createFactory=function(Se){var De=he.bind(null,Se);return De.type=Se,De},Rr.createRef=function(){return{current:null}},Rr.forwardRef=function(Se){return{$$typeof:s,render:Se}},Rr.isValidElement=Re,Rr.lazy=function(Se){return{$$typeof:w,_payload:{_status:-1,_result:Se},_init:Ue}},Rr.memo=function(Se,De){return{$$typeof:y,type:Se,compare:De===void 0?null:De}},Rr.startTransition=function(Se){var De=$e.transition;$e.transition={};try{Se()}finally{$e.transition=De}},Rr.unstable_act=nt,Rr.useCallback=function(Se,De){return Qe.current.useCallback(Se,De)},Rr.useContext=function(Se){return Qe.current.useContext(Se)},Rr.useDebugValue=function(){},Rr.useDeferredValue=function(Se){return Qe.current.useDeferredValue(Se)},Rr.useEffect=function(Se,De){return Qe.current.useEffect(Se,De)},Rr.useId=function(){return Qe.current.useId()},Rr.useImperativeHandle=function(Se,De,ft){return Qe.current.useImperativeHandle(Se,De,ft)},Rr.useInsertionEffect=function(Se,De){return Qe.current.useInsertionEffect(Se,De)},Rr.useLayoutEffect=function(Se,De){return Qe.current.useLayoutEffect(Se,De)},Rr.useMemo=function(Se,De){return Qe.current.useMemo(Se,De)},Rr.useReducer=function(Se,De,ft){return Qe.current.useReducer(Se,De,ft)},Rr.useRef=function(Se){return Qe.current.useRef(Se)},Rr.useState=function(Se){return Qe.current.useState(Se)},Rr.useSyncExternalStore=function(Se,De,ft){return Qe.current.useSyncExternalStore(Se,De,ft)},Rr.useTransition=function(){return Qe.current.useTransition()},Rr.version="18.3.1",Rr}var KA;function iP(){return KA||(KA=1,Zx.exports=x5()),Zx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YA;function b5(){if(YA)return cg;YA=1;var t=iP(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(s,m,y){var w,S={},E=null,I=null;y!==void 0&&(E=""+y),m.key!==void 0&&(E=""+m.key),m.ref!==void 0&&(I=m.ref);for(w in m)n.call(m,w)&&!l.hasOwnProperty(w)&&(S[w]=m[w]);if(s&&s.defaultProps)for(w in m=s.defaultProps,m)S[w]===void 0&&(S[w]=m[w]);return{$$typeof:e,type:s,key:E,ref:I,props:S,_owner:i.current}}return cg.Fragment=r,cg.jsx=u,cg.jsxs=u,cg}var JA;function w5(){return JA||(JA=1,Gx.exports=b5()),Gx.exports}var We=w5(),it=iP();const He=An(it);var jv={},Xx={exports:{}},No={},Kx={exports:{}},Yx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QA;function S5(){return QA||(QA=1,(function(t){function e($e,Ye){var nt=$e.length;$e.push(Ye);e:for(;0<nt;){var Se=nt-1>>>1,De=$e[Se];if(0<i(De,Ye))$e[Se]=Ye,$e[nt]=De,nt=Se;else break e}}function r($e){return $e.length===0?null:$e[0]}function n($e){if($e.length===0)return null;var Ye=$e[0],nt=$e.pop();if(nt!==Ye){$e[0]=nt;e:for(var Se=0,De=$e.length,ft=De>>>1;Se<ft;){var At=2*(Se+1)-1,jt=$e[At],Nt=At+1,or=$e[Nt];if(0>i(jt,nt))Nt<De&&0>i(or,jt)?($e[Se]=or,$e[Nt]=nt,Se=Nt):($e[Se]=jt,$e[At]=nt,Se=At);else if(Nt<De&&0>i(or,nt))$e[Se]=or,$e[Nt]=nt,Se=Nt;else break e}}return Ye}function i($e,Ye){var nt=$e.sortIndex-Ye.sortIndex;return nt!==0?nt:$e.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var m=[],y=[],w=1,S=null,E=3,I=!1,F=!1,L=!1,R=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K($e){for(var Ye=r(y);Ye!==null;){if(Ye.callback===null)n(y);else if(Ye.startTime<=$e)n(y),Ye.sortIndex=Ye.expirationTime,e(m,Ye);else break;Ye=r(y)}}function re($e){if(L=!1,K($e),!F)if(r(m)!==null)F=!0,Ue(W);else{var Ye=r(y);Ye!==null&&Qe(re,Ye.startTime-$e)}}function W($e,Ye){F=!1,L&&(L=!1,U(he),he=-1),I=!0;var nt=E;try{for(K(Ye),S=r(m);S!==null&&(!(S.expirationTime>Ye)||$e&&!de());){var Se=S.callback;if(typeof Se=="function"){S.callback=null,E=S.priorityLevel;var De=Se(S.expirationTime<=Ye);Ye=t.unstable_now(),typeof De=="function"?S.callback=De:S===r(m)&&n(m),K(Ye)}else n(m);S=r(m)}if(S!==null)var ft=!0;else{var At=r(y);At!==null&&Qe(re,At.startTime-Ye),ft=!1}return ft}finally{S=null,E=nt,I=!1}}var J=!1,ie=null,he=-1,ve=5,Re=-1;function de(){return!(t.unstable_now()-Re<ve)}function Oe(){if(ie!==null){var $e=t.unstable_now();Re=$e;var Ye=!0;try{Ye=ie(!0,$e)}finally{Ye?Le():(J=!1,ie=null)}}else J=!1}var Le;if(typeof X=="function")Le=function(){X(Oe)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,Ne=Ge.port2;Ge.port1.onmessage=Oe,Le=function(){Ne.postMessage(null)}}else Le=function(){R(Oe,0)};function Ue($e){ie=$e,J||(J=!0,Le())}function Qe($e,Ye){he=R(function(){$e(t.unstable_now())},Ye)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($e){$e.callback=null},t.unstable_continueExecution=function(){F||I||(F=!0,Ue(W))},t.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ve=0<$e?Math.floor(1e3/$e):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return r(m)},t.unstable_next=function($e){switch(E){case 1:case 2:case 3:var Ye=3;break;default:Ye=E}var nt=E;E=Ye;try{return $e()}finally{E=nt}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($e,Ye){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var nt=E;E=$e;try{return Ye()}finally{E=nt}},t.unstable_scheduleCallback=function($e,Ye,nt){var Se=t.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?Se+nt:Se):nt=Se,$e){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=nt+De,$e={id:w++,callback:Ye,priorityLevel:$e,startTime:nt,expirationTime:De,sortIndex:-1},nt>Se?($e.sortIndex=nt,e(y,$e),r(m)===null&&$e===r(y)&&(L?(U(he),he=-1):L=!0,Qe(re,nt-Se))):($e.sortIndex=De,e(m,$e),F||I||(F=!0,Ue(W))),$e},t.unstable_shouldYield=de,t.unstable_wrapCallback=function($e){var Ye=E;return function(){var nt=E;E=Ye;try{return $e.apply(this,arguments)}finally{E=nt}}}})(Yx)),Yx}var ek;function T5(){return ek||(ek=1,Kx.exports=S5()),Kx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tk;function P5(){if(tk)return No;tk=1;var t=iP(),e=T5();function r(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function l(f,p){u(f,p),u(f+"Capture",p)}function u(f,p){for(i[f]=p,f=0;f<p.length;f++)n.add(p[f])}var s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},S={};function E(f){return m.call(S,f)?!0:m.call(w,f)?!1:y.test(f)?S[f]=!0:(w[f]=!0,!1)}function I(f,p,b,M){if(b!==null&&b.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return M?!1:b!==null?!b.acceptsBooleans:(f=f.toLowerCase().slice(0,5),f!=="data-"&&f!=="aria-");default:return!1}}function F(f,p,b,M){if(p===null||typeof p>"u"||I(f,p,b,M))return!0;if(M)return!1;if(b!==null)switch(b.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function L(f,p,b,M,j,$,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=M,this.attributeNamespace=j,this.mustUseProperty=b,this.propertyName=f,this.type=p,this.sanitizeURL=$,this.removeEmptyString=ae}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(f){R[f]=new L(f,0,!1,f,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(f){var p=f[0];R[p]=new L(p,1,!1,f[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(f){R[f]=new L(f,2,!1,f.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(f){R[f]=new L(f,2,!1,f,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(f){R[f]=new L(f,3,!1,f.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(f){R[f]=new L(f,3,!0,f,null,!1,!1)}),["capture","download"].forEach(function(f){R[f]=new L(f,4,!1,f,null,!1,!1)}),["cols","rows","size","span"].forEach(function(f){R[f]=new L(f,6,!1,f,null,!1,!1)}),["rowSpan","start"].forEach(function(f){R[f]=new L(f,5,!1,f.toLowerCase(),null,!1,!1)});var U=/[\-:]([a-z])/g;function X(f){return f[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(f){var p=f.replace(U,X);R[p]=new L(p,1,!1,f,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(f){var p=f.replace(U,X);R[p]=new L(p,1,!1,f,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(f){var p=f.replace(U,X);R[p]=new L(p,1,!1,f,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(f){R[f]=new L(f,1,!1,f.toLowerCase(),null,!1,!1)}),R.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(f){R[f]=new L(f,1,!1,f.toLowerCase(),null,!0,!0)});function K(f,p,b,M){var j=R.hasOwnProperty(p)?R[p]:null;(j!==null?j.type!==0:M||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(F(p,b,j,M)&&(b=null),M||j===null?E(p)&&(b===null?f.removeAttribute(p):f.setAttribute(p,""+b)):j.mustUseProperty?f[j.propertyName]=b===null?j.type===3?!1:"":b:(p=j.attributeName,M=j.attributeNamespace,b===null?f.removeAttribute(p):(j=j.type,b=j===3||j===4&&b===!0?"":""+b,M?f.setAttributeNS(M,p,b):f.setAttribute(p,b))))}var re=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),J=Symbol.for("react.portal"),ie=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),Re=Symbol.for("react.provider"),de=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Le=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Ue=Symbol.for("react.lazy"),Qe=Symbol.for("react.offscreen"),$e=Symbol.iterator;function Ye(f){return f===null||typeof f!="object"?null:(f=$e&&f[$e]||f["@@iterator"],typeof f=="function"?f:null)}var nt=Object.assign,Se;function De(f){if(Se===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);Se=p&&p[1]||""}return`
`+Se+f}var ft=!1;function At(f,p){if(!f||ft)return"";ft=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(et){var M=et}Reflect.construct(f,[],p)}else{try{p.call()}catch(et){M=et}f.call(p.prototype)}else{try{throw Error()}catch(et){M=et}f()}}catch(et){if(et&&M&&typeof et.stack=="string"){for(var j=et.stack.split(`
`),$=M.stack.split(`
`),ae=j.length-1,be=$.length-1;1<=ae&&0<=be&&j[ae]!==$[be];)be--;for(;1<=ae&&0<=be;ae--,be--)if(j[ae]!==$[be]){if(ae!==1||be!==1)do if(ae--,be--,0>be||j[ae]!==$[be]){var Ee=`
`+j[ae].replace(" at new "," at ");return f.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",f.displayName)),Ee}while(1<=ae&&0<=be);break}}}finally{ft=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?De(f):""}function jt(f){switch(f.tag){case 5:return De(f.type);case 16:return De("Lazy");case 13:return De("Suspense");case 19:return De("SuspenseList");case 0:case 2:case 15:return f=At(f.type,!1),f;case 11:return f=At(f.type.render,!1),f;case 1:return f=At(f.type,!0),f;default:return""}}function Nt(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case ie:return"Fragment";case J:return"Portal";case ve:return"Profiler";case he:return"StrictMode";case Le:return"Suspense";case Ge:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case de:return(f.displayName||"Context")+".Consumer";case Re:return(f._context.displayName||"Context")+".Provider";case Oe:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case Ne:return p=f.displayName||null,p!==null?p:Nt(f.type)||"Memo";case Ue:p=f._payload,f=f._init;try{return Nt(f(p))}catch{}}return null}function or(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nt(p);case 8:return p===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function er(f){switch(typeof f){case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function ct(f){var p=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Ht(f){var p=ct(f)?"checked":"value",b=Object.getOwnPropertyDescriptor(f.constructor.prototype,p),M=""+f[p];if(!f.hasOwnProperty(p)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var j=b.get,$=b.set;return Object.defineProperty(f,p,{configurable:!0,get:function(){return j.call(this)},set:function(ae){M=""+ae,$.call(this,ae)}}),Object.defineProperty(f,p,{enumerable:b.enumerable}),{getValue:function(){return M},setValue:function(ae){M=""+ae},stopTracking:function(){f._valueTracker=null,delete f[p]}}}}function lr(f){f._valueTracker||(f._valueTracker=Ht(f))}function Je(f){if(!f)return!1;var p=f._valueTracker;if(!p)return!0;var b=p.getValue(),M="";return f&&(M=ct(f)?f.checked?"true":"false":f.value),f=M,f!==b?(p.setValue(f),!0):!1}function rr(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}function Bt(f,p){var b=p.checked;return nt({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??f._wrapperState.initialChecked})}function Er(f,p){var b=p.defaultValue==null?"":p.defaultValue,M=p.checked!=null?p.checked:p.defaultChecked;b=er(p.value!=null?p.value:b),f._wrapperState={initialChecked:M,initialValue:b,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ve(f,p){p=p.checked,p!=null&&K(f,"checked",p,!1)}function Gr(f,p){Ve(f,p);var b=er(p.value),M=p.type;if(b!=null)M==="number"?(b===0&&f.value===""||f.value!=b)&&(f.value=""+b):f.value!==""+b&&(f.value=""+b);else if(M==="submit"||M==="reset"){f.removeAttribute("value");return}p.hasOwnProperty("value")?xr(f,p.type,b):p.hasOwnProperty("defaultValue")&&xr(f,p.type,er(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(f.defaultChecked=!!p.defaultChecked)}function Oi(f,p,b){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var M=p.type;if(!(M!=="submit"&&M!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+f._wrapperState.initialValue,b||p===f.value||(f.value=p),f.defaultValue=p}b=f.name,b!==""&&(f.name=""),f.defaultChecked=!!f._wrapperState.initialChecked,b!==""&&(f.name=b)}function xr(f,p,b){(p!=="number"||rr(f.ownerDocument)!==f)&&(b==null?f.defaultValue=""+f._wrapperState.initialValue:f.defaultValue!==""+b&&(f.defaultValue=""+b))}var jr=Array.isArray;function ri(f,p,b,M){if(f=f.options,p){p={};for(var j=0;j<b.length;j++)p["$"+b[j]]=!0;for(b=0;b<f.length;b++)j=p.hasOwnProperty("$"+f[b].value),f[b].selected!==j&&(f[b].selected=j),j&&M&&(f[b].defaultSelected=!0)}else{for(b=""+er(b),p=null,j=0;j<f.length;j++){if(f[j].value===b){f[j].selected=!0,M&&(f[j].defaultSelected=!0);return}p!==null||f[j].disabled||(p=f[j])}p!==null&&(p.selected=!0)}}function ni(f,p){if(p.dangerouslySetInnerHTML!=null)throw Error(r(91));return nt({},p,{value:void 0,defaultValue:void 0,children:""+f._wrapperState.initialValue})}function Hi(f,p){var b=p.value;if(b==null){if(b=p.children,p=p.defaultValue,b!=null){if(p!=null)throw Error(r(92));if(jr(b)){if(1<b.length)throw Error(r(93));b=b[0]}p=b}p==null&&(p=""),b=p}f._wrapperState={initialValue:er(b)}}function Eo(f,p){var b=er(p.value),M=er(p.defaultValue);b!=null&&(b=""+b,b!==f.value&&(f.value=b),p.defaultValue==null&&f.defaultValue!==b&&(f.defaultValue=b)),M!=null&&(f.defaultValue=""+M)}function xi(f){var p=f.textContent;p===f._wrapperState.initialValue&&p!==""&&p!==null&&(f.value=p)}function Rl(f){switch(f){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qs(f,p){return f==null||f==="http://www.w3.org/1999/xhtml"?Rl(p):f==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":f}var mt,io=(function(f){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,b,M,j){MSApp.execUnsafeLocalFunction(function(){return f(p,b,M,j)})}:f})(function(f,p){if(f.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in f)f.innerHTML=p;else{for(mt=mt||document.createElement("div"),mt.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=mt.firstChild;f.firstChild;)f.removeChild(f.firstChild);for(;p.firstChild;)f.appendChild(p.firstChild)}});function Xn(f,p){if(p){var b=f.firstChild;if(b&&b===f.lastChild&&b.nodeType===3){b.nodeValue=p;return}}f.textContent=p}var Gi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bs=["Webkit","ms","Moz","O"];Object.keys(Gi).forEach(function(f){bs.forEach(function(p){p=p+f.charAt(0).toUpperCase()+f.substring(1),Gi[p]=Gi[f]})});function bt(f,p,b){return p==null||typeof p=="boolean"||p===""?"":b||typeof p!="number"||p===0||Gi.hasOwnProperty(f)&&Gi[f]?(""+p).trim():p+"px"}function yr(f,p){f=f.style;for(var b in p)if(p.hasOwnProperty(b)){var M=b.indexOf("--")===0,j=bt(b,p[b],M);b==="float"&&(b="cssFloat"),M?f.setProperty(b,j):f[b]=j}}var nr=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bi(f,p){if(p){if(nr[f]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(r(137,f));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(r(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(r(61))}if(p.style!=null&&typeof p.style!="object")throw Error(r(62))}}function pa(f,p){if(f.indexOf("-")===-1)return typeof p.is=="string";switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=null;function Oa(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var ao=null,ma=null,Ii=null;function _e(f){if(f=Ku(f)){if(typeof ao!="function")throw Error(r(280));var p=f.stateNode;p&&(p=Yu(p),ao(f.stateNode,f.type,p))}}function ee(f){ma?Ii?Ii.push(f):Ii=[f]:ma=f}function Q(){if(ma){var f=ma,p=Ii;if(Ii=ma=null,_e(f),p)for(f=0;f<p.length;f++)_e(p[f])}}function le(f,p){return f(p)}function me(){}var Ae=!1;function Ce(f,p,b){if(Ae)return f(p,b);Ae=!0;try{return le(f,p,b)}finally{Ae=!1,(ma!==null||Ii!==null)&&(me(),Q())}}function je(f,p){var b=f.stateNode;if(b===null)return null;var M=Yu(b);if(M===null)return null;b=M[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(f=f.type,M=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!M;break e;default:f=!1}if(f)return null;if(b&&typeof b!="function")throw Error(r(231,p,typeof b));return b}var Te=!1;if(s)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){Te=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{Te=!1}function lt(f,p,b,M,j,$,ae,be,Ee){var et=Array.prototype.slice.call(arguments,3);try{p.apply(b,et)}catch(dt){this.onError(dt)}}var Xe=!1,vt=null,$t=!1,Xt=null,Or={onError:function(f){Xe=!0,vt=f}};function fr(f,p,b,M,j,$,ae,be,Ee){Xe=!1,vt=null,lt.apply(Or,arguments)}function Ir(f,p,b,M,j,$,ae,be,Ee){if(fr.apply(this,arguments),Xe){if(Xe){var et=vt;Xe=!1,vt=null}else throw Error(r(198));$t||($t=!0,Xt=et)}}function gr(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function Ln(f){if(f.tag===13){var p=f.memoizedState;if(p===null&&(f=f.alternate,f!==null&&(p=f.memoizedState)),p!==null)return p.dehydrated}return null}function bn(f){if(gr(f)!==f)throw Error(r(188))}function br(f){var p=f.alternate;if(!p){if(p=gr(f),p===null)throw Error(r(188));return p!==f?null:f}for(var b=f,M=p;;){var j=b.return;if(j===null)break;var $=j.alternate;if($===null){if(M=j.return,M!==null){b=M;continue}break}if(j.child===$.child){for($=j.child;$;){if($===b)return bn(j),f;if($===M)return bn(j),p;$=$.sibling}throw Error(r(188))}if(b.return!==M.return)b=j,M=$;else{for(var ae=!1,be=j.child;be;){if(be===b){ae=!0,b=j,M=$;break}if(be===M){ae=!0,M=j,b=$;break}be=be.sibling}if(!ae){for(be=$.child;be;){if(be===b){ae=!0,b=$,M=j;break}if(be===M){ae=!0,M=$,b=j;break}be=be.sibling}if(!ae)throw Error(r(189))}}if(b.alternate!==M)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?f:p}function Vr(f){return f=br(f),f!==null?hn(f):null}function hn(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=hn(f);if(p!==null)return p;f=f.sibling}return null}var Kn=e.unstable_scheduleCallback,ii=e.unstable_cancelCallback,Di=e.unstable_shouldYield,Ll=e.unstable_requestPaint,cr=e.unstable_now,$h=e.unstable_getCurrentPriorityLevel,Iu=e.unstable_ImmediatePriority,Zi=e.unstable_UserBlockingPriority,wi=e.unstable_NormalPriority,Pm=e.unstable_LowPriority,ga=e.unstable_IdlePriority,Si=null,zi=null;function el(f){if(zi&&typeof zi.onCommitFiberRoot=="function")try{zi.onCommitFiberRoot(Si,f,void 0,(f.current.flags&128)===128)}catch{}}var Hr=Math.clz32?Math.clz32:Fn,Du=Math.log,oo=Math.LN2;function Fn(f){return f>>>=0,f===0?32:31-(Du(f)/oo|0)|0}var tl=64,Xi=4194304;function rl(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Ki(f,p){var b=f.pendingLanes;if(b===0)return 0;var M=0,j=f.suspendedLanes,$=f.pingedLanes,ae=b&268435455;if(ae!==0){var be=ae&~j;be!==0?M=rl(be):($&=ae,$!==0&&(M=rl($)))}else ae=b&~j,ae!==0?M=rl(ae):$!==0&&(M=rl($));if(M===0)return 0;if(p!==0&&p!==M&&(p&j)===0&&(j=M&-M,$=p&-p,j>=$||j===16&&($&4194240)!==0))return p;if((M&4)!==0&&(M|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=M;0<p;)b=31-Hr(p),j=1<<b,M|=f[b],p&=~j;return M}function Am(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lc(f,p){for(var b=f.suspendedLanes,M=f.pingedLanes,j=f.expirationTimes,$=f.pendingLanes;0<$;){var ae=31-Hr($),be=1<<ae,Ee=j[ae];Ee===-1?((be&b)===0||(be&M)!==0)&&(j[ae]=Am(be,p)):Ee<=p&&(f.expiredLanes|=be),$&=~be}}function Wo(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Ho(){var f=tl;return tl<<=1,(tl&4194240)===0&&(tl=64),f}function Dr(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function nl(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Hr(p),f[p]=b}function Vh(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var M=f.eventTimes;for(f=f.expirationTimes;0<b;){var j=31-Hr(b),$=1<<j;p[j]=0,M[j]=-1,f[j]=-1,b&=~$}}function ws(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var M=31-Hr(b),j=1<<M;j&p|f[M]&p&&(f[M]|=p),b&=~j}}var qr=0;function zu(f){return f&=-f,1<f?4<f?(f&268435455)!==0?16:536870912:4:1}var Fl,jl,il,qh,kd,Fc=!1,jc=[],Yi=null,Ia=null,jn=null,ai=new Map,Ss=new Map,so=[],Bc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uh(f,p){switch(f){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Ia=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":ai.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(p.pointerId)}}function Mo(f,p,b,M,j,$){return f===null||f.nativeEvent!==$?(f={blockedOn:p,domEventName:b,eventSystemFlags:M,nativeEvent:$,targetContainers:[j]},p!==null&&(p=Ku(p),p!==null&&jl(p)),f):(f.eventSystemFlags|=M,p=f.targetContainers,j!==null&&p.indexOf(j)===-1&&p.push(j),f)}function km(f,p,b,M,j){switch(p){case"focusin":return Yi=Mo(Yi,f,p,b,M,j),!0;case"dragenter":return Ia=Mo(Ia,f,p,b,M,j),!0;case"mouseover":return jn=Mo(jn,f,p,b,M,j),!0;case"pointerover":var $=j.pointerId;return ai.set($,Mo(ai.get($)||null,f,p,b,M,j)),!0;case"gotpointercapture":return $=j.pointerId,Ss.set($,Mo(Ss.get($)||null,f,p,b,M,j)),!0}return!1}function Wh(f){var p=is(f.target);if(p!==null){var b=gr(p);if(b!==null){if(p=b.tag,p===13){if(p=Ln(b),p!==null){f.blockedOn=p,kd(f.priority,function(){il(b)});return}}else if(p===3&&b.stateNode.current.memoizedState.isDehydrated){f.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}f.blockedOn=null}function Ru(f){if(f.blockedOn!==null)return!1;for(var p=f.targetContainers;0<p.length;){var b=Lu(f.domEventName,f.eventSystemFlags,p[0],f.nativeEvent);if(b===null){b=f.nativeEvent;var M=new b.constructor(b.type,b);ur=M,b.target.dispatchEvent(M),ur=null}else return p=Ku(b),p!==null&&jl(p),f.blockedOn=b,!1;p.shift()}return!0}function Ed(f,p,b){Ru(f)&&b.delete(p)}function Em(){Fc=!1,Yi!==null&&Ru(Yi)&&(Yi=null),Ia!==null&&Ru(Ia)&&(Ia=null),jn!==null&&Ru(jn)&&(jn=null),ai.forEach(Ed),Ss.forEach(Ed)}function Bl(f,p){f.blockedOn===p&&(f.blockedOn=null,Fc||(Fc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Em)))}function Go(f){function p(j){return Bl(j,f)}if(0<jc.length){Bl(jc[0],f);for(var b=1;b<jc.length;b++){var M=jc[b];M.blockedOn===f&&(M.blockedOn=null)}}for(Yi!==null&&Bl(Yi,f),Ia!==null&&Bl(Ia,f),jn!==null&&Bl(jn,f),ai.forEach(p),Ss.forEach(p),b=0;b<so.length;b++)M=so[b],M.blockedOn===f&&(M.blockedOn=null);for(;0<so.length&&(b=so[0],b.blockedOn===null);)Wh(b),b.blockedOn===null&&so.shift()}var Ts=re.ReactCurrentBatchConfig,al=!0;function Hh(f,p,b,M){var j=qr,$=Ts.transition;Ts.transition=null;try{qr=1,Da(f,p,b,M)}finally{qr=j,Ts.transition=$}}function Gh(f,p,b,M){var j=qr,$=Ts.transition;Ts.transition=null;try{qr=4,Da(f,p,b,M)}finally{qr=j,Ts.transition=$}}function Da(f,p,b,M){if(al){var j=Lu(f,p,b,M);if(j===null)Xu(f,p,M,Nc,b),Uh(f,M);else if(km(j,f,p,b,M))M.stopPropagation();else if(Uh(f,M),p&4&&-1<Bc.indexOf(f)){for(;j!==null;){var $=Ku(j);if($!==null&&Fl($),$=Lu(f,p,b,M),$===null&&Xu(f,p,M,Nc,b),$===j)break;j=$}j!==null&&M.stopPropagation()}else Xu(f,p,M,null,b)}}var Nc=null;function Lu(f,p,b,M){if(Nc=null,f=Oa(M),f=is(f),f!==null)if(p=gr(f),p===null)f=null;else if(b=p.tag,b===13){if(f=Ln(p),f!==null)return f;f=null}else if(b===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;f=null}else p!==f&&(f=null);return Nc=f,null}function Ps(f){switch(f){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($h()){case Iu:return 1;case Zi:return 4;case wi:case Pm:return 16;case ga:return 536870912;default:return 16}default:return 16}}var Ri=null,zr=null,ol=null;function Md(){if(ol)return ol;var f,p=zr,b=p.length,M,j="value"in Ri?Ri.value:Ri.textContent,$=j.length;for(f=0;f<b&&p[f]===j[f];f++);var ae=b-f;for(M=1;M<=ae&&p[b-M]===j[$-M];M++);return ol=j.slice(f,1<M?1-M:void 0)}function Zo(f){var p=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&p===13&&(f=13)):f=p,f===10&&(f=13),32<=f||f===13?f:0}function $c(){return!0}function Zh(){return!1}function ya(f){function p(b,M,j,$,ae){this._reactName=b,this._targetInst=j,this.type=M,this.nativeEvent=$,this.target=ae,this.currentTarget=null;for(var be in f)f.hasOwnProperty(be)&&(b=f[be],this[be]=b?b($):$[be]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?$c:Zh,this.isPropagationStopped=Zh,this}return nt(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),p}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fu=ya(sl),Nl=nt({},sl,{view:0,detail:0}),Cd=ya(Nl),Vc,qc,lo,ju=nt({},Nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nu,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==lo&&(lo&&f.type==="mousemove"?(Vc=f.screenX-lo.screenX,qc=f.screenY-lo.screenY):qc=Vc=0,lo=f),Vc)},movementY:function(f){return"movementY"in f?f.movementY:qc}}),Od=ya(ju),Id=nt({},ju,{dataTransfer:0}),Bu=ya(Id),Mm=nt({},Nl,{relatedTarget:0}),$l=ya(Mm),Cm=nt({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),Om=ya(Cm),Dd=nt({},sl,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),zd=ya(Dd),Rd=nt({},sl,{data:0}),Uc=ya(Rd),Ld={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xh(f){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(f):(f=Xo[f])?!!p[f]:!1}function Nu(){return Xh}var Kh=nt({},Nl,{key:function(f){if(f.key){var p=Ld[f.key]||f.key;if(p!=="Unidentified")return p}return f.type==="keypress"?(f=Zo(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Wc[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nu,charCode:function(f){return f.type==="keypress"?Zo(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?Zo(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Hc=ya(Kh),Yh=nt({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),As=ya(Yh),Jh=nt({},Nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nu}),Im=ya(Jh),On=nt({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dm=ya(On),Tr=nt({},ju,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),Gc=ya(Tr),rn=[9,13,27,32],Ur=s&&"CompositionEvent"in window,uo=null;s&&"documentMode"in document&&(uo=document.documentMode);var $u=s&&"TextEvent"in window&&!uo,Vl=s&&(!Ur||uo&&8<uo&&11>=uo),Zc=" ",ks=!1;function ll(f,p){switch(f){case"keyup":return rn.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function va(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var Es=!1;function Qh(f,p){switch(f){case"compositionend":return va(p);case"keypress":return p.which!==32?null:(ks=!0,Zc);case"textInput":return f=p.data,f===Zc&&ks?null:f;default:return null}}function ef(f,p){if(Es)return f==="compositionend"||!Ur&&ll(f,p)?(f=Md(),ol=zr=Ri=null,Es=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Vl&&p.locale!=="ko"?null:p.data;default:return null}}var ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ql(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p==="input"?!!ul[f.type]:p==="textarea"}function Ul(f,p,b,M){ee(M),p=Kl(p,"onChange"),0<p.length&&(b=new Fu("onChange","change",null,b,M),f.push({event:b,listeners:p}))}var Co=null,Ko=null;function Xc(f){eh(f,0)}function Yo(f){var p=po(f);if(Je(p))return f}function Wl(f,p){if(f==="change")return p}var tf=!1;if(s){var Vu;if(s){var Mr="oninput"in document;if(!Mr){var qu=document.createElement("div");qu.setAttribute("oninput","return;"),Mr=typeof qu.oninput=="function"}Vu=Mr}else Vu=!1;tf=Vu&&(!document.documentMode||9<document.documentMode)}function Fd(){Co&&(Co.detachEvent("onpropertychange",rf),Ko=Co=null)}function rf(f){if(f.propertyName==="value"&&Yo(Ko)){var p=[];Ul(p,Ko,f,Oa(f)),Ce(Xc,p)}}function Hl(f,p,b){f==="focusin"?(Fd(),Co=p,Ko=b,Co.attachEvent("onpropertychange",rf)):f==="focusout"&&Fd()}function jd(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Yo(Ko)}function Kc(f,p){if(f==="click")return Yo(p)}function Bd(f,p){if(f==="input"||f==="change")return Yo(p)}function Nd(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Ji=typeof Object.is=="function"?Object.is:Nd;function Ms(f,p){if(Ji(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),M=Object.keys(p);if(b.length!==M.length)return!1;for(M=0;M<b.length;M++){var j=b[M];if(!m.call(p,j)||!Ji(f[j],p[j]))return!1}return!0}function cl(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function hl(f,p){var b=cl(f);f=0;for(var M;b;){if(b.nodeType===3){if(M=f+b.textContent.length,f<=p&&M>=p)return{node:b,offset:p-f};f=M}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=cl(b)}}function fl(f,p){return f&&p?f===p?!0:f&&f.nodeType===3?!1:p&&p.nodeType===3?fl(f,p.parentNode):"contains"in f?f.contains(p):f.compareDocumentPosition?!!(f.compareDocumentPosition(p)&16):!1:!1}function Yc(){for(var f=window,p=rr();p instanceof f.HTMLIFrameElement;){try{var b=typeof p.contentWindow.location.href=="string"}catch{b=!1}if(b)f=p.contentWindow;else break;p=rr(f.document)}return p}function Cs(f){var p=f&&f.nodeName&&f.nodeName.toLowerCase();return p&&(p==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||p==="textarea"||f.contentEditable==="true")}function Uu(f){var p=Yc(),b=f.focusedElem,M=f.selectionRange;if(p!==b&&b&&b.ownerDocument&&fl(b.ownerDocument.documentElement,b)){if(M!==null&&Cs(b)){if(p=M.start,f=M.end,f===void 0&&(f=p),"selectionStart"in b)b.selectionStart=p,b.selectionEnd=Math.min(f,b.value.length);else if(f=(p=b.ownerDocument||document)&&p.defaultView||window,f.getSelection){f=f.getSelection();var j=b.textContent.length,$=Math.min(M.start,j);M=M.end===void 0?$:Math.min(M.end,j),!f.extend&&$>M&&(j=M,M=$,$=j),j=hl(b,$);var ae=hl(b,M);j&&ae&&(f.rangeCount!==1||f.anchorNode!==j.node||f.anchorOffset!==j.offset||f.focusNode!==ae.node||f.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(j.node,j.offset),f.removeAllRanges(),$>M?(f.addRange(p),f.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),f.addRange(p)))}}for(p=[],f=b;f=f.parentNode;)f.nodeType===1&&p.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<p.length;b++)f=p[b],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var Jc=s&&"documentMode"in document&&11>=document.documentMode,Jo=null,Wu=null,Hu=null,Qc=!1;function Gu(f,p,b){var M=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Qc||Jo==null||Jo!==rr(M)||(M=Jo,"selectionStart"in M&&Cs(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Hu&&Ms(Hu,M)||(Hu=M,M=Kl(Wu,"onSelect"),0<M.length&&(p=new Fu("onSelect","select",null,p,b),f.push({event:p,listeners:M}),p.target=Jo)))}function Gl(f,p){var b={};return b[f.toLowerCase()]=p.toLowerCase(),b["Webkit"+f]="webkit"+p,b["Moz"+f]="moz"+p,b}var Oo={animationend:Gl("Animation","AnimationEnd"),animationiteration:Gl("Animation","AnimationIteration"),animationstart:Gl("Animation","AnimationStart"),transitionend:Gl("Transition","TransitionEnd")},dl={},di={};s&&(di=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Io(f){if(dl[f])return dl[f];if(!Oo[f])return f;var p=Oo[f],b;for(b in p)if(p.hasOwnProperty(b)&&b in di)return dl[f]=p[b];return f}var nf=Io("animationend"),af=Io("animationiteration"),kn=Io("animationstart"),za=Io("transitionend"),Qi=new Map,Zl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(f,p){Qi.set(f,p),l(p,[f])}for(var Xl=0;Xl<Zl.length;Xl++){var Os=Zl[Xl],Qo=Os.toLowerCase(),of=Os[0].toUpperCase()+Os.slice(1);Do(Qo,"on"+of)}Do(nf,"onAnimationEnd"),Do(af,"onAnimationIteration"),Do(kn,"onAnimationStart"),Do("dblclick","onDoubleClick"),Do("focusin","onFocus"),Do("focusout","onBlur"),Do(za,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Zu(f,p,b){var M=f.type||"unknown-event";f.currentTarget=b,Ir(M,p,void 0,f),f.currentTarget=null}function eh(f,p){p=(p&4)!==0;for(var b=0;b<f.length;b++){var M=f[b],j=M.event;M=M.listeners;e:{var $=void 0;if(p)for(var ae=M.length-1;0<=ae;ae--){var be=M[ae],Ee=be.instance,et=be.currentTarget;if(be=be.listener,Ee!==$&&j.isPropagationStopped())break e;Zu(j,be,et),$=Ee}else for(ae=0;ae<M.length;ae++){if(be=M[ae],Ee=be.instance,et=be.currentTarget,be=be.listener,Ee!==$&&j.isPropagationStopped())break e;Zu(j,be,et),$=Ee}}}if($t)throw f=Xt,$t=!1,Xt=null,f}function nn(f,p){var b=p[Pr];b===void 0&&(b=p[Pr]=new Set);var M=f+"__bubble";b.has(M)||(th(p,f,2,!1),b.add(M))}function es(f,p,b){var M=0;p&&(M|=4),th(b,f,M,p)}var pl="_reactListening"+Math.random().toString(36).slice(2);function ts(f){if(!f[pl]){f[pl]=!0,n.forEach(function(b){b!=="selectionchange"&&(sf.has(b)||es(b,!1,f),es(b,!0,f))});var p=f.nodeType===9?f:f.ownerDocument;p===null||p[pl]||(p[pl]=!0,es("selectionchange",!1,p))}}function th(f,p,b,M){switch(Ps(p)){case 1:var j=Hh;break;case 4:j=Gh;break;default:j=Da}b=j.bind(null,p,b,f),j=void 0,!Te||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(j=!0),M?j!==void 0?f.addEventListener(p,b,{capture:!0,passive:j}):f.addEventListener(p,b,!0):j!==void 0?f.addEventListener(p,b,{passive:j}):f.addEventListener(p,b,!1)}function Xu(f,p,b,M,j){var $=M;if((p&1)===0&&(p&2)===0&&M!==null)e:for(;;){if(M===null)return;var ae=M.tag;if(ae===3||ae===4){var be=M.stateNode.containerInfo;if(be===j||be.nodeType===8&&be.parentNode===j)break;if(ae===4)for(ae=M.return;ae!==null;){var Ee=ae.tag;if((Ee===3||Ee===4)&&(Ee=ae.stateNode.containerInfo,Ee===j||Ee.nodeType===8&&Ee.parentNode===j))return;ae=ae.return}for(;be!==null;){if(ae=is(be),ae===null)return;if(Ee=ae.tag,Ee===5||Ee===6){M=$=ae;continue e}be=be.parentNode}}M=M.return}Ce(function(){var et=$,dt=Oa(b),gt=[];e:{var ht=Qi.get(f);if(ht!==void 0){var Et=Fu,Vt=f;switch(f){case"keypress":if(Zo(b)===0)break e;case"keydown":case"keyup":Et=Hc;break;case"focusin":Vt="focus",Et=$l;break;case"focusout":Vt="blur",Et=$l;break;case"beforeblur":case"afterblur":Et=$l;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Et=Od;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Et=Bu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Et=Im;break;case nf:case af:case kn:Et=Om;break;case za:Et=Dm;break;case"scroll":Et=Cd;break;case"wheel":Et=Gc;break;case"copy":case"cut":case"paste":Et=zd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Et=As}var Kt=(p&4)!==0,Un=!Kt&&f==="scroll",Ze=Kt?ht!==null?ht+"Capture":null:ht;Kt=[];for(var Ie=et,Ke;Ie!==null;){Ke=Ie;var St=Ke.stateNode;if(Ke.tag===5&&St!==null&&(Ke=St,Ze!==null&&(St=je(Ie,Ze),St!=null&&Kt.push(ml(Ie,St,Ke)))),Un)break;Ie=Ie.return}0<Kt.length&&(ht=new Et(ht,Vt,null,b,dt),gt.push({event:ht,listeners:Kt}))}}if((p&7)===0){e:{if(ht=f==="mouseover"||f==="pointerover",Et=f==="mouseout"||f==="pointerout",ht&&b!==ur&&(Vt=b.relatedTarget||b.fromElement)&&(is(Vt)||Vt[fo]))break e;if((Et||ht)&&(ht=dt.window===dt?dt:(ht=dt.ownerDocument)?ht.defaultView||ht.parentWindow:window,Et?(Vt=b.relatedTarget||b.toElement,Et=et,Vt=Vt?is(Vt):null,Vt!==null&&(Un=gr(Vt),Vt!==Un||Vt.tag!==5&&Vt.tag!==6)&&(Vt=null)):(Et=null,Vt=et),Et!==Vt)){if(Kt=Od,St="onMouseLeave",Ze="onMouseEnter",Ie="mouse",(f==="pointerout"||f==="pointerover")&&(Kt=As,St="onPointerLeave",Ze="onPointerEnter",Ie="pointer"),Un=Et==null?ht:po(Et),Ke=Vt==null?ht:po(Vt),ht=new Kt(St,Ie+"leave",Et,b,dt),ht.target=Un,ht.relatedTarget=Ke,St=null,is(dt)===et&&(Kt=new Kt(Ze,Ie+"enter",Vt,b,dt),Kt.target=Ke,Kt.relatedTarget=Un,St=Kt),Un=St,Et&&Vt)t:{for(Kt=Et,Ze=Vt,Ie=0,Ke=Kt;Ke;Ke=rs(Ke))Ie++;for(Ke=0,St=Ze;St;St=rs(St))Ke++;for(;0<Ie-Ke;)Kt=rs(Kt),Ie--;for(;0<Ke-Ie;)Ze=rs(Ze),Ke--;for(;Ie--;){if(Kt===Ze||Ze!==null&&Kt===Ze.alternate)break t;Kt=rs(Kt),Ze=rs(Ze)}Kt=null}else Kt=null;Et!==null&&Yl(gt,ht,Et,Kt,!1),Vt!==null&&Un!==null&&Yl(gt,Un,Vt,Kt,!0)}}e:{if(ht=et?po(et):window,Et=ht.nodeName&&ht.nodeName.toLowerCase(),Et==="select"||Et==="input"&&ht.type==="file")var Jt=Wl;else if(ql(ht))if(tf)Jt=Bd;else{Jt=jd;var sr=Hl}else(Et=ht.nodeName)&&Et.toLowerCase()==="input"&&(ht.type==="checkbox"||ht.type==="radio")&&(Jt=Kc);if(Jt&&(Jt=Jt(f,et))){Ul(gt,Jt,b,dt);break e}sr&&sr(f,ht,et),f==="focusout"&&(sr=ht._wrapperState)&&sr.controlled&&ht.type==="number"&&xr(ht,"number",ht.value)}switch(sr=et?po(et):window,f){case"focusin":(ql(sr)||sr.contentEditable==="true")&&(Jo=sr,Wu=et,Hu=null);break;case"focusout":Hu=Wu=Jo=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,Gu(gt,b,dt);break;case"selectionchange":if(Jc)break;case"keydown":case"keyup":Gu(gt,b,dt)}var Qt;if(Ur)e:{switch(f){case"compositionstart":var pr="onCompositionStart";break e;case"compositionend":pr="onCompositionEnd";break e;case"compositionupdate":pr="onCompositionUpdate";break e}pr=void 0}else Es?ll(f,b)&&(pr="onCompositionEnd"):f==="keydown"&&b.keyCode===229&&(pr="onCompositionStart");pr&&(Vl&&b.locale!=="ko"&&(Es||pr!=="onCompositionStart"?pr==="onCompositionEnd"&&Es&&(Qt=Md()):(Ri=dt,zr="value"in Ri?Ri.value:Ri.textContent,Es=!0)),sr=Kl(et,pr),0<sr.length&&(pr=new Uc(pr,f,null,b,dt),gt.push({event:pr,listeners:sr}),Qt?pr.data=Qt:(Qt=va(b),Qt!==null&&(pr.data=Qt)))),(Qt=$u?Qh(f,b):ef(f,b))&&(et=Kl(et,"onBeforeInput"),0<et.length&&(dt=new Uc("onBeforeInput","beforeinput",null,b,dt),gt.push({event:dt,listeners:et}),dt.data=Qt))}eh(gt,p)})}function ml(f,p,b){return{instance:f,listener:p,currentTarget:b}}function Kl(f,p){for(var b=p+"Capture",M=[];f!==null;){var j=f,$=j.stateNode;j.tag===5&&$!==null&&(j=$,$=je(f,b),$!=null&&M.unshift(ml(f,$,j)),$=je(f,p),$!=null&&M.push(ml(f,$,j))),f=f.return}return M}function rs(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5);return f||null}function Yl(f,p,b,M,j){for(var $=p._reactName,ae=[];b!==null&&b!==M;){var be=b,Ee=be.alternate,et=be.stateNode;if(Ee!==null&&Ee===M)break;be.tag===5&&et!==null&&(be=et,j?(Ee=je(b,$),Ee!=null&&ae.unshift(ml(b,Ee,be))):j||(Ee=je(b,$),Ee!=null&&ae.push(ml(b,Ee,be)))),b=b.return}ae.length!==0&&f.push({event:p,listeners:ae})}var $d=/\r\n?/g,Ra=/\u0000|\uFFFD/g;function co(f){return(typeof f=="string"?f:""+f).replace($d,`
`).replace(Ra,"")}function Jl(f,p,b){if(p=co(p),co(f)!==p&&b)throw Error(r(425))}function ea(){}var ns=null,lf=null;function uf(f,p){return f==="textarea"||f==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var rh=typeof setTimeout=="function"?setTimeout:void 0,Vd=typeof clearTimeout=="function"?clearTimeout:void 0,nh=typeof Promise=="function"?Promise:void 0,Ql=typeof queueMicrotask=="function"?queueMicrotask:typeof nh<"u"?function(f){return nh.resolve(null).then(f).catch(La)}:rh;function La(f){setTimeout(function(){throw f})}function Ot(f,p){var b=p,M=0;do{var j=b.nextSibling;if(f.removeChild(b),j&&j.nodeType===8)if(b=j.data,b==="/$"){if(M===0){f.removeChild(j),Go(p);return}M--}else b!=="$"&&b!=="$?"&&b!=="$!"||M++;b=j}while(b);Go(p)}function ho(f){for(;f!=null;f=f.nextSibling){var p=f.nodeType;if(p===1||p===3)break;if(p===8){if(p=f.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return f}function ih(f){f=f.previousSibling;for(var p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="$"||b==="$!"||b==="$?"){if(p===0)return f;p--}else b==="/$"&&p++}f=f.previousSibling}return null}var gl=Math.random().toString(36).slice(2),Li="__reactFiber$"+gl,zo="__reactProps$"+gl,fo="__reactContainer$"+gl,Pr="__reactEvents$"+gl,cf="__reactListeners$"+gl,zm="__reactHandles$"+gl;function is(f){var p=f[Li];if(p)return p;for(var b=f.parentNode;b;){if(p=b[fo]||b[Li]){if(b=p.alternate,p.child!==null||b!==null&&b.child!==null)for(f=ih(f);f!==null;){if(b=f[Li])return b;f=ih(f)}return p}f=b,b=f.parentNode}return null}function Ku(f){return f=f[Li]||f[fo],!f||f.tag!==5&&f.tag!==6&&f.tag!==13&&f.tag!==3?null:f}function po(f){if(f.tag===5||f.tag===6)return f.stateNode;throw Error(r(33))}function Yu(f){return f[zo]||null}var Ju=[],yl=-1;function Ds(f){return{current:f}}function an(f){0>yl||(f.current=Ju[yl],Ju[yl]=null,yl--)}function fn(f,p){yl++,Ju[yl]=f.current,f.current=p}var zs={},Kr=Ds(zs),kr=Ds(!1),Fa=zs;function as(f,p){var b=f.type.contextTypes;if(!b)return zs;var M=f.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===p)return M.__reactInternalMemoizedMaskedChildContext;var j={},$;for($ in b)j[$]=p[$];return M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=j),j}function pi(f){return f=f.childContextTypes,f!=null}function Qu(){an(kr),an(Kr)}function eu(f,p,b){if(Kr.current!==zs)throw Error(r(168));fn(Kr,p),fn(kr,b)}function tu(f,p,b){var M=f.stateNode;if(p=p.childContextTypes,typeof M.getChildContext!="function")return b;M=M.getChildContext();for(var j in M)if(!(j in p))throw Error(r(108,or(f)||"Unknown",j));return nt({},b,M)}function _a(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||zs,Fa=Kr.current,fn(Kr,f),fn(kr,kr.current),!0}function ru(f,p,b){var M=f.stateNode;if(!M)throw Error(r(169));b?(f=tu(f,p,Fa),M.__reactInternalMemoizedMergedChildContext=f,an(kr),an(Kr),fn(Kr,f)):an(kr),fn(kr,b)}var It=null,Yt=!1,nu=!1;function ec(f){It===null?It=[f]:It.push(f)}function hf(f){Yt=!0,ec(f)}function P(){if(!nu&&It!==null){nu=!0;var f=0,p=qr;try{var b=It;for(qr=1;f<b.length;f++){var M=b[f];do M=M(!0);while(M!==null)}It=null,Yt=!1}catch(j){throw It!==null&&(It=It.slice(f+1)),Kn(Iu,P),j}finally{qr=p,nu=!1}}return null}var a=[],d=0,v=null,_=0,T=[],O=0,z=null,B=1,V="";function G(f,p){a[d++]=_,a[d++]=v,v=f,_=p}function Z(f,p,b){T[O++]=B,T[O++]=V,T[O++]=z,z=f;var M=B;f=V;var j=32-Hr(M)-1;M&=~(1<<j),b+=1;var $=32-Hr(p)+j;if(30<$){var ae=j-j%5;$=(M&(1<<ae)-1).toString(32),M>>=ae,j-=ae,B=1<<32-Hr(p)+j|b<<j|M,V=$+f}else B=1<<$|b<<j|M,V=f}function ne(f){f.return!==null&&(G(f,1),Z(f,1,0))}function se(f){for(;f===v;)v=a[--d],a[d]=null,_=a[--d],a[d]=null;for(;f===z;)z=T[--O],T[O]=null,V=T[--O],T[O]=null,B=T[--O],T[O]=null}var ce=null,fe=null,ge=!1,xe=null;function Pe(f,p){var b=Ua(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function pe(f,p){switch(f.tag){case 5:var b=f.type;return p=p.nodeType!==1||b.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(f.stateNode=p,ce=f,fe=ho(p.firstChild),!0):!1;case 6:return p=f.pendingProps===""||p.nodeType!==3?null:p,p!==null?(f.stateNode=p,ce=f,fe=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(b=z!==null?{id:B,overflow:V}:null,f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Ua(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,ce=f,fe=null,!0):!1;default:return!1}}function Me(f){return(f.mode&1)!==0&&(f.flags&128)===0}function ze(f){if(ge){var p=fe;if(p){var b=p;if(!pe(f,p)){if(Me(f))throw Error(r(418));p=ho(b.nextSibling);var M=ce;p&&pe(f,p)?Pe(M,b):(f.flags=f.flags&-4097|2,ge=!1,ce=f)}}else{if(Me(f))throw Error(r(418));f.flags=f.flags&-4097|2,ge=!1,ce=f}}}function qe(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;ce=f}function ot(f){if(f!==ce)return!1;if(!ge)return qe(f),ge=!0,!1;var p;if((p=f.tag!==3)&&!(p=f.tag!==5)&&(p=f.type,p=p!=="head"&&p!=="body"&&!uf(f.type,f.memoizedProps)),p&&(p=fe)){if(Me(f))throw pt(),Error(r(418));for(;p;)Pe(f,p),p=ho(p.nextSibling)}if(qe(f),f.tag===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));e:{for(f=f.nextSibling,p=0;f;){if(f.nodeType===8){var b=f.data;if(b==="/$"){if(p===0){fe=ho(f.nextSibling);break e}p--}else b!=="$"&&b!=="$!"&&b!=="$?"||p++}f=f.nextSibling}fe=null}}else fe=ce?ho(f.stateNode.nextSibling):null;return!0}function pt(){for(var f=fe;f;)f=ho(f.nextSibling)}function _t(){fe=ce=null,ge=!1}function kt(f){xe===null?xe=[f]:xe.push(f)}var xt=re.ReactCurrentBatchConfig;function yt(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(r(309));var M=b.stateNode}if(!M)throw Error(r(147,f));var j=M,$=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===$?p.ref:(p=function(ae){var be=j.refs;ae===null?delete be[$]:be[$]=ae},p._stringRef=$,p)}if(typeof f!="string")throw Error(r(284));if(!b._owner)throw Error(r(290,f))}return f}function Rt(f,p){throw f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function ar(f){var p=f._init;return p(f._payload)}function wt(f){function p(Ze,Ie){if(f){var Ke=Ze.deletions;Ke===null?(Ze.deletions=[Ie],Ze.flags|=16):Ke.push(Ie)}}function b(Ze,Ie){if(!f)return null;for(;Ie!==null;)p(Ze,Ie),Ie=Ie.sibling;return null}function M(Ze,Ie){for(Ze=new Map;Ie!==null;)Ie.key!==null?Ze.set(Ie.key,Ie):Ze.set(Ie.index,Ie),Ie=Ie.sibling;return Ze}function j(Ze,Ie){return Ze=mu(Ze,Ie),Ze.index=0,Ze.sibling=null,Ze}function $(Ze,Ie,Ke){return Ze.index=Ke,f?(Ke=Ze.alternate,Ke!==null?(Ke=Ke.index,Ke<Ie?(Ze.flags|=2,Ie):Ke):(Ze.flags|=2,Ie)):(Ze.flags|=1048576,Ie)}function ae(Ze){return f&&Ze.alternate===null&&(Ze.flags|=2),Ze}function be(Ze,Ie,Ke,St){return Ie===null||Ie.tag!==6?(Ie=jo(Ke,Ze.mode,St),Ie.return=Ze,Ie):(Ie=j(Ie,Ke),Ie.return=Ze,Ie)}function Ee(Ze,Ie,Ke,St){var Jt=Ke.type;return Jt===ie?dt(Ze,Ie,Ke.props.children,St,Ke.key):Ie!==null&&(Ie.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ue&&ar(Jt)===Ie.type)?(St=j(Ie,Ke.props),St.ref=yt(Ze,Ie,Ke),St.return=Ze,St):(St=Bf(Ke.type,Ke.key,Ke.props,null,Ze.mode,St),St.ref=yt(Ze,Ie,Ke),St.return=Ze,St)}function et(Ze,Ie,Ke,St){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ke.containerInfo||Ie.stateNode.implementation!==Ke.implementation?(Ie=Bs(Ke,Ze.mode,St),Ie.return=Ze,Ie):(Ie=j(Ie,Ke.children||[]),Ie.return=Ze,Ie)}function dt(Ze,Ie,Ke,St,Jt){return Ie===null||Ie.tag!==7?(Ie=gu(Ke,Ze.mode,St,Jt),Ie.return=Ze,Ie):(Ie=j(Ie,Ke),Ie.return=Ze,Ie)}function gt(Ze,Ie,Ke){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=jo(""+Ie,Ze.mode,Ke),Ie.return=Ze,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case W:return Ke=Bf(Ie.type,Ie.key,Ie.props,null,Ze.mode,Ke),Ke.ref=yt(Ze,null,Ie),Ke.return=Ze,Ke;case J:return Ie=Bs(Ie,Ze.mode,Ke),Ie.return=Ze,Ie;case Ue:var St=Ie._init;return gt(Ze,St(Ie._payload),Ke)}if(jr(Ie)||Ye(Ie))return Ie=gu(Ie,Ze.mode,Ke,null),Ie.return=Ze,Ie;Rt(Ze,Ie)}return null}function ht(Ze,Ie,Ke,St){var Jt=Ie!==null?Ie.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return Jt!==null?null:be(Ze,Ie,""+Ke,St);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case W:return Ke.key===Jt?Ee(Ze,Ie,Ke,St):null;case J:return Ke.key===Jt?et(Ze,Ie,Ke,St):null;case Ue:return Jt=Ke._init,ht(Ze,Ie,Jt(Ke._payload),St)}if(jr(Ke)||Ye(Ke))return Jt!==null?null:dt(Ze,Ie,Ke,St,null);Rt(Ze,Ke)}return null}function Et(Ze,Ie,Ke,St,Jt){if(typeof St=="string"&&St!==""||typeof St=="number")return Ze=Ze.get(Ke)||null,be(Ie,Ze,""+St,Jt);if(typeof St=="object"&&St!==null){switch(St.$$typeof){case W:return Ze=Ze.get(St.key===null?Ke:St.key)||null,Ee(Ie,Ze,St,Jt);case J:return Ze=Ze.get(St.key===null?Ke:St.key)||null,et(Ie,Ze,St,Jt);case Ue:var sr=St._init;return Et(Ze,Ie,Ke,sr(St._payload),Jt)}if(jr(St)||Ye(St))return Ze=Ze.get(Ke)||null,dt(Ie,Ze,St,Jt,null);Rt(Ie,St)}return null}function Vt(Ze,Ie,Ke,St){for(var Jt=null,sr=null,Qt=Ie,pr=Ie=0,vi=null;Qt!==null&&pr<Ke.length;pr++){Qt.index>pr?(vi=Qt,Qt=null):vi=Qt.sibling;var Wr=ht(Ze,Qt,Ke[pr],St);if(Wr===null){Qt===null&&(Qt=vi);break}f&&Qt&&Wr.alternate===null&&p(Ze,Qt),Ie=$(Wr,Ie,pr),sr===null?Jt=Wr:sr.sibling=Wr,sr=Wr,Qt=vi}if(pr===Ke.length)return b(Ze,Qt),ge&&G(Ze,pr),Jt;if(Qt===null){for(;pr<Ke.length;pr++)Qt=gt(Ze,Ke[pr],St),Qt!==null&&(Ie=$(Qt,Ie,pr),sr===null?Jt=Qt:sr.sibling=Qt,sr=Qt);return ge&&G(Ze,pr),Jt}for(Qt=M(Ze,Qt);pr<Ke.length;pr++)vi=Et(Qt,Ze,pr,Ke[pr],St),vi!==null&&(f&&vi.alternate!==null&&Qt.delete(vi.key===null?pr:vi.key),Ie=$(vi,Ie,pr),sr===null?Jt=vi:sr.sibling=vi,sr=vi);return f&&Qt.forEach(function(bl){return p(Ze,bl)}),ge&&G(Ze,pr),Jt}function Kt(Ze,Ie,Ke,St){var Jt=Ye(Ke);if(typeof Jt!="function")throw Error(r(150));if(Ke=Jt.call(Ke),Ke==null)throw Error(r(151));for(var sr=Jt=null,Qt=Ie,pr=Ie=0,vi=null,Wr=Ke.next();Qt!==null&&!Wr.done;pr++,Wr=Ke.next()){Qt.index>pr?(vi=Qt,Qt=null):vi=Qt.sibling;var bl=ht(Ze,Qt,Wr.value,St);if(bl===null){Qt===null&&(Qt=vi);break}f&&Qt&&bl.alternate===null&&p(Ze,Qt),Ie=$(bl,Ie,pr),sr===null?Jt=bl:sr.sibling=bl,sr=bl,Qt=vi}if(Wr.done)return b(Ze,Qt),ge&&G(Ze,pr),Jt;if(Qt===null){for(;!Wr.done;pr++,Wr=Ke.next())Wr=gt(Ze,Wr.value,St),Wr!==null&&(Ie=$(Wr,Ie,pr),sr===null?Jt=Wr:sr.sibling=Wr,sr=Wr);return ge&&G(Ze,pr),Jt}for(Qt=M(Ze,Qt);!Wr.done;pr++,Wr=Ke.next())Wr=Et(Qt,Ze,pr,Wr.value,St),Wr!==null&&(f&&Wr.alternate!==null&&Qt.delete(Wr.key===null?pr:Wr.key),Ie=$(Wr,Ie,pr),sr===null?Jt=Wr:sr.sibling=Wr,sr=Wr);return f&&Qt.forEach(function(Rx){return p(Ze,Rx)}),ge&&G(Ze,pr),Jt}function Un(Ze,Ie,Ke,St){if(typeof Ke=="object"&&Ke!==null&&Ke.type===ie&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case W:e:{for(var Jt=Ke.key,sr=Ie;sr!==null;){if(sr.key===Jt){if(Jt=Ke.type,Jt===ie){if(sr.tag===7){b(Ze,sr.sibling),Ie=j(sr,Ke.props.children),Ie.return=Ze,Ze=Ie;break e}}else if(sr.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===Ue&&ar(Jt)===sr.type){b(Ze,sr.sibling),Ie=j(sr,Ke.props),Ie.ref=yt(Ze,sr,Ke),Ie.return=Ze,Ze=Ie;break e}b(Ze,sr);break}else p(Ze,sr);sr=sr.sibling}Ke.type===ie?(Ie=gu(Ke.props.children,Ze.mode,St,Ke.key),Ie.return=Ze,Ze=Ie):(St=Bf(Ke.type,Ke.key,Ke.props,null,Ze.mode,St),St.ref=yt(Ze,Ie,Ke),St.return=Ze,Ze=St)}return ae(Ze);case J:e:{for(sr=Ke.key;Ie!==null;){if(Ie.key===sr)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ke.containerInfo&&Ie.stateNode.implementation===Ke.implementation){b(Ze,Ie.sibling),Ie=j(Ie,Ke.children||[]),Ie.return=Ze,Ze=Ie;break e}else{b(Ze,Ie);break}else p(Ze,Ie);Ie=Ie.sibling}Ie=Bs(Ke,Ze.mode,St),Ie.return=Ze,Ze=Ie}return ae(Ze);case Ue:return sr=Ke._init,Un(Ze,Ie,sr(Ke._payload),St)}if(jr(Ke))return Vt(Ze,Ie,Ke,St);if(Ye(Ke))return Kt(Ze,Ie,Ke,St);Rt(Ze,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"?(Ke=""+Ke,Ie!==null&&Ie.tag===6?(b(Ze,Ie.sibling),Ie=j(Ie,Ke),Ie.return=Ze,Ze=Ie):(b(Ze,Ie),Ie=jo(Ke,Ze.mode,St),Ie.return=Ze,Ze=Ie),ae(Ze)):b(Ze,Ie)}return Un}var Tt=wt(!0),ir=wt(!1),Zr=Ds(null),dr=null,vr=null,Yr=null;function oi(){Yr=vr=dr=null}function xa(f){var p=Zr.current;an(Zr),f._currentValue=p}function Jr(f,p,b){for(;f!==null;){var M=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,M!==null&&(M.childLanes|=p)):M!==null&&(M.childLanes&p)!==p&&(M.childLanes|=p),f===b)break;f=f.return}}function Yn(f,p){dr=f,Yr=vr=null,f=f.dependencies,f!==null&&f.firstContext!==null&&((f.lanes&p)!==0&&(Ta=!0),f.firstContext=null)}function dn(f){var p=f._currentValue;if(Yr!==f)if(f={context:f,memoizedValue:p,next:null},vr===null){if(dr===null)throw Error(r(308));vr=f,dr.dependencies={lanes:0,firstContext:f}}else vr=vr.next=f;return p}var In=null;function mi(f){In===null?In=[f]:In.push(f)}function mo(f,p,b,M){var j=p.interleaved;return j===null?(b.next=b,mi(p)):(b.next=j.next,j.next=b),p.interleaved=b,ta(f,M)}function ta(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}var go=!1;function Rs(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ba(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function ja(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function Ro(f,p,b){var M=f.updateQueue;if(M===null)return null;if(M=M.shared,(Br&2)!==0){var j=M.pending;return j===null?p.next=p:(p.next=j.next,j.next=p),M.pending=p,ta(f,b)}return j=M.interleaved,j===null?(p.next=p,mi(M)):(p.next=j.next,j.next=p),M.interleaved=p,ta(f,b)}function Fi(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var M=p.lanes;M&=f.pendingLanes,b|=M,p.lanes=b,ws(f,b)}}function wa(f,p){var b=f.updateQueue,M=f.alternate;if(M!==null&&(M=M.updateQueue,b===M)){var j=null,$=null;if(b=b.firstBaseUpdate,b!==null){do{var ae={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};$===null?j=$=ae:$=$.next=ae,b=b.next}while(b!==null);$===null?j=$=p:$=$.next=p}else j=$=p;b={baseState:M.baseState,firstBaseUpdate:j,lastBaseUpdate:$,shared:M.shared,effects:M.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function yo(f,p,b,M){var j=f.updateQueue;go=!1;var $=j.firstBaseUpdate,ae=j.lastBaseUpdate,be=j.shared.pending;if(be!==null){j.shared.pending=null;var Ee=be,et=Ee.next;Ee.next=null,ae===null?$=et:ae.next=et,ae=Ee;var dt=f.alternate;dt!==null&&(dt=dt.updateQueue,be=dt.lastBaseUpdate,be!==ae&&(be===null?dt.firstBaseUpdate=et:be.next=et,dt.lastBaseUpdate=Ee))}if($!==null){var gt=j.baseState;ae=0,dt=et=Ee=null,be=$;do{var ht=be.lane,Et=be.eventTime;if((M&ht)===ht){dt!==null&&(dt=dt.next={eventTime:Et,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var Vt=f,Kt=be;switch(ht=p,Et=b,Kt.tag){case 1:if(Vt=Kt.payload,typeof Vt=="function"){gt=Vt.call(Et,gt,ht);break e}gt=Vt;break e;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=Kt.payload,ht=typeof Vt=="function"?Vt.call(Et,gt,ht):Vt,ht==null)break e;gt=nt({},gt,ht);break e;case 2:go=!0}}be.callback!==null&&be.lane!==0&&(f.flags|=64,ht=j.effects,ht===null?j.effects=[be]:ht.push(be))}else Et={eventTime:Et,lane:ht,tag:be.tag,payload:be.payload,callback:be.callback,next:null},dt===null?(et=dt=Et,Ee=gt):dt=dt.next=Et,ae|=ht;if(be=be.next,be===null){if(be=j.shared.pending,be===null)break;ht=be,be=ht.next,ht.next=null,j.lastBaseUpdate=ht,j.shared.pending=null}}while(!0);if(dt===null&&(Ee=gt),j.baseState=Ee,j.firstBaseUpdate=et,j.lastBaseUpdate=dt,p=j.shared.interleaved,p!==null){j=p;do ae|=j.lane,j=j.next;while(j!==p)}else $===null&&(j.shared.lanes=0);oc|=ae,f.lanes=ae,f.memoizedState=gt}}function Ba(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var M=f[p],j=M.callback;if(j!==null){if(M.callback=null,M=b,typeof j!="function")throw Error(r(191,j));j.call(M)}}}var Bn={},vn=Ds(Bn),gi=Ds(Bn),wr=Ds(Bn);function Sa(f){if(f===Bn)throw Error(r(174));return f}function Ls(f,p){switch(fn(wr,p),fn(gi,f),fn(vn,Bn),f=p.nodeType,f){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:Qs(null,"");break;default:f=f===8?p.parentNode:p,p=f.namespaceURI||null,f=f.tagName,p=Qs(p,f)}an(vn),fn(vn,p)}function vo(){an(vn),an(gi),an(wr)}function ff(f){Sa(wr.current);var p=Sa(vn.current),b=Qs(p,f.type);p!==b&&(fn(gi,f),fn(vn,b))}function df(f){gi.current===f&&(an(vn),an(gi))}var wn=Ds(0);function _o(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var ah=[];function iu(){for(var f=0;f<ah.length;f++)ah[f]._workInProgressVersionPrimary=null;ah.length=0}var Fs=re.ReactCurrentDispatcher,au=re.ReactCurrentBatchConfig,Lo=0,Qr=null,En=null,Jn=null,pf=!1,oh=!1,mf=0,Rm=0;function si(){throw Error(r(321))}function ou(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!Ji(f[b],p[b]))return!1;return!0}function os(f,p,b,M,j,$){if(Lo=$,Qr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Fs.current=f===null||f.memoizedState===null?Xd:Sx,f=b(M,j),oh){$=0;do{if(oh=!1,mf=0,25<=$)throw Error(r(301));$+=1,Jn=En=null,p.updateQueue=null,Fs.current=Yy,f=b(M,j)}while(oh)}if(Fs.current=Zd,p=En!==null&&En.next!==null,Lo=0,Jn=En=Qr=null,pf=!1,p)throw Error(r(300));return f}function xo(){var f=mf!==0;return mf=0,f}function ji(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?Qr.memoizedState=Jn=f:Jn=Jn.next=f,Jn}function bo(){if(En===null){var f=Qr.alternate;f=f!==null?f.memoizedState:null}else f=En.next;var p=Jn===null?Qr.memoizedState:Jn.next;if(p!==null)Jn=p,En=f;else{if(f===null)throw Error(r(310));En=f,f={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Jn===null?Qr.memoizedState=Jn=f:Jn=Jn.next=f}return Jn}function ss(f,p){return typeof p=="function"?p(f):p}function Lm(f){var p=bo(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var M=En,j=M.baseQueue,$=b.pending;if($!==null){if(j!==null){var ae=j.next;j.next=$.next,$.next=ae}M.baseQueue=j=$,b.pending=null}if(j!==null){$=j.next,M=M.baseState;var be=ae=null,Ee=null,et=$;do{var dt=et.lane;if((Lo&dt)===dt)Ee!==null&&(Ee=Ee.next={lane:0,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),M=et.hasEagerState?et.eagerState:f(M,et.action);else{var gt={lane:dt,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null};Ee===null?(be=Ee=gt,ae=M):Ee=Ee.next=gt,Qr.lanes|=dt,oc|=dt}et=et.next}while(et!==null&&et!==$);Ee===null?ae=M:Ee.next=be,Ji(M,p.memoizedState)||(Ta=!0),p.memoizedState=M,p.baseState=ae,p.baseQueue=Ee,b.lastRenderedState=M}if(f=b.interleaved,f!==null){j=f;do $=j.lane,Qr.lanes|=$,oc|=$,j=j.next;while(j!==f)}else j===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function qd(f){var p=bo(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var M=b.dispatch,j=b.pending,$=p.memoizedState;if(j!==null){b.pending=null;var ae=j=j.next;do $=f($,ae.action),ae=ae.next;while(ae!==j);Ji($,p.memoizedState)||(Ta=!0),p.memoizedState=$,p.baseQueue===null&&(p.baseState=$),b.lastRenderedState=$}return[$,M]}function Nn(){}function Ud(f,p){var b=Qr,M=bo(),j=p(),$=!Ji(M.memoizedState,j);if($&&(M.memoizedState=j,Ta=!0),M=M.queue,vf(lu.bind(null,b,M,f),[f]),M.getSnapshot!==p||$||Jn!==null&&Jn.memoizedState.tag&1){if(b.flags|=2048,yf(9,su.bind(null,b,M,j,p),void 0,null),yi===null)throw Error(r(349));(Lo&30)!==0||Fm(b,p,j)}return j}function Fm(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=Qr.updateQueue,p===null?(p={lastEffect:null,stores:null},Qr.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function su(f,p,b,M){p.value=b,p.getSnapshot=M,gf(p)&&Wd(f)}function lu(f,p,b){return b(function(){gf(p)&&Wd(f)})}function gf(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!Ji(f,b)}catch{return!0}}function Wd(f){var p=ta(f,1);p!==null&&us(p,f,1,-1)}function jm(f){var p=ji();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:f},p.queue=f,f=f.dispatch=lh.bind(null,Qr,f),[p.memoizedState,f]}function yf(f,p,b,M){return f={tag:f,create:p,destroy:b,deps:M,next:null},p=Qr.updateQueue,p===null?(p={lastEffect:null,stores:null},Qr.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(M=b.next,b.next=f,f.next=M,p.lastEffect=f)),f}function Bm(){return bo().memoizedState}function Hd(f,p,b,M){var j=ji();Qr.flags|=f,j.memoizedState=yf(1|p,b,void 0,M===void 0?null:M)}function sh(f,p,b,M){var j=bo();M=M===void 0?null:M;var $=void 0;if(En!==null){var ae=En.memoizedState;if($=ae.destroy,M!==null&&ou(M,ae.deps)){j.memoizedState=yf(p,b,$,M);return}}Qr.flags|=f,j.memoizedState=yf(1|p,b,$,M)}function Gy(f,p){return Hd(8390656,8,f,p)}function vf(f,p){return sh(2048,8,f,p)}function Nm(f,p){return sh(4,2,f,p)}function $m(f,p){return sh(4,4,f,p)}function tc(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function Zy(f,p,b){return b=b!=null?b.concat([f]):null,sh(4,4,tc.bind(null,p,f),b)}function rc(){}function _f(f,p){var b=bo();p=p===void 0?null:p;var M=b.memoizedState;return M!==null&&p!==null&&ou(p,M[1])?M[0]:(b.memoizedState=[f,p],f)}function xf(f,p){var b=bo();p=p===void 0?null:p;var M=b.memoizedState;return M!==null&&p!==null&&ou(p,M[1])?M[0]:(f=f(),b.memoizedState=[f,p],f)}function Vm(f,p,b){return(Lo&21)===0?(f.baseState&&(f.baseState=!1,Ta=!0),f.memoizedState=b):(Ji(b,p)||(b=Ho(),Qr.lanes|=b,oc|=b,f.baseState=!0),p)}function Xy(f,p){var b=qr;qr=b!==0&&4>b?b:4,f(!0);var M=au.transition;au.transition={};try{f(!1),p()}finally{qr=b,au.transition=M}}function Ky(){return bo().memoizedState}function ra(f,p,b){var M=pu(f);if(b={lane:M,action:b,hasEagerState:!1,eagerState:null,next:null},Gd(f))qm(p,b);else if(b=mo(f,p,b,M),b!==null){var j=Pa();us(b,f,M,j),uh(b,p,M)}}function lh(f,p,b){var M=pu(f),j={lane:M,action:b,hasEagerState:!1,eagerState:null,next:null};if(Gd(f))qm(p,j);else{var $=f.alternate;if(f.lanes===0&&($===null||$.lanes===0)&&($=p.lastRenderedReducer,$!==null))try{var ae=p.lastRenderedState,be=$(ae,b);if(j.hasEagerState=!0,j.eagerState=be,Ji(be,ae)){var Ee=p.interleaved;Ee===null?(j.next=j,mi(p)):(j.next=Ee.next,Ee.next=j),p.interleaved=j;return}}catch{}finally{}b=mo(f,p,j,M),b!==null&&(j=Pa(),us(b,f,M,j),uh(b,p,M))}}function Gd(f){var p=f.alternate;return f===Qr||p!==null&&p===Qr}function qm(f,p){oh=pf=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function uh(f,p,b){if((b&4194240)!==0){var M=p.lanes;M&=f.pendingLanes,b|=M,p.lanes=b,ws(f,b)}}var Zd={readContext:dn,useCallback:si,useContext:si,useEffect:si,useImperativeHandle:si,useInsertionEffect:si,useLayoutEffect:si,useMemo:si,useReducer:si,useRef:si,useState:si,useDebugValue:si,useDeferredValue:si,useTransition:si,useMutableSource:si,useSyncExternalStore:si,useId:si,unstable_isNewReconciler:!1},Xd={readContext:dn,useCallback:function(f,p){return ji().memoizedState=[f,p===void 0?null:p],f},useContext:dn,useEffect:Gy,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,Hd(4194308,4,tc.bind(null,p,f),b)},useLayoutEffect:function(f,p){return Hd(4194308,4,f,p)},useInsertionEffect:function(f,p){return Hd(4,2,f,p)},useMemo:function(f,p){var b=ji();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var M=ji();return p=b!==void 0?b(p):p,M.memoizedState=M.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},M.queue=f,f=f.dispatch=ra.bind(null,Qr,f),[M.memoizedState,f]},useRef:function(f){var p=ji();return f={current:f},p.memoizedState=f},useState:jm,useDebugValue:rc,useDeferredValue:function(f){return ji().memoizedState=f},useTransition:function(){var f=jm(!1),p=f[0];return f=Xy.bind(null,f[1]),ji().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var M=Qr,j=ji();if(ge){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),yi===null)throw Error(r(349));(Lo&30)!==0||Fm(M,p,b)}j.memoizedState=b;var $={value:b,getSnapshot:p};return j.queue=$,Gy(lu.bind(null,M,$,f),[f]),M.flags|=2048,yf(9,su.bind(null,M,$,b,p),void 0,null),b},useId:function(){var f=ji(),p=yi.identifierPrefix;if(ge){var b=V,M=B;b=(M&~(1<<32-Hr(M)-1)).toString(32)+b,p=":"+p+"R"+b,b=mf++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=Rm++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},Sx={readContext:dn,useCallback:_f,useContext:dn,useEffect:vf,useImperativeHandle:Zy,useInsertionEffect:Nm,useLayoutEffect:$m,useMemo:xf,useReducer:Lm,useRef:Bm,useState:function(){return Lm(ss)},useDebugValue:rc,useDeferredValue:function(f){var p=bo();return Vm(p,En.memoizedState,f)},useTransition:function(){var f=Lm(ss)[0],p=bo().memoizedState;return[f,p]},useMutableSource:Nn,useSyncExternalStore:Ud,useId:Ky,unstable_isNewReconciler:!1},Yy={readContext:dn,useCallback:_f,useContext:dn,useEffect:vf,useImperativeHandle:Zy,useInsertionEffect:Nm,useLayoutEffect:$m,useMemo:xf,useReducer:qd,useRef:Bm,useState:function(){return qd(ss)},useDebugValue:rc,useDeferredValue:function(f){var p=bo();return En===null?p.memoizedState=f:Vm(p,En.memoizedState,f)},useTransition:function(){var f=qd(ss)[0],p=bo().memoizedState;return[f,p]},useMutableSource:Nn,useSyncExternalStore:Ud,useId:Ky,unstable_isNewReconciler:!1};function Fo(f,p){if(f&&f.defaultProps){p=nt({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}function Kd(f,p,b,M){p=f.memoizedState,b=b(M,p),b=b==null?p:nt({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var Yd={isMounted:function(f){return(f=f._reactInternals)?gr(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var M=Pa(),j=pu(f),$=ja(M,j);$.payload=p,b!=null&&($.callback=b),p=Ro(f,$,j),p!==null&&(us(p,f,j,M),Fi(p,f,j))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var M=Pa(),j=pu(f),$=ja(M,j);$.tag=1,$.payload=p,b!=null&&($.callback=b),p=Ro(f,$,j),p!==null&&(us(p,f,j,M),Fi(p,f,j))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=Pa(),M=pu(f),j=ja(b,M);j.tag=2,p!=null&&(j.callback=p),p=Ro(f,j,M),p!==null&&(us(p,f,M,b),Fi(p,f,M))}};function Jd(f,p,b,M,j,$,ae){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(M,$,ae):p.prototype&&p.prototype.isPureReactComponent?!Ms(b,M)||!Ms(j,$):!0}function Um(f,p,b){var M=!1,j=zs,$=p.contextType;return typeof $=="object"&&$!==null?$=dn($):(j=pi(p)?Fa:Kr.current,M=p.contextTypes,$=(M=M!=null)?as(f,j):zs),p=new p(b,$),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Yd,f.stateNode=p,p._reactInternals=f,M&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=j,f.__reactInternalMemoizedMaskedChildContext=$),p}function Qd(f,p,b,M){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,M),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,M),p.state!==f&&Yd.enqueueReplaceState(p,p.state,null)}function nc(f,p,b,M){var j=f.stateNode;j.props=b,j.state=f.memoizedState,j.refs={},Rs(f);var $=p.contextType;typeof $=="object"&&$!==null?j.context=dn($):($=pi(p)?Fa:Kr.current,j.context=as(f,$)),j.state=f.memoizedState,$=p.getDerivedStateFromProps,typeof $=="function"&&(Kd(f,p,$,b),j.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(p=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),p!==j.state&&Yd.enqueueReplaceState(j,j.state,null),yo(f,b,j,M),j.state=f.memoizedState),typeof j.componentDidMount=="function"&&(f.flags|=4194308)}function Ti(f,p){try{var b="",M=p;do b+=jt(M),M=M.return;while(M);var j=b}catch($){j=`
Error generating stack: `+$.message+`
`+$.stack}return{value:f,source:p,stack:j,digest:null}}function ep(f,p,b){return{value:f,source:null,stack:b??null,digest:p??null}}function bf(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var Tx=typeof WeakMap=="function"?WeakMap:Map;function Wm(f,p,b){b=ja(-1,b),b.tag=3,b.payload={element:null};var M=p.value;return b.callback=function(){Of||(Of=!0,hp=M),bf(f,p)},b}function Jy(f,p,b){b=ja(-1,b),b.tag=3;var M=f.type.getDerivedStateFromError;if(typeof M=="function"){var j=p.value;b.payload=function(){return M(j)},b.callback=function(){bf(f,p)}}var $=f.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(b.callback=function(){bf(f,p),typeof M!="function"&&(Cr===null?Cr=new Set([this]):Cr.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),b}function Qy(f,p,b){var M=f.pingCache;if(M===null){M=f.pingCache=new Tx;var j=new Set;M.set(p,j)}else j=M.get(p),j===void 0&&(j=new Set,M.set(p,j));j.has(b)||(j.add(b),f=Cx.bind(null,f,p,b),p.then(f,f))}function ev(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function tv(f,p,b,M,j){return(f.mode&1)===0?(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=ja(-1,1),p.tag=2,Ro(b,p,1))),b.lanes|=1),f):(f.flags|=65536,f.lanes=j,f)}var rv=re.ReactCurrentOwner,Ta=!1;function Qn(f,p,b,M){p.child=f===null?ir(p,null,b,M):Tt(p,f.child,b,M)}function ch(f,p,b,M,j){b=b.render;var $=p.ref;return Yn(p,j),M=os(f,p,b,M,$,j),b=xo(),f!==null&&!Ta?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~j,wo(f,p,j)):(ge&&b&&ne(p),p.flags|=1,Qn(f,p,M,j),p.child)}function nv(f,p,b,M,j){if(f===null){var $=b.type;return typeof $=="function"&&!jf($)&&$.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=$,iv(f,p,$,M,j)):(f=Bf(b.type,null,M,p,p.mode,j),f.ref=p.ref,f.return=p,p.child=f)}if($=f.child,(f.lanes&j)===0){var ae=$.memoizedProps;if(b=b.compare,b=b!==null?b:Ms,b(ae,M)&&f.ref===p.ref)return wo(f,p,j)}return p.flags|=1,f=mu($,M),f.ref=p.ref,f.return=p,p.child=f}function iv(f,p,b,M,j){if(f!==null){var $=f.memoizedProps;if(Ms($,M)&&f.ref===p.ref)if(Ta=!1,p.pendingProps=M=$,(f.lanes&j)!==0)(f.flags&131072)!==0&&(Ta=!0);else return p.lanes=f.lanes,wo(f,p,j)}return Hm(f,p,b,M,j)}function av(f,p,b){var M=p.pendingProps,j=M.children,$=f!==null?f.memoizedState:null;if(M.mode==="hidden")if((p.mode&1)===0)p.memoizedState={baseLanes:0,cachePool:null,transitions:null},fn(dh,aa),aa|=b;else{if((b&1073741824)===0)return f=$!==null?$.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null,transitions:null},p.updateQueue=null,fn(dh,aa),aa|=f,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=$!==null?$.baseLanes:b,fn(dh,aa),aa|=M}else $!==null?(M=$.baseLanes|b,p.memoizedState=null):M=b,fn(dh,aa),aa|=M;return Qn(f,p,j,b),p.child}function ov(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function Hm(f,p,b,M,j){var $=pi(b)?Fa:Kr.current;return $=as(p,$),Yn(p,j),b=os(f,p,b,M,$,j),M=xo(),f!==null&&!Ta?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~j,wo(f,p,j)):(ge&&M&&ne(p),p.flags|=1,Qn(f,p,b,j),p.child)}function sv(f,p,b,M,j){if(pi(b)){var $=!0;_a(p)}else $=!1;if(Yn(p,j),p.stateNode===null)Tf(f,p),Um(p,b,M),nc(p,b,M,j),M=!0;else if(f===null){var ae=p.stateNode,be=p.memoizedProps;ae.props=be;var Ee=ae.context,et=b.contextType;typeof et=="object"&&et!==null?et=dn(et):(et=pi(b)?Fa:Kr.current,et=as(p,et));var dt=b.getDerivedStateFromProps,gt=typeof dt=="function"||typeof ae.getSnapshotBeforeUpdate=="function";gt||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(be!==M||Ee!==et)&&Qd(p,ae,M,et),go=!1;var ht=p.memoizedState;ae.state=ht,yo(p,M,ae,j),Ee=p.memoizedState,be!==M||ht!==Ee||kr.current||go?(typeof dt=="function"&&(Kd(p,b,dt,M),Ee=p.memoizedState),(be=go||Jd(p,b,be,M,ht,Ee,et))?(gt||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=M,p.memoizedState=Ee),ae.props=M,ae.state=Ee,ae.context=et,M=be):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),M=!1)}else{ae=p.stateNode,ba(f,p),be=p.memoizedProps,et=p.type===p.elementType?be:Fo(p.type,be),ae.props=et,gt=p.pendingProps,ht=ae.context,Ee=b.contextType,typeof Ee=="object"&&Ee!==null?Ee=dn(Ee):(Ee=pi(b)?Fa:Kr.current,Ee=as(p,Ee));var Et=b.getDerivedStateFromProps;(dt=typeof Et=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(be!==gt||ht!==Ee)&&Qd(p,ae,M,Ee),go=!1,ht=p.memoizedState,ae.state=ht,yo(p,M,ae,j);var Vt=p.memoizedState;be!==gt||ht!==Vt||kr.current||go?(typeof Et=="function"&&(Kd(p,b,Et,M),Vt=p.memoizedState),(et=go||Jd(p,b,et,M,ht,Vt,Ee)||!1)?(dt||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(M,Vt,Ee),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(M,Vt,Ee)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||be===f.memoizedProps&&ht===f.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||be===f.memoizedProps&&ht===f.memoizedState||(p.flags|=1024),p.memoizedProps=M,p.memoizedState=Vt),ae.props=M,ae.state=Vt,ae.context=Ee,M=et):(typeof ae.componentDidUpdate!="function"||be===f.memoizedProps&&ht===f.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||be===f.memoizedProps&&ht===f.memoizedState||(p.flags|=1024),M=!1)}return Gm(f,p,b,M,$,j)}function Gm(f,p,b,M,j,$){ov(f,p);var ae=(p.flags&128)!==0;if(!M&&!ae)return j&&ru(p,b,!1),wo(f,p,$);M=p.stateNode,rv.current=p;var be=ae&&typeof b.getDerivedStateFromError!="function"?null:M.render();return p.flags|=1,f!==null&&ae?(p.child=Tt(p,f.child,null,$),p.child=Tt(p,null,be,$)):Qn(f,p,be,$),p.memoizedState=M.state,j&&ru(p,b,!0),p.child}function tp(f){var p=f.stateNode;p.pendingContext?eu(f,p.pendingContext,p.pendingContext!==p.context):p.context&&eu(f,p.context,!1),Ls(f,p.containerInfo)}function lv(f,p,b,M,j){return _t(),kt(j),p.flags|=256,Qn(f,p,b,M),p.child}var uu={dehydrated:null,treeContext:null,retryLane:0};function Zm(f){return{baseLanes:f,cachePool:null,transitions:null}}function Dn(f,p,b){var M=p.pendingProps,j=wn.current,$=!1,ae=(p.flags&128)!==0,be;if((be=ae)||(be=f!==null&&f.memoizedState===null?!1:(j&2)!==0),be?($=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(j|=1),fn(wn,j&1),f===null)return ze(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?((p.mode&1)===0?p.lanes=1:f.data==="$!"?p.lanes=8:p.lanes=1073741824,null):(ae=M.children,f=M.fallback,$?(M=p.mode,$=p.child,ae={mode:"hidden",children:ae},(M&1)===0&&$!==null?($.childLanes=0,$.pendingProps=ae):$=yu(ae,M,0,null),f=gu(f,M,b,null),$.return=p,f.return=p,$.sibling=f,p.child=$,p.child.memoizedState=Zm(b),p.memoizedState=uu,f):hh(p,ae));if(j=f.memoizedState,j!==null&&(be=j.dehydrated,be!==null))return rp(f,p,ae,M,be,j,b);if($){$=M.fallback,ae=p.mode,j=f.child,be=j.sibling;var Ee={mode:"hidden",children:M.children};return(ae&1)===0&&p.child!==j?(M=p.child,M.childLanes=0,M.pendingProps=Ee,p.deletions=null):(M=mu(j,Ee),M.subtreeFlags=j.subtreeFlags&14680064),be!==null?$=mu(be,$):($=gu($,ae,b,null),$.flags|=2),$.return=p,M.return=p,M.sibling=$,p.child=M,M=$,$=p.child,ae=f.child.memoizedState,ae=ae===null?Zm(b):{baseLanes:ae.baseLanes|b,cachePool:null,transitions:ae.transitions},$.memoizedState=ae,$.childLanes=f.childLanes&~b,p.memoizedState=uu,M}return $=f.child,f=$.sibling,M=mu($,{mode:"visible",children:M.children}),(p.mode&1)===0&&(M.lanes=b),M.return=p,M.sibling=null,f!==null&&(b=p.deletions,b===null?(p.deletions=[f],p.flags|=16):b.push(f)),p.child=M,p.memoizedState=null,M}function hh(f,p){return p=yu({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function wf(f,p,b,M){return M!==null&&kt(M),Tt(p,f.child,null,b),f=hh(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function rp(f,p,b,M,j,$,ae){if(b)return p.flags&256?(p.flags&=-257,M=ep(Error(r(422))),wf(f,p,ae,M)):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):($=M.fallback,j=p.mode,M=yu({mode:"visible",children:M.children},j,0,null),$=gu($,j,ae,null),$.flags|=2,M.return=p,$.return=p,M.sibling=$,p.child=M,(p.mode&1)!==0&&Tt(p,f.child,null,ae),p.child.memoizedState=Zm(ae),p.memoizedState=uu,$);if((p.mode&1)===0)return wf(f,p,ae,null);if(j.data==="$!"){if(M=j.nextSibling&&j.nextSibling.dataset,M)var be=M.dgst;return M=be,$=Error(r(419)),M=ep($,M,void 0),wf(f,p,ae,M)}if(be=(ae&f.childLanes)!==0,Ta||be){if(M=yi,M!==null){switch(ae&-ae){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(M.suspendedLanes|ae))!==0?0:j,j!==0&&j!==$.retryLane&&($.retryLane=j,ta(f,j),us(M,f,j,-1))}return pp(),M=ep(Error(r(421))),wf(f,p,ae,M)}return j.data==="$?"?(p.flags|=128,p.child=f.child,p=Tv.bind(null,f),j._reactRetry=p,null):(f=$.treeContext,fe=ho(j.nextSibling),ce=p,ge=!0,xe=null,f!==null&&(T[O++]=B,T[O++]=V,T[O++]=z,B=f.id,V=f.overflow,z=p),p=hh(p,M.children),p.flags|=4096,p)}function Sf(f,p,b){f.lanes|=p;var M=f.alternate;M!==null&&(M.lanes|=p),Jr(f.return,p,b)}function ic(f,p,b,M,j){var $=f.memoizedState;$===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:M,tail:b,tailMode:j}:($.isBackwards=p,$.rendering=null,$.renderingStartTime=0,$.last=M,$.tail=b,$.tailMode=j)}function Xm(f,p,b){var M=p.pendingProps,j=M.revealOrder,$=M.tail;if(Qn(f,p,M.children,b),M=wn.current,(M&2)!==0)M=M&1|2,p.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&Sf(f,b,p);else if(f.tag===19)Sf(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}M&=1}if(fn(wn,M),(p.mode&1)===0)p.memoizedState=null;else switch(j){case"forwards":for(b=p.child,j=null;b!==null;)f=b.alternate,f!==null&&_o(f)===null&&(j=b),b=b.sibling;b=j,b===null?(j=p.child,p.child=null):(j=b.sibling,b.sibling=null),ic(p,!1,j,b,$);break;case"backwards":for(b=null,j=p.child,p.child=null;j!==null;){if(f=j.alternate,f!==null&&_o(f)===null){p.child=j;break}f=j.sibling,j.sibling=b,b=j,j=f}ic(p,!0,b,null,$);break;case"together":ic(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function Tf(f,p){(p.mode&1)===0&&f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2)}function wo(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),oc|=p.lanes,(b&p.childLanes)===0)return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,b=mu(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=mu(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function Km(f,p,b){switch(p.tag){case 3:tp(p),_t();break;case 5:ff(p);break;case 1:pi(p.type)&&_a(p);break;case 4:Ls(p,p.stateNode.containerInfo);break;case 10:var M=p.type._context,j=p.memoizedProps.value;fn(Zr,M._currentValue),M._currentValue=j;break;case 13:if(M=p.memoizedState,M!==null)return M.dehydrated!==null?(fn(wn,wn.current&1),p.flags|=128,null):(b&p.child.childLanes)!==0?Dn(f,p,b):(fn(wn,wn.current&1),f=wo(f,p,b),f!==null?f.sibling:null);fn(wn,wn.current&1);break;case 19:if(M=(b&p.childLanes)!==0,(f.flags&128)!==0){if(M)return Xm(f,p,b);p.flags|=128}if(j=p.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),fn(wn,wn.current),M)break;return null;case 22:case 23:return p.lanes=0,av(f,p,b)}return wo(f,p,b)}var np,Pf,ip,Ym;np=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)f.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Pf=function(){},ip=function(f,p,b,M){var j=f.memoizedProps;if(j!==M){f=p.stateNode,Sa(vn.current);var $=null;switch(b){case"input":j=Bt(f,j),M=Bt(f,M),$=[];break;case"select":j=nt({},j,{value:void 0}),M=nt({},M,{value:void 0}),$=[];break;case"textarea":j=ni(f,j),M=ni(f,M),$=[];break;default:typeof j.onClick!="function"&&typeof M.onClick=="function"&&(f.onclick=ea)}bi(b,M);var ae;b=null;for(et in j)if(!M.hasOwnProperty(et)&&j.hasOwnProperty(et)&&j[et]!=null)if(et==="style"){var be=j[et];for(ae in be)be.hasOwnProperty(ae)&&(b||(b={}),b[ae]="")}else et!=="dangerouslySetInnerHTML"&&et!=="children"&&et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&et!=="autoFocus"&&(i.hasOwnProperty(et)?$||($=[]):($=$||[]).push(et,null));for(et in M){var Ee=M[et];if(be=j?.[et],M.hasOwnProperty(et)&&Ee!==be&&(Ee!=null||be!=null))if(et==="style")if(be){for(ae in be)!be.hasOwnProperty(ae)||Ee&&Ee.hasOwnProperty(ae)||(b||(b={}),b[ae]="");for(ae in Ee)Ee.hasOwnProperty(ae)&&be[ae]!==Ee[ae]&&(b||(b={}),b[ae]=Ee[ae])}else b||($||($=[]),$.push(et,b)),b=Ee;else et==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,be=be?be.__html:void 0,Ee!=null&&be!==Ee&&($=$||[]).push(et,Ee)):et==="children"?typeof Ee!="string"&&typeof Ee!="number"||($=$||[]).push(et,""+Ee):et!=="suppressContentEditableWarning"&&et!=="suppressHydrationWarning"&&(i.hasOwnProperty(et)?(Ee!=null&&et==="onScroll"&&nn("scroll",f),$||be===Ee||($=[])):($=$||[]).push(et,Ee))}b&&($=$||[]).push("style",b);var et=$;(p.updateQueue=et)&&(p.flags|=4)}},Ym=function(f,p,b,M){b!==M&&(p.flags|=4)};function fh(f,p){if(!ge)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var M=null;b!==null;)b.alternate!==null&&(M=b),b=b.sibling;M===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:M.sibling=null}}function na(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,M=0;if(p)for(var j=f.child;j!==null;)b|=j.lanes|j.childLanes,M|=j.subtreeFlags&14680064,M|=j.flags&14680064,j.return=f,j=j.sibling;else for(j=f.child;j!==null;)b|=j.lanes|j.childLanes,M|=j.subtreeFlags,M|=j.flags,j.return=f,j=j.sibling;return f.subtreeFlags|=M,f.childLanes=b,p}function Px(f,p,b){var M=p.pendingProps;switch(se(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(p),null;case 1:return pi(p.type)&&Qu(),na(p),null;case 3:return M=p.stateNode,vo(),an(kr),an(Kr),iu(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(f===null||f.child===null)&&(ot(p)?p.flags|=4:f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,xe!==null&&(tg(xe),xe=null))),Pf(f,p),na(p),null;case 5:df(p);var j=Sa(wr.current);if(b=p.type,f!==null&&p.stateNode!=null)ip(f,p,b,M,j),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!M){if(p.stateNode===null)throw Error(r(166));return na(p),null}if(f=Sa(vn.current),ot(p)){M=p.stateNode,b=p.type;var $=p.memoizedProps;switch(M[Li]=p,M[zo]=$,f=(p.mode&1)!==0,b){case"dialog":nn("cancel",M),nn("close",M);break;case"iframe":case"object":case"embed":nn("load",M);break;case"video":case"audio":for(j=0;j<Is.length;j++)nn(Is[j],M);break;case"source":nn("error",M);break;case"img":case"image":case"link":nn("error",M),nn("load",M);break;case"details":nn("toggle",M);break;case"input":Er(M,$),nn("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!$.multiple},nn("invalid",M);break;case"textarea":Hi(M,$),nn("invalid",M)}bi(b,$),j=null;for(var ae in $)if($.hasOwnProperty(ae)){var be=$[ae];ae==="children"?typeof be=="string"?M.textContent!==be&&($.suppressHydrationWarning!==!0&&Jl(M.textContent,be,f),j=["children",be]):typeof be=="number"&&M.textContent!==""+be&&($.suppressHydrationWarning!==!0&&Jl(M.textContent,be,f),j=["children",""+be]):i.hasOwnProperty(ae)&&be!=null&&ae==="onScroll"&&nn("scroll",M)}switch(b){case"input":lr(M),Oi(M,$,!0);break;case"textarea":lr(M),xi(M);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(M.onclick=ea)}M=j,p.updateQueue=M,M!==null&&(p.flags|=4)}else{ae=j.nodeType===9?j:j.ownerDocument,f==="http://www.w3.org/1999/xhtml"&&(f=Rl(b)),f==="http://www.w3.org/1999/xhtml"?b==="script"?(f=ae.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild)):typeof M.is=="string"?f=ae.createElement(b,{is:M.is}):(f=ae.createElement(b),b==="select"&&(ae=f,M.multiple?ae.multiple=!0:M.size&&(ae.size=M.size))):f=ae.createElementNS(f,b),f[Li]=p,f[zo]=M,np(f,p,!1,!1),p.stateNode=f;e:{switch(ae=pa(b,M),b){case"dialog":nn("cancel",f),nn("close",f),j=M;break;case"iframe":case"object":case"embed":nn("load",f),j=M;break;case"video":case"audio":for(j=0;j<Is.length;j++)nn(Is[j],f);j=M;break;case"source":nn("error",f),j=M;break;case"img":case"image":case"link":nn("error",f),nn("load",f),j=M;break;case"details":nn("toggle",f),j=M;break;case"input":Er(f,M),j=Bt(f,M),nn("invalid",f);break;case"option":j=M;break;case"select":f._wrapperState={wasMultiple:!!M.multiple},j=nt({},M,{value:void 0}),nn("invalid",f);break;case"textarea":Hi(f,M),j=ni(f,M),nn("invalid",f);break;default:j=M}bi(b,j),be=j;for($ in be)if(be.hasOwnProperty($)){var Ee=be[$];$==="style"?yr(f,Ee):$==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,Ee!=null&&io(f,Ee)):$==="children"?typeof Ee=="string"?(b!=="textarea"||Ee!=="")&&Xn(f,Ee):typeof Ee=="number"&&Xn(f,""+Ee):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(i.hasOwnProperty($)?Ee!=null&&$==="onScroll"&&nn("scroll",f):Ee!=null&&K(f,$,Ee,ae))}switch(b){case"input":lr(f),Oi(f,M,!1);break;case"textarea":lr(f),xi(f);break;case"option":M.value!=null&&f.setAttribute("value",""+er(M.value));break;case"select":f.multiple=!!M.multiple,$=M.value,$!=null?ri(f,!!M.multiple,$,!1):M.defaultValue!=null&&ri(f,!!M.multiple,M.defaultValue,!0);break;default:typeof j.onClick=="function"&&(f.onclick=ea)}switch(b){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return na(p),null;case 6:if(f&&p.stateNode!=null)Ym(f,p,f.memoizedProps,M);else{if(typeof M!="string"&&p.stateNode===null)throw Error(r(166));if(b=Sa(wr.current),Sa(vn.current),ot(p)){if(M=p.stateNode,b=p.memoizedProps,M[Li]=p,($=M.nodeValue!==b)&&(f=ce,f!==null))switch(f.tag){case 3:Jl(M.nodeValue,b,(f.mode&1)!==0);break;case 5:f.memoizedProps.suppressHydrationWarning!==!0&&Jl(M.nodeValue,b,(f.mode&1)!==0)}$&&(p.flags|=4)}else M=(b.nodeType===9?b:b.ownerDocument).createTextNode(M),M[Li]=p,p.stateNode=M}return na(p),null;case 13:if(an(wn),M=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(ge&&fe!==null&&(p.mode&1)!==0&&(p.flags&128)===0)pt(),_t(),p.flags|=98560,$=!1;else if($=ot(p),M!==null&&M.dehydrated!==null){if(f===null){if(!$)throw Error(r(318));if($=p.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(r(317));$[Li]=p}else _t(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;na(p),$=!1}else xe!==null&&(tg(xe),xe=null),$=!0;if(!$)return p.flags&65536?p:null}return(p.flags&128)!==0?(p.lanes=b,p):(M=M!==null,M!==(f!==null&&f.memoizedState!==null)&&M&&(p.child.flags|=8192,(p.mode&1)!==0&&(f===null||(wn.current&1)!==0?li===0&&(li=3):pp())),p.updateQueue!==null&&(p.flags|=4),na(p),null);case 4:return vo(),Pf(f,p),f===null&&ts(p.stateNode.containerInfo),na(p),null;case 10:return xa(p.type._context),na(p),null;case 17:return pi(p.type)&&Qu(),na(p),null;case 19:if(an(wn),$=p.memoizedState,$===null)return na(p),null;if(M=(p.flags&128)!==0,ae=$.rendering,ae===null)if(M)fh($,!1);else{if(li!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(ae=_o(f),ae!==null){for(p.flags|=128,fh($,!1),M=ae.updateQueue,M!==null&&(p.updateQueue=M,p.flags|=4),p.subtreeFlags=0,M=b,b=p.child;b!==null;)$=b,f=M,$.flags&=14680066,ae=$.alternate,ae===null?($.childLanes=0,$.lanes=f,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=ae.childLanes,$.lanes=ae.lanes,$.child=ae.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=ae.memoizedProps,$.memoizedState=ae.memoizedState,$.updateQueue=ae.updateQueue,$.type=ae.type,f=ae.dependencies,$.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),b=b.sibling;return fn(wn,wn.current&1|2),p.child}f=f.sibling}$.tail!==null&&cr()>Sn&&(p.flags|=128,M=!0,fh($,!1),p.lanes=4194304)}else{if(!M)if(f=_o(ae),f!==null){if(p.flags|=128,M=!0,b=f.updateQueue,b!==null&&(p.updateQueue=b,p.flags|=4),fh($,!0),$.tail===null&&$.tailMode==="hidden"&&!ae.alternate&&!ge)return na(p),null}else 2*cr()-$.renderingStartTime>Sn&&b!==1073741824&&(p.flags|=128,M=!0,fh($,!1),p.lanes=4194304);$.isBackwards?(ae.sibling=p.child,p.child=ae):(b=$.last,b!==null?b.sibling=ae:p.child=ae,$.last=ae)}return $.tail!==null?(p=$.tail,$.rendering=p,$.tail=p.sibling,$.renderingStartTime=cr(),p.sibling=null,b=wn.current,fn(wn,M?b&1|2:b&1),p):(na(p),null);case 22:case 23:return zf(),M=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==M&&(p.flags|=8192),M&&(p.mode&1)!==0?(aa&1073741824)!==0&&(na(p),p.subtreeFlags&6&&(p.flags|=8192)):na(p),null;case 24:return null;case 25:return null}throw Error(r(156,p.tag))}function Ax(f,p){switch(se(p),p.tag){case 1:return pi(p.type)&&Qu(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return vo(),an(kr),an(Kr),iu(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 5:return df(p),null;case 13:if(an(wn),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));_t()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return an(wn),null;case 4:return vo(),null;case 10:return xa(p.type._context),null;case 22:case 23:return zf(),null;case 24:return null;default:return null}}var ap=!1,ia=!1,cu=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function ac(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(M){Mn(f,p,M)}else b.current=null}function hu(f,p,b){try{b()}catch(M){Mn(f,p,M)}}var uv=!1;function kx(f,p){if(ns=al,f=Yc(),Cs(f)){if("selectionStart"in f)var b={start:f.selectionStart,end:f.selectionEnd};else e:{b=(b=f.ownerDocument)&&b.defaultView||window;var M=b.getSelection&&b.getSelection();if(M&&M.rangeCount!==0){b=M.anchorNode;var j=M.anchorOffset,$=M.focusNode;M=M.focusOffset;try{b.nodeType,$.nodeType}catch{b=null;break e}var ae=0,be=-1,Ee=-1,et=0,dt=0,gt=f,ht=null;t:for(;;){for(var Et;gt!==b||j!==0&&gt.nodeType!==3||(be=ae+j),gt!==$||M!==0&&gt.nodeType!==3||(Ee=ae+M),gt.nodeType===3&&(ae+=gt.nodeValue.length),(Et=gt.firstChild)!==null;)ht=gt,gt=Et;for(;;){if(gt===f)break t;if(ht===b&&++et===j&&(be=ae),ht===$&&++dt===M&&(Ee=ae),(Et=gt.nextSibling)!==null)break;gt=ht,ht=gt.parentNode}gt=Et}b=be===-1||Ee===-1?null:{start:be,end:Ee}}else b=null}b=b||{start:0,end:0}}else b=null;for(lf={focusedElem:f,selectionRange:b},al=!1,Wt=p;Wt!==null;)if(p=Wt,f=p.child,(p.subtreeFlags&1028)!==0&&f!==null)f.return=p,Wt=f;else for(;Wt!==null;){p=Wt;try{var Vt=p.alternate;if((p.flags&1024)!==0)switch(p.tag){case 0:case 11:case 15:break;case 1:if(Vt!==null){var Kt=Vt.memoizedProps,Un=Vt.memoizedState,Ze=p.stateNode,Ie=Ze.getSnapshotBeforeUpdate(p.elementType===p.type?Kt:Fo(p.type,Kt),Un);Ze.__reactInternalSnapshotBeforeUpdate=Ie}break;case 3:var Ke=p.stateNode.containerInfo;Ke.nodeType===1?Ke.textContent="":Ke.nodeType===9&&Ke.documentElement&&Ke.removeChild(Ke.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(St){Mn(p,p.return,St)}if(f=p.sibling,f!==null){f.return=p.return,Wt=f;break}Wt=p.return}return Vt=uv,uv=!1,Vt}function Af(f,p,b){var M=p.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var j=M=M.next;do{if((j.tag&f)===f){var $=j.destroy;j.destroy=void 0,$!==void 0&&hu(p,b,$)}j=j.next}while(j!==M)}}function kf(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var M=b.create;b.destroy=M()}b=b.next}while(b!==p)}}function op(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=b;break;default:f=b}typeof p=="function"?p(f):p.current=f}}function cv(f){var p=f.alternate;p!==null&&(f.alternate=null,cv(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&(delete p[Li],delete p[zo],delete p[Pr],delete p[cf],delete p[zm])),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function hv(f){return f.tag===5||f.tag===3||f.tag===4}function fv(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||hv(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function Jm(f,p,b){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?b.nodeType===8?b.parentNode.insertBefore(f,p):b.insertBefore(f,p):(b.nodeType===8?(p=b.parentNode,p.insertBefore(f,b)):(p=b,p.appendChild(f)),b=b._reactRootContainer,b!=null||p.onclick!==null||(p.onclick=ea));else if(M!==4&&(f=f.child,f!==null))for(Jm(f,p,b),f=f.sibling;f!==null;)Jm(f,p,b),f=f.sibling}function Ef(f,p,b){var M=f.tag;if(M===5||M===6)f=f.stateNode,p?b.insertBefore(f,p):b.appendChild(f);else if(M!==4&&(f=f.child,f!==null))for(Ef(f,p,b),f=f.sibling;f!==null;)Ef(f,p,b),f=f.sibling}var ei=null,So=!1;function fu(f,p,b){for(b=b.child;b!==null;)dv(f,p,b),b=b.sibling}function dv(f,p,b){if(zi&&typeof zi.onCommitFiberUnmount=="function")try{zi.onCommitFiberUnmount(Si,b)}catch{}switch(b.tag){case 5:ia||ac(b,p);case 6:var M=ei,j=So;ei=null,fu(f,p,b),ei=M,So=j,ei!==null&&(So?(f=ei,b=b.stateNode,f.nodeType===8?f.parentNode.removeChild(b):f.removeChild(b)):ei.removeChild(b.stateNode));break;case 18:ei!==null&&(So?(f=ei,b=b.stateNode,f.nodeType===8?Ot(f.parentNode,b):f.nodeType===1&&Ot(f,b),Go(f)):Ot(ei,b.stateNode));break;case 4:M=ei,j=So,ei=b.stateNode.containerInfo,So=!0,fu(f,p,b),ei=M,So=j;break;case 0:case 11:case 14:case 15:if(!ia&&(M=b.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){j=M=M.next;do{var $=j,ae=$.destroy;$=$.tag,ae!==void 0&&(($&2)!==0||($&4)!==0)&&hu(b,p,ae),j=j.next}while(j!==M)}fu(f,p,b);break;case 1:if(!ia&&(ac(b,p),M=b.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=b.memoizedProps,M.state=b.memoizedState,M.componentWillUnmount()}catch(be){Mn(b,p,be)}fu(f,p,b);break;case 21:fu(f,p,b);break;case 22:b.mode&1?(ia=(M=ia)||b.memoizedState!==null,fu(f,p,b),ia=M):fu(f,p,b);break;default:fu(f,p,b)}}function Qm(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new cu),p.forEach(function(M){var j=Pv.bind(null,f,M);b.has(M)||(b.add(M),M.then(j,j))})}}function ls(f,p){var b=p.deletions;if(b!==null)for(var M=0;M<b.length;M++){var j=b[M];try{var $=f,ae=p,be=ae;e:for(;be!==null;){switch(be.tag){case 5:ei=be.stateNode,So=!1;break e;case 3:ei=be.stateNode.containerInfo,So=!0;break e;case 4:ei=be.stateNode.containerInfo,So=!0;break e}be=be.return}if(ei===null)throw Error(r(160));dv($,ae,j),ei=null,So=!1;var Ee=j.alternate;Ee!==null&&(Ee.return=null),j.return=null}catch(et){Mn(j,p,et)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)pv(p,f),p=p.sibling}function pv(f,p){var b=f.alternate,M=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(ls(p,f),Na(f),M&4){try{Af(3,f,f.return),kf(3,f)}catch(Kt){Mn(f,f.return,Kt)}try{Af(5,f,f.return)}catch(Kt){Mn(f,f.return,Kt)}}break;case 1:ls(p,f),Na(f),M&512&&b!==null&&ac(b,b.return);break;case 5:if(ls(p,f),Na(f),M&512&&b!==null&&ac(b,b.return),f.flags&32){var j=f.stateNode;try{Xn(j,"")}catch(Kt){Mn(f,f.return,Kt)}}if(M&4&&(j=f.stateNode,j!=null)){var $=f.memoizedProps,ae=b!==null?b.memoizedProps:$,be=f.type,Ee=f.updateQueue;if(f.updateQueue=null,Ee!==null)try{be==="input"&&$.type==="radio"&&$.name!=null&&Ve(j,$),pa(be,ae);var et=pa(be,$);for(ae=0;ae<Ee.length;ae+=2){var dt=Ee[ae],gt=Ee[ae+1];dt==="style"?yr(j,gt):dt==="dangerouslySetInnerHTML"?io(j,gt):dt==="children"?Xn(j,gt):K(j,dt,gt,et)}switch(be){case"input":Gr(j,$);break;case"textarea":Eo(j,$);break;case"select":var ht=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!$.multiple;var Et=$.value;Et!=null?ri(j,!!$.multiple,Et,!1):ht!==!!$.multiple&&($.defaultValue!=null?ri(j,!!$.multiple,$.defaultValue,!0):ri(j,!!$.multiple,$.multiple?[]:"",!1))}j[zo]=$}catch(Kt){Mn(f,f.return,Kt)}}break;case 6:if(ls(p,f),Na(f),M&4){if(f.stateNode===null)throw Error(r(162));j=f.stateNode,$=f.memoizedProps;try{j.nodeValue=$}catch(Kt){Mn(f,f.return,Kt)}}break;case 3:if(ls(p,f),Na(f),M&4&&b!==null&&b.memoizedState.isDehydrated)try{Go(p.containerInfo)}catch(Kt){Mn(f,f.return,Kt)}break;case 4:ls(p,f),Na(f);break;case 13:ls(p,f),Na(f),j=f.child,j.flags&8192&&($=j.memoizedState!==null,j.stateNode.isHidden=$,!$||j.alternate!==null&&j.alternate.memoizedState!==null||(sc=cr())),M&4&&Qm(f);break;case 22:if(dt=b!==null&&b.memoizedState!==null,f.mode&1?(ia=(et=ia)||dt,ls(p,f),ia=et):ls(p,f),Na(f),M&8192){if(et=f.memoizedState!==null,(f.stateNode.isHidden=et)&&!dt&&(f.mode&1)!==0)for(Wt=f,dt=f.child;dt!==null;){for(gt=Wt=dt;Wt!==null;){switch(ht=Wt,Et=ht.child,ht.tag){case 0:case 11:case 14:case 15:Af(4,ht,ht.return);break;case 1:ac(ht,ht.return);var Vt=ht.stateNode;if(typeof Vt.componentWillUnmount=="function"){M=ht,b=ht.return;try{p=M,Vt.props=p.memoizedProps,Vt.state=p.memoizedState,Vt.componentWillUnmount()}catch(Kt){Mn(M,b,Kt)}}break;case 5:ac(ht,ht.return);break;case 22:if(ht.memoizedState!==null){vv(gt);continue}}Et!==null?(Et.return=ht,Wt=Et):vv(gt)}dt=dt.sibling}e:for(dt=null,gt=f;;){if(gt.tag===5){if(dt===null){dt=gt;try{j=gt.stateNode,et?($=j.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(be=gt.stateNode,Ee=gt.memoizedProps.style,ae=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null,be.style.display=bt("display",ae))}catch(Kt){Mn(f,f.return,Kt)}}}else if(gt.tag===6){if(dt===null)try{gt.stateNode.nodeValue=et?"":gt.memoizedProps}catch(Kt){Mn(f,f.return,Kt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===f)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===f)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===f)break e;dt===gt&&(dt=null),gt=gt.return}dt===gt&&(dt=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:ls(p,f),Na(f),M&4&&Qm(f);break;case 21:break;default:ls(p,f),Na(f)}}function Na(f){var p=f.flags;if(p&2){try{e:{for(var b=f.return;b!==null;){if(hv(b)){var M=b;break e}b=b.return}throw Error(r(160))}switch(M.tag){case 5:var j=M.stateNode;M.flags&32&&(Xn(j,""),M.flags&=-33);var $=fv(f);Ef(f,$,j);break;case 3:case 4:var ae=M.stateNode.containerInfo,be=fv(f);Jm(f,be,ae);break;default:throw Error(r(161))}}catch(Ee){Mn(f,f.return,Ee)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function mv(f,p,b){Wt=f,gv(f)}function gv(f,p,b){for(var M=(f.mode&1)!==0;Wt!==null;){var j=Wt,$=j.child;if(j.tag===22&&M){var ae=j.memoizedState!==null||ap;if(!ae){var be=j.alternate,Ee=be!==null&&be.memoizedState!==null||ia;be=ap;var et=ia;if(ap=ae,(ia=Ee)&&!et)for(Wt=j;Wt!==null;)ae=Wt,Ee=ae.child,ae.tag===22&&ae.memoizedState!==null?_v(j):Ee!==null?(Ee.return=ae,Wt=Ee):_v(j);for(;$!==null;)Wt=$,gv($),$=$.sibling;Wt=j,ap=be,ia=et}yv(f)}else(j.subtreeFlags&8772)!==0&&$!==null?($.return=j,Wt=$):yv(f)}}function yv(f){for(;Wt!==null;){var p=Wt;if((p.flags&8772)!==0){var b=p.alternate;try{if((p.flags&8772)!==0)switch(p.tag){case 0:case 11:case 15:ia||kf(5,p);break;case 1:var M=p.stateNode;if(p.flags&4&&!ia)if(b===null)M.componentDidMount();else{var j=p.elementType===p.type?b.memoizedProps:Fo(p.type,b.memoizedProps);M.componentDidUpdate(j,b.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var $=p.updateQueue;$!==null&&Ba(p,$,M);break;case 3:var ae=p.updateQueue;if(ae!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=p.child.stateNode;break;case 1:b=p.child.stateNode}Ba(p,ae,b)}break;case 5:var be=p.stateNode;if(b===null&&p.flags&4){b=be;var Ee=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ee.autoFocus&&b.focus();break;case"img":Ee.src&&(b.src=Ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var et=p.alternate;if(et!==null){var dt=et.memoizedState;if(dt!==null){var gt=dt.dehydrated;gt!==null&&Go(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ia||p.flags&512&&op(p)}catch(ht){Mn(p,p.return,ht)}}if(p===f){Wt=null;break}if(b=p.sibling,b!==null){b.return=p.return,Wt=b;break}Wt=p.return}}function vv(f){for(;Wt!==null;){var p=Wt;if(p===f){Wt=null;break}var b=p.sibling;if(b!==null){b.return=p.return,Wt=b;break}Wt=p.return}}function _v(f){for(;Wt!==null;){var p=Wt;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{kf(4,p)}catch(Ee){Mn(p,b,Ee)}break;case 1:var M=p.stateNode;if(typeof M.componentDidMount=="function"){var j=p.return;try{M.componentDidMount()}catch(Ee){Mn(p,j,Ee)}}var $=p.return;try{op(p)}catch(Ee){Mn(p,$,Ee)}break;case 5:var ae=p.return;try{op(p)}catch(Ee){Mn(p,ae,Ee)}}}catch(Ee){Mn(p,p.return,Ee)}if(p===f){Wt=null;break}var be=p.sibling;if(be!==null){be.return=p.return,Wt=be;break}Wt=p.return}}var Ex=Math.ceil,sp=re.ReactCurrentDispatcher,lp=re.ReactCurrentOwner,$a=re.ReactCurrentBatchConfig,Br=0,yi=null,ti=null,Bi=0,aa=0,dh=Ds(0),li=0,Mf=null,oc=0,up=0,cp=0,Cf=null,Va=null,sc=0,Sn=1/0,js=null,Of=!1,hp=null,Cr=null,ph=!1,vl=null,If=0,To=0,du=null,Df=-1,fp=0;function Pa(){return(Br&6)!==0?cr():Df!==-1?Df:Df=cr()}function pu(f){return(f.mode&1)===0?1:(Br&2)!==0&&Bi!==0?Bi&-Bi:xt.transition!==null?(fp===0&&(fp=Ho()),fp):(f=qr,f!==0||(f=window.event,f=f===void 0?16:Ps(f.type)),f)}function us(f,p,b,M){if(50<To)throw To=0,du=null,Error(r(185));nl(f,b,M),((Br&2)===0||f!==yi)&&(f===yi&&((Br&2)===0&&(up|=b),li===4&&cs(f,Bi)),qa(f,M),b===1&&Br===0&&(p.mode&1)===0&&(Sn=cr()+500,Yt&&P()))}function qa(f,p){var b=f.callbackNode;Lc(f,p);var M=Ki(f,f===yi?Bi:0);if(M===0)b!==null&&ii(b),f.callbackNode=null,f.callbackPriority=0;else if(p=M&-M,f.callbackPriority!==p){if(b!=null&&ii(b),p===1)f.tag===0?hf(lc.bind(null,f)):ec(lc.bind(null,f)),Ql(function(){(Br&6)===0&&P()}),b=null;else{switch(zu(M)){case 1:b=Iu;break;case 4:b=Zi;break;case 16:b=wi;break;case 536870912:b=ga;break;default:b=wi}b=ig(b,xv.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function xv(f,p){if(Df=-1,fp=0,(Br&6)!==0)throw Error(r(327));var b=f.callbackNode;if(fs()&&f.callbackNode!==b)return null;var M=Ki(f,f===yi?Bi:0);if(M===0)return null;if((M&30)!==0||(M&f.expiredLanes)!==0||p)p=Rf(f,M);else{p=M;var j=Br;Br|=2;var $=wv();(yi!==f||Bi!==p)&&(js=null,Sn=cr()+500,uc(f,p));do try{rg();break}catch(be){bv(f,be)}while(!0);oi(),sp.current=$,Br=j,ti!==null?p=0:(yi=null,Bi=0,p=li)}if(p!==0){if(p===2&&(j=Wo(f),j!==0&&(M=j,p=eg(f,j))),p===1)throw b=Mf,uc(f,0),cs(f,M),qa(f,cr()),b;if(p===6)cs(f,M);else{if(j=f.current.alternate,(M&30)===0&&!Mx(j)&&(p=Rf(f,M),p===2&&($=Wo(f),$!==0&&(M=$,p=eg(f,$))),p===1))throw b=Mf,uc(f,0),cs(f,M),qa(f,cr()),b;switch(f.finishedWork=j,f.finishedLanes=M,p){case 0:case 1:throw Error(r(345));case 2:hs(f,Va,js);break;case 3:if(cs(f,M),(M&130023424)===M&&(p=sc+500-cr(),10<p)){if(Ki(f,0)!==0)break;if(j=f.suspendedLanes,(j&M)!==M){Pa(),f.pingedLanes|=f.suspendedLanes&j;break}f.timeoutHandle=rh(hs.bind(null,f,Va,js),p);break}hs(f,Va,js);break;case 4:if(cs(f,M),(M&4194240)===M)break;for(p=f.eventTimes,j=-1;0<M;){var ae=31-Hr(M);$=1<<ae,ae=p[ae],ae>j&&(j=ae),M&=~$}if(M=j,M=cr()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*Ex(M/1960))-M,10<M){f.timeoutHandle=rh(hs.bind(null,f,Va,js),M);break}hs(f,Va,js);break;case 5:hs(f,Va,js);break;default:throw Error(r(329))}}}return qa(f,cr()),f.callbackNode===b?xv.bind(null,f):null}function eg(f,p){var b=Cf;return f.current.memoizedState.isDehydrated&&(uc(f,p).flags|=256),f=Rf(f,p),f!==2&&(p=Va,Va=b,p!==null&&tg(p)),f}function tg(f){Va===null?Va=f:Va.push.apply(Va,f)}function Mx(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var M=0;M<b.length;M++){var j=b[M],$=j.getSnapshot;j=j.value;try{if(!Ji($(),j))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function cs(f,p){for(p&=~cp,p&=~up,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-Hr(p),M=1<<b;f[b]=-1,p&=~M}}function lc(f){if((Br&6)!==0)throw Error(r(327));fs();var p=Ki(f,0);if((p&1)===0)return qa(f,cr()),null;var b=Rf(f,p);if(f.tag!==0&&b===2){var M=Wo(f);M!==0&&(p=M,b=eg(f,M))}if(b===1)throw b=Mf,uc(f,0),cs(f,p),qa(f,cr()),b;if(b===6)throw Error(r(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,hs(f,Va,js),qa(f,cr()),null}function dp(f,p){var b=Br;Br|=1;try{return f(p)}finally{Br=b,Br===0&&(Sn=cr()+500,Yt&&P())}}function _l(f){vl!==null&&vl.tag===0&&(Br&6)===0&&fs();var p=Br;Br|=1;var b=$a.transition,M=qr;try{if($a.transition=null,qr=1,f)return f()}finally{qr=M,$a.transition=b,Br=p,(Br&6)===0&&P()}}function zf(){aa=dh.current,an(dh)}function uc(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==-1&&(f.timeoutHandle=-1,Vd(b)),ti!==null)for(b=ti.return;b!==null;){var M=b;switch(se(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Qu();break;case 3:vo(),an(kr),an(Kr),iu();break;case 5:df(M);break;case 4:vo();break;case 13:an(wn);break;case 19:an(wn);break;case 10:xa(M.type._context);break;case 22:case 23:zf()}b=b.return}if(yi=f,ti=f=mu(f.current,null),Bi=aa=p,li=0,Mf=null,cp=up=oc=0,Va=Cf=null,In!==null){for(p=0;p<In.length;p++)if(b=In[p],M=b.interleaved,M!==null){b.interleaved=null;var j=M.next,$=b.pending;if($!==null){var ae=$.next;$.next=j,M.next=ae}b.pending=M}In=null}return f}function bv(f,p){do{var b=ti;try{if(oi(),Fs.current=Zd,pf){for(var M=Qr.memoizedState;M!==null;){var j=M.queue;j!==null&&(j.pending=null),M=M.next}pf=!1}if(Lo=0,Jn=En=Qr=null,oh=!1,mf=0,lp.current=null,b===null||b.return===null){li=1,Mf=p,ti=null;break}e:{var $=f,ae=b.return,be=b,Ee=p;if(p=Bi,be.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var et=Ee,dt=be,gt=dt.tag;if((dt.mode&1)===0&&(gt===0||gt===11||gt===15)){var ht=dt.alternate;ht?(dt.updateQueue=ht.updateQueue,dt.memoizedState=ht.memoizedState,dt.lanes=ht.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var Et=ev(ae);if(Et!==null){Et.flags&=-257,tv(Et,ae,be,$,p),Et.mode&1&&Qy($,et,p),p=Et,Ee=et;var Vt=p.updateQueue;if(Vt===null){var Kt=new Set;Kt.add(Ee),p.updateQueue=Kt}else Vt.add(Ee);break e}else{if((p&1)===0){Qy($,et,p),pp();break e}Ee=Error(r(426))}}else if(ge&&be.mode&1){var Un=ev(ae);if(Un!==null){(Un.flags&65536)===0&&(Un.flags|=256),tv(Un,ae,be,$,p),kt(Ti(Ee,be));break e}}$=Ee=Ti(Ee,be),li!==4&&(li=2),Cf===null?Cf=[$]:Cf.push($),$=ae;do{switch($.tag){case 3:$.flags|=65536,p&=-p,$.lanes|=p;var Ze=Wm($,Ee,p);wa($,Ze);break e;case 1:be=Ee;var Ie=$.type,Ke=$.stateNode;if(($.flags&128)===0&&(typeof Ie.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(Cr===null||!Cr.has(Ke)))){$.flags|=65536,p&=-p,$.lanes|=p;var St=Jy($,be,p);wa($,St);break e}}$=$.return}while($!==null)}xl(b)}catch(Jt){p=Jt,ti===b&&b!==null&&(ti=b=b.return);continue}break}while(!0)}function wv(){var f=sp.current;return sp.current=Zd,f===null?Zd:f}function pp(){(li===0||li===3||li===2)&&(li=4),yi===null||(oc&268435455)===0&&(up&268435455)===0||cs(yi,Bi)}function Rf(f,p){var b=Br;Br|=2;var M=wv();(yi!==f||Bi!==p)&&(js=null,uc(f,p));do try{Aa();break}catch(j){bv(f,j)}while(!0);if(oi(),Br=b,sp.current=M,ti!==null)throw Error(r(261));return yi=null,Bi=0,li}function Aa(){for(;ti!==null;)ng(ti)}function rg(){for(;ti!==null&&!Di();)ng(ti)}function ng(f){var p=Av(f.alternate,f,aa);f.memoizedProps=f.pendingProps,p===null?xl(f):ti=p,lp.current=null}function xl(f){var p=f;do{var b=p.alternate;if(f=p.return,(p.flags&32768)===0){if(b=Px(b,p,aa),b!==null){ti=b;return}}else{if(b=Ax(b,p),b!==null){b.flags&=32767,ti=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{li=6,ti=null;return}}if(p=p.sibling,p!==null){ti=p;return}ti=p=f}while(p!==null);li===0&&(li=5)}function hs(f,p,b){var M=qr,j=$a.transition;try{$a.transition=null,qr=1,Lf(f,p,b,M)}finally{$a.transition=j,qr=M}return null}function Lf(f,p,b,M){do fs();while(vl!==null);if((Br&6)!==0)throw Error(r(327));b=f.finishedWork;var j=f.finishedLanes;if(b===null)return null;if(f.finishedWork=null,f.finishedLanes=0,b===f.current)throw Error(r(177));f.callbackNode=null,f.callbackPriority=0;var $=b.lanes|b.childLanes;if(Vh(f,$),f===yi&&(ti=yi=null,Bi=0),(b.subtreeFlags&2064)===0&&(b.flags&2064)===0||ph||(ph=!0,ig(wi,function(){return fs(),null})),$=(b.flags&15990)!==0,(b.subtreeFlags&15990)!==0||$){$=$a.transition,$a.transition=null;var ae=qr;qr=1;var be=Br;Br|=4,lp.current=null,kx(f,b),pv(b,f),Uu(lf),al=!!ns,lf=ns=null,f.current=b,mv(b),Ll(),Br=be,qr=ae,$a.transition=$}else f.current=b;if(ph&&(ph=!1,vl=f,If=j),$=f.pendingLanes,$===0&&(Cr=null),el(b.stateNode),qa(f,cr()),p!==null)for(M=f.onRecoverableError,b=0;b<p.length;b++)j=p[b],M(j.value,{componentStack:j.stack,digest:j.digest});if(Of)throw Of=!1,f=hp,hp=null,f;return(If&1)!==0&&f.tag!==0&&fs(),$=f.pendingLanes,($&1)!==0?f===du?To++:(To=0,du=f):To=0,P(),null}function fs(){if(vl!==null){var f=zu(If),p=$a.transition,b=qr;try{if($a.transition=null,qr=16>f?16:f,vl===null)var M=!1;else{if(f=vl,vl=null,If=0,(Br&6)!==0)throw Error(r(331));var j=Br;for(Br|=4,Wt=f.current;Wt!==null;){var $=Wt,ae=$.child;if((Wt.flags&16)!==0){var be=$.deletions;if(be!==null){for(var Ee=0;Ee<be.length;Ee++){var et=be[Ee];for(Wt=et;Wt!==null;){var dt=Wt;switch(dt.tag){case 0:case 11:case 15:Af(8,dt,$)}var gt=dt.child;if(gt!==null)gt.return=dt,Wt=gt;else for(;Wt!==null;){dt=Wt;var ht=dt.sibling,Et=dt.return;if(cv(dt),dt===et){Wt=null;break}if(ht!==null){ht.return=Et,Wt=ht;break}Wt=Et}}}var Vt=$.alternate;if(Vt!==null){var Kt=Vt.child;if(Kt!==null){Vt.child=null;do{var Un=Kt.sibling;Kt.sibling=null,Kt=Un}while(Kt!==null)}}Wt=$}}if(($.subtreeFlags&2064)!==0&&ae!==null)ae.return=$,Wt=ae;else e:for(;Wt!==null;){if($=Wt,($.flags&2048)!==0)switch($.tag){case 0:case 11:case 15:Af(9,$,$.return)}var Ze=$.sibling;if(Ze!==null){Ze.return=$.return,Wt=Ze;break e}Wt=$.return}}var Ie=f.current;for(Wt=Ie;Wt!==null;){ae=Wt;var Ke=ae.child;if((ae.subtreeFlags&2064)!==0&&Ke!==null)Ke.return=ae,Wt=Ke;else e:for(ae=Ie;Wt!==null;){if(be=Wt,(be.flags&2048)!==0)try{switch(be.tag){case 0:case 11:case 15:kf(9,be)}}catch(Jt){Mn(be,be.return,Jt)}if(be===ae){Wt=null;break e}var St=be.sibling;if(St!==null){St.return=be.return,Wt=St;break e}Wt=be.return}}if(Br=j,P(),zi&&typeof zi.onPostCommitFiberRoot=="function")try{zi.onPostCommitFiberRoot(Si,f)}catch{}M=!0}return M}finally{qr=b,$a.transition=p}}return!1}function Ff(f,p,b){p=Ti(b,p),p=Wm(f,p,1),f=Ro(f,p,1),p=Pa(),f!==null&&(nl(f,1,p),qa(f,p))}function Mn(f,p,b){if(f.tag===3)Ff(f,f,b);else for(;p!==null;){if(p.tag===3){Ff(p,f,b);break}else if(p.tag===1){var M=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Cr===null||!Cr.has(M))){f=Ti(b,f),f=Jy(p,f,1),p=Ro(p,f,1),f=Pa(),p!==null&&(nl(p,1,f),qa(p,f));break}}p=p.return}}function Cx(f,p,b){var M=f.pingCache;M!==null&&M.delete(p),p=Pa(),f.pingedLanes|=f.suspendedLanes&b,yi===f&&(Bi&b)===b&&(li===4||li===3&&(Bi&130023424)===Bi&&500>cr()-sc?uc(f,0):cp|=b),qa(f,p)}function Sv(f,p){p===0&&((f.mode&1)===0?p=1:(p=Xi,Xi<<=1,(Xi&130023424)===0&&(Xi=4194304)));var b=Pa();f=ta(f,p),f!==null&&(nl(f,p,b),qa(f,b))}function Tv(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),Sv(f,b)}function Pv(f,p){var b=0;switch(f.tag){case 13:var M=f.stateNode,j=f.memoizedState;j!==null&&(b=j.retryLane);break;case 19:M=f.stateNode;break;default:throw Error(r(314))}M!==null&&M.delete(p),Sv(f,b)}var Av;Av=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||kr.current)Ta=!0;else{if((f.lanes&b)===0&&(p.flags&128)===0)return Ta=!1,Km(f,p,b);Ta=(f.flags&131072)!==0}else Ta=!1,ge&&(p.flags&1048576)!==0&&Z(p,_,p.index);switch(p.lanes=0,p.tag){case 2:var M=p.type;Tf(f,p),f=p.pendingProps;var j=as(p,Kr.current);Yn(p,b),j=os(null,p,M,f,j,b);var $=xo();return p.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,pi(M)?($=!0,_a(p)):$=!1,p.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Rs(p),j.updater=Yd,p.stateNode=j,j._reactInternals=p,nc(p,M,f,b),p=Gm(null,p,M,!0,$,b)):(p.tag=0,ge&&$&&ne(p),Qn(null,p,j,b),p=p.child),p;case 16:M=p.elementType;e:{switch(Tf(f,p),f=p.pendingProps,j=M._init,M=j(M._payload),p.type=M,j=p.tag=Ox(M),f=Fo(M,f),j){case 0:p=Hm(null,p,M,f,b);break e;case 1:p=sv(null,p,M,f,b);break e;case 11:p=ch(null,p,M,f,b);break e;case 14:p=nv(null,p,M,Fo(M.type,f),b);break e}throw Error(r(306,M,""))}return p;case 0:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:Fo(M,j),Hm(f,p,M,j,b);case 1:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:Fo(M,j),sv(f,p,M,j,b);case 3:e:{if(tp(p),f===null)throw Error(r(387));M=p.pendingProps,$=p.memoizedState,j=$.element,ba(f,p),yo(p,M,null,b);var ae=p.memoizedState;if(M=ae.element,$.isDehydrated)if($={element:M,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=$,p.memoizedState=$,p.flags&256){j=Ti(Error(r(423)),p),p=lv(f,p,M,b,j);break e}else if(M!==j){j=Ti(Error(r(424)),p),p=lv(f,p,M,b,j);break e}else for(fe=ho(p.stateNode.containerInfo.firstChild),ce=p,ge=!0,xe=null,b=ir(p,null,M,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(_t(),M===j){p=wo(f,p,b);break e}Qn(f,p,M,b)}p=p.child}return p;case 5:return ff(p),f===null&&ze(p),M=p.type,j=p.pendingProps,$=f!==null?f.memoizedProps:null,ae=j.children,uf(M,j)?ae=null:$!==null&&uf(M,$)&&(p.flags|=32),ov(f,p),Qn(f,p,ae,b),p.child;case 6:return f===null&&ze(p),null;case 13:return Dn(f,p,b);case 4:return Ls(p,p.stateNode.containerInfo),M=p.pendingProps,f===null?p.child=Tt(p,null,M,b):Qn(f,p,M,b),p.child;case 11:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:Fo(M,j),ch(f,p,M,j,b);case 7:return Qn(f,p,p.pendingProps,b),p.child;case 8:return Qn(f,p,p.pendingProps.children,b),p.child;case 12:return Qn(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(M=p.type._context,j=p.pendingProps,$=p.memoizedProps,ae=j.value,fn(Zr,M._currentValue),M._currentValue=ae,$!==null)if(Ji($.value,ae)){if($.children===j.children&&!kr.current){p=wo(f,p,b);break e}}else for($=p.child,$!==null&&($.return=p);$!==null;){var be=$.dependencies;if(be!==null){ae=$.child;for(var Ee=be.firstContext;Ee!==null;){if(Ee.context===M){if($.tag===1){Ee=ja(-1,b&-b),Ee.tag=2;var et=$.updateQueue;if(et!==null){et=et.shared;var dt=et.pending;dt===null?Ee.next=Ee:(Ee.next=dt.next,dt.next=Ee),et.pending=Ee}}$.lanes|=b,Ee=$.alternate,Ee!==null&&(Ee.lanes|=b),Jr($.return,b,p),be.lanes|=b;break}Ee=Ee.next}}else if($.tag===10)ae=$.type===p.type?null:$.child;else if($.tag===18){if(ae=$.return,ae===null)throw Error(r(341));ae.lanes|=b,be=ae.alternate,be!==null&&(be.lanes|=b),Jr(ae,b,p),ae=$.sibling}else ae=$.child;if(ae!==null)ae.return=$;else for(ae=$;ae!==null;){if(ae===p){ae=null;break}if($=ae.sibling,$!==null){$.return=ae.return,ae=$;break}ae=ae.return}$=ae}Qn(f,p,j.children,b),p=p.child}return p;case 9:return j=p.type,M=p.pendingProps.children,Yn(p,b),j=dn(j),M=M(j),p.flags|=1,Qn(f,p,M,b),p.child;case 14:return M=p.type,j=Fo(M,p.pendingProps),j=Fo(M.type,j),nv(f,p,M,j,b);case 15:return iv(f,p,p.type,p.pendingProps,b);case 17:return M=p.type,j=p.pendingProps,j=p.elementType===M?j:Fo(M,j),Tf(f,p),p.tag=1,pi(M)?(f=!0,_a(p)):f=!1,Yn(p,b),Um(p,M,j),nc(p,M,j,b),Gm(null,p,M,!0,f,b);case 19:return Xm(f,p,b);case 22:return av(f,p,b)}throw Error(r(156,p.tag))};function ig(f,p){return Kn(f,p)}function kv(f,p,b,M){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(f,p,b,M){return new kv(f,p,b,M)}function jf(f){return f=f.prototype,!(!f||!f.isReactComponent)}function Ox(f){if(typeof f=="function")return jf(f)?1:0;if(f!=null){if(f=f.$$typeof,f===Oe)return 11;if(f===Ne)return 14}return 2}function mu(f,p){var b=f.alternate;return b===null?(b=Ua(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Bf(f,p,b,M,j,$){var ae=2;if(M=f,typeof f=="function")jf(f)&&(ae=1);else if(typeof f=="string")ae=5;else e:switch(f){case ie:return gu(b.children,j,$,p);case he:ae=8,j|=8;break;case ve:return f=Ua(12,b,p,j|2),f.elementType=ve,f.lanes=$,f;case Le:return f=Ua(13,b,p,j),f.elementType=Le,f.lanes=$,f;case Ge:return f=Ua(19,b,p,j),f.elementType=Ge,f.lanes=$,f;case Qe:return yu(b,j,$,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case Re:ae=10;break e;case de:ae=9;break e;case Oe:ae=11;break e;case Ne:ae=14;break e;case Ue:ae=16,M=null;break e}throw Error(r(130,f==null?f:typeof f,""))}return p=Ua(ae,b,p,j),p.elementType=f,p.type=M,p.lanes=$,p}function gu(f,p,b,M){return f=Ua(7,f,M,p),f.lanes=b,f}function yu(f,p,b,M){return f=Ua(22,f,M,p),f.elementType=Qe,f.lanes=b,f.stateNode={isHidden:!1},f}function jo(f,p,b){return f=Ua(6,f,null,p),f.lanes=b,f}function Bs(f,p,b){return p=Ua(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function Ev(f,p,b,M,j){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dr(0),this.expirationTimes=Dr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dr(0),this.identifierPrefix=M,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Nf(f,p,b,M,j,$,ae,be,Ee){return f=new Ev(f,p,b,be,Ee),p===1?(p=1,$===!0&&(p|=8)):p=0,$=Ua(3,null,null,p),f.current=$,$.stateNode=f,$.memoizedState={element:M,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs($),f}function Ix(f,p,b){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:M==null?null:""+M,children:f,containerInfo:p,implementation:b}}function Mv(f){if(!f)return zs;f=f._reactInternals;e:{if(gr(f)!==f||f.tag!==1)throw Error(r(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(pi(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(r(171))}if(f.tag===1){var b=f.type;if(pi(b))return tu(f,b,p)}return p}function $f(f,p,b,M,j,$,ae,be,Ee){return f=Nf(b,M,!0,f,j,$,ae,be,Ee),f.context=Mv(null),b=f.current,M=Pa(),j=pu(b),$=ja(M,j),$.callback=p??null,Ro(b,$,j),f.current.lanes=j,nl(f,j,M),qa(f,M),f}function mh(f,p,b,M){var j=p.current,$=Pa(),ae=pu(j);return b=Mv(b),p.context===null?p.context=b:p.pendingContext=b,p=ja($,ae),p.payload={element:f},M=M===void 0?null:M,M!==null&&(p.callback=M),f=Ro(j,p,ae),f!==null&&(us(f,j,ae,$),Fi(f,j,ae)),ae}function mp(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return f.child.stateNode;default:return f.child.stateNode}}function gp(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function Vf(f,p){gp(f,p),(f=f.alternate)&&gp(f,p)}function gh(){return null}var ag=typeof reportError=="function"?reportError:function(f){console.error(f)};function yp(f){this._internalRoot=f}yh.prototype.render=yp.prototype.render=function(f){var p=this._internalRoot;if(p===null)throw Error(r(409));mh(f,p,null,null)},yh.prototype.unmount=yp.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var p=f.containerInfo;_l(function(){mh(null,f,null,null)}),p[fo]=null}};function yh(f){this._internalRoot=f}yh.prototype.unstable_scheduleHydration=function(f){if(f){var p=qh();f={blockedOn:null,target:f,priority:p};for(var b=0;b<so.length&&p!==0&&p<so[b].priority;b++);so.splice(b,0,f),b===0&&Wh(f)}};function vp(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function cc(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11&&(f.nodeType!==8||f.nodeValue!==" react-mount-point-unstable "))}function og(){}function Dx(f,p,b,M,j){if(j){if(typeof M=="function"){var $=M;M=function(){var et=mp(ae);$.call(et)}}var ae=$f(p,M,f,0,null,!1,!1,"",og);return f._reactRootContainer=ae,f[fo]=ae.current,ts(f.nodeType===8?f.parentNode:f),_l(),ae}for(;j=f.lastChild;)f.removeChild(j);if(typeof M=="function"){var be=M;M=function(){var et=mp(Ee);be.call(et)}}var Ee=Nf(f,0,!1,null,null,!1,!1,"",og);return f._reactRootContainer=Ee,f[fo]=Ee.current,ts(f.nodeType===8?f.parentNode:f),_l(function(){mh(p,Ee,b,M)}),Ee}function _p(f,p,b,M,j){var $=b._reactRootContainer;if($){var ae=$;if(typeof j=="function"){var be=j;j=function(){var Ee=mp(ae);be.call(Ee)}}mh(p,ae,f,j)}else ae=Dx(b,p,f,j,M);return mp(ae)}Fl=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=rl(p.pendingLanes);b!==0&&(ws(p,b|1),qa(p,cr()),(Br&6)===0&&(Sn=cr()+500,P()))}break;case 13:_l(function(){var M=ta(f,1);if(M!==null){var j=Pa();us(M,f,1,j)}}),Vf(f,1)}},jl=function(f){if(f.tag===13){var p=ta(f,134217728);if(p!==null){var b=Pa();us(p,f,134217728,b)}Vf(f,134217728)}},il=function(f){if(f.tag===13){var p=pu(f),b=ta(f,p);if(b!==null){var M=Pa();us(b,f,p,M)}Vf(f,p)}},qh=function(){return qr},kd=function(f,p){var b=qr;try{return qr=f,p()}finally{qr=b}},ao=function(f,p,b){switch(p){case"input":if(Gr(f,b),p=b.name,b.type==="radio"&&p!=null){for(b=f;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<b.length;p++){var M=b[p];if(M!==f&&M.form===f.form){var j=Yu(M);if(!j)throw Error(r(90));Je(M),Gr(M,j)}}}break;case"textarea":Eo(f,b);break;case"select":p=b.value,p!=null&&ri(f,!!b.multiple,p,!1)}},le=dp,me=_l;var Cv={usingClientEntryPoint:!1,Events:[Ku,po,Yu,ee,Q,dp]},qf={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zx={bundleType:qf.bundleType,version:qf.version,rendererPackageName:qf.rendererPackageName,rendererConfig:qf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(f){return f=Vr(f),f===null?null:f.stateNode},findFiberByHostInstance:qf.findFiberByHostInstance||gh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{Si=xp.inject(zx),zi=xp}catch{}}return No.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cv,No.createPortal=function(f,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vp(p))throw Error(r(200));return Ix(f,p,null,b)},No.createRoot=function(f,p){if(!vp(f))throw Error(r(299));var b=!1,M="",j=ag;return p!=null&&(p.unstable_strictMode===!0&&(b=!0),p.identifierPrefix!==void 0&&(M=p.identifierPrefix),p.onRecoverableError!==void 0&&(j=p.onRecoverableError)),p=Nf(f,1,!1,null,null,b,!1,M,j),f[fo]=p.current,ts(f.nodeType===8?f.parentNode:f),new yp(p)},No.findDOMNode=function(f){if(f==null)return null;if(f.nodeType===1)return f;var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=Vr(p),f=f===null?null:f.stateNode,f},No.flushSync=function(f){return _l(f)},No.hydrate=function(f,p,b){if(!cc(p))throw Error(r(200));return _p(null,f,p,!0,b)},No.hydrateRoot=function(f,p,b){if(!vp(f))throw Error(r(405));var M=b!=null&&b.hydratedSources||null,j=!1,$="",ae=ag;if(b!=null&&(b.unstable_strictMode===!0&&(j=!0),b.identifierPrefix!==void 0&&($=b.identifierPrefix),b.onRecoverableError!==void 0&&(ae=b.onRecoverableError)),p=$f(p,null,f,1,b??null,j,!1,$,ae),f[fo]=p.current,ts(f),M)for(f=0;f<M.length;f++)b=M[f],j=b._getVersion,j=j(b._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[b,j]:p.mutableSourceEagerHydrationData.push(b,j);return new yh(p)},No.render=function(f,p,b){if(!cc(p))throw Error(r(200));return _p(null,f,p,!1,b)},No.unmountComponentAtNode=function(f){if(!cc(f))throw Error(r(40));return f._reactRootContainer?(_l(function(){_p(null,null,f,!1,function(){f._reactRootContainer=null,f[fo]=null})}),!0):!1},No.unstable_batchedUpdates=dp,No.unstable_renderSubtreeIntoContainer=function(f,p,b,M){if(!cc(b))throw Error(r(200));if(f==null||f._reactInternals===void 0)throw Error(r(38));return _p(f,p,b,!1,M)},No.version="18.3.1-next-f1338f8080-20240426",No}var rk;function A5(){if(rk)return Xx.exports;rk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xx.exports=P5(),Xx.exports}var nk;function k5(){if(nk)return jv;nk=1;var t=A5();return jv.createRoot=t.createRoot,jv.hydrateRoot=t.hydrateRoot,jv}var E5=k5();const M5=An(E5);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Dy(t){return t+.5|0}const Th=(t,e,r)=>Math.max(Math.min(t,r),e);function Ag(t){return Th(Dy(t*2.55),0,255)}function Eh(t){return Th(Dy(t*255),0,255)}function vc(t){return Th(Dy(t/2.55)/100,0,1)}function ik(t){return Th(Dy(t*100),0,100)}const Vs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},x2=[..."0123456789ABCDEF"],C5=t=>x2[t&15],O5=t=>x2[(t&240)>>4]+x2[t&15],Bv=t=>(t&240)>>4===(t&15),I5=t=>Bv(t.r)&&Bv(t.g)&&Bv(t.b)&&Bv(t.a);function D5(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Vs[t[1]]*17,g:255&Vs[t[2]]*17,b:255&Vs[t[3]]*17,a:e===5?Vs[t[4]]*17:255}:(e===7||e===9)&&(r={r:Vs[t[1]]<<4|Vs[t[2]],g:Vs[t[3]]<<4|Vs[t[4]],b:Vs[t[5]]<<4|Vs[t[6]],a:e===9?Vs[t[7]]<<4|Vs[t[8]]:255})),r}const z5=(t,e)=>t<255?e(t):"";function R5(t){var e=I5(t)?C5:O5;return t?"#"+e(t.r)+e(t.g)+e(t.b)+z5(t.a,e):void 0}const L5=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qR(t,e,r){const n=e*Math.min(r,1-r),i=(l,u=(l+t/30)%12)=>r-n*Math.max(Math.min(u-3,9-u,1),-1);return[i(0),i(8),i(4)]}function F5(t,e,r){const n=(i,l=(i+t/60)%6)=>r-r*e*Math.max(Math.min(l,4-l,1),0);return[n(5),n(3),n(1)]}function j5(t,e,r){const n=qR(t,1,.5);let i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function B5(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function aP(t){const r=t.r/255,n=t.g/255,i=t.b/255,l=Math.max(r,n,i),u=Math.min(r,n,i),s=(l+u)/2;let m,y,w;return l!==u&&(w=l-u,y=s>.5?w/(2-l-u):w/(l+u),m=B5(r,n,i,w,l),m=m*60+.5),[m|0,y||0,s]}function oP(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Eh)}function sP(t,e,r){return oP(qR,t,e,r)}function N5(t,e,r){return oP(j5,t,e,r)}function $5(t,e,r){return oP(F5,t,e,r)}function UR(t){return(t%360+360)%360}function V5(t){const e=L5.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Ag(+e[5]):Eh(+e[5]));const i=UR(+e[2]),l=+e[3]/100,u=+e[4]/100;return e[1]==="hwb"?n=N5(i,l,u):e[1]==="hsv"?n=$5(i,l,u):n=sP(i,l,u),{r:n[0],g:n[1],b:n[2],a:r}}function q5(t,e){var r=aP(t);r[0]=UR(r[0]+e),r=sP(r),t.r=r[0],t.g=r[1],t.b=r[2]}function U5(t){if(!t)return;const e=aP(t),r=e[0],n=ik(e[1]),i=ik(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${vc(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}const ak={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ok={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function W5(){const t={},e=Object.keys(ok),r=Object.keys(ak);let n,i,l,u,s;for(n=0;n<e.length;n++){for(u=s=e[n],i=0;i<r.length;i++)l=r[i],s=s.replace(l,ak[l]);l=parseInt(ok[u],16),t[s]=[l>>16&255,l>>8&255,l&255]}return t}let Nv;function H5(t){Nv||(Nv=W5(),Nv.transparent=[0,0,0,0]);const e=Nv[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const G5=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Z5(t){const e=G5.exec(t);let r=255,n,i,l;if(e){if(e[7]!==n){const u=+e[7];r=e[8]?Ag(u):Th(u*255,0,255)}return n=+e[1],i=+e[3],l=+e[5],n=255&(e[2]?Ag(n):Th(n,0,255)),i=255&(e[4]?Ag(i):Th(i,0,255)),l=255&(e[6]?Ag(l):Th(l,0,255)),{r:n,g:i,b:l,a:r}}}function X5(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${vc(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Jx=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Tp=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function K5(t,e,r){const n=Tp(vc(t.r)),i=Tp(vc(t.g)),l=Tp(vc(t.b));return{r:Eh(Jx(n+r*(Tp(vc(e.r))-n))),g:Eh(Jx(i+r*(Tp(vc(e.g))-i))),b:Eh(Jx(l+r*(Tp(vc(e.b))-l))),a:t.a+r*(e.a-t.a)}}function $v(t,e,r){if(t){let n=aP(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=sP(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function WR(t,e){return t&&Object.assign(e||{},t)}function sk(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Eh(t[3]))):(e=WR(t,{r:0,g:0,b:0,a:1}),e.a=Eh(e.a)),e}function Y5(t){return t.charAt(0)==="r"?Z5(t):V5(t)}let HR=class b2{constructor(e){if(e instanceof b2)return e;const r=typeof e;let n;r==="object"?n=sk(e):r==="string"&&(n=D5(e)||H5(e)||Y5(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=WR(this._rgb);return e&&(e.a=vc(e.a)),e}set rgb(e){this._rgb=sk(e)}rgbString(){return this._valid?X5(this._rgb):void 0}hexString(){return this._valid?R5(this._rgb):void 0}hslString(){return this._valid?U5(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,i=e.rgb;let l;const u=r===l?.5:r,s=2*u-1,m=n.a-i.a,y=((s*m===-1?s:(s+m)/(1+s*m))+1)/2;l=1-y,n.r=255&y*n.r+l*i.r+.5,n.g=255&y*n.g+l*i.g+.5,n.b=255&y*n.b+l*i.b+.5,n.a=u*n.a+(1-u)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=K5(this._rgb,e._rgb,r)),this}clone(){return new b2(this.rgb)}alpha(e){return this._rgb.a=Eh(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=Dy(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return $v(this._rgb,2,e),this}darken(e){return $v(this._rgb,2,-e),this}saturate(e){return $v(this._rgb,1,e),this}desaturate(e){return $v(this._rgb,1,-e),this}rotate(e){return q5(this._rgb,e),this}};/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function dc(){}const J5=(()=>{let t=0;return()=>t++})();function Fr(t){return t==null}function Hn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $r(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function fi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function gs(t,e){return fi(t)?t:e}function Ar(t,e){return typeof t>"u"?e:t}const Q5=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,GR=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function zn(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function xn(t,e,r,n){let i,l,u;if(Hn(t))for(l=t.length,i=0;i<l;i++)e.call(r,t[i],i);else if($r(t))for(u=Object.keys(t),l=u.length,i=0;i<l;i++)e.call(r,t[u[i]],u[i])}function S_(t,e){let r,n,i,l;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],l=e[r],i.datasetIndex!==l.datasetIndex||i.index!==l.index)return!1;return!0}function T_(t){if(Hn(t))return t.map(T_);if($r(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let i=0;for(;i<n;++i)e[r[i]]=T_(t[r[i]]);return e}return t}function ZR(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eN(t,e,r,n){if(!ZR(t))return;const i=e[t],l=r[t];$r(i)&&$r(l)?Wg(i,l,n):e[t]=T_(l)}function Wg(t,e,r){const n=Hn(e)?e:[e],i=n.length;if(!$r(t))return t;r=r||{};const l=r.merger||eN;let u;for(let s=0;s<i;++s){if(u=n[s],!$r(u))continue;const m=Object.keys(u);for(let y=0,w=m.length;y<w;++y)l(m[y],t,u,r)}return t}function Lg(t,e){return Wg(t,e,{merger:tN})}function tN(t,e,r){if(!ZR(t))return;const n=e[t],i=r[t];$r(n)&&$r(i)?Lg(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=T_(i))}const lk={"":t=>t,x:t=>t.x,y:t=>t.y};function rN(t){const e=t.split("."),r=[];let n="";for(const i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function nN(t){const e=rN(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function Oh(t,e){return(lk[e]||(lk[e]=nN(e)))(t)}function lP(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Hg=t=>typeof t<"u",Ih=t=>typeof t=="function",uk=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function iN(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const en=Math.PI,qn=2*en,aN=qn+en,P_=Number.POSITIVE_INFINITY,oN=en/180,_i=en/2,Hf=en/4,ck=en*2/3,Ph=Math.log10,Au=Math.sign;function Fg(t,e,r){return Math.abs(t-e)<r}function hk(t){const e=Math.round(t);t=Fg(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Ph(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function sN(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,l)=>i-l).pop(),e}function lN(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function qp(t){return!lN(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function uN(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function XR(t,e,r){let n,i,l;for(n=0,i=t.length;n<i;n++)l=t[n][r],isNaN(l)||(e.min=Math.min(e.min,l),e.max=Math.max(e.max,l))}function Ml(t){return t*(en/180)}function uP(t){return t*(180/en)}function fk(t){if(!fi(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function KR(t,e){const r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n);let l=Math.atan2(n,r);return l<-.5*en&&(l+=qn),{angle:l,distance:i}}function w2(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cN(t,e){return(t-e+aN)%qn-en}function Ja(t){return(t%qn+qn)%qn}function Gg(t,e,r,n){const i=Ja(t),l=Ja(e),u=Ja(r),s=Ja(l-i),m=Ja(u-i),y=Ja(i-l),w=Ja(i-u);return i===l||i===u||n&&l===u||s>m&&y<w}function fa(t,e,r){return Math.max(e,Math.min(r,t))}function hN(t){return fa(t,-32768,32767)}function _c(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function cP(t,e,r){r=r||(u=>t[u]<e);let n=t.length-1,i=0,l;for(;n-i>1;)l=i+n>>1,r(l)?i=l:n=l;return{lo:i,hi:n}}const xc=(t,e,r,n)=>cP(t,r,n?i=>{const l=t[i][e];return l<r||l===r&&t[i+1][e]===r}:i=>t[i][e]<r),fN=(t,e,r)=>cP(t,r,n=>t[n][e]>=r);function dN(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}const YR=["push","pop","shift","splice","unshift"];function pN(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),YR.forEach(r=>{const n="_onData"+lP(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...l){const u=i.apply(this,l);return t._chartjs.listeners.forEach(s=>{typeof s[n]=="function"&&s[n](...l)}),u}})})}function dk(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(YR.forEach(l=>{delete t[l]}),delete t._chartjs)}function JR(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const QR=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function eL(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,QR.call(window,()=>{n=!1,t.apply(e,r)}))}}function mN(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const hP=t=>t==="start"?"left":t==="end"?"right":"center",Xa=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,gN=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function tL(t,e,r){const n=e.length;let i=0,l=n;if(t._sorted){const{iScale:u,vScale:s,_parsed:m}=t,y=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,w=u.axis,{min:S,max:E,minDefined:I,maxDefined:F}=u.getUserBounds();if(I){if(i=Math.min(xc(m,w,S).lo,r?n:xc(e,w,u.getPixelForValue(S)).lo),y){const L=m.slice(0,i+1).reverse().findIndex(R=>!Fr(R[s.axis]));i-=Math.max(0,L)}i=fa(i,0,n-1)}if(F){let L=Math.max(xc(m,u.axis,E,!0).hi+1,r?0:xc(e,w,u.getPixelForValue(E),!0).hi+1);if(y){const R=m.slice(L-1).findIndex(U=>!Fr(U[s.axis]));L+=Math.max(0,R)}l=fa(L,i,n)-i}else l=n-i}return{start:i,count:l}}function rL(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;const l=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),l}const Vv=t=>t===0||t===1,pk=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*qn/r)),mk=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*qn/r)+1,jg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*_i)+1,easeOutSine:t=>Math.sin(t*_i),easeInOutSine:t=>-.5*(Math.cos(en*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Vv(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Vv(t)?t:pk(t,.075,.3),easeOutElastic:t=>Vv(t)?t:mk(t,.075,.3),easeInOutElastic(t){return Vv(t)?t:t<.5?.5*pk(t*2,.1125,.45):.5+.5*mk(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-jg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?jg.easeInBounce(t*2)*.5:jg.easeOutBounce(t*2-1)*.5+.5};function fP(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gk(t){return fP(t)?t:new HR(t)}function Qx(t){return fP(t)?t:new HR(t).saturate(.5).darken(.1).hexString()}const yN=["x","y","borderWidth","radius","tension"],vN=["color","borderColor","backgroundColor"];function _N(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:vN},numbers:{type:"number",properties:yN}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xN(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yk=new Map;function bN(t,e){e=e||{};const r=t+JSON.stringify(e);let n=yk.get(r);return n||(n=new Intl.NumberFormat(t,e),yk.set(r,n)),n}function zy(t,e,r){return bN(e,r).format(t)}const nL={values(t){return Hn(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let i,l=t;if(r.length>1){const y=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(y<1e-4||y>1e15)&&(i="scientific"),l=wN(t,r)}const u=Ph(Math.abs(l)),s=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),m={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(m,this.options.ticks.format),zy(t,n,m)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Ph(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?nL.numeric.call(this,t,e,r):""}};function wN(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var M0={formatters:nL};function SN(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:M0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const pd=Object.create(null),S2=Object.create(null);function Bg(t,e){if(!e)return t;const r=e.split(".");for(let n=0,i=r.length;n<i;++n){const l=r[n];t=t[l]||(t[l]=Object.create(null))}return t}function eb(t,e,r){return typeof e=="string"?Wg(Bg(t,e),r):Wg(Bg(t,""),e)}class TN{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>Qx(i.backgroundColor),this.hoverBorderColor=(n,i)=>Qx(i.borderColor),this.hoverColor=(n,i)=>Qx(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return eb(this,e,r)}get(e){return Bg(this,e)}describe(e,r){return eb(S2,e,r)}override(e,r){return eb(pd,e,r)}route(e,r,n,i){const l=Bg(this,e),u=Bg(this,n),s="_"+r;Object.defineProperties(l,{[s]:{value:l[r],writable:!0},[r]:{enumerable:!0,get(){const m=this[s],y=u[i];return $r(m)?Object.assign({},y,m):Ar(m,y)},set(m){this[s]=m}}})}apply(e){e.forEach(r=>r(this))}}var Gn=new TN({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_N,xN,SN]);function PN(t){return!t||Fr(t.size)||Fr(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function A_(t,e,r,n,i){let l=e[i];return l||(l=e[i]=t.measureText(i).width,r.push(i)),l>n&&(n=l),n}function AN(t,e,r,n){n=n||{};let i=n.data=n.data||{},l=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},l=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let u=0;const s=r.length;let m,y,w,S,E;for(m=0;m<s;m++)if(S=r[m],S!=null&&!Hn(S))u=A_(t,i,l,u,S);else if(Hn(S))for(y=0,w=S.length;y<w;y++)E=S[y],E!=null&&!Hn(E)&&(u=A_(t,i,l,u,E));t.restore();const I=l.length/2;if(I>r.length){for(m=0;m<I;m++)delete i[l[m]];l.splice(0,I)}return u}function Gf(t,e,r){const n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function vk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function T2(t,e,r,n){iL(t,e,r,n,null)}function iL(t,e,r,n,i){let l,u,s,m,y,w,S,E;const I=e.pointStyle,F=e.rotation,L=e.radius;let R=(F||0)*oN;if(I&&typeof I=="object"&&(l=I.toString(),l==="[object HTMLImageElement]"||l==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(R),t.drawImage(I,-I.width/2,-I.height/2,I.width,I.height),t.restore();return}if(!(isNaN(L)||L<=0)){switch(t.beginPath(),I){default:i?t.ellipse(r,n,i/2,L,0,0,qn):t.arc(r,n,L,0,qn),t.closePath();break;case"triangle":w=i?i/2:L,t.moveTo(r+Math.sin(R)*w,n-Math.cos(R)*L),R+=ck,t.lineTo(r+Math.sin(R)*w,n-Math.cos(R)*L),R+=ck,t.lineTo(r+Math.sin(R)*w,n-Math.cos(R)*L),t.closePath();break;case"rectRounded":y=L*.516,m=L-y,u=Math.cos(R+Hf)*m,S=Math.cos(R+Hf)*(i?i/2-y:m),s=Math.sin(R+Hf)*m,E=Math.sin(R+Hf)*(i?i/2-y:m),t.arc(r-S,n-s,y,R-en,R-_i),t.arc(r+E,n-u,y,R-_i,R),t.arc(r+S,n+s,y,R,R+_i),t.arc(r-E,n+u,y,R+_i,R+en),t.closePath();break;case"rect":if(!F){m=Math.SQRT1_2*L,w=i?i/2:m,t.rect(r-w,n-m,2*w,2*m);break}R+=Hf;case"rectRot":S=Math.cos(R)*(i?i/2:L),u=Math.cos(R)*L,s=Math.sin(R)*L,E=Math.sin(R)*(i?i/2:L),t.moveTo(r-S,n-s),t.lineTo(r+E,n-u),t.lineTo(r+S,n+s),t.lineTo(r-E,n+u),t.closePath();break;case"crossRot":R+=Hf;case"cross":S=Math.cos(R)*(i?i/2:L),u=Math.cos(R)*L,s=Math.sin(R)*L,E=Math.sin(R)*(i?i/2:L),t.moveTo(r-S,n-s),t.lineTo(r+S,n+s),t.moveTo(r+E,n-u),t.lineTo(r-E,n+u);break;case"star":S=Math.cos(R)*(i?i/2:L),u=Math.cos(R)*L,s=Math.sin(R)*L,E=Math.sin(R)*(i?i/2:L),t.moveTo(r-S,n-s),t.lineTo(r+S,n+s),t.moveTo(r+E,n-u),t.lineTo(r-E,n+u),R+=Hf,S=Math.cos(R)*(i?i/2:L),u=Math.cos(R)*L,s=Math.sin(R)*L,E=Math.sin(R)*(i?i/2:L),t.moveTo(r-S,n-s),t.lineTo(r+S,n+s),t.moveTo(r+E,n-u),t.lineTo(r-E,n+u);break;case"line":u=i?i/2:Math.cos(R)*L,s=Math.sin(R)*L,t.moveTo(r-u,n-s),t.lineTo(r+u,n+s);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(R)*(i?i/2:L),n+Math.sin(R)*L);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function bc(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function C0(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function O0(t){t.restore()}function kN(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){const l=(e.x+r.x)/2;t.lineTo(l,e.y),t.lineTo(l,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function EN(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function MN(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Fr(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function CN(t,e,r,n,i){if(i.strikethrough||i.underline){const l=t.measureText(n),u=e-l.actualBoundingBoxLeft,s=e+l.actualBoundingBoxRight,m=r-l.actualBoundingBoxAscent,y=r+l.actualBoundingBoxDescent,w=i.strikethrough?(m+y)/2:y;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(u,w),t.lineTo(s,w),t.stroke()}}function ON(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function md(t,e,r,n,i,l={}){const u=Hn(e)?e:[e],s=l.strokeWidth>0&&l.strokeColor!=="";let m,y;for(t.save(),t.font=i.string,MN(t,l),m=0;m<u.length;++m)y=u[m],l.backdrop&&ON(t,l.backdrop),s&&(l.strokeColor&&(t.strokeStyle=l.strokeColor),Fr(l.strokeWidth)||(t.lineWidth=l.strokeWidth),t.strokeText(y,r,n,l.maxWidth)),t.fillText(y,r,n,l.maxWidth),CN(t,r,n,y,l),n+=Number(i.lineHeight);t.restore()}function Zg(t,e){const{x:r,y:n,w:i,h:l,radius:u}=e;t.arc(r+u.topLeft,n+u.topLeft,u.topLeft,1.5*en,en,!0),t.lineTo(r,n+l-u.bottomLeft),t.arc(r+u.bottomLeft,n+l-u.bottomLeft,u.bottomLeft,en,_i,!0),t.lineTo(r+i-u.bottomRight,n+l),t.arc(r+i-u.bottomRight,n+l-u.bottomRight,u.bottomRight,_i,0,!0),t.lineTo(r+i,n+u.topRight),t.arc(r+i-u.topRight,n+u.topRight,u.topRight,0,-_i,!0),t.lineTo(r+u.topLeft,n)}const IN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DN=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function zN(t,e){const r=(""+t).match(IN);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const RN=t=>+t||0;function dP(t,e){const r={},n=$r(e),i=n?Object.keys(e):e,l=$r(t)?n?u=>Ar(t[u],t[e[u]]):u=>t[u]:()=>t;for(const u of i)r[u]=RN(l(u));return r}function aL(t){return dP(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ld(t){return dP(t,["topLeft","topRight","bottomLeft","bottomRight"])}function no(t){const e=aL(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qi(t,e){t=t||{},e=e||Gn.font;let r=Ar(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Ar(t.style,e.style);n&&!(""+n).match(DN)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const i={family:Ar(t.family,e.family),lineHeight:zN(Ar(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Ar(t.weight,e.weight),string:""};return i.string=PN(i),i}function kg(t,e,r,n){let i,l,u;for(i=0,l=t.length;i<l;++i)if(u=t[i],u!==void 0&&u!==void 0)return u}function LN(t,e,r){const{min:n,max:i}=t,l=GR(e,(i-n)/2),u=(s,m)=>r&&s===0?0:s+m;return{min:u(n,-Math.abs(l)),max:u(i,l)}}function zh(t,e){return Object.assign(Object.create(t),e)}function pP(t,e=[""],r,n,i=()=>t[0]){const l=r||t;typeof n>"u"&&(n=uL("_fallback",t));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:l,_fallback:n,_getTarget:i,override:s=>pP([s,...t],e,l,n)};return new Proxy(u,{deleteProperty(s,m){return delete s[m],delete s._keys,delete t[0][m],!0},get(s,m){return sL(s,m,()=>UN(m,e,t,s))},getOwnPropertyDescriptor(s,m){return Reflect.getOwnPropertyDescriptor(s._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(s,m){return xk(s).includes(m)},ownKeys(s){return xk(s)},set(s,m,y){const w=s._storage||(s._storage=i());return s[m]=w[m]=y,delete s._keys,!0}})}function Up(t,e,r,n){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:oL(t,n),setContext:l=>Up(t,l,r,n),override:l=>Up(t.override(l),e,r,n)};return new Proxy(i,{deleteProperty(l,u){return delete l[u],delete t[u],!0},get(l,u,s){return sL(l,u,()=>jN(l,u,s))},getOwnPropertyDescriptor(l,u){return l._descriptors.allKeys?Reflect.has(t,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,u)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(l,u){return Reflect.has(t,u)},ownKeys(){return Reflect.ownKeys(t)},set(l,u,s){return t[u]=s,delete l[u],!0}})}function oL(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:Ih(r)?r:()=>r,isIndexable:Ih(n)?n:()=>n}}const FN=(t,e)=>t?t+lP(e):e,mP=(t,e)=>$r(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function sL(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function jN(t,e,r){const{_proxy:n,_context:i,_subProxy:l,_descriptors:u}=t;let s=n[e];return Ih(s)&&u.isScriptable(e)&&(s=BN(e,s,t,r)),Hn(s)&&s.length&&(s=NN(e,s,t,u.isIndexable)),mP(e,s)&&(s=Up(s,i,l&&l[e],u)),s}function BN(t,e,r,n){const{_proxy:i,_context:l,_subProxy:u,_stack:s}=r;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let m=e(l,u||n);return s.delete(t),mP(t,m)&&(m=gP(i._scopes,i,t,m)),m}function NN(t,e,r,n){const{_proxy:i,_context:l,_subProxy:u,_descriptors:s}=r;if(typeof l.index<"u"&&n(t))return e[l.index%e.length];if($r(e[0])){const m=e,y=i._scopes.filter(w=>w!==m);e=[];for(const w of m){const S=gP(y,i,t,w);e.push(Up(S,l,u&&u[t],s))}}return e}function lL(t,e,r){return Ih(t)?t(e,r):t}const $N=(t,e)=>t===!0?e:typeof t=="string"?Oh(e,t):void 0;function VN(t,e,r,n,i){for(const l of e){const u=$N(r,l);if(u){t.add(u);const s=lL(u._fallback,r,i);if(typeof s<"u"&&s!==r&&s!==n)return s}else if(u===!1&&typeof n<"u"&&r!==n)return null}return!1}function gP(t,e,r,n){const i=e._rootScopes,l=lL(e._fallback,r,n),u=[...t,...i],s=new Set;s.add(n);let m=_k(s,u,r,l||r,n);return m===null||typeof l<"u"&&l!==r&&(m=_k(s,u,l,m,n),m===null)?!1:pP(Array.from(s),[""],i,l,()=>qN(e,r,n))}function _k(t,e,r,n,i){for(;r;)r=VN(t,e,r,n,i);return r}function qN(t,e,r){const n=t._getTarget();e in n||(n[e]={});const i=n[e];return Hn(i)&&$r(r)?r:i||{}}function UN(t,e,r,n){let i;for(const l of e)if(i=uL(FN(l,t),r),typeof i<"u")return mP(t,i)?gP(r,n,t,i):i}function uL(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function xk(t){let e=t._keys;return e||(e=t._keys=WN(t._scopes)),e}function WN(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function cL(t,e,r,n){const{iScale:i}=t,{key:l="r"}=this._parsing,u=new Array(n);let s,m,y,w;for(s=0,m=n;s<m;++s)y=s+r,w=e[y],u[s]={r:i.parse(Oh(w,l),y)};return u}const HN=Number.EPSILON||1e-14,Wp=(t,e)=>e<t.length&&!t[e].skip&&t[e],hL=t=>t==="x"?"y":"x";function GN(t,e,r,n){const i=t.skip?e:t,l=e,u=r.skip?e:r,s=w2(l,i),m=w2(u,l);let y=s/(s+m),w=m/(s+m);y=isNaN(y)?0:y,w=isNaN(w)?0:w;const S=n*y,E=n*w;return{previous:{x:l.x-S*(u.x-i.x),y:l.y-S*(u.y-i.y)},next:{x:l.x+E*(u.x-i.x),y:l.y+E*(u.y-i.y)}}}function ZN(t,e,r){const n=t.length;let i,l,u,s,m,y=Wp(t,0);for(let w=0;w<n-1;++w)if(m=y,y=Wp(t,w+1),!(!m||!y)){if(Fg(e[w],0,HN)){r[w]=r[w+1]=0;continue}i=r[w]/e[w],l=r[w+1]/e[w],s=Math.pow(i,2)+Math.pow(l,2),!(s<=9)&&(u=3/Math.sqrt(s),r[w]=i*u*e[w],r[w+1]=l*u*e[w])}}function XN(t,e,r="x"){const n=hL(r),i=t.length;let l,u,s,m=Wp(t,0);for(let y=0;y<i;++y){if(u=s,s=m,m=Wp(t,y+1),!s)continue;const w=s[r],S=s[n];u&&(l=(w-u[r])/3,s[`cp1${r}`]=w-l,s[`cp1${n}`]=S-l*e[y]),m&&(l=(m[r]-w)/3,s[`cp2${r}`]=w+l,s[`cp2${n}`]=S+l*e[y])}}function KN(t,e="x"){const r=hL(e),n=t.length,i=Array(n).fill(0),l=Array(n);let u,s,m,y=Wp(t,0);for(u=0;u<n;++u)if(s=m,m=y,y=Wp(t,u+1),!!m){if(y){const w=y[e]-m[e];i[u]=w!==0?(y[r]-m[r])/w:0}l[u]=s?y?Au(i[u-1])!==Au(i[u])?0:(i[u-1]+i[u])/2:i[u-1]:i[u]}ZN(t,i,l),XN(t,l,e)}function qv(t,e,r){return Math.max(Math.min(t,r),e)}function YN(t,e){let r,n,i,l,u,s=bc(t[0],e);for(r=0,n=t.length;r<n;++r)u=l,l=s,s=r<n-1&&bc(t[r+1],e),l&&(i=t[r],u&&(i.cp1x=qv(i.cp1x,e.left,e.right),i.cp1y=qv(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=qv(i.cp2x,e.left,e.right),i.cp2y=qv(i.cp2y,e.top,e.bottom)))}function JN(t,e,r,n,i){let l,u,s,m;if(e.spanGaps&&(t=t.filter(y=>!y.skip)),e.cubicInterpolationMode==="monotone")KN(t,i);else{let y=n?t[t.length-1]:t[0];for(l=0,u=t.length;l<u;++l)s=t[l],m=GN(y,s,t[Math.min(l+1,u-(n?0:1))%u],e.tension),s.cp1x=m.previous.x,s.cp1y=m.previous.y,s.cp2x=m.next.x,s.cp2y=m.next.y,y=s}e.capBezierPoints&&YN(t,r)}function yP(){return typeof window<"u"&&typeof document<"u"}function vP(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function k_(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const I0=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function QN(t,e){return I0(t).getPropertyValue(e)}const e4=["top","right","bottom","left"];function ud(t,e,r){const n={};r=r?"-"+r:"";for(let i=0;i<4;i++){const l=e4[i];n[l]=parseFloat(t[e+"-"+l+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const t4=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function r4(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:l}=n;let u=!1,s,m;if(t4(i,l,t.target))s=i,m=l;else{const y=e.getBoundingClientRect();s=n.clientX-y.left,m=n.clientY-y.top,u=!0}return{x:s,y:m,box:u}}function Qf(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,i=I0(r),l=i.boxSizing==="border-box",u=ud(i,"padding"),s=ud(i,"border","width"),{x:m,y,box:w}=r4(t,r),S=u.left+(w&&s.left),E=u.top+(w&&s.top);let{width:I,height:F}=e;return l&&(I-=u.width+s.width,F-=u.height+s.height),{x:Math.round((m-S)/I*r.width/n),y:Math.round((y-E)/F*r.height/n)}}function n4(t,e,r){let n,i;if(e===void 0||r===void 0){const l=t&&vP(t);if(!l)e=t.clientWidth,r=t.clientHeight;else{const u=l.getBoundingClientRect(),s=I0(l),m=ud(s,"border","width"),y=ud(s,"padding");e=u.width-y.width-m.width,r=u.height-y.height-m.height,n=k_(s.maxWidth,l,"clientWidth"),i=k_(s.maxHeight,l,"clientHeight")}}return{width:e,height:r,maxWidth:n||P_,maxHeight:i||P_}}const Uv=t=>Math.round(t*10)/10;function i4(t,e,r,n){const i=I0(t),l=ud(i,"margin"),u=k_(i.maxWidth,t,"clientWidth")||P_,s=k_(i.maxHeight,t,"clientHeight")||P_,m=n4(t,e,r);let{width:y,height:w}=m;if(i.boxSizing==="content-box"){const E=ud(i,"border","width"),I=ud(i,"padding");y-=I.width+E.width,w-=I.height+E.height}return y=Math.max(0,y-l.width),w=Math.max(0,n?y/n:w-l.height),y=Uv(Math.min(y,u,m.maxWidth)),w=Uv(Math.min(w,s,m.maxHeight)),y&&!w&&(w=Uv(y/2)),(e!==void 0||r!==void 0)&&n&&m.height&&w>m.height&&(w=m.height,y=Uv(Math.floor(w*n))),{width:y,height:w}}function bk(t,e,r){const n=e||1,i=Math.floor(t.height*n),l=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const u=t.canvas;return u.style&&(r||!u.style.height&&!u.style.width)&&(u.style.height=`${t.height}px`,u.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||u.height!==i||u.width!==l?(t.currentDevicePixelRatio=n,u.height=i,u.width=l,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const a4=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};yP()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function wk(t,e){const r=QN(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ed(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function o4(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function s4(t,e,r,n){const i={x:t.cp2x,y:t.cp2y},l={x:e.cp1x,y:e.cp1y},u=ed(t,i,r),s=ed(i,l,r),m=ed(l,e,r),y=ed(u,s,r),w=ed(s,m,r);return ed(y,w,r)}const l4=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},u4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Fp(t,e,r){return t?l4(e,r):u4()}function fL(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function dL(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function pL(t){return t==="angle"?{between:Gg,compare:cN,normalize:Ja}:{between:_c,compare:(e,r)=>e-r,normalize:e=>e}}function Sk({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function c4(t,e,r){const{property:n,start:i,end:l}=r,{between:u,normalize:s}=pL(n),m=e.length;let{start:y,end:w,loop:S}=t,E,I;if(S){for(y+=m,w+=m,E=0,I=m;E<I&&u(s(e[y%m][n]),i,l);++E)y--,w--;y%=m,w%=m}return w<y&&(w+=m),{start:y,end:w,loop:S,style:t.style}}function mL(t,e,r){if(!r)return[t];const{property:n,start:i,end:l}=r,u=e.length,{compare:s,between:m,normalize:y}=pL(n),{start:w,end:S,loop:E,style:I}=c4(t,e,r),F=[];let L=!1,R=null,U,X,K;const re=()=>m(i,K,U)&&s(i,K)!==0,W=()=>s(l,U)===0||m(l,K,U),J=()=>L||re(),ie=()=>!L||W();for(let he=w,ve=w;he<=S;++he)X=e[he%u],!X.skip&&(U=y(X[n]),U!==K&&(L=m(U,i,l),R===null&&J()&&(R=s(U,i)===0?he:ve),R!==null&&ie()&&(F.push(Sk({start:R,end:he,loop:E,count:u,style:I})),R=null),ve=he,K=U));return R!==null&&F.push(Sk({start:R,end:S,loop:E,count:u,style:I})),F}function gL(t,e){const r=[],n=t.segments;for(let i=0;i<n.length;i++){const l=mL(n[i],t.points,e);l.length&&r.push(...l)}return r}function h4(t,e,r,n){let i=0,l=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(l+=i);l>i&&t[l%e].skip;)l--;return l%=e,{start:i,end:l}}function f4(t,e,r,n){const i=t.length,l=[];let u=e,s=t[e],m;for(m=e+1;m<=r;++m){const y=t[m%i];y.skip||y.stop?s.skip||(n=!1,l.push({start:e%i,end:(m-1)%i,loop:n}),e=u=y.stop?m:null):(u=m,s.skip&&(e=m)),s=y}return u!==null&&l.push({start:e%i,end:u%i,loop:n}),l}function d4(t,e){const r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];const l=!!t._loop,{start:u,end:s}=h4(r,i,l,n);if(n===!0)return Tk(t,[{start:u,end:s,loop:l}],r,e);const m=s<u?s+i:s,y=!!t._fullLoop&&u===0&&s===i-1;return Tk(t,f4(r,u,m,y),r,e)}function Tk(t,e,r,n){return!n||!n.setContext||!r?e:p4(t,e,r,n)}function p4(t,e,r,n){const i=t._chart.getContext(),l=Pk(t.options),{_datasetIndex:u,options:{spanGaps:s}}=t,m=r.length,y=[];let w=l,S=e[0].start,E=S;function I(F,L,R,U){const X=s?-1:1;if(F!==L){for(F+=m;r[F%m].skip;)F-=X;for(;r[L%m].skip;)L+=X;F%m!==L%m&&(y.push({start:F%m,end:L%m,loop:R,style:U}),w=U,S=L%m)}}for(const F of e){S=s?S:F.start;let L=r[S%m],R;for(E=S+1;E<=F.end;E++){const U=r[E%m];R=Pk(n.setContext(zh(i,{type:"segment",p0:L,p1:U,p0DataIndex:(E-1)%m,p1DataIndex:E%m,datasetIndex:u}))),m4(R,w)&&I(S,E-1,F.loop,w),L=U,w=R}S<E-1&&I(S,E-1,F.loop,w)}return y}function Pk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function m4(t,e){if(!e)return!1;const r=[],n=function(i,l){return fP(l)?(r.includes(l)||r.push(l),r.indexOf(l)):l};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Wv(t,e,r){return t.options.clip?t[r]:e[r]}function g4(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:Wv(r,e,"left"),right:Wv(r,e,"right"),top:Wv(n,e,"top"),bottom:Wv(n,e,"bottom")}:e}function yL(t,e){const r=e._clip;if(r.disabled)return!1;const n=g4(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class y4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){const l=r.listeners[i],u=r.duration;l.forEach(s=>s({chart:e,initial:r.initial,numSteps:u,currentStep:Math.min(n-r.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=QR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const l=n.items;let u=l.length-1,s=!1,m;for(;u>=0;--u)m=l[u],m._active?(m._total>n.duration&&(n.duration=m._total),m.tick(e),s=!0):(l[u]=l[l.length-1],l.pop());s&&(i.draw(),this._notify(i,n,e,"progress")),l.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=l.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gc=new y4;const Ak="transparent",v4={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=gk(t||Ak),i=n.valid&&gk(e||Ak);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class _4{constructor(e,r,n,i){const l=r[n];i=kg([e.to,i,l,e.from]);const u=kg([e.from,l,i]);this._active=!0,this._fn=e.fn||v4[e.type||typeof u],this._easing=jg[e.easing]||jg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=u,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const i=this._target[this._prop],l=n-this._start,u=this._duration-l;this._start=n,this._duration=Math.floor(Math.max(u,e.duration)),this._total+=l,this._loop=!!e.loop,this._to=kg([e.to,r,i,e.from]),this._from=kg([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,i=this._prop,l=this._from,u=this._loop,s=this._to;let m;if(this._active=l!==s&&(u||r<n),!this._active){this._target[i]=s,this._notify(!0);return}if(r<0){this._target[i]=l;return}m=r/n%2,m=u&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[i]=this._fn(l,s,m)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}}class vL{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!$r(e))return;const r=Object.keys(Gn.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const l=e[i];if(!$r(l))return;const u={};for(const s of r)u[s]=l[s];(Hn(l.properties)&&l.properties||[i]).forEach(s=>{(s===i||!n.has(s))&&n.set(s,u)})})}_animateOptions(e,r){const n=r.options,i=b4(e,n);if(!i)return[];const l=this._createAnimations(i,n);return n.$shared&&x4(e.options.$animations,n).then(()=>{e.options=n},()=>{}),l}_createAnimations(e,r){const n=this._properties,i=[],l=e.$animations||(e.$animations={}),u=Object.keys(r),s=Date.now();let m;for(m=u.length-1;m>=0;--m){const y=u[m];if(y.charAt(0)==="$")continue;if(y==="options"){i.push(...this._animateOptions(e,r));continue}const w=r[y];let S=l[y];const E=n.get(y);if(S)if(E&&S.active()){S.update(E,w,s);continue}else S.cancel();if(!E||!E.duration){e[y]=w;continue}l[y]=S=new _4(E,e,y,w),i.push(S)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return gc.add(this._chart,n),!0}}function x4(t,e){const r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){const l=t[n[i]];l&&l.active()&&r.push(l.wait())}return Promise.all(r)}function b4(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function kk(t,e){const r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,l=r.max===void 0?e:0;return{start:n?l:i,end:n?i:l}}function w4(t,e,r){if(r===!1)return!1;const n=kk(t,r),i=kk(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function S4(t){let e,r,n,i;return $r(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function _L(t,e){const r=[],n=t._getSortedDatasetMetas(e);let i,l;for(i=0,l=n.length;i<l;++i)r.push(n[i].index);return r}function Ek(t,e,r,n={}){const i=t.keys,l=n.mode==="single";let u,s,m,y;if(e===null)return;let w=!1;for(u=0,s=i.length;u<s;++u){if(m=+i[u],m===r){if(w=!0,n.all)continue;break}y=t.values[m],fi(y)&&(l||e===0||Au(e)===Au(y))&&(e+=y)}return!w&&!n.all?0:e}function T4(t,e){const{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",l=n.axis==="x"?"x":"y",u=Object.keys(t),s=new Array(u.length);let m,y,w;for(m=0,y=u.length;m<y;++m)w=u[m],s[m]={[i]:w,[l]:t[w]};return s}function tb(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function P4(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function A4(t){const{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function k4(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function Mk(t,e,r,n){for(const i of e.getMatchingVisibleMetas(n).reverse()){const l=t[i.index];if(r&&l>0||!r&&l<0)return i.index}return null}function Ck(t,e){const{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:l,vScale:u,index:s}=n,m=l.axis,y=u.axis,w=P4(l,u,n),S=e.length;let E;for(let I=0;I<S;++I){const F=e[I],{[m]:L,[y]:R}=F,U=F._stacks||(F._stacks={});E=U[y]=k4(i,w,L),E[s]=R,E._top=Mk(E,u,!0,n.type),E._bottom=Mk(E,u,!1,n.type);const X=E._visualValues||(E._visualValues={});X[s]=R}}function rb(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function E4(t,e){return zh(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function M4(t,e,r){return zh(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function hg(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const i of e){const l=i._stacks;if(!l||l[n]===void 0||l[n][r]===void 0)return;delete l[n][r],l[n]._visualValues!==void 0&&l[n]._visualValues[r]!==void 0&&delete l[n]._visualValues[r]}}}const nb=t=>t==="reset"||t==="none",Ok=(t,e)=>e?t:Object.assign({},t),C4=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:_L(r,!0),values:null};class Rh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tb(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&hg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(S,E,I,F)=>S==="x"?E:S==="r"?F:I,l=r.xAxisID=Ar(n.xAxisID,rb(e,"x")),u=r.yAxisID=Ar(n.yAxisID,rb(e,"y")),s=r.rAxisID=Ar(n.rAxisID,rb(e,"r")),m=r.indexAxis,y=r.iAxisID=i(m,l,u,s),w=r.vAxisID=i(m,u,l,s);r.xScale=this.getScaleForId(l),r.yScale=this.getScaleForId(u),r.rScale=this.getScaleForId(s),r.iScale=this.getScaleForId(y),r.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&dk(this._data,this),e._stacked&&hg(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if($r(r)){const i=this._cachedMeta;this._data=T4(r,i)}else if(n!==r){if(n){dk(n,this);const i=this._cachedMeta;hg(i),i._parsed=[]}r&&Object.isExtensible(r)&&pN(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const l=r._stacked;r._stacked=tb(r.vScale,r),r.stack!==n.stack&&(i=!0,hg(r),r.stack=n.stack),this._resyncElements(e),(i||l!==r._stacked)&&(Ck(this,r._parsed),r._stacked=tb(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:i}=this,{iScale:l,_stacked:u}=n,s=l.axis;let m=e===0&&r===i.length?!0:n._sorted,y=e>0&&n._parsed[e-1],w,S,E;if(this._parsing===!1)n._parsed=i,n._sorted=!0,E=i;else{Hn(i[e])?E=this.parseArrayData(n,i,e,r):$r(i[e])?E=this.parseObjectData(n,i,e,r):E=this.parsePrimitiveData(n,i,e,r);const I=()=>S[s]===null||y&&S[s]<y[s];for(w=0;w<r;++w)n._parsed[w+e]=S=E[w],m&&(I()&&(m=!1),y=S);n._sorted=m}u&&Ck(this,E)}parsePrimitiveData(e,r,n,i){const{iScale:l,vScale:u}=e,s=l.axis,m=u.axis,y=l.getLabels(),w=l===u,S=new Array(i);let E,I,F;for(E=0,I=i;E<I;++E)F=E+n,S[E]={[s]:w||l.parse(y[F],F),[m]:u.parse(r[F],F)};return S}parseArrayData(e,r,n,i){const{xScale:l,yScale:u}=e,s=new Array(i);let m,y,w,S;for(m=0,y=i;m<y;++m)w=m+n,S=r[w],s[m]={x:l.parse(S[0],w),y:u.parse(S[1],w)};return s}parseObjectData(e,r,n,i){const{xScale:l,yScale:u}=e,{xAxisKey:s="x",yAxisKey:m="y"}=this._parsing,y=new Array(i);let w,S,E,I;for(w=0,S=i;w<S;++w)E=w+n,I=r[E],y[w]={x:l.parse(Oh(I,s),E),y:u.parse(Oh(I,m),E)};return y}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const i=this.chart,l=this._cachedMeta,u=r[e.axis],s={keys:_L(i,!0),values:r._stacks[e.axis]._visualValues};return Ek(s,u,l.index,{mode:n})}updateRangeFromParsed(e,r,n,i){const l=n[r.axis];let u=l===null?NaN:l;const s=i&&n._stacks[r.axis];i&&s&&(i.values=s,u=Ek(i,l,this._cachedMeta.index)),e.min=Math.min(e.min,u),e.max=Math.max(e.max,u)}getMinMax(e,r){const n=this._cachedMeta,i=n._parsed,l=n._sorted&&e===n.iScale,u=i.length,s=this._getOtherScale(e),m=C4(r,n,this.chart),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:S}=A4(s);let E,I;function F(){I=i[E];const L=I[s.axis];return!fi(I[e.axis])||w>L||S<L}for(E=0;E<u&&!(!F()&&(this.updateRangeFromParsed(y,e,I,m),l));++E);if(l){for(E=u-1;E>=0;--E)if(!F()){this.updateRangeFromParsed(y,e,I,m);break}}return y}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let i,l,u;for(i=0,l=r.length;i<l;++i)u=r[i][e.axis],fi(u)&&n.push(u);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,i=r.vScale,l=this.getParsed(e);return{label:n?""+n.getLabelForValue(l[n.axis]):"",value:i?""+i.getLabelForValue(l[i.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=S4(Ar(this.options.clip,w4(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],l=r.chartArea,u=[],s=this._drawStart||0,m=this._drawCount||i.length-s,y=this.options.drawActiveElementsOnTop;let w;for(n.dataset&&n.dataset.draw(e,l,s,m),w=s;w<s+m;++w){const S=i[w];S.hidden||(S.active&&y?u.push(S):S.draw(e,l))}for(w=0;w<u.length;++w)u[w].draw(e,l)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const i=this.getDataset();let l;if(e>=0&&e<this._cachedMeta.data.length){const u=this._cachedMeta.data[e];l=u.$context||(u.$context=M4(this.getContext(),e,u)),l.parsed=this.getParsed(e),l.raw=i.data[e],l.index=l.dataIndex=e}else l=this.$context||(this.$context=E4(this.chart.getContext(),this.index)),l.dataset=i,l.index=l.datasetIndex=this.index;return l.active=!!r,l.mode=n,l}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const i=r==="active",l=this._cachedDataOpts,u=e+"-"+r,s=l[u],m=this.enableOptionSharing&&Hg(n);if(s)return Ok(s,m);const y=this.chart.config,w=y.datasetElementScopeKeys(this._type,e),S=i?[`${e}Hover`,"hover",e,""]:[e,""],E=y.getOptionScopes(this.getDataset(),w),I=Object.keys(Gn.elements[e]),F=()=>this.getContext(n,i,r),L=y.resolveNamedOptions(E,I,F,S);return L.$shared&&(L.$shared=m,l[u]=Object.freeze(Ok(L,m))),L}_resolveAnimations(e,r,n){const i=this.chart,l=this._cachedDataOpts,u=`animation-${r}`,s=l[u];if(s)return s;let m;if(i.options.animation!==!1){const w=this.chart.config,S=w.datasetAnimationScopeKeys(this._type,r),E=w.getOptionScopes(this.getDataset(),S);m=w.createResolver(E,this.getContext(e,n,r))}const y=new vL(i,m&&m.animations);return m&&m._cacheable&&(l[u]=Object.freeze(y)),y}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||nb(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,l=this.getSharedOptions(n),u=this.includeOptions(r,l)||l!==i;return this.updateSharedOptions(l,r,n),{sharedOptions:l,includeOptions:u}}updateElement(e,r,n,i){nb(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!nb(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;const l=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(l)||l})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[s,m,y]of this._syncList)this[s](m,y);this._syncList=[];const i=n.length,l=r.length,u=Math.min(l,i);u&&this.parse(0,u),l>i?this._insertElements(i,l-i,e):l<i&&this._removeElements(l,i-l)}_insertElements(e,r,n=!0){const i=this._cachedMeta,l=i.data,u=e+r;let s;const m=y=>{for(y.length+=r,s=y.length-1;s>=u;s--)y[s]=y[s-r]};for(m(l),s=e;s<u;++s)l[s]=new this.dataElementType;this._parsing&&m(i._parsed),this.parse(e,r),n&&this.updateElements(l,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,r);n._stacked&&hg(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function O4(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let i=0,l=r.length;i<l;i++)n=n.concat(r[i].controller.getAllParsedValues(t));t._cache.$bar=JR(n.sort((i,l)=>i-l))}return t._cache.$bar}function I4(t){const e=t.iScale,r=O4(e,t.type);let n=e._length,i,l,u,s;const m=()=>{u===32767||u===-32768||(Hg(s)&&(n=Math.min(n,Math.abs(u-s)||n)),s=u)};for(i=0,l=r.length;i<l;++i)u=e.getPixelForValue(r[i]),m();for(s=void 0,i=0,l=e.ticks.length;i<l;++i)u=e.getPixelForTick(i),m();return n}function D4(t,e,r,n){const i=r.barThickness;let l,u;return Fr(i)?(l=e.min*r.categoryPercentage,u=r.barPercentage):(l=i*n,u=1),{chunk:l/n,ratio:u,start:e.pixels[t]-l/2}}function z4(t,e,r,n){const i=e.pixels,l=i[t];let u=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null;const m=r.categoryPercentage;u===null&&(u=l-(s===null?e.end-e.start:s-l)),s===null&&(s=l+l-u);const y=l-(l-Math.min(u,s))/2*m;return{chunk:Math.abs(s-u)/2*m/n,ratio:r.barPercentage,start:y}}function R4(t,e,r,n){const i=r.parse(t[0],n),l=r.parse(t[1],n),u=Math.min(i,l),s=Math.max(i,l);let m=u,y=s;Math.abs(u)>Math.abs(s)&&(m=s,y=u),e[r.axis]=y,e._custom={barStart:m,barEnd:y,start:i,end:l,min:u,max:s}}function xL(t,e,r,n){return Hn(t)?R4(t,e,r,n):e[r.axis]=r.parse(t,n),e}function Ik(t,e,r,n){const i=t.iScale,l=t.vScale,u=i.getLabels(),s=i===l,m=[];let y,w,S,E;for(y=r,w=r+n;y<w;++y)E=e[y],S={},S[i.axis]=s||i.parse(u[y],y),m.push(xL(E,S,l,y));return m}function ib(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function L4(t,e,r){return t!==0?Au(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function F4(t){let e,r,n,i,l;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",l="start"):(i="start",l="end"),{start:r,end:n,reverse:e,top:i,bottom:l}}function j4(t,e,r,n){let i=e.borderSkipped;const l={};if(!i){t.borderSkipped=l;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:s,reverse:m,top:y,bottom:w}=F4(t);i==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=y:(r._bottom||0)===n?i=w:(l[Dk(w,u,s,m)]=!0,i=y)),l[Dk(i,u,s,m)]=!0,t.borderSkipped=l}function Dk(t,e,r,n){return n?(t=B4(t,e,r),t=zk(t,r,e)):t=zk(t,e,r),t}function B4(t,e,r){return t===e?r:t===r?e:t}function zk(t,e,r){return t==="start"?e:t==="end"?r:t}function N4(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class $4 extends Rh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,r,n,i){return Ik(e,r,n,i)}parseArrayData(e,r,n,i){return Ik(e,r,n,i)}parseObjectData(e,r,n,i){const{iScale:l,vScale:u}=e,{xAxisKey:s="x",yAxisKey:m="y"}=this._parsing,y=l.axis==="x"?s:m,w=u.axis==="x"?s:m,S=[];let E,I,F,L;for(E=n,I=n+i;E<I;++E)L=r[E],F={},F[l.axis]=l.parse(Oh(L,y),E),S.push(xL(Oh(L,w),F,u,E));return S}updateRangeFromParsed(e,r,n,i){super.updateRangeFromParsed(e,r,n,i);const l=n._custom;l&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,l.min),e.max=Math.max(e.max,l.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:i}=r,l=this.getParsed(e),u=l._custom,s=ib(u)?"["+u.start+", "+u.end+"]":""+i.getLabelForValue(l[i.axis]);return{label:""+n.getLabelForValue(l[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,i){const l=i==="reset",{index:u,_cachedMeta:{vScale:s}}=this,m=s.getBasePixel(),y=s.isHorizontal(),w=this._getRuler(),{sharedOptions:S,includeOptions:E}=this._getSharedOptions(r,i);for(let I=r;I<r+n;I++){const F=this.getParsed(I),L=l||Fr(F[s.axis])?{base:m,head:m}:this._calculateBarValuePixels(I),R=this._calculateBarIndexPixels(I,w),U=(F._stacks||{})[s.axis],X={horizontal:y,base:L.base,enableBorderRadius:!U||ib(F._custom)||u===U._top||u===U._bottom,x:y?L.head:R.center,y:y?R.center:L.head,height:y?R.size:Math.abs(L.size),width:y?Math.abs(L.size):R.size};E&&(X.options=S||this.resolveDataElementOptions(I,e[I].active?"active":i));const K=X.options||e[I].options;j4(X,K,U,u),N4(X,K,w.ratio),this.updateElement(e[I],I,X,i)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(w=>w.controller.options.grouped),l=n.options.stacked,u=[],s=this._cachedMeta.controller.getParsed(r),m=s&&s[n.axis],y=w=>{const S=w._parsed.find(I=>I[n.axis]===m),E=S&&S[w.vScale.axis];if(Fr(E)||isNaN(E))return!0};for(const w of i)if(!(r!==void 0&&y(w))&&((l===!1||u.indexOf(w.stack)===-1||l===void 0&&w.stack===void 0)&&u.push(w.stack),w.index===e))break;return u.length||u.push(void 0),u}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Ar(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const i=this._getStacks(e,n),l=r!==void 0?i.indexOf(r):-1;return l===-1?i.length-1:l}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,i=[];let l,u;for(l=0,u=r.data.length;l<u;++l)i.push(n.getPixelForValue(this.getParsed(l)[n.axis],l));const s=e.barThickness;return{min:s||I4(r),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:i},options:{base:l,minBarLength:u}}=this,s=l||0,m=this.getParsed(e),y=m._custom,w=ib(y);let S=m[r.axis],E=0,I=n?this.applyStack(r,m,n):S,F,L;I!==S&&(E=I-S,I=S),w&&(S=y.barStart,I=y.barEnd-y.barStart,S!==0&&Au(S)!==Au(y.barEnd)&&(E=0),E+=S);const R=!Fr(l)&&!w?l:E;let U=r.getPixelForValue(R);if(this.chart.getDataVisibility(e)?F=r.getPixelForValue(E+I):F=U,L=F-U,Math.abs(L)<u){L=L4(L,r,s)*u,S===s&&(U-=L/2);const X=r.getPixelForDecimal(0),K=r.getPixelForDecimal(1),re=Math.min(X,K),W=Math.max(X,K);U=Math.max(Math.min(U,W),re),F=U+L,n&&!w&&(m._stacks[r.axis]._visualValues[i]=r.getValueForPixel(F)-r.getValueForPixel(U))}if(U===r.getPixelForValue(s)){const X=Au(L)*r.getLineWidthForValue(s)/2;U+=X,L-=X}return{size:L,base:U,head:F,center:F+L/2}}_calculateBarIndexPixels(e,r){const n=r.scale,i=this.options,l=i.skipNull,u=Ar(i.maxBarThickness,1/0);let s,m;const y=this._getAxisCount();if(r.grouped){const w=l?this._getStackCount(e):r.stackCount,S=i.barThickness==="flex"?z4(e,r,i,w*y):D4(e,r,i,w*y),E=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,I=this._getAxis().indexOf(Ar(E,this.getFirstScaleIdForIndexAxis())),F=this._getStackIndex(this.index,this._cachedMeta.stack,l?e:void 0)+I;s=S.start+S.chunk*F+S.chunk/2,m=Math.min(u,S.chunk*S.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),m=Math.min(u,r.min*r.ratio);return{base:s-m/2,head:s+m/2,center:s,size:m}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,i=n.length;let l=0;for(;l<i;++l)this.getParsed(l)[r.axis]!==null&&!n[l].hidden&&n[l].draw(this._ctx)}}class V4 extends Rh{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,i){const l=super.parsePrimitiveData(e,r,n,i);for(let u=0;u<l.length;u++)l[u]._custom=this.resolveDataElementOptions(u+n).radius;return l}parseArrayData(e,r,n,i){const l=super.parseArrayData(e,r,n,i);for(let u=0;u<l.length;u++){const s=r[n+u];l[u]._custom=Ar(s[2],this.resolveDataElementOptions(u+n).radius)}return l}parseObjectData(e,r,n,i){const l=super.parseObjectData(e,r,n,i);for(let u=0;u<l.length;u++){const s=r[n+u];l[u]._custom=Ar(s&&s.r&&+s.r,this.resolveDataElementOptions(u+n).radius)}return l}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:l}=r,u=this.getParsed(e),s=i.getLabelForValue(u.x),m=l.getLabelForValue(u.y),y=u._custom;return{label:n[e]||"",value:"("+s+", "+m+(y?", "+y:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,i){const l=i==="reset",{iScale:u,vScale:s}=this._cachedMeta,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(r,i),w=u.axis,S=s.axis;for(let E=r;E<r+n;E++){const I=e[E],F=!l&&this.getParsed(E),L={},R=L[w]=l?u.getPixelForDecimal(.5):u.getPixelForValue(F[w]),U=L[S]=l?s.getBasePixel():s.getPixelForValue(F[S]);L.skip=isNaN(R)||isNaN(U),y&&(L.options=m||this.resolveDataElementOptions(E,I.active?"active":i),l&&(L.options.radius=0)),this.updateElement(I,E,L,i)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,r);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const l=i.radius;return r!=="active"&&(i.radius=0),i.radius+=Ar(n&&n._custom,l),i}}function q4(t,e,r){let n=1,i=1,l=0,u=0;if(e<qn){const s=t,m=s+e,y=Math.cos(s),w=Math.sin(s),S=Math.cos(m),E=Math.sin(m),I=(K,re,W)=>Gg(K,s,m,!0)?1:Math.max(re,re*r,W,W*r),F=(K,re,W)=>Gg(K,s,m,!0)?-1:Math.min(re,re*r,W,W*r),L=I(0,y,S),R=I(_i,w,E),U=F(en,y,S),X=F(en+_i,w,E);n=(L-U)/2,i=(R-X)/2,l=-(L+U)/2,u=-(R+X)/2}return{ratioX:n,ratioY:i,offsetX:l,offsetY:u}}class _P extends Rh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((l,u)=>{const m=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:i,lineWidth:m.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(u),index:u}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}};constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let l=m=>+n[m];if($r(n[e])){const{key:m="value"}=this._parsing;l=y=>+Oh(n[y],m)}let u,s;for(u=e,s=e+r;u<s;++u)i._parsed[u]=l(u)}}_getRotation(){return Ml(this.options.rotation-90)}_getCircumference(){return Ml(this.options.circumference)}_getRotationExtents(){let e=qn,r=-qn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,l=i._getRotation(),u=i._getCircumference();e=Math.min(e,l),r=Math.max(r,l+u)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,i=this._cachedMeta,l=i.data,u=this.getMaxBorderWidth()+this.getMaxOffset(l)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-u)/2,0),m=Math.min(Q5(this.options.cutout,s),1),y=this._getRingWeight(this.index),{circumference:w,rotation:S}=this._getRotationExtents(),{ratioX:E,ratioY:I,offsetX:F,offsetY:L}=q4(S,w,m),R=(n.width-u)/E,U=(n.height-u)/I,X=Math.max(Math.min(R,U)/2,0),K=GR(this.options.radius,X),re=Math.max(K*m,0),W=(K-re)/this._getVisibleDatasetWeightTotal();this.offsetX=F*K,this.offsetY=L*K,i.total=this.calculateTotal(),this.outerRadius=K-W*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-W*y,0),this.updateElements(l,0,l.length,e)}_circumference(e,r){const n=this.options,i=this._cachedMeta,l=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*l/qn)}updateElements(e,r,n,i){const l=i==="reset",u=this.chart,s=u.chartArea,y=u.options.animation,w=(s.left+s.right)/2,S=(s.top+s.bottom)/2,E=l&&y.animateScale,I=E?0:this.innerRadius,F=E?0:this.outerRadius,{sharedOptions:L,includeOptions:R}=this._getSharedOptions(r,i);let U=this._getRotation(),X;for(X=0;X<r;++X)U+=this._circumference(X,l);for(X=r;X<r+n;++X){const K=this._circumference(X,l),re=e[X],W={x:w+this.offsetX,y:S+this.offsetY,startAngle:U,endAngle:U+K,circumference:K,outerRadius:F,innerRadius:I};R&&(W.options=L||this.resolveDataElementOptions(X,re.active?"active":i)),U+=K,this.updateElement(re,X,W,i)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,i;for(i=0;i<r.length;i++){const l=e._parsed[i];l!==null&&!isNaN(l)&&this.chart.getDataVisibility(i)&&!r[i].hidden&&(n+=Math.abs(l))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?qn*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],l=zy(r._parsed[e],n.options.locale);return{label:i[e]||"",value:l}}getMaxBorderWidth(e){let r=0;const n=this.chart;let i,l,u,s,m;if(!e){for(i=0,l=n.data.datasets.length;i<l;++i)if(n.isDatasetVisible(i)){u=n.getDatasetMeta(i),e=u.data,s=u.controller;break}}if(!e)return 0;for(i=0,l=e.length;i<l;++i)m=s.resolveDataElementOptions(i),m.borderAlign!=="inner"&&(r=Math.max(r,m.borderWidth||0,m.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,i=e.length;n<i;++n){const l=this.resolveDataElementOptions(n);r=Math.max(r,l.offset||0,l.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(Ar(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class bL extends Rh{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:i=[],_dataset:l}=r,u=this.chart._animationsDisabled;let{start:s,count:m}=tL(r,i,u);this._drawStart=s,this._drawCount=m,rL(r)&&(s=0,m=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!l._decimated,n.points=i;const y=this.resolveDatasetElementOptions(e);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(n,void 0,{animated:!u,options:y},e),this.updateElements(i,s,m,e)}updateElements(e,r,n,i){const l=i==="reset",{iScale:u,vScale:s,_stacked:m,_dataset:y}=this._cachedMeta,{sharedOptions:w,includeOptions:S}=this._getSharedOptions(r,i),E=u.axis,I=s.axis,{spanGaps:F,segment:L}=this.options,R=qp(F)?F:Number.POSITIVE_INFINITY,U=this.chart._animationsDisabled||l||i==="none",X=r+n,K=e.length;let re=r>0&&this.getParsed(r-1);for(let W=0;W<K;++W){const J=e[W],ie=U?J:{};if(W<r||W>=X){ie.skip=!0;continue}const he=this.getParsed(W),ve=Fr(he[I]),Re=ie[E]=u.getPixelForValue(he[E],W),de=ie[I]=l||ve?s.getBasePixel():s.getPixelForValue(m?this.applyStack(s,he,m):he[I],W);ie.skip=isNaN(Re)||isNaN(de)||ve,ie.stop=W>0&&Math.abs(he[E]-re[E])>R,L&&(ie.parsed=he,ie.raw=y.data[W]),S&&(ie.options=w||this.resolveDataElementOptions(W,J.active?"active":i)),U||this.updateElement(J,W,ie,i),re=he}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const l=i[0].size(this.resolveDataElementOptions(0)),u=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,l,u)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}class wL extends Rh{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((l,u)=>{const m=e.getDatasetMeta(0).controller.getStyle(u);return{text:l,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:i,lineWidth:m.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(u),index:u}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,i=n.data.labels||[],l=zy(r._parsed[e].r,n.options.locale);return{label:i[e]||"",value:l}}parseObjectData(e,r,n,i){return cL.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{const l=this.getParsed(i).r;!isNaN(l)&&this.chart.getDataVisibility(i)&&(l<r.min&&(r.min=l),l>r.max&&(r.max=l))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,i=Math.min(r.right-r.left,r.bottom-r.top),l=Math.max(i/2,0),u=Math.max(n.cutoutPercentage?l/100*n.cutoutPercentage:1,0),s=(l-u)/e.getVisibleDatasetCount();this.outerRadius=l-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,r,n,i){const l=i==="reset",u=this.chart,m=u.options.animation,y=this._cachedMeta.rScale,w=y.xCenter,S=y.yCenter,E=y.getIndexAngle(0)-.5*en;let I=E,F;const L=360/this.countVisibleElements();for(F=0;F<r;++F)I+=this._computeAngle(F,i,L);for(F=r;F<r+n;F++){const R=e[F];let U=I,X=I+this._computeAngle(F,i,L),K=u.getDataVisibility(F)?y.getDistanceFromCenterForValue(this.getParsed(F).r):0;I=X,l&&(m.animateScale&&(K=0),m.animateRotate&&(U=X=E));const re={x:w,y:S,innerRadius:0,outerRadius:K,startAngle:U,endAngle:X,options:this.resolveDataElementOptions(F,R.active?"active":i)};this.updateElement(R,F,re,i)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Ml(this.resolveDataElementOptions(e,r).angle||n):0}}class U4 extends _P{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class W4 extends Rh{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,i){return cL.bind(this)(e,r,n,i)}update(e){const r=this._cachedMeta,n=r.dataset,i=r.data||[],l=r.iScale.getLabels();if(n.points=i,e!=="resize"){const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0);const s={_loop:!0,_fullLoop:l.length===i.length,options:u};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,r,n,i){const l=this._cachedMeta.rScale,u=i==="reset";for(let s=r;s<r+n;s++){const m=e[s],y=this.resolveDataElementOptions(s,m.active?"active":i),w=l.getPointPositionForValue(s,this.getParsed(s).r),S=u?l.xCenter:w.x,E=u?l.yCenter:w.y,I={x:S,y:E,angle:w.angle,skip:isNaN(S)||isNaN(E),options:y};this.updateElement(m,s,I,i)}}}class H4 extends Rh{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:l}=r,u=this.getParsed(e),s=i.getLabelForValue(u.x),m=l.getLabelForValue(u.y);return{label:n[e]||"",value:"("+s+", "+m+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,i=this.chart._animationsDisabled;let{start:l,count:u}=tL(r,n,i);if(this._drawStart=l,this._drawCount=u,rL(r)&&(l=0,u=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:s,_dataset:m}=r;s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!m._decimated,s.points=n;const y=this.resolveDatasetElementOptions(e);y.segment=this.options.segment,this.updateElement(s,void 0,{animated:!i,options:y},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,l,u,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,i){const l=i==="reset",{iScale:u,vScale:s,_stacked:m,_dataset:y}=this._cachedMeta,w=this.resolveDataElementOptions(r,i),S=this.getSharedOptions(w),E=this.includeOptions(i,S),I=u.axis,F=s.axis,{spanGaps:L,segment:R}=this.options,U=qp(L)?L:Number.POSITIVE_INFINITY,X=this.chart._animationsDisabled||l||i==="none";let K=r>0&&this.getParsed(r-1);for(let re=r;re<r+n;++re){const W=e[re],J=this.getParsed(re),ie=X?W:{},he=Fr(J[F]),ve=ie[I]=u.getPixelForValue(J[I],re),Re=ie[F]=l||he?s.getBasePixel():s.getPixelForValue(m?this.applyStack(s,J,m):J[F],re);ie.skip=isNaN(ve)||isNaN(Re)||he,ie.stop=re>0&&Math.abs(J[I]-K[I])>U,R&&(ie.parsed=J,ie.raw=y.data[re]),E&&(ie.options=S||this.resolveDataElementOptions(re,W.active?"active":i)),X||this.updateElement(W,re,ie,i),K=J}this.updateSharedOptions(S,i,w)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let s=0;for(let m=r.length-1;m>=0;--m)s=Math.max(s,r[m].size(this.resolveDataElementOptions(m))/2);return s>0&&s}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!r.length)return i;const l=r[0].size(this.resolveDataElementOptions(0)),u=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,l,u)/2}}var G4=Object.freeze({__proto__:null,BarController:$4,BubbleController:V4,DoughnutController:_P,LineController:bL,PieController:U4,PolarAreaController:wL,RadarController:W4,ScatterController:H4});function Zf(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class xP{static override(e){Object.assign(xP.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Zf()}parse(){return Zf()}format(){return Zf()}add(){return Zf()}diff(){return Zf()}startOf(){return Zf()}endOf(){return Zf()}}var Z4={_date:xP};function X4(t,e,r,n){const{controller:i,data:l,_sorted:u}=t,s=i._cachedMeta.iScale,m=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(s&&e===s.axis&&e!=="r"&&u&&l.length){const y=s._reversePixels?fN:xc;if(n){if(i._sharedOptions){const w=l[0],S=typeof w.getRange=="function"&&w.getRange(e);if(S){const E=y(l,e,r-S),I=y(l,e,r+S);return{lo:E.lo,hi:I.hi}}}}else{const w=y(l,e,r);if(m){const{vScale:S}=i._cachedMeta,{_parsed:E}=t,I=E.slice(0,w.lo+1).reverse().findIndex(L=>!Fr(L[S.axis]));w.lo-=Math.max(0,I);const F=E.slice(w.hi).findIndex(L=>!Fr(L[S.axis]));w.hi+=Math.max(0,F)}return w}}return{lo:0,hi:l.length-1}}function D0(t,e,r,n,i){const l=t.getSortedVisibleDatasetMetas(),u=r[e];for(let s=0,m=l.length;s<m;++s){const{index:y,data:w}=l[s],{lo:S,hi:E}=X4(l[s],e,u,i);for(let I=S;I<=E;++I){const F=w[I];F.skip||n(F,y,I)}}}function K4(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){const l=e?Math.abs(n.x-i.x):0,u=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(l,2)+Math.pow(u,2))}}function ab(t,e,r,n,i){const l=[];return!i&&!t.isPointInArea(e)||D0(t,r,e,function(s,m,y){!i&&!bc(s,t.chartArea,0)||s.inRange(e.x,e.y,n)&&l.push({element:s,datasetIndex:m,index:y})},!0),l}function Y4(t,e,r,n){let i=[];function l(u,s,m){const{startAngle:y,endAngle:w}=u.getProps(["startAngle","endAngle"],n),{angle:S}=KR(u,{x:e.x,y:e.y});Gg(S,y,w)&&i.push({element:u,datasetIndex:s,index:m})}return D0(t,r,e,l),i}function J4(t,e,r,n,i,l){let u=[];const s=K4(r);let m=Number.POSITIVE_INFINITY;function y(w,S,E){const I=w.inRange(e.x,e.y,i);if(n&&!I)return;const F=w.getCenterPoint(i);if(!(!!l||t.isPointInArea(F))&&!I)return;const R=s(e,F);R<m?(u=[{element:w,datasetIndex:S,index:E}],m=R):R===m&&u.push({element:w,datasetIndex:S,index:E})}return D0(t,r,e,y),u}function ob(t,e,r,n,i,l){return!l&&!t.isPointInArea(e)?[]:r==="r"&&!n?Y4(t,e,r,i):J4(t,e,r,n,i,l)}function Rk(t,e,r,n,i){const l=[],u=r==="x"?"inXRange":"inYRange";let s=!1;return D0(t,r,e,(m,y,w)=>{m[u]&&m[u](e[r],i)&&(l.push({element:m,datasetIndex:y,index:w}),s=s||m.inRange(e.x,e.y,i))}),n&&!s?[]:l}var Q4={modes:{index(t,e,r,n){const i=Qf(e,t),l=r.axis||"x",u=r.includeInvisible||!1,s=r.intersect?ab(t,i,l,n,u):ob(t,i,l,!1,n,u),m=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach(y=>{const w=s[0].index,S=y.data[w];S&&!S.skip&&m.push({element:S,datasetIndex:y.index,index:w})}),m):[]},dataset(t,e,r,n){const i=Qf(e,t),l=r.axis||"xy",u=r.includeInvisible||!1;let s=r.intersect?ab(t,i,l,n,u):ob(t,i,l,!1,n,u);if(s.length>0){const m=s[0].datasetIndex,y=t.getDatasetMeta(m).data;s=[];for(let w=0;w<y.length;++w)s.push({element:y[w],datasetIndex:m,index:w})}return s},point(t,e,r,n){const i=Qf(e,t),l=r.axis||"xy",u=r.includeInvisible||!1;return ab(t,i,l,n,u)},nearest(t,e,r,n){const i=Qf(e,t),l=r.axis||"xy",u=r.includeInvisible||!1;return ob(t,i,l,r.intersect,n,u)},x(t,e,r,n){const i=Qf(e,t);return Rk(t,i,"x",r.intersect,n)},y(t,e,r,n){const i=Qf(e,t);return Rk(t,i,"y",r.intersect,n)}}};const SL=["left","top","right","bottom"];function fg(t,e){return t.filter(r=>r.pos===e)}function Lk(t,e){return t.filter(r=>SL.indexOf(r.pos)===-1&&r.box.axis===e)}function dg(t,e){return t.sort((r,n)=>{const i=e?n:r,l=e?r:n;return i.weight===l.weight?i.index-l.index:i.weight-l.weight})}function e$(t){const e=[];let r,n,i,l,u,s;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:l,options:{stack:u,stackWeight:s=1}}=i,e.push({index:r,box:i,pos:l,horizontal:i.isHorizontal(),weight:i.weight,stack:u&&l+u,stackWeight:s});return e}function t$(t){const e={};for(const r of t){const{stack:n,pos:i,stackWeight:l}=r;if(!n||!SL.includes(i))continue;const u=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=l}return e}function r$(t,e){const r=t$(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e;let l,u,s;for(l=0,u=t.length;l<u;++l){s=t[l];const{fullSize:m}=s.box,y=r[s.stack],w=y&&s.stackWeight/y.weight;s.horizontal?(s.width=w?w*n:m&&e.availableWidth,s.height=i):(s.width=n,s.height=w?w*i:m&&e.availableHeight)}return r}function n$(t){const e=e$(t),r=dg(e.filter(y=>y.box.fullSize),!0),n=dg(fg(e,"left"),!0),i=dg(fg(e,"right")),l=dg(fg(e,"top"),!0),u=dg(fg(e,"bottom")),s=Lk(e,"x"),m=Lk(e,"y");return{fullSize:r,leftAndTop:n.concat(l),rightAndBottom:i.concat(m).concat(u).concat(s),chartArea:fg(e,"chartArea"),vertical:n.concat(i).concat(m),horizontal:l.concat(u).concat(s)}}function Fk(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function TL(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function i$(t,e,r,n){const{pos:i,box:l}=r,u=t.maxPadding;if(!$r(i)){r.size&&(t[i]-=r.size);const S=n[r.stack]||{size:0,count:1};S.size=Math.max(S.size,r.horizontal?l.height:l.width),r.size=S.size/S.count,t[i]+=r.size}l.getPadding&&TL(u,l.getPadding());const s=Math.max(0,e.outerWidth-Fk(u,t,"left","right")),m=Math.max(0,e.outerHeight-Fk(u,t,"top","bottom")),y=s!==t.w,w=m!==t.h;return t.w=s,t.h=m,r.horizontal?{same:y,other:w}:{same:w,other:y}}function a$(t){const e=t.maxPadding;function r(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function o$(t,e){const r=e.maxPadding;function n(i){const l={left:0,top:0,right:0,bottom:0};return i.forEach(u=>{l[u]=Math.max(e[u],r[u])}),l}return n(t?["left","right"]:["top","bottom"])}function Eg(t,e,r,n){const i=[];let l,u,s,m,y,w;for(l=0,u=t.length,y=0;l<u;++l){s=t[l],m=s.box,m.update(s.width||e.w,s.height||e.h,o$(s.horizontal,e));const{same:S,other:E}=i$(e,r,s,n);y|=S&&i.length,w=w||E,m.fullSize||i.push(s)}return y&&Eg(i,e,r,n)||w}function Hv(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function jk(t,e,r,n){const i=r.padding;let{x:l,y:u}=e;for(const s of t){const m=s.box,y=n[s.stack]||{placed:0,weight:1},w=s.stackWeight/y.weight||1;if(s.horizontal){const S=e.w*w,E=y.size||m.height;Hg(y.start)&&(u=y.start),m.fullSize?Hv(m,i.left,u,r.outerWidth-i.right-i.left,E):Hv(m,e.left+y.placed,u,S,E),y.start=u,y.placed+=S,u=m.bottom}else{const S=e.h*w,E=y.size||m.width;Hg(y.start)&&(l=y.start),m.fullSize?Hv(m,l,i.top,E,r.outerHeight-i.bottom-i.top):Hv(m,l,e.top+y.placed,E,S),y.start=l,y.placed+=S,l=m.right}}e.x=l,e.y=u}var ro={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const i=no(t.options.layout.padding),l=Math.max(e-i.width,0),u=Math.max(r-i.height,0),s=n$(t.boxes),m=s.vertical,y=s.horizontal;xn(t.boxes,L=>{typeof L.beforeLayout=="function"&&L.beforeLayout()});const w=m.reduce((L,R)=>R.box.options&&R.box.options.display===!1?L:L+1,0)||1,S=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:l,availableHeight:u,vBoxMaxWidth:l/2/w,hBoxMaxHeight:u/2}),E=Object.assign({},i);TL(E,no(n));const I=Object.assign({maxPadding:E,w:l,h:u,x:i.left,y:i.top},i),F=r$(m.concat(y),S);Eg(s.fullSize,I,S,F),Eg(m,I,S,F),Eg(y,I,S,F)&&Eg(m,I,S,F),a$(I),jk(s.leftAndTop,I,S,F),I.x+=I.w,I.y+=I.h,jk(s.rightAndBottom,I,S,F),t.chartArea={left:I.left,top:I.top,right:I.left+I.w,bottom:I.top+I.h,height:I.h,width:I.w},xn(s.chartArea,L=>{const R=L.box;Object.assign(R,t.chartArea),R.update(I.w,I.h,{left:0,top:0,right:0,bottom:0})})}};class PL{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}}class s$ extends PL{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const y_="$chartjs",l$={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Bk=t=>t===null||t==="";function u$(t,e){const r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[y_]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",Bk(i)){const l=wk(t,"width");l!==void 0&&(t.width=l)}if(Bk(n))if(t.style.height==="")t.height=t.width/(e||2);else{const l=wk(t,"height");l!==void 0&&(t.height=l)}return t}const AL=a4?{passive:!0}:!1;function c$(t,e,r){t&&t.addEventListener(e,r,AL)}function h$(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,AL)}function f$(t,e){const r=l$[t.type]||t.type,{x:n,y:i}=Qf(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function E_(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function d$(t,e,r){const n=t.canvas,i=new MutationObserver(l=>{let u=!1;for(const s of l)u=u||E_(s.addedNodes,n),u=u&&!E_(s.removedNodes,n);u&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function p$(t,e,r){const n=t.canvas,i=new MutationObserver(l=>{let u=!1;for(const s of l)u=u||E_(s.removedNodes,n),u=u&&!E_(s.addedNodes,n);u&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}const Xg=new Map;let Nk=0;function kL(){const t=window.devicePixelRatio;t!==Nk&&(Nk=t,Xg.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function m$(t,e){Xg.size||window.addEventListener("resize",kL),Xg.set(t,e)}function g$(t){Xg.delete(t),Xg.size||window.removeEventListener("resize",kL)}function y$(t,e,r){const n=t.canvas,i=n&&vP(n);if(!i)return;const l=eL((s,m)=>{const y=i.clientWidth;r(s,m),y<i.clientWidth&&r()},window),u=new ResizeObserver(s=>{const m=s[0],y=m.contentRect.width,w=m.contentRect.height;y===0&&w===0||l(y,w)});return u.observe(i),m$(t,l),u}function sb(t,e,r){r&&r.disconnect(),e==="resize"&&g$(t)}function v$(t,e,r){const n=t.canvas,i=eL(l=>{t.ctx!==null&&r(f$(l,t))},t);return c$(n,e,i),i}class _$ extends PL{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(u$(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[y_])return!1;const n=r[y_].initial;["height","width"].forEach(l=>{const u=n[l];Fr(u)?r.removeAttribute(l):r.setAttribute(l,u)});const i=n.style||{};return Object.keys(i).forEach(l=>{r.style[l]=i[l]}),r.width=r.width,delete r[y_],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const i=e.$proxies||(e.$proxies={}),u={attach:d$,detach:p$,resize:y$}[r]||v$;i[r]=u(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:sb,detach:sb,resize:sb}[r]||h$)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return i4(e,r,n,i)}isAttached(e){const r=e&&vP(e);return!!(r&&r.isConnected)}}function x$(t){return!yP()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?s$:_$}class Ic{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return qp(this.x)&&qp(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const i={};return e.forEach(l=>{i[l]=n[l]&&n[l].active()?n[l]._to:this[l]}),i}}function b$(t,e){const r=t.options.ticks,n=w$(t),i=Math.min(r.maxTicksLimit||n,n),l=r.major.enabled?T$(e):[],u=l.length,s=l[0],m=l[u-1],y=[];if(u>i)return P$(e,y,l,u/i),y;const w=S$(l,e,i);if(u>0){let S,E;const I=u>1?Math.round((m-s)/(u-1)):null;for(Gv(e,y,w,Fr(I)?0:s-I,s),S=0,E=u-1;S<E;S++)Gv(e,y,w,l[S],l[S+1]);return Gv(e,y,w,m,Fr(I)?e.length:m+I),y}return Gv(e,y,w),y}function w$(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function S$(t,e,r){const n=A$(t),i=e.length/r;if(!n)return Math.max(i,1);const l=sN(n);for(let u=0,s=l.length-1;u<s;u++){const m=l[u];if(m>i)return m}return Math.max(i,1)}function T$(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function P$(t,e,r,n){let i=0,l=r[0],u;for(n=Math.ceil(n),u=0;u<t.length;u++)u===l&&(e.push(t[u]),i++,l=r[i*n])}function Gv(t,e,r,n,i){const l=Ar(n,0),u=Math.min(Ar(i,t.length),t.length);let s=0,m,y,w;for(r=Math.ceil(r),i&&(m=i-n,r=m/Math.floor(m/r)),w=l;w<0;)s++,w=Math.round(l+s*r);for(y=Math.max(l,0);y<u;y++)y===w&&(e.push(t[y]),s++,w=Math.round(l+s*r))}function A$(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const k$=t=>t==="left"?"right":t==="right"?"left":t,$k=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,Vk=(t,e)=>Math.min(e||t,t);function qk(t,e){const r=[],n=t.length/e,i=t.length;let l=0;for(;l<i;l+=n)r.push(t[Math.floor(l)]);return r}function E$(t,e,r){const n=t.ticks.length,i=Math.min(e,n-1),l=t._startPixel,u=t._endPixel,s=1e-6;let m=t.getPixelForTick(i),y;if(!(r&&(n===1?y=Math.max(m-l,u-m):e===0?y=(t.getPixelForTick(1)-m)/2:y=(m-t.getPixelForTick(i-1))/2,m+=i<e?y:-y,m<l-s||m>u+s)))return m}function M$(t,e){xn(t,r=>{const n=r.gc,i=n.length/2;let l;if(i>e){for(l=0;l<i;++l)delete r.data[n[l]];n.splice(0,i)}})}function pg(t){return t.drawTicks?t.tickLength:0}function Uk(t,e){if(!t.display)return 0;const r=qi(t.font,e),n=no(t.padding);return(Hn(t.text)?t.text.length:1)*r.lineHeight+n.height}function C$(t,e){return zh(t,{scale:e,type:"scale"})}function O$(t,e,r){return zh(t,{tick:r,index:e,type:"tick"})}function I$(t,e,r){let n=hP(t);return(r&&e!=="right"||!r&&e==="right")&&(n=k$(n)),n}function D$(t,e,r,n){const{top:i,left:l,bottom:u,right:s,chart:m}=t,{chartArea:y,scales:w}=m;let S=0,E,I,F;const L=u-i,R=s-l;if(t.isHorizontal()){if(I=Xa(n,l,s),$r(r)){const U=Object.keys(r)[0],X=r[U];F=w[U].getPixelForValue(X)+L-e}else r==="center"?F=(y.bottom+y.top)/2+L-e:F=$k(t,r,e);E=s-l}else{if($r(r)){const U=Object.keys(r)[0],X=r[U];I=w[U].getPixelForValue(X)-R+e}else r==="center"?I=(y.left+y.right)/2-R+e:I=$k(t,r,e);F=Xa(n,u,i),S=r==="left"?-_i:_i}return{titleX:I,titleY:F,maxWidth:E,rotation:S}}class bd extends Ic{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=gs(e,Number.POSITIVE_INFINITY),r=gs(r,Number.NEGATIVE_INFINITY),n=gs(n,Number.POSITIVE_INFINITY),i=gs(i,Number.NEGATIVE_INFINITY),{min:gs(e,n),max:gs(r,i),minDefined:fi(e),maxDefined:fi(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:l}=this.getUserBounds(),u;if(i&&l)return{min:r,max:n};const s=this.getMatchingVisibleMetas();for(let m=0,y=s.length;m<y;++m)u=s[m].controller.getMinMax(this,e),i||(r=Math.min(r,u.min)),l||(n=Math.max(n,u.max));return r=l&&r>n?n:r,n=i&&r>n?r:n,{min:gs(r,gs(n,r)),max:gs(n,gs(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zn(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:i,grace:l,ticks:u}=this.options,s=u.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=LN(this,l,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=s<this.ticks.length;this._convertTicksToLabels(m?qk(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=b$(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zn(this.options.afterUpdate,[this])}beforeSetDimensions(){zn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),zn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,i,l;for(n=0,i=e.length;n<i;n++)l=e[n],l.label=zn(r.callback,[l.value,n,e],this)}afterTickToLabelConversion(){zn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=Vk(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,l=r.maxRotation;let u=i,s,m,y;if(!this._isVisible()||!r.display||i>=l||n<=1||!this.isHorizontal()){this.labelRotation=i;return}const w=this._getLabelSizes(),S=w.widest.width,E=w.highest.height,I=fa(this.chart.width-S,0,this.maxWidth);s=e.offset?this.maxWidth/n:I/(n-1),S+6>s&&(s=I/(n-(e.offset?.5:1)),m=this.maxHeight-pg(e.grid)-r.padding-Uk(e.title,this.chart.options.font),y=Math.sqrt(S*S+E*E),u=uP(Math.min(Math.asin(fa((w.highest.height+6)/s,-1,1)),Math.asin(fa(m/y,-1,1))-Math.asin(fa(E/y,-1,1)))),u=Math.max(i,Math.min(l,u))),this.labelRotation=u}afterCalculateLabelRotation(){zn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:l}}=this,u=this._isVisible(),s=this.isHorizontal();if(u){const m=Uk(i,r.options.font);if(s?(e.width=this.maxWidth,e.height=pg(l)+m):(e.height=this.maxHeight,e.width=pg(l)+m),n.display&&this.ticks.length){const{first:y,last:w,widest:S,highest:E}=this._getLabelSizes(),I=n.padding*2,F=Ml(this.labelRotation),L=Math.cos(F),R=Math.sin(F);if(s){const U=n.mirror?0:R*S.width+L*E.height;e.height=Math.min(this.maxHeight,e.height+U+I)}else{const U=n.mirror?0:L*S.width+R*E.height;e.width=Math.min(this.maxWidth,e.width+U+I)}this._calculatePadding(y,w,R,L)}}this._handleMargins(),s?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){const{ticks:{align:l,padding:u},position:s}=this.options,m=this.labelRotation!==0,y=s!=="top"&&this.axis==="x";if(this.isHorizontal()){const w=this.getPixelForTick(0)-this.left,S=this.right-this.getPixelForTick(this.ticks.length-1);let E=0,I=0;m?y?(E=i*e.width,I=n*r.height):(E=n*e.height,I=i*r.width):l==="start"?I=r.width:l==="end"?E=e.width:l!=="inner"&&(E=e.width/2,I=r.width/2),this.paddingLeft=Math.max((E-w+u)*this.width/(this.width-w),0),this.paddingRight=Math.max((I-S+u)*this.width/(this.width-S),0)}else{let w=r.height/2,S=e.height/2;l==="start"?(w=0,S=e.height):l==="end"&&(w=r.height,S=0),this.paddingTop=w+u,this.paddingBottom=S+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Fr(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=qk(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:i,_longestTextCache:l}=this,u=[],s=[],m=Math.floor(r/Vk(r,n));let y=0,w=0,S,E,I,F,L,R,U,X,K,re,W;for(S=0;S<r;S+=m){if(F=e[S].label,L=this._resolveTickFontOptions(S),i.font=R=L.string,U=l[R]=l[R]||{data:{},gc:[]},X=L.lineHeight,K=re=0,!Fr(F)&&!Hn(F))K=A_(i,U.data,U.gc,K,F),re=X;else if(Hn(F))for(E=0,I=F.length;E<I;++E)W=F[E],!Fr(W)&&!Hn(W)&&(K=A_(i,U.data,U.gc,K,W),re+=X);u.push(K),s.push(re),y=Math.max(K,y),w=Math.max(re,w)}M$(l,r);const J=u.indexOf(y),ie=s.indexOf(w),he=ve=>({width:u[ve]||0,height:s[ve]||0});return{first:he(0),last:he(r-1),widest:he(J),highest:he(ie),widths:u,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return hN(this._alignToPixels?Gf(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=O$(this.getContext(),e,n))}return this.$context||(this.$context=C$(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Ml(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),l=this._getLabelSizes(),u=e.autoSkipPadding||0,s=l?l.widest.width+u:0,m=l?l.highest.height+u:0;return this.isHorizontal()?m*n>s*i?s/n:m/i:m*i<s*n?m/n:s/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,i=this.options,{grid:l,position:u,border:s}=i,m=l.offset,y=this.isHorizontal(),S=this.ticks.length+(m?1:0),E=pg(l),I=[],F=s.setContext(this.getContext()),L=F.display?F.width:0,R=L/2,U=function(Ue){return Gf(n,Ue,L)};let X,K,re,W,J,ie,he,ve,Re,de,Oe,Le;if(u==="top")X=U(this.bottom),ie=this.bottom-E,ve=X-R,de=U(e.top)+R,Le=e.bottom;else if(u==="bottom")X=U(this.top),de=e.top,Le=U(e.bottom)-R,ie=X+R,ve=this.top+E;else if(u==="left")X=U(this.right),J=this.right-E,he=X-R,Re=U(e.left)+R,Oe=e.right;else if(u==="right")X=U(this.left),Re=e.left,Oe=U(e.right)-R,J=X+R,he=this.left+E;else if(r==="x"){if(u==="center")X=U((e.top+e.bottom)/2+.5);else if($r(u)){const Ue=Object.keys(u)[0],Qe=u[Ue];X=U(this.chart.scales[Ue].getPixelForValue(Qe))}de=e.top,Le=e.bottom,ie=X+R,ve=ie+E}else if(r==="y"){if(u==="center")X=U((e.left+e.right)/2);else if($r(u)){const Ue=Object.keys(u)[0],Qe=u[Ue];X=U(this.chart.scales[Ue].getPixelForValue(Qe))}J=X-R,he=J-E,Re=e.left,Oe=e.right}const Ge=Ar(i.ticks.maxTicksLimit,S),Ne=Math.max(1,Math.ceil(S/Ge));for(K=0;K<S;K+=Ne){const Ue=this.getContext(K),Qe=l.setContext(Ue),$e=s.setContext(Ue),Ye=Qe.lineWidth,nt=Qe.color,Se=$e.dash||[],De=$e.dashOffset,ft=Qe.tickWidth,At=Qe.tickColor,jt=Qe.tickBorderDash||[],Nt=Qe.tickBorderDashOffset;re=E$(this,K,m),re!==void 0&&(W=Gf(n,re,Ye),y?J=he=Re=Oe=W:ie=ve=de=Le=W,I.push({tx1:J,ty1:ie,tx2:he,ty2:ve,x1:Re,y1:de,x2:Oe,y2:Le,width:Ye,color:nt,borderDash:Se,borderDashOffset:De,tickWidth:ft,tickColor:At,tickBorderDash:jt,tickBorderDashOffset:Nt}))}return this._ticksLength=S,this._borderValue=X,I}_computeLabelItems(e){const r=this.axis,n=this.options,{position:i,ticks:l}=n,u=this.isHorizontal(),s=this.ticks,{align:m,crossAlign:y,padding:w,mirror:S}=l,E=pg(n.grid),I=E+w,F=S?-w:I,L=-Ml(this.labelRotation),R=[];let U,X,K,re,W,J,ie,he,ve,Re,de,Oe,Le="middle";if(i==="top")J=this.bottom-F,ie=this._getXAxisLabelAlignment();else if(i==="bottom")J=this.top+F,ie=this._getXAxisLabelAlignment();else if(i==="left"){const Ne=this._getYAxisLabelAlignment(E);ie=Ne.textAlign,W=Ne.x}else if(i==="right"){const Ne=this._getYAxisLabelAlignment(E);ie=Ne.textAlign,W=Ne.x}else if(r==="x"){if(i==="center")J=(e.top+e.bottom)/2+I;else if($r(i)){const Ne=Object.keys(i)[0],Ue=i[Ne];J=this.chart.scales[Ne].getPixelForValue(Ue)+I}ie=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")W=(e.left+e.right)/2-I;else if($r(i)){const Ne=Object.keys(i)[0],Ue=i[Ne];W=this.chart.scales[Ne].getPixelForValue(Ue)}ie=this._getYAxisLabelAlignment(E).textAlign}r==="y"&&(m==="start"?Le="top":m==="end"&&(Le="bottom"));const Ge=this._getLabelSizes();for(U=0,X=s.length;U<X;++U){K=s[U],re=K.label;const Ne=l.setContext(this.getContext(U));he=this.getPixelForTick(U)+l.labelOffset,ve=this._resolveTickFontOptions(U),Re=ve.lineHeight,de=Hn(re)?re.length:1;const Ue=de/2,Qe=Ne.color,$e=Ne.textStrokeColor,Ye=Ne.textStrokeWidth;let nt=ie;u?(W=he,ie==="inner"&&(U===X-1?nt=this.options.reverse?"left":"right":U===0?nt=this.options.reverse?"right":"left":nt="center"),i==="top"?y==="near"||L!==0?Oe=-de*Re+Re/2:y==="center"?Oe=-Ge.highest.height/2-Ue*Re+Re:Oe=-Ge.highest.height+Re/2:y==="near"||L!==0?Oe=Re/2:y==="center"?Oe=Ge.highest.height/2-Ue*Re:Oe=Ge.highest.height-de*Re,S&&(Oe*=-1),L!==0&&!Ne.showLabelBackdrop&&(W+=Re/2*Math.sin(L))):(J=he,Oe=(1-de)*Re/2);let Se;if(Ne.showLabelBackdrop){const De=no(Ne.backdropPadding),ft=Ge.heights[U],At=Ge.widths[U];let jt=Oe-De.top,Nt=0-De.left;switch(Le){case"middle":jt-=ft/2;break;case"bottom":jt-=ft;break}switch(ie){case"center":Nt-=At/2;break;case"right":Nt-=At;break;case"inner":U===X-1?Nt-=At:U>0&&(Nt-=At/2);break}Se={left:Nt,top:jt,width:At+De.width,height:ft+De.height,color:Ne.backdropColor}}R.push({label:re,font:ve,textOffset:Oe,options:{rotation:L,color:Qe,strokeColor:$e,strokeWidth:Ye,textAlign:nt,textBaseline:Le,translation:[W,J],backdrop:Se}})}return R}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Ml(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:i,padding:l}}=this.options,u=this._getLabelSizes(),s=e+l,m=u.widest.width;let y,w;return r==="left"?i?(w=this.right+l,n==="near"?y="left":n==="center"?(y="center",w+=m/2):(y="right",w+=m)):(w=this.right-s,n==="near"?y="right":n==="center"?(y="center",w-=m/2):(y="left",w=this.left)):r==="right"?i?(w=this.left+l,n==="near"?y="right":n==="center"?(y="center",w-=m/2):(y="left",w-=m)):(w=this.left+s,n==="near"?y="left":n==="center"?(y="center",w+=m/2):(y="right",w=this.right)):y="right",{textAlign:y,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:i,width:l,height:u}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,l,u),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const i=this.ticks.findIndex(l=>l.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let l,u;const s=(m,y,w)=>{!w.width||!w.color||(n.save(),n.lineWidth=w.width,n.strokeStyle=w.color,n.setLineDash(w.borderDash||[]),n.lineDashOffset=w.borderDashOffset,n.beginPath(),n.moveTo(m.x,m.y),n.lineTo(y.x,y.y),n.stroke(),n.restore())};if(r.display)for(l=0,u=i.length;l<u;++l){const m=i[l];r.drawOnChartArea&&s({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),r.drawTicks&&s({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:i}}=this,l=n.setContext(this.getContext()),u=n.display?l.width:0;if(!u)return;const s=i.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let y,w,S,E;this.isHorizontal()?(y=Gf(e,this.left,u)-u/2,w=Gf(e,this.right,s)+s/2,S=E=m):(S=Gf(e,this.top,u)-u/2,E=Gf(e,this.bottom,s)+s/2,y=w=m),r.save(),r.lineWidth=l.width,r.strokeStyle=l.color,r.beginPath(),r.moveTo(y,S),r.lineTo(w,E),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,i=this._computeLabelArea();i&&C0(n,i);const l=this.getLabelItems(e);for(const u of l){const s=u.options,m=u.font,y=u.label,w=u.textOffset;md(n,y,0,w,m,s)}i&&O0(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;const l=qi(n.font),u=no(n.padding),s=n.align;let m=l.lineHeight/2;r==="bottom"||r==="center"||$r(r)?(m+=u.bottom,Hn(n.text)&&(m+=l.lineHeight*(n.text.length-1))):m+=u.top;const{titleX:y,titleY:w,maxWidth:S,rotation:E}=D$(this,m,r,s);md(e,n.text,0,0,l,{color:n.color,maxWidth:S,rotation:E,textAlign:I$(s,r,i),textBaseline:"middle",translation:[y,w]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Ar(e.grid&&e.grid.z,-1),i=Ar(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==bd.prototype.draw?[{z:r,draw:l=>{this.draw(l)}}]:[{z:n,draw:l=>{this.drawBackground(),this.drawGrid(l),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:l=>{this.drawLabels(l)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let l,u;for(l=0,u=r.length;l<u;++l){const s=r[l];s[n]===this.id&&(!e||s.type===e)&&i.push(s)}return i}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return qi(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Zv{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;L$(r)&&(n=this.register(r));const i=this.items,l=e.id,u=this.scope+"."+l;if(!l)throw new Error("class does not have id: "+e);return l in i||(i[l]=e,z$(e,u,n),this.override&&Gn.override(e.id,e.overrides)),u}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in Gn[i]&&(delete Gn[i][n],this.override&&delete pd[n])}}function z$(t,e,r){const n=Wg(Object.create(null),[r?Gn.get(r):{},Gn.get(e),t.defaults]);Gn.set(e,n),t.defaultRoutes&&R$(e,t.defaultRoutes),t.descriptors&&Gn.describe(e,t.descriptors)}function R$(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),i=n.pop(),l=[t].concat(n).join("."),u=e[r].split("."),s=u.pop(),m=u.join(".");Gn.route(l,i,m,s)})}function L$(t){return"id"in t&&"defaults"in t}class F${constructor(){this.controllers=new Zv(Rh,"datasets",!0),this.elements=new Zv(Ic,"elements"),this.plugins=new Zv(Object,"plugins"),this.scales=new Zv(bd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{const l=n||this._getRegistryForType(i);n||l.isForType(i)||l===this.plugins&&i.id?this._exec(e,l,i):xn(i,u=>{const s=n||this._getRegistryForType(u);this._exec(e,s,u)})})}_exec(e,r,n){const i=lP(e);zn(n["before"+i],[],n),r[e](n),zn(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var wu=new F$;class j${constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const l=i?this._descriptors(e).filter(i):this._descriptors(e),u=this._notify(l,e,r,n);return r==="afterDestroy"&&(this._notify(l,e,"stop"),this._notify(this._init,e,"uninstall")),u}_notify(e,r,n,i){i=i||{};for(const l of e){const u=l.plugin,s=u[n],m=[r,i,l.options];if(zn(s,m,u)===!1&&i.cancelable)return!1}return!0}invalidate(){Fr(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,i=Ar(n.options&&n.options.plugins,{}),l=B$(n);return i===!1&&!r?[]:$$(e,l,i,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,i=(l,u)=>l.filter(s=>!u.some(m=>s.plugin.id===m.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}}function B$(t){const e={},r=[],n=Object.keys(wu.plugins.items);for(let l=0;l<n.length;l++)r.push(wu.getPlugin(n[l]));const i=t.plugins||[];for(let l=0;l<i.length;l++){const u=i[l];r.indexOf(u)===-1&&(r.push(u),e[u.id]=!0)}return{plugins:r,localIds:e}}function N$(t,e){return!e&&t===!1?null:t===!0?{}:t}function $$(t,{plugins:e,localIds:r},n,i){const l=[],u=t.getContext();for(const s of e){const m=s.id,y=N$(n[m],i);y!==null&&l.push({plugin:s,options:V$(t.config,{plugin:s,local:r[m]},y,u)})}return l}function V$(t,{plugin:e,local:r},n,i){const l=t.pluginScopeKeys(e),u=t.getOptionScopes(n,l);return r&&e.defaults&&u.push(e.defaults),t.createResolver(u,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function P2(t,e){const r=Gn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function q$(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function U$(t,e){return t===e?"_index_":"_value_"}function Wk(t){if(t==="x"||t==="y"||t==="r")return t}function W$(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function A2(t,...e){if(Wk(t))return t;for(const r of e){const n=r.axis||W$(r.position)||t.length>1&&Wk(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Hk(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function H$(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return Hk(t,"x",r[0])||Hk(t,"y",r[0])}return{}}function G$(t,e){const r=pd[t.type]||{scales:{}},n=e.scales||{},i=P2(t.type,e),l=Object.create(null);return Object.keys(n).forEach(u=>{const s=n[u];if(!$r(s))return console.error(`Invalid scale configuration for scale: ${u}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const m=A2(u,s,H$(u,t),Gn.scales[s.type]),y=U$(m,i),w=r.scales||{};l[u]=Lg(Object.create(null),[{axis:m},s,w[m],w[y]])}),t.data.datasets.forEach(u=>{const s=u.type||t.type,m=u.indexAxis||P2(s,e),w=(pd[s]||{}).scales||{};Object.keys(w).forEach(S=>{const E=q$(S,m),I=u[E+"AxisID"]||E;l[I]=l[I]||Object.create(null),Lg(l[I],[{axis:E},n[I],w[S]])})}),Object.keys(l).forEach(u=>{const s=l[u];Lg(s,[Gn.scales[s.type],Gn.scale])}),l}function EL(t){const e=t.options||(t.options={});e.plugins=Ar(e.plugins,{}),e.scales=G$(t,e)}function ML(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Z$(t){return t=t||{},t.data=ML(t.data),EL(t),t}const Gk=new Map,CL=new Set;function Xv(t,e){let r=Gk.get(t);return r||(r=e(),Gk.set(t,r),CL.add(r)),r}const mg=(t,e,r)=>{const n=Oh(e,r);n!==void 0&&t.add(n)};class X${constructor(e){this._config=Z$(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ML(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),EL(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xv(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return Xv(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return Xv(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return Xv(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){const{options:i,type:l}=this,u=this._cachedScopes(e,n),s=u.get(r);if(s)return s;const m=new Set;r.forEach(w=>{e&&(m.add(e),w.forEach(S=>mg(m,e,S))),w.forEach(S=>mg(m,i,S)),w.forEach(S=>mg(m,pd[l]||{},S)),w.forEach(S=>mg(m,Gn,S)),w.forEach(S=>mg(m,S2,S))});const y=Array.from(m);return y.length===0&&y.push(Object.create(null)),CL.has(r)&&u.set(r,y),y}chartOptionScopes(){const{options:e,type:r}=this;return[e,pd[r]||{},Gn.datasets[r]||{},{type:r},Gn,S2]}resolveNamedOptions(e,r,n,i=[""]){const l={$shared:!0},{resolver:u,subPrefixes:s}=Zk(this._resolverCache,e,i);let m=u;if(Y$(u,r)){l.$shared=!1,n=Ih(n)?n():n;const y=this.createResolver(e,n,s);m=Up(u,n,y)}for(const y of r)l[y]=m[y];return l}createResolver(e,r,n=[""],i){const{resolver:l}=Zk(this._resolverCache,e,n);return $r(r)?Up(l,r,void 0,i):l}}function Zk(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const i=r.join();let l=n.get(i);return l||(l={resolver:pP(e,r),subPrefixes:r.filter(s=>!s.toLowerCase().includes("hover"))},n.set(i,l)),l}const K$=t=>$r(t)&&Object.getOwnPropertyNames(t).some(e=>Ih(t[e]));function Y$(t,e){const{isScriptable:r,isIndexable:n}=oL(t);for(const i of e){const l=r(i),u=n(i),s=(u||l)&&t[i];if(l&&(Ih(s)||K$(s))||u&&Hn(s))return!0}return!1}var J$="4.5.0";const Q$=["top","bottom","left","right","chartArea"];function Xk(t,e){return t==="top"||t==="bottom"||Q$.indexOf(t)===-1&&e==="x"}function Kk(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Yk(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),zn(r&&r.onComplete,[t],e)}function e6(t){const e=t.chart,r=e.options.animation;zn(r&&r.onProgress,[t],e)}function OL(t){return yP()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const v_={},Jk=t=>{const e=OL(t);return Object.values(v_).filter(r=>r.canvas===e).pop()};function t6(t,e,r){const n=Object.keys(t);for(const i of n){const l=+i;if(l>=e){const u=t[i];delete t[i],(r>0||l>e)&&(t[l+r]=u)}}}function r6(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}let z0=class{static defaults=Gn;static instances=v_;static overrides=pd;static registry=wu;static version=J$;static getChart=Jk;static register(...e){wu.add(...e),Qk()}static unregister(...e){wu.remove(...e),Qk()}constructor(e,r){const n=this.config=new X$(r),i=OL(e),l=Jk(i);if(l)throw new Error("Canvas is already in use. Chart with ID '"+l.id+"' must be destroyed before the canvas with ID '"+l.canvas.id+"' can be reused.");const u=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||x$(i)),this.platform.updateConfig(n);const s=this.platform.acquireContext(i,u.aspectRatio),m=s&&s.canvas,y=m&&m.height,w=m&&m.width;if(this.id=J5(),this.ctx=s,this.canvas=m,this.width=w,this.height=y,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new j$,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mN(S=>this.update(S),u.resizeDelay||0),this._dataChanges=[],v_[this.id]=this,!s||!m){console.error("Failed to create chart: can't acquire context from the given item");return}gc.listen(this,"complete",Yk),gc.listen(this,"progress",e6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:l}=this;return Fr(e)?r&&l?l:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return wu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return vk(this.canvas,this.ctx),this}stop(){return gc.stop(this),this}resize(e,r){gc.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,i=this.canvas,l=n.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(i,e,r,l),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,bk(this,s,!0)&&(this.notifyPlugins("resize",{size:u}),zn(n.onResize,[this,u],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};xn(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((u,s)=>(u[s]=!1,u),{});let l=[];r&&(l=l.concat(Object.keys(r).map(u=>{const s=r[u],m=A2(u,s),y=m==="r",w=m==="x";return{options:s,dposition:y?"chartArea":w?"bottom":"left",dtype:y?"radialLinear":w?"category":"linear"}}))),xn(l,u=>{const s=u.options,m=s.id,y=A2(m,s),w=Ar(s.type,u.dtype);(s.position===void 0||Xk(s.position,y)!==Xk(u.dposition))&&(s.position=u.dposition),i[m]=!0;let S=null;if(m in n&&n[m].type===w)S=n[m];else{const E=wu.getScale(w);S=new E({id:m,type:w,ctx:this.ctx,chart:this}),n[S.id]=S}S.init(s,e)}),xn(i,(u,s)=>{u||delete n[s]}),xn(n,u=>{ro.configure(this,u,u.options),ro.addBox(this,u)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,l)=>i.index-l.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(Kk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(l=>l===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){const l=r[n];let u=this.getDatasetMeta(n);const s=l.type||this.config.type;if(u.type&&u.type!==s&&(this._destroyDatasetMeta(n),u=this.getDatasetMeta(n)),u.type=s,u.indexAxis=l.indexAxis||P2(s,this.options),u.order=l.order||0,u.index=n,u.label=""+l.label,u.visible=this.isDatasetVisible(n),u.controller)u.controller.updateIndex(n),u.controller.linkScales();else{const m=wu.getController(s),{datasetElementType:y,dataElementType:w}=Gn.datasets[s];Object.assign(m,{dataElementType:wu.getElement(w),datasetElementType:y&&wu.getElement(y)}),u.controller=new m(this,n),e.push(u.controller)}}return this._updateMetasets(),e}_resetElements(){xn(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const l=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let y=0,w=this.data.datasets.length;y<w;y++){const{controller:S}=this.getDatasetMeta(y),E=!i&&l.indexOf(S)===-1;S.buildOrUpdateElements(E),u=Math.max(+S.getMaxOverflow(),u)}u=this._minPadding=n.layout.autoPadding?u:0,this._updateLayout(u),i||xn(l,y=>{y.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Kk("z","_idx"));const{_active:s,_lastEvent:m}=this;m?this._eventHandler(m,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){xn(this.scales,e=>{ro.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!uk(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:l}of r){const u=n==="_removeElements"?-l:l;t6(e,i,u)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=l=>new Set(e.filter(u=>u[0]===l).map((u,s)=>s+","+u.splice(1).join(","))),i=n(0);for(let l=1;l<r;l++)if(!uk(i,n(l)))return;return Array.from(i).map(l=>l.split(",")).map(l=>({method:l[1],start:+l[2],count:+l[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ro.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],xn(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,l)=>{i._idx=l}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Ih(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gc.has(this)?this.attached&&!gc.running(this)&&gc.start(this):(this.draw(),Yk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let i,l;for(i=0,l=r.length;i<l;++i){const u=r[i];(!e||u.visible)&&n.push(u)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=yL(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(i&&C0(r,i),e.controller.draw(),i&&O0(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return bc(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){const l=Q4.modes[r];return typeof l=="function"?l(this,e,n,i):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let i=n.filter(l=>l&&l._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=zh(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const i=n?"show":"hide",l=this.getDatasetMeta(e),u=l.controller._resolveAnimations(void 0,i);Hg(r)?(l.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),u.update(l,{visible:n}),this.update(s=>s.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),gc.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),vk(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete v_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},i=(l,u,s)=>{l.offsetX=u,l.offsetY=s,this._eventHandler(l)};xn(this.options.events,l=>n(l,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(m,y)=>{r.addEventListener(this,m,y),e[m]=y},i=(m,y)=>{e[m]&&(r.removeEventListener(this,m,y),delete e[m])},l=(m,y)=>{this.canvas&&this.resize(m,y)};let u;const s=()=>{i("attach",s),this.attached=!0,this.resize(),n("resize",l),n("detach",u)};u=()=>{this.attached=!1,i("resize",l),this._stop(),this._resize(0,0),n("attach",s)},r.isAttached(this.canvas)?s():u()}unbindEvents(){xn(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},xn(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const i=n?"set":"remove";let l,u,s,m;for(r==="dataset"&&(l=this.getDatasetMeta(e[0].datasetIndex),l.controller["_"+i+"DatasetHoverStyle"]()),s=0,m=e.length;s<m;++s){u=e[s];const y=u&&this.getDatasetMeta(u.datasetIndex).controller;y&&y[i+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:l,index:u})=>{const s=this.getDatasetMeta(l);if(!s)throw new Error("No dataset found at index "+l);return{datasetIndex:l,element:s.data[u],index:u}});!S_(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const i=this.options.hover,l=(m,y)=>m.filter(w=>!y.some(S=>w.datasetIndex===S.datasetIndex&&w.index===S.index)),u=l(r,e),s=n?e:l(e,r);u.length&&this.updateHoverStyle(u,i.mode,!1),s.length&&i.mode&&this.updateHoverStyle(s,i.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=u=>(u.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;const l=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(l||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:i=[],options:l}=this,u=r,s=this._getActiveElements(e,i,n,u),m=iN(e),y=r6(e,this._lastEvent,n,m);n&&(this._lastEvent=null,zn(l.onHover,[e,s,this],this),m&&zn(l.onClick,[e,s,this],this));const w=!S_(s,i);return(w||r)&&(this._active=s,this._updateHoverStyles(s,i,r)),this._lastEvent=y,w}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;const l=this.options.hover;return this.getElementsAtEventForMode(e,l.mode,l,i)}};function Qk(){return xn(z0.instances,t=>t._plugins.invalidate())}function n6(t,e,r){const{startAngle:n,x:i,y:l,outerRadius:u,innerRadius:s,options:m}=e,{borderWidth:y,borderJoinStyle:w}=m,S=Math.min(y/u,Ja(n-r));if(t.beginPath(),t.arc(i,l,u-y/2,n+S/2,r-S/2),s>0){const E=Math.min(y/s,Ja(n-r));t.arc(i,l,s+y/2,r-E/2,n+E/2,!0)}else{const E=Math.min(y/2,u*Ja(n-r));if(w==="round")t.arc(i,l,E,r-en/2,n+en/2,!0);else if(w==="bevel"){const I=2*E*E,F=-I*Math.cos(r+en/2)+i,L=-I*Math.sin(r+en/2)+l,R=I*Math.cos(n+en/2)+i,U=I*Math.sin(n+en/2)+l;t.lineTo(F,L),t.lineTo(R,U)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function i6(t,e,r){const{startAngle:n,pixelMargin:i,x:l,y:u,outerRadius:s,innerRadius:m}=e;let y=i/s;t.beginPath(),t.arc(l,u,s,n-y,r+y),m>i?(y=i/m,t.arc(l,u,m,r+y,n-y,!0)):t.arc(l,u,i,r+_i,n-_i),t.closePath(),t.clip()}function a6(t){return dP(t,["outerStart","outerEnd","innerStart","innerEnd"])}function o6(t,e,r,n){const i=a6(t.options.borderRadius),l=(r-e)/2,u=Math.min(l,n*e/2),s=m=>{const y=(r-Math.min(l,m))*n/2;return fa(m,0,Math.min(l,y))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:fa(i.innerStart,0,u),innerEnd:fa(i.innerEnd,0,u)}}function Pp(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function M_(t,e,r,n,i,l){const{x:u,y:s,startAngle:m,pixelMargin:y,innerRadius:w}=e,S=Math.max(e.outerRadius+n+r-y,0),E=w>0?w+n+r+y:0;let I=0;const F=i-m;if(n){const Ne=w>0?w-n:0,Ue=S>0?S-n:0,Qe=(Ne+Ue)/2,$e=Qe!==0?F*Qe/(Qe+n):F;I=(F-$e)/2}const L=Math.max(.001,F*S-r/en)/S,R=(F-L)/2,U=m+R+I,X=i-R-I,{outerStart:K,outerEnd:re,innerStart:W,innerEnd:J}=o6(e,E,S,X-U),ie=S-K,he=S-re,ve=U+K/ie,Re=X-re/he,de=E+W,Oe=E+J,Le=U+W/de,Ge=X-J/Oe;if(t.beginPath(),l){const Ne=(ve+Re)/2;if(t.arc(u,s,S,ve,Ne),t.arc(u,s,S,Ne,Re),re>0){const Ye=Pp(he,Re,u,s);t.arc(Ye.x,Ye.y,re,Re,X+_i)}const Ue=Pp(Oe,X,u,s);if(t.lineTo(Ue.x,Ue.y),J>0){const Ye=Pp(Oe,Ge,u,s);t.arc(Ye.x,Ye.y,J,X+_i,Ge+Math.PI)}const Qe=(X-J/E+(U+W/E))/2;if(t.arc(u,s,E,X-J/E,Qe,!0),t.arc(u,s,E,Qe,U+W/E,!0),W>0){const Ye=Pp(de,Le,u,s);t.arc(Ye.x,Ye.y,W,Le+Math.PI,U-_i)}const $e=Pp(ie,U,u,s);if(t.lineTo($e.x,$e.y),K>0){const Ye=Pp(ie,ve,u,s);t.arc(Ye.x,Ye.y,K,U-_i,ve)}}else{t.moveTo(u,s);const Ne=Math.cos(ve)*S+u,Ue=Math.sin(ve)*S+s;t.lineTo(Ne,Ue);const Qe=Math.cos(Re)*S+u,$e=Math.sin(Re)*S+s;t.lineTo(Qe,$e)}t.closePath()}function s6(t,e,r,n,i){const{fullCircles:l,startAngle:u,circumference:s}=e;let m=e.endAngle;if(l){M_(t,e,r,n,m,i);for(let y=0;y<l;++y)t.fill();isNaN(s)||(m=u+(s%qn||qn))}return M_(t,e,r,n,m,i),t.fill(),m}function l6(t,e,r,n,i){const{fullCircles:l,startAngle:u,circumference:s,options:m}=e,{borderWidth:y,borderJoinStyle:w,borderDash:S,borderDashOffset:E,borderRadius:I}=m,F=m.borderAlign==="inner";if(!y)return;t.setLineDash(S||[]),t.lineDashOffset=E,F?(t.lineWidth=y*2,t.lineJoin=w||"round"):(t.lineWidth=y,t.lineJoin=w||"bevel");let L=e.endAngle;if(l){M_(t,e,r,n,L,i);for(let R=0;R<l;++R)t.stroke();isNaN(s)||(L=u+(s%qn||qn))}F&&i6(t,e,L),m.selfJoin&&L-u>=en&&I===0&&w!=="miter"&&n6(t,e,L),l||(M_(t,e,r,n,L,i),t.stroke())}class u6 extends Ic{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,n){const i=this.getProps(["x","y"],n),{angle:l,distance:u}=KR(i,{x:e,y:r}),{startAngle:s,endAngle:m,innerRadius:y,outerRadius:w,circumference:S}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),E=(this.options.spacing+this.options.borderWidth)/2,I=Ar(S,m-s),F=Gg(l,s,m)&&s!==m,L=I>=qn||F,R=_c(u,y+E,w+E);return L&&R}getCenterPoint(e){const{x:r,y:n,startAngle:i,endAngle:l,innerRadius:u,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:m,spacing:y}=this.options,w=(i+l)/2,S=(u+s+y+m)/2;return{x:r+Math.cos(w)*S,y:n+Math.sin(w)*S}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:r,circumference:n}=this,i=(r.offset||0)/4,l=(r.spacing||0)/2,u=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>qn?Math.floor(n/qn):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const s=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(s)*i,Math.sin(s)*i);const m=1-Math.sin(Math.min(en,n||0)),y=i*m;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,s6(e,this,y,l,u),l6(e,this,y,l,u),e.restore()}}function IL(t,e,r=e){t.lineCap=Ar(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Ar(r.borderDash,e.borderDash)),t.lineDashOffset=Ar(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Ar(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ar(r.borderWidth,e.borderWidth),t.strokeStyle=Ar(r.borderColor,e.borderColor)}function c6(t,e,r){t.lineTo(r.x,r.y)}function h6(t){return t.stepped?kN:t.tension||t.cubicInterpolationMode==="monotone"?EN:c6}function DL(t,e,r={}){const n=t.length,{start:i=0,end:l=n-1}=r,{start:u,end:s}=e,m=Math.max(i,u),y=Math.min(l,s),w=i<u&&l<u||i>s&&l>s;return{count:n,start:m,loop:e.loop,ilen:y<m&&!w?n+y-m:y-m}}function f6(t,e,r,n){const{points:i,options:l}=e,{count:u,start:s,loop:m,ilen:y}=DL(i,r,n),w=h6(l);let{move:S=!0,reverse:E}=n||{},I,F,L;for(I=0;I<=y;++I)F=i[(s+(E?y-I:I))%u],!F.skip&&(S?(t.moveTo(F.x,F.y),S=!1):w(t,L,F,E,l.stepped),L=F);return m&&(F=i[(s+(E?y:0))%u],w(t,L,F,E,l.stepped)),!!m}function d6(t,e,r,n){const i=e.points,{count:l,start:u,ilen:s}=DL(i,r,n),{move:m=!0,reverse:y}=n||{};let w=0,S=0,E,I,F,L,R,U;const X=re=>(u+(y?s-re:re))%l,K=()=>{L!==R&&(t.lineTo(w,R),t.lineTo(w,L),t.lineTo(w,U))};for(m&&(I=i[X(0)],t.moveTo(I.x,I.y)),E=0;E<=s;++E){if(I=i[X(E)],I.skip)continue;const re=I.x,W=I.y,J=re|0;J===F?(W<L?L=W:W>R&&(R=W),w=(S*w+re)/++S):(K(),t.lineTo(re,W),F=J,S=0,L=R=W),U=W}K()}function k2(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?d6:f6}function p6(t){return t.stepped?o4:t.tension||t.cubicInterpolationMode==="monotone"?s4:ed}function m6(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),IL(t,e.options),t.stroke(i)}function g6(t,e,r,n){const{segments:i,options:l}=e,u=k2(e);for(const s of i)IL(t,l,s.style),t.beginPath(),u(t,e,s,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const y6=typeof Path2D=="function";function v6(t,e,r,n){y6&&!e.options.segment?m6(t,e,r,n):g6(t,e,r,n)}class R0 extends Ic{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;JN(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=d4(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,i=e[r],l=this.points,u=gL(this,{property:r,start:i,end:i});if(!u.length)return;const s=[],m=p6(n);let y,w;for(y=0,w=u.length;y<w;++y){const{start:S,end:E}=u[y],I=l[S],F=l[E];if(I===F){s.push(I);continue}const L=Math.abs((i-I[r])/(F[r]-I[r])),R=m(I,F,L,n.stepped);R[r]=e[r],s.push(R)}return s.length===1?s[0]:s}pathSegment(e,r,n){return k2(this)(e,this,r,n)}path(e,r,n){const i=this.segments,l=k2(this);let u=this._loop;r=r||0,n=n||this.points.length-r;for(const s of i)u&=l(e,this,s,{start:r,end:r+n-1});return!!u}draw(e,r,n,i){const l=this.options||{};(this.points||[]).length&&l.borderWidth&&(e.save(),v6(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function eE(t,e,r,n){const i=t.options,{[r]:l}=t.getProps([r],n);return Math.abs(e-l)<i.radius+i.hitRadius}class _6 extends Ic{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,n){const i=this.options,{x:l,y:u}=this.getProps(["x","y"],n);return Math.pow(e-l,2)+Math.pow(r-u,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,r){return eE(this,e,"x",r)}inYRange(e,r){return eE(this,e,"y",r)}getCenterPoint(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);const n=r&&e.borderWidth||0;return(r+n)*2}draw(e,r){const n=this.options;this.skip||n.radius<.1||!bc(this,r,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,T2(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zL(t,e){const{x:r,y:n,base:i,width:l,height:u}=t.getProps(["x","y","base","width","height"],e);let s,m,y,w,S;return t.horizontal?(S=u/2,s=Math.min(r,i),m=Math.max(r,i),y=n-S,w=n+S):(S=l/2,s=r-S,m=r+S,y=Math.min(n,i),w=Math.max(n,i)),{left:s,top:y,right:m,bottom:w}}function Ah(t,e,r,n){return t?0:fa(e,r,n)}function x6(t,e,r){const n=t.options.borderWidth,i=t.borderSkipped,l=aL(n);return{t:Ah(i.top,l.top,0,r),r:Ah(i.right,l.right,0,e),b:Ah(i.bottom,l.bottom,0,r),l:Ah(i.left,l.left,0,e)}}function b6(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,l=ld(i),u=Math.min(e,r),s=t.borderSkipped,m=n||$r(i);return{topLeft:Ah(!m||s.top||s.left,l.topLeft,0,u),topRight:Ah(!m||s.top||s.right,l.topRight,0,u),bottomLeft:Ah(!m||s.bottom||s.left,l.bottomLeft,0,u),bottomRight:Ah(!m||s.bottom||s.right,l.bottomRight,0,u)}}function w6(t){const e=zL(t),r=e.right-e.left,n=e.bottom-e.top,i=x6(t,r/2,n/2),l=b6(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:l},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,l.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,l.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,l.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,l.bottomRight-Math.max(i.b,i.r))}}}}function lb(t,e,r,n){const i=e===null,l=r===null,s=t&&!(i&&l)&&zL(t,n);return s&&(i||_c(e,s.left,s.right))&&(l||_c(r,s.top,s.bottom))}function S6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function T6(t,e){t.rect(e.x,e.y,e.w,e.h)}function ub(t,e,r={}){const n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,l=(t.x+t.w!==r.x+r.w?e:0)-n,u=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+l,h:t.h+u,radius:t.radius}}class P6 extends Ic{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:i}}=this,{inner:l,outer:u}=w6(this),s=S6(u.radius)?Zg:T6;e.save(),(u.w!==l.w||u.h!==l.h)&&(e.beginPath(),s(e,ub(u,r,l)),e.clip(),s(e,ub(l,-r,u)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,ub(l,r)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,r,n){return lb(this,e,r,n)}inXRange(e,r){return lb(this,e,null,r)}inYRange(e,r){return lb(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:i,horizontal:l}=this.getProps(["x","y","base","horizontal"],e);return{x:l?(r+i)/2:r,y:l?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}var A6=Object.freeze({__proto__:null,ArcElement:u6,BarElement:P6,LineElement:R0,PointElement:_6});const E2=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],tE=E2.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function RL(t){return E2[t%E2.length]}function LL(t){return tE[t%tE.length]}function k6(t,e){return t.borderColor=RL(e),t.backgroundColor=LL(e),++e}function E6(t,e){return t.backgroundColor=t.data.map(()=>RL(e++)),e}function M6(t,e){return t.backgroundColor=t.data.map(()=>LL(e++)),e}function C6(t){let e=0;return(r,n)=>{const i=t.getDatasetMeta(n).controller;i instanceof _P?e=E6(r,e):i instanceof wL?e=M6(r,e):i&&(e=k6(r,e))}}function rE(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function O6(t){return t&&(t.borderColor||t.backgroundColor)}function I6(){return Gn.borderColor!=="rgba(0,0,0,0.1)"||Gn.backgroundColor!=="rgba(0,0,0,0.1)"}var D6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:i}=t.config,{elements:l}=i,u=rE(n)||O6(i)||l&&rE(l)||I6();if(!r.forceOverride&&u)return;const s=C6(t);n.forEach(s)}};function z6(t,e,r,n,i){const l=i.samples||n;if(l>=r)return t.slice(e,e+r);const u=[],s=(r-2)/(l-2);let m=0;const y=e+r-1;let w=e,S,E,I,F,L;for(u[m++]=t[w],S=0;S<l-2;S++){let R=0,U=0,X;const K=Math.floor((S+1)*s)+1+e,re=Math.min(Math.floor((S+2)*s)+1,r)+e,W=re-K;for(X=K;X<re;X++)R+=t[X].x,U+=t[X].y;R/=W,U/=W;const J=Math.floor(S*s)+1+e,ie=Math.min(Math.floor((S+1)*s)+1,r)+e,{x:he,y:ve}=t[w];for(I=F=-1,X=J;X<ie;X++)F=.5*Math.abs((he-R)*(t[X].y-ve)-(he-t[X].x)*(U-ve)),F>I&&(I=F,E=t[X],L=X);u[m++]=E,w=L}return u[m++]=t[y],u}function R6(t,e,r,n){let i=0,l=0,u,s,m,y,w,S,E,I,F,L;const R=[],U=e+r-1,X=t[e].x,re=t[U].x-X;for(u=e;u<e+r;++u){s=t[u],m=(s.x-X)/re*n,y=s.y;const W=m|0;if(W===w)y<F?(F=y,S=u):y>L&&(L=y,E=u),i=(l*i+s.x)/++l;else{const J=u-1;if(!Fr(S)&&!Fr(E)){const ie=Math.min(S,E),he=Math.max(S,E);ie!==I&&ie!==J&&R.push({...t[ie],x:i}),he!==I&&he!==J&&R.push({...t[he],x:i})}u>0&&J!==I&&R.push(t[J]),R.push(s),w=W,l=0,F=L=y,S=E=I=u}}return R}function FL(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function nE(t){t.data.datasets.forEach(e=>{FL(e)})}function L6(t,e){const r=e.length;let n=0,i;const{iScale:l}=t,{min:u,max:s,minDefined:m,maxDefined:y}=l.getUserBounds();return m&&(n=fa(xc(e,l.axis,u).lo,0,r-1)),y?i=fa(xc(e,l.axis,s).hi+1,n,r)-n:i=r-n,{start:n,count:i}}var F6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){nE(t);return}const n=t.width;t.data.datasets.forEach((i,l)=>{const{_data:u,indexAxis:s}=i,m=t.getDatasetMeta(l),y=u||i.data;if(kg([s,t.options.indexAxis])==="y"||!m.controller.supportsDecimation)return;const w=t.scales[m.xAxisID];if(w.type!=="linear"&&w.type!=="time"||t.options.parsing)return;let{start:S,count:E}=L6(m,y);const I=r.threshold||4*n;if(E<=I){FL(i);return}Fr(u)&&(i._data=y,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(L){this._data=L}}));let F;switch(r.algorithm){case"lttb":F=z6(y,S,E,n,r);break;case"min-max":F=R6(y,S,E,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}i._decimated=F})},destroy(t){nE(t)}};function j6(t,e,r){const n=t.segments,i=t.points,l=e.points,u=[];for(const s of n){let{start:m,end:y}=s;y=L0(m,y,i);const w=M2(r,i[m],i[y],s.loop);if(!e.segments){u.push({source:s,target:w,start:i[m],end:i[y]});continue}const S=gL(e,w);for(const E of S){const I=M2(r,l[E.start],l[E.end],E.loop),F=mL(s,i,I);for(const L of F)u.push({source:L,target:E,start:{[r]:iE(w,I,"start",Math.max)},end:{[r]:iE(w,I,"end",Math.min)}})}}return u}function M2(t,e,r,n){if(n)return;let i=e[t],l=r[t];return t==="angle"&&(i=Ja(i),l=Ja(l)),{property:t,start:i,end:l}}function B6(t,e){const{x:r=null,y:n=null}=t||{},i=e.points,l=[];return e.segments.forEach(({start:u,end:s})=>{s=L0(u,s,i);const m=i[u],y=i[s];n!==null?(l.push({x:m.x,y:n}),l.push({x:y.x,y:n})):r!==null&&(l.push({x:r,y:m.y}),l.push({x:r,y:y.y}))}),l}function L0(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function iE(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function jL(t,e){let r=[],n=!1;return Hn(t)?(n=!0,r=t):r=B6(t,e),r.length?new R0({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function aE(t){return t&&t.fill!==!1}function N6(t,e,r){let i=t[e].fill;const l=[e];let u;if(!r)return i;for(;i!==!1&&l.indexOf(i)===-1;){if(!fi(i))return i;if(u=t[i],!u)return!1;if(u.visible)return i;l.push(i),i=u.fill}return!1}function $6(t,e,r){const n=W6(t);if($r(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return fi(i)&&Math.floor(i)===i?V6(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function V6(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function q6(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:$r(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function U6(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:$r(t)?n=t.value:n=e.getBaseValue(),n}function W6(t){const e=t.options,r=e.fill;let n=Ar(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function H6(t){const{scale:e,index:r,line:n}=t,i=[],l=n.segments,u=n.points,s=G6(e,r);s.push(jL({x:null,y:e.bottom},n));for(let m=0;m<l.length;m++){const y=l[m];for(let w=y.start;w<=y.end;w++)Z6(i,u[w],s)}return new R0({points:i,options:{}})}function G6(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){const l=n[i];if(l.index===e)break;l.hidden||r.unshift(l.dataset)}return r}function Z6(t,e,r){const n=[];for(let i=0;i<r.length;i++){const l=r[i],{first:u,last:s,point:m}=X6(l,e,"x");if(!(!m||u&&s)){if(u)n.unshift(m);else if(t.push(m),!s)break}}t.push(...n)}function X6(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const i=n[r],l=t.segments,u=t.points;let s=!1,m=!1;for(let y=0;y<l.length;y++){const w=l[y],S=u[w.start][r],E=u[w.end][r];if(_c(i,S,E)){s=i===S,m=i===E;break}}return{first:s,last:m,point:n}}class BL{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:i,y:l,radius:u}=this;return r=r||{start:0,end:qn},e.arc(i,l,u,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:i}=this,l=e.angle;return{x:r+Math.cos(l)*i,y:n+Math.sin(l)*i,angle:l}}}function K6(t){const{chart:e,fill:r,line:n}=t;if(fi(r))return Y6(e,r);if(r==="stack")return H6(t);if(r==="shape")return!0;const i=J6(t);return i instanceof BL?i:jL(i,n)}function Y6(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function J6(t){return(t.scale||{}).getPointPositionForValue?eV(t):Q6(t)}function Q6(t){const{scale:e={},fill:r}=t,n=q6(r,e);if(fi(n)){const i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function eV(t){const{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,l=n.reverse?e.max:e.min,u=U6(r,e,l),s=[];if(n.grid.circular){const m=e.getPointPositionForValue(0,l);return new BL({x:m.x,y:m.y,radius:e.getDistanceFromCenterForValue(u)})}for(let m=0;m<i;++m)s.push(e.getPointPositionForValue(m,u));return s}function cb(t,e,r){const n=K6(e),{chart:i,index:l,line:u,scale:s,axis:m}=e,y=u.options,w=y.fill,S=y.backgroundColor,{above:E=S,below:I=S}=w||{},F=i.getDatasetMeta(l),L=yL(i,F);n&&u.points.length&&(C0(t,r),tV(t,{line:u,target:n,above:E,below:I,area:r,scale:s,axis:m,clip:L}),O0(t))}function tV(t,e){const{line:r,target:n,above:i,below:l,area:u,scale:s,clip:m}=e,y=r._loop?"angle":e.axis;t.save();let w=l;l!==i&&(y==="x"?(oE(t,n,u.top),hb(t,{line:r,target:n,color:i,scale:s,property:y,clip:m}),t.restore(),t.save(),oE(t,n,u.bottom)):y==="y"&&(sE(t,n,u.left),hb(t,{line:r,target:n,color:l,scale:s,property:y,clip:m}),t.restore(),t.save(),sE(t,n,u.right),w=i)),hb(t,{line:r,target:n,color:w,scale:s,property:y,clip:m}),t.restore()}function oE(t,e,r){const{segments:n,points:i}=e;let l=!0,u=!1;t.beginPath();for(const s of n){const{start:m,end:y}=s,w=i[m],S=i[L0(m,y,i)];l?(t.moveTo(w.x,w.y),l=!1):(t.lineTo(w.x,r),t.lineTo(w.x,w.y)),u=!!e.pathSegment(t,s,{move:u}),u?t.closePath():t.lineTo(S.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function sE(t,e,r){const{segments:n,points:i}=e;let l=!0,u=!1;t.beginPath();for(const s of n){const{start:m,end:y}=s,w=i[m],S=i[L0(m,y,i)];l?(t.moveTo(w.x,w.y),l=!1):(t.lineTo(r,w.y),t.lineTo(w.x,w.y)),u=!!e.pathSegment(t,s,{move:u}),u?t.closePath():t.lineTo(r,S.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function hb(t,e){const{line:r,target:n,property:i,color:l,scale:u,clip:s}=e,m=j6(r,n,i);for(const{source:y,target:w,start:S,end:E}of m){const{style:{backgroundColor:I=l}={}}=y,F=n!==!0;t.save(),t.fillStyle=I,rV(t,u,s,F&&M2(i,S,E)),t.beginPath();const L=!!r.pathSegment(t,y);let R;if(F){L?t.closePath():lE(t,n,E,i);const U=!!n.pathSegment(t,w,{move:L,reverse:!0});R=L&&U,R||lE(t,n,S,i)}t.closePath(),t.fill(R?"evenodd":"nonzero"),t.restore()}}function rV(t,e,r,n){const i=e.chart.chartArea,{property:l,start:u,end:s}=n||{};if(l==="x"||l==="y"){let m,y,w,S;l==="x"?(m=u,y=i.top,w=s,S=i.bottom):(m=i.left,y=u,w=i.right,S=s),t.beginPath(),r&&(m=Math.max(m,r.left),w=Math.min(w,r.right),y=Math.max(y,r.top),S=Math.min(S,r.bottom)),t.rect(m,y,w-m,S-y),t.clip()}}function lE(t,e,r,n){const i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var nV={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,i=[];let l,u,s,m;for(u=0;u<n;++u)l=t.getDatasetMeta(u),s=l.dataset,m=null,s&&s.options&&s instanceof R0&&(m={visible:t.isDatasetVisible(u),index:u,fill:$6(s,u,n),chart:t,axis:l.controller.options.indexAxis,scale:l.vScale,line:s}),l.$filler=m,i.push(m);for(u=0;u<n;++u)m=i[u],!(!m||m.fill===!1)&&(m.fill=N6(i,u,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),l=t.chartArea;for(let u=i.length-1;u>=0;--u){const s=i[u].$filler;s&&(s.line.updateControlPoints(l,s.axis),n&&s.fill&&cb(t.ctx,s,l))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){const l=n[i].$filler;aE(l)&&cb(t.ctx,l,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!aE(n)||r.drawTime!=="beforeDatasetDraw"||cb(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const uE=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},iV=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;let cE=class extends Ic{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=zn(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,i=qi(n.font),l=i.size,u=this._computeTitleHeight(),{boxWidth:s,itemHeight:m}=uE(n,l);let y,w;r.font=i.string,this.isHorizontal()?(y=this.maxWidth,w=this._fitRows(u,l,s,m)+10):(w=this.maxHeight,y=this._fitCols(u,i,s,m)+10),this.width=Math.min(y,e.maxWidth||this.maxWidth),this.height=Math.min(w,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){const{ctx:l,maxWidth:u,options:{labels:{padding:s}}}=this,m=this.legendHitBoxes=[],y=this.lineWidths=[0],w=i+s;let S=e;l.textAlign="left",l.textBaseline="middle";let E=-1,I=-w;return this.legendItems.forEach((F,L)=>{const R=n+r/2+l.measureText(F.text).width;(L===0||y[y.length-1]+R+2*s>u)&&(S+=w,y[y.length-(L>0?0:1)]=0,I+=w,E++),m[L]={left:0,top:I,row:E,width:R,height:i},y[y.length-1]+=R+s}),S}_fitCols(e,r,n,i){const{ctx:l,maxHeight:u,options:{labels:{padding:s}}}=this,m=this.legendHitBoxes=[],y=this.columnSizes=[],w=u-e;let S=s,E=0,I=0,F=0,L=0;return this.legendItems.forEach((R,U)=>{const{itemWidth:X,itemHeight:K}=aV(n,r,l,R,i);U>0&&I+K+2*s>w&&(S+=E+s,y.push({width:E,height:I}),F+=E+s,L++,E=I=0),m[U]={left:F,top:I,col:L,width:X,height:K},E=Math.max(E,X),I+=K+s}),S+=E,y.push({width:E,height:I}),S}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:l}}=this,u=Fp(l,this.left,this.width);if(this.isHorizontal()){let s=0,m=Xa(n,this.left+i,this.right-this.lineWidths[s]);for(const y of r)s!==y.row&&(s=y.row,m=Xa(n,this.left+i,this.right-this.lineWidths[s])),y.top+=this.top+e+i,y.left=u.leftForLtr(u.x(m),y.width),m+=y.width+i}else{let s=0,m=Xa(n,this.top+e+i,this.bottom-this.columnSizes[s].height);for(const y of r)y.col!==s&&(s=y.col,m=Xa(n,this.top+e+i,this.bottom-this.columnSizes[s].height)),y.top=m,y.left+=this.left+i,y.left=u.leftForLtr(u.x(y.left),y.width),m+=y.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;C0(e,this),this._draw(),O0(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:l,labels:u}=e,s=Gn.color,m=Fp(e.rtl,this.left,this.width),y=qi(u.font),{padding:w}=u,S=y.size,E=S/2;let I;this.drawTitle(),i.textAlign=m.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=y.string;const{boxWidth:F,boxHeight:L,itemHeight:R}=uE(u,S),U=function(J,ie,he){if(isNaN(F)||F<=0||isNaN(L)||L<0)return;i.save();const ve=Ar(he.lineWidth,1);if(i.fillStyle=Ar(he.fillStyle,s),i.lineCap=Ar(he.lineCap,"butt"),i.lineDashOffset=Ar(he.lineDashOffset,0),i.lineJoin=Ar(he.lineJoin,"miter"),i.lineWidth=ve,i.strokeStyle=Ar(he.strokeStyle,s),i.setLineDash(Ar(he.lineDash,[])),u.usePointStyle){const Re={radius:L*Math.SQRT2/2,pointStyle:he.pointStyle,rotation:he.rotation,borderWidth:ve},de=m.xPlus(J,F/2),Oe=ie+E;iL(i,Re,de,Oe,u.pointStyleWidth&&F)}else{const Re=ie+Math.max((S-L)/2,0),de=m.leftForLtr(J,F),Oe=ld(he.borderRadius);i.beginPath(),Object.values(Oe).some(Le=>Le!==0)?Zg(i,{x:de,y:Re,w:F,h:L,radius:Oe}):i.rect(de,Re,F,L),i.fill(),ve!==0&&i.stroke()}i.restore()},X=function(J,ie,he){md(i,he.text,J,ie+R/2,y,{strikethrough:he.hidden,textAlign:m.textAlign(he.textAlign)})},K=this.isHorizontal(),re=this._computeTitleHeight();K?I={x:Xa(l,this.left+w,this.right-n[0]),y:this.top+w+re,line:0}:I={x:this.left+w,y:Xa(l,this.top+re+w,this.bottom-r[0].height),line:0},fL(this.ctx,e.textDirection);const W=R+w;this.legendItems.forEach((J,ie)=>{i.strokeStyle=J.fontColor,i.fillStyle=J.fontColor;const he=i.measureText(J.text).width,ve=m.textAlign(J.textAlign||(J.textAlign=u.textAlign)),Re=F+E+he;let de=I.x,Oe=I.y;m.setWidth(this.width),K?ie>0&&de+Re+w>this.right&&(Oe=I.y+=W,I.line++,de=I.x=Xa(l,this.left+w,this.right-n[I.line])):ie>0&&Oe+W>this.bottom&&(de=I.x=de+r[I.line].width+w,I.line++,Oe=I.y=Xa(l,this.top+re+w,this.bottom-r[I.line].height));const Le=m.x(de);if(U(Le,Oe,J),de=gN(ve,de+F+E,K?de+Re:this.right,e.rtl),X(m.x(de),Oe,J),K)I.x+=Re+w;else if(typeof J.text!="string"){const Ge=y.lineHeight;I.y+=NL(J,Ge)+w}else I.y+=W}),dL(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=qi(r.font),i=no(r.padding);if(!r.display)return;const l=Fp(e.rtl,this.left,this.width),u=this.ctx,s=r.position,m=n.size/2,y=i.top+m;let w,S=this.left,E=this.width;if(this.isHorizontal())E=Math.max(...this.lineWidths),w=this.top+y,S=Xa(e.align,S,this.right-E);else{const F=this.columnSizes.reduce((L,R)=>Math.max(L,R.height),0);w=y+Xa(e.align,this.top,this.bottom-F-e.labels.padding-this._computeTitleHeight())}const I=Xa(s,S,S+E);u.textAlign=l.textAlign(hP(s)),u.textBaseline="middle",u.strokeStyle=r.color,u.fillStyle=r.color,u.font=n.string,md(u,r.text,I,w,n)}_computeTitleHeight(){const e=this.options.title,r=qi(e.font),n=no(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,l;if(_c(e,this.left,this.right)&&_c(r,this.top,this.bottom)){for(l=this.legendHitBoxes,n=0;n<l.length;++n)if(i=l[n],_c(e,i.left,i.left+i.width)&&_c(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!lV(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,l=iV(i,n);i&&!l&&zn(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!l&&zn(r.onHover,[e,n,this],this)}else n&&zn(r.onClick,[e,n,this],this)}};function aV(t,e,r,n,i){const l=oV(n,t,e,r),u=sV(i,n,e.lineHeight);return{itemWidth:l,itemHeight:u}}function oV(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((l,u)=>l.length>u.length?l:u)),e+r.size/2+n.measureText(i).width}function sV(t,e,r){let n=t;return typeof e.text!="string"&&(n=NL(e,r)),n}function NL(t,e){const r=t.text?t.text.length:0;return e*r}function lV(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var uV={id:"legend",_element:cE,start(t,e,r){const n=t.legend=new cE({ctx:t.ctx,options:r,chart:t});ro.configure(t,n,r),ro.addBox(t,n)},stop(t){ro.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;ro.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:l,useBorderRadius:u,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map(m=>{const y=m.controller.getStyle(r?0:void 0),w=no(y.borderWidth);return{text:e[m.index].label,fillStyle:y.backgroundColor,fontColor:l,hidden:!m.visible,lineCap:y.borderCapStyle,lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:(w.width+w.height)/4,strokeStyle:y.borderColor,pointStyle:n||y.pointStyle,rotation:y.rotation,textAlign:i||y.textAlign,borderRadius:u&&(s||y.borderRadius),datasetIndex:m.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class bP extends Ic{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const i=Hn(n.text)?n.text.length:1;this._padding=no(n.padding);const l=i*qi(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=l:this.width=l}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:i,right:l,options:u}=this,s=u.align;let m=0,y,w,S;return this.isHorizontal()?(w=Xa(s,n,l),S=r+e,y=l-n):(u.position==="left"?(w=n+e,S=Xa(s,i,r),m=en*-.5):(w=l-e,S=Xa(s,r,i),m=en*.5),y=i-r),{titleX:w,titleY:S,maxWidth:y,rotation:m}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=qi(r.font),l=n.lineHeight/2+this._padding.top,{titleX:u,titleY:s,maxWidth:m,rotation:y}=this._drawArgs(l);md(e,r.text,0,0,n,{color:r.color,maxWidth:m,rotation:y,textAlign:hP(r.align),textBaseline:"middle",translation:[u,s]})}}function cV(t,e){const r=new bP({ctx:t.ctx,options:e,chart:t});ro.configure(t,r,e),ro.addBox(t,r),t.titleBlock=r}var hV={id:"title",_element:bP,start(t,e,r){cV(t,r)},stop(t){const e=t.titleBlock;ro.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;ro.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Kv=new WeakMap;var fV={id:"subtitle",start(t,e,r){const n=new bP({ctx:t.ctx,options:r,chart:t});ro.configure(t,n,r),ro.addBox(t,n),Kv.set(t,n)},stop(t){ro.removeBox(t,Kv.get(t)),Kv.delete(t)},beforeUpdate(t,e,r){const n=Kv.get(t);ro.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Mg={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,l=0;for(e=0,r=t.length;e<r;++e){const s=t[e].element;if(s&&s.hasValue()){const m=s.tooltipPosition();n.add(m.x),i+=m.y,++l}}return l===0||n.size===0?!1:{x:[...n].reduce((s,m)=>s+m)/n.size,y:i/l}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,l,u,s;for(l=0,u=t.length;l<u;++l){const m=t[l].element;if(m&&m.hasValue()){const y=m.getCenterPoint(),w=w2(e,y);w<i&&(i=w,s=m)}}if(s){const m=s.tooltipPosition();r=m.x,n=m.y}return{x:r,y:n}}};function bu(t,e){return e&&(Hn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function yc(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function dV(t,e){const{element:r,datasetIndex:n,index:i}=e,l=t.getDatasetMeta(n).controller,{label:u,value:s}=l.getLabelAndValue(i);return{chart:t,label:u,parsed:l.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:s,dataset:l.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function hE(t,e){const r=t.chart.ctx,{body:n,footer:i,title:l}=t,{boxWidth:u,boxHeight:s}=e,m=qi(e.bodyFont),y=qi(e.titleFont),w=qi(e.footerFont),S=l.length,E=i.length,I=n.length,F=no(e.padding);let L=F.height,R=0,U=n.reduce((re,W)=>re+W.before.length+W.lines.length+W.after.length,0);if(U+=t.beforeBody.length+t.afterBody.length,S&&(L+=S*y.lineHeight+(S-1)*e.titleSpacing+e.titleMarginBottom),U){const re=e.displayColors?Math.max(s,m.lineHeight):m.lineHeight;L+=I*re+(U-I)*m.lineHeight+(U-1)*e.bodySpacing}E&&(L+=e.footerMarginTop+E*w.lineHeight+(E-1)*e.footerSpacing);let X=0;const K=function(re){R=Math.max(R,r.measureText(re).width+X)};return r.save(),r.font=y.string,xn(t.title,K),r.font=m.string,xn(t.beforeBody.concat(t.afterBody),K),X=e.displayColors?u+2+e.boxPadding:0,xn(n,re=>{xn(re.before,K),xn(re.lines,K),xn(re.after,K)}),X=0,r.font=w.string,xn(t.footer,K),r.restore(),R+=F.width,{width:R,height:L}}function pV(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function mV(t,e,r,n){const{x:i,width:l}=n,u=r.caretSize+r.caretPadding;if(t==="left"&&i+l+u>e.width||t==="right"&&i-l-u<0)return!0}function gV(t,e,r,n){const{x:i,width:l}=r,{width:u,chartArea:{left:s,right:m}}=t;let y="center";return n==="center"?y=i<=(s+m)/2?"left":"right":i<=l/2?y="left":i>=u-l/2&&(y="right"),mV(y,t,e,r)&&(y="center"),y}function fE(t,e,r){const n=r.yAlign||e.yAlign||pV(t,r);return{xAlign:r.xAlign||e.xAlign||gV(t,e,r,n),yAlign:n}}function yV(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function vV(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function dE(t,e,r,n){const{caretSize:i,caretPadding:l,cornerRadius:u}=t,{xAlign:s,yAlign:m}=r,y=i+l,{topLeft:w,topRight:S,bottomLeft:E,bottomRight:I}=ld(u);let F=yV(e,s);const L=vV(e,m,y);return m==="center"?s==="left"?F+=y:s==="right"&&(F-=y):s==="left"?F-=Math.max(w,E)+i:s==="right"&&(F+=Math.max(S,I)+i),{x:fa(F,0,n.width-e.width),y:fa(L,0,n.height-e.height)}}function Yv(t,e,r){const n=no(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function pE(t){return bu([],yc(t))}function _V(t,e,r){return zh(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function mE(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const $L={beforeTitle:dc,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:dc,beforeBody:dc,beforeLabel:dc,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Fr(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:dc,afterBody:dc,beforeFooter:dc,footer:dc,afterFooter:dc};function $o(t,e,r,n){const i=t[e].call(r,n);return typeof i>"u"?$L[e].call(r,n):i}let gE=class extends Ic{static positioners=Mg;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,l=new vL(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(l)),l}getContext(){return this.$context||(this.$context=_V(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,i=$o(n,"beforeTitle",this,e),l=$o(n,"title",this,e),u=$o(n,"afterTitle",this,e);let s=[];return s=bu(s,yc(i)),s=bu(s,yc(l)),s=bu(s,yc(u)),s}getBeforeBody(e,r){return pE($o(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,i=[];return xn(e,l=>{const u={before:[],lines:[],after:[]},s=mE(n,l);bu(u.before,yc($o(s,"beforeLabel",this,l))),bu(u.lines,$o(s,"label",this,l)),bu(u.after,yc($o(s,"afterLabel",this,l))),i.push(u)}),i}getAfterBody(e,r){return pE($o(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,i=$o(n,"beforeFooter",this,e),l=$o(n,"footer",this,e),u=$o(n,"afterFooter",this,e);let s=[];return s=bu(s,yc(i)),s=bu(s,yc(l)),s=bu(s,yc(u)),s}_createItems(e){const r=this._active,n=this.chart.data,i=[],l=[],u=[];let s=[],m,y;for(m=0,y=r.length;m<y;++m)s.push(dV(this.chart,r[m]));return e.filter&&(s=s.filter((w,S,E)=>e.filter(w,S,E,n))),e.itemSort&&(s=s.sort((w,S)=>e.itemSort(w,S,n))),xn(s,w=>{const S=mE(e.callbacks,w);i.push($o(S,"labelColor",this,w)),l.push($o(S,"labelPointStyle",this,w)),u.push($o(S,"labelTextColor",this,w))}),this.labelColors=i,this.labelPointStyles=l,this.labelTextColors=u,this.dataPoints=s,s}update(e,r){const n=this.options.setContext(this.getContext()),i=this._active;let l,u=[];if(!i.length)this.opacity!==0&&(l={opacity:0});else{const s=Mg[n.position].call(this,i,this._eventPosition);u=this._createItems(n),this.title=this.getTitle(u,n),this.beforeBody=this.getBeforeBody(u,n),this.body=this.getBody(u,n),this.afterBody=this.getAfterBody(u,n),this.footer=this.getFooter(u,n);const m=this._size=hE(this,n),y=Object.assign({},s,m),w=fE(this.chart,n,y),S=dE(n,y,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,l={opacity:1,x:S.x,y:S.y,width:m.width,height:m.height,caretX:s.x,caretY:s.y}}this._tooltipItems=u,this.$context=void 0,l&&this._resolveAnimations().update(this,l),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){const l=this.getCaretPosition(e,n,i);r.lineTo(l.x1,l.y1),r.lineTo(l.x2,l.y2),r.lineTo(l.x3,l.y3)}getCaretPosition(e,r,n){const{xAlign:i,yAlign:l}=this,{caretSize:u,cornerRadius:s}=n,{topLeft:m,topRight:y,bottomLeft:w,bottomRight:S}=ld(s),{x:E,y:I}=e,{width:F,height:L}=r;let R,U,X,K,re,W;return l==="center"?(re=I+L/2,i==="left"?(R=E,U=R-u,K=re+u,W=re-u):(R=E+F,U=R+u,K=re-u,W=re+u),X=R):(i==="left"?U=E+Math.max(m,w)+u:i==="right"?U=E+F-Math.max(y,S)-u:U=this.caretX,l==="top"?(K=I,re=K-u,R=U-u,X=U+u):(K=I+L,re=K+u,R=U+u,X=U-u),W=K),{x1:R,x2:U,x3:X,y1:K,y2:re,y3:W}}drawTitle(e,r,n){const i=this.title,l=i.length;let u,s,m;if(l){const y=Fp(n.rtl,this.x,this.width);for(e.x=Yv(this,n.titleAlign,n),r.textAlign=y.textAlign(n.titleAlign),r.textBaseline="middle",u=qi(n.titleFont),s=n.titleSpacing,r.fillStyle=n.titleColor,r.font=u.string,m=0;m<l;++m)r.fillText(i[m],y.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+s,m+1===l&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,r,n,i,l){const u=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:m,boxWidth:y}=l,w=qi(l.bodyFont),S=Yv(this,"left",l),E=i.x(S),I=m<w.lineHeight?(w.lineHeight-m)/2:0,F=r.y+I;if(l.usePointStyle){const L={radius:Math.min(y,m)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},R=i.leftForLtr(E,y)+y/2,U=F+m/2;e.strokeStyle=l.multiKeyBackground,e.fillStyle=l.multiKeyBackground,T2(e,L,R,U),e.strokeStyle=u.borderColor,e.fillStyle=u.backgroundColor,T2(e,L,R,U)}else{e.lineWidth=$r(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,e.strokeStyle=u.borderColor,e.setLineDash(u.borderDash||[]),e.lineDashOffset=u.borderDashOffset||0;const L=i.leftForLtr(E,y),R=i.leftForLtr(i.xPlus(E,1),y-2),U=ld(u.borderRadius);Object.values(U).some(X=>X!==0)?(e.beginPath(),e.fillStyle=l.multiKeyBackground,Zg(e,{x:L,y:F,w:y,h:m,radius:U}),e.fill(),e.stroke(),e.fillStyle=u.backgroundColor,e.beginPath(),Zg(e,{x:R,y:F+1,w:y-2,h:m-2,radius:U}),e.fill()):(e.fillStyle=l.multiKeyBackground,e.fillRect(L,F,y,m),e.strokeRect(L,F,y,m),e.fillStyle=u.backgroundColor,e.fillRect(R,F+1,y-2,m-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:i}=this,{bodySpacing:l,bodyAlign:u,displayColors:s,boxHeight:m,boxWidth:y,boxPadding:w}=n,S=qi(n.bodyFont);let E=S.lineHeight,I=0;const F=Fp(n.rtl,this.x,this.width),L=function(he){r.fillText(he,F.x(e.x+I),e.y+E/2),e.y+=E+l},R=F.textAlign(u);let U,X,K,re,W,J,ie;for(r.textAlign=u,r.textBaseline="middle",r.font=S.string,e.x=Yv(this,R,n),r.fillStyle=n.bodyColor,xn(this.beforeBody,L),I=s&&R!=="right"?u==="center"?y/2+w:y+2+w:0,re=0,J=i.length;re<J;++re){for(U=i[re],X=this.labelTextColors[re],r.fillStyle=X,xn(U.before,L),K=U.lines,s&&K.length&&(this._drawColorBox(r,e,re,F,n),E=Math.max(S.lineHeight,m)),W=0,ie=K.length;W<ie;++W)L(K[W]),E=S.lineHeight;xn(U.after,L)}I=0,E=S.lineHeight,xn(this.afterBody,L),e.y-=l}drawFooter(e,r,n){const i=this.footer,l=i.length;let u,s;if(l){const m=Fp(n.rtl,this.x,this.width);for(e.x=Yv(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=m.textAlign(n.footerAlign),r.textBaseline="middle",u=qi(n.footerFont),r.fillStyle=n.footerColor,r.font=u.string,s=0;s<l;++s)r.fillText(i[s],m.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){const{xAlign:l,yAlign:u}=this,{x:s,y:m}=e,{width:y,height:w}=n,{topLeft:S,topRight:E,bottomLeft:I,bottomRight:F}=ld(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(s+S,m),u==="top"&&this.drawCaret(e,r,n,i),r.lineTo(s+y-E,m),r.quadraticCurveTo(s+y,m,s+y,m+E),u==="center"&&l==="right"&&this.drawCaret(e,r,n,i),r.lineTo(s+y,m+w-F),r.quadraticCurveTo(s+y,m+w,s+y-F,m+w),u==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(s+I,m+w),r.quadraticCurveTo(s,m+w,s,m+w-I),u==="center"&&l==="left"&&this.drawCaret(e,r,n,i),r.lineTo(s,m+S),r.quadraticCurveTo(s,m,s+S,m),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,i=n&&n.x,l=n&&n.y;if(i||l){const u=Mg[e.position].call(this,this._active,this._eventPosition);if(!u)return;const s=this._size=hE(this,e),m=Object.assign({},u,this._size),y=fE(r,e,m),w=dE(e,m,y,r);(i._to!==w.x||l._to!==w.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=s.width,this.height=s.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const i={width:this.width,height:this.height},l={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const u=no(r.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(l,e,i,r),fL(e,r.textDirection),l.y+=u.top,this.drawTitle(l,e,r),this.drawBody(l,e,r),this.drawFooter(l,e,r),dL(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,i=e.map(({datasetIndex:s,index:m})=>{const y=this.chart.getDatasetMeta(s);if(!y)throw new Error("Cannot find a dataset at index "+s);return{datasetIndex:s,element:y.data[m],index:m}}),l=!S_(n,i),u=this._positionChanged(i,r);(l||u)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,l=this._active||[],u=this._getActiveElements(e,l,r,n),s=this._positionChanged(u,e),m=r||!S_(u,l)||s;return m&&(this._active=u,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),m}_getActiveElements(e,r,n,i){const l=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(s=>this.chart.data.datasets[s.datasetIndex]&&this.chart.getDatasetMeta(s.datasetIndex).controller.getParsed(s.index)!==void 0);const u=this.chart.getElementsAtEventForMode(e,l.mode,l,n);return l.reverse&&u.reverse(),u}_positionChanged(e,r){const{caretX:n,caretY:i,options:l}=this,u=Mg[l.position].call(this,e,r);return u!==!1&&(n!==u.x||i!==u.y)}};var xV={id:"tooltip",_element:gE,positioners:Mg,afterInit(t,e,r){r&&(t.tooltip=new gE({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:$L},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},bV=Object.freeze({__proto__:null,Colors:D6,Decimation:F6,Filler:nV,Legend:uV,SubTitle:fV,Title:hV,Tooltip:xV});const wV=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function SV(t,e,r,n){const i=t.indexOf(e);if(i===-1)return wV(t,e,r,n);const l=t.lastIndexOf(e);return i!==l?r:i}const TV=(t,e)=>t===null?null:fa(Math.round(t),0,e);function yE(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class PV extends bd{static id="category";static defaults={ticks:{callback:yE}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:i,label:l}of r)n[i]===l&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Fr(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:SV(n,e,Ar(r,e),this._addedLabels),TV(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,i=[];let l=this.getLabels();l=e===0&&r===l.length-1?l:l.slice(e,r+1),this._valueRange=Math.max(l.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let u=e;u<=r;u++)i.push({value:u});return i}getLabelForValue(e){return yE.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function AV(t,e){const r=[],{bounds:i,step:l,min:u,max:s,precision:m,count:y,maxTicks:w,maxDigits:S,includeBounds:E}=t,I=l||1,F=w-1,{min:L,max:R}=e,U=!Fr(u),X=!Fr(s),K=!Fr(y),re=(R-L)/(S+1);let W=hk((R-L)/F/I)*I,J,ie,he,ve;if(W<1e-14&&!U&&!X)return[{value:L},{value:R}];ve=Math.ceil(R/W)-Math.floor(L/W),ve>F&&(W=hk(ve*W/F/I)*I),Fr(m)||(J=Math.pow(10,m),W=Math.ceil(W*J)/J),i==="ticks"?(ie=Math.floor(L/W)*W,he=Math.ceil(R/W)*W):(ie=L,he=R),U&&X&&l&&uN((s-u)/l,W/1e3)?(ve=Math.round(Math.min((s-u)/W,w)),W=(s-u)/ve,ie=u,he=s):K?(ie=U?u:ie,he=X?s:he,ve=y-1,W=(he-ie)/ve):(ve=(he-ie)/W,Fg(ve,Math.round(ve),W/1e3)?ve=Math.round(ve):ve=Math.ceil(ve));const Re=Math.max(fk(W),fk(ie));J=Math.pow(10,Fr(m)?Re:m),ie=Math.round(ie*J)/J,he=Math.round(he*J)/J;let de=0;for(U&&(E&&ie!==u?(r.push({value:u}),ie<u&&de++,Fg(Math.round((ie+de*W)*J)/J,u,vE(u,re,t))&&de++):ie<u&&de++);de<ve;++de){const Oe=Math.round((ie+de*W)*J)/J;if(X&&Oe>s)break;r.push({value:Oe})}return X&&E&&he!==s?r.length&&Fg(r[r.length-1].value,s,vE(s,re,t))?r[r.length-1].value=s:r.push({value:s}):(!X||he===s)&&r.push({value:he}),r}function vE(t,e,{horizontal:r,minRotation:n}){const i=Ml(n),l=(r?Math.sin(i):Math.cos(i))||.001,u=.75*e*(""+t).length;return Math.min(e/l,u)}class C_ extends bd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Fr(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:i,max:l}=this;const u=m=>i=r?i:m,s=m=>l=n?l:m;if(e){const m=Au(i),y=Au(l);m<0&&y<0?s(0):m>0&&y>0&&u(0)}if(i===l){let m=l===0?1:Math.abs(l*.05);s(l+m),e||u(i-m)}this.min=i,this.max=l}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},l=this._range||this,u=AV(i,l);return e.bounds==="ticks"&&XR(u,this,"value"),e.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return zy(e,this.chart.options.locale,this.options.ticks.format)}}class kV extends C_{static id="linear";static defaults={ticks:{callback:M0.formatters.numeric}};determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=fi(e)?e:0,this.max=fi(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Ml(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,l=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,l.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Kg=t=>Math.floor(Ph(t)),Xf=(t,e)=>Math.pow(10,Kg(t)+e);function _E(t){return t/Math.pow(10,Kg(t))===1}function xE(t,e,r){const n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function EV(t,e){const r=e-t;let n=Kg(r);for(;xE(t,e,n)>10;)n++;for(;xE(t,e,n)<10;)n--;return Math.min(n,Kg(t))}function MV(t,{min:e,max:r}){e=gs(t.min,e);const n=[],i=Kg(e);let l=EV(e,r),u=l<0?Math.pow(10,Math.abs(l)):1;const s=Math.pow(10,l),m=i>l?Math.pow(10,i):0,y=Math.round((e-m)*u)/u,w=Math.floor((e-m)/s/10)*s*10;let S=Math.floor((y-w)/Math.pow(10,l)),E=gs(t.min,Math.round((m+w+S*Math.pow(10,l))*u)/u);for(;E<r;)n.push({value:E,major:_E(E),significand:S}),S>=10?S=S<15?15:20:S++,S>=20&&(l++,S=2,u=l>=0?1:u),E=Math.round((m+w+S*Math.pow(10,l))*u)/u;const I=gs(t.max,E);return n.push({value:I,major:_E(I),significand:S}),n}class CV extends bd{static id="logarithmic";static defaults={ticks:{callback:M0.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=C_.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return fi(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=fi(e)?Math.max(0,e):null,this.max=fi(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!fi(this._userMin)&&(this.min=e===Xf(this.min,0)?Xf(this.min,-1):Xf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,i=this.max;const l=s=>n=e?n:s,u=s=>i=r?i:s;n===i&&(n<=0?(l(1),u(10)):(l(Xf(n,-1)),u(Xf(i,1)))),n<=0&&l(Xf(i,-1)),i<=0&&u(Xf(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=MV(r,this);return e.bounds==="ticks"&&XR(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":zy(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Ph(e),this._valueRange=Ph(this.max)-Ph(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ph(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}function C2(t){const e=t.ticks;if(e.display&&t.display){const r=no(e.backdropPadding);return Ar(e.font&&e.font.size,Gn.font.size)+r.height}return 0}function OV(t,e,r){return r=Hn(r)?r:[r],{w:AN(t,e.string,r),h:r.length*e.lineHeight}}function bE(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function IV(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],l=t._pointLabels.length,u=t.options.pointLabels,s=u.centerPointLabels?en/l:0;for(let m=0;m<l;m++){const y=u.setContext(t.getPointLabelContext(m));i[m]=y.padding;const w=t.getPointPosition(m,t.drawingArea+i[m],s),S=qi(y.font),E=OV(t.ctx,S,t._pointLabels[m]);n[m]=E;const I=Ja(t.getIndexAngle(m)+s),F=Math.round(uP(I)),L=bE(F,w.x,E.w,0,180),R=bE(F,w.y,E.h,90,270);DV(r,e,I,L,R)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=LV(t,n,i)}function DV(t,e,r,n,i){const l=Math.abs(Math.sin(r)),u=Math.abs(Math.cos(r));let s=0,m=0;n.start<e.l?(s=(e.l-n.start)/l,t.l=Math.min(t.l,e.l-s)):n.end>e.r&&(s=(n.end-e.r)/l,t.r=Math.max(t.r,e.r+s)),i.start<e.t?(m=(e.t-i.start)/u,t.t=Math.min(t.t,e.t-m)):i.end>e.b&&(m=(i.end-e.b)/u,t.b=Math.max(t.b,e.b+m))}function zV(t,e,r){const n=t.drawingArea,{extra:i,additionalAngle:l,padding:u,size:s}=r,m=t.getPointPosition(e,n+i+u,l),y=Math.round(uP(Ja(m.angle+_i))),w=BV(m.y,s.h,y),S=FV(y),E=jV(m.x,s.w,S);return{visible:!0,x:m.x,y:w,textAlign:S,left:E,top:w,right:E+s.w,bottom:w+s.h}}function RV(t,e){if(!e)return!0;const{left:r,top:n,right:i,bottom:l}=t;return!(bc({x:r,y:n},e)||bc({x:r,y:l},e)||bc({x:i,y:n},e)||bc({x:i,y:l},e))}function LV(t,e,r){const n=[],i=t._pointLabels.length,l=t.options,{centerPointLabels:u,display:s}=l.pointLabels,m={extra:C2(l)/2,additionalAngle:u?en/i:0};let y;for(let w=0;w<i;w++){m.padding=r[w],m.size=e[w];const S=zV(t,w,m);n.push(S),s==="auto"&&(S.visible=RV(S,y),S.visible&&(y=S))}return n}function FV(t){return t===0||t===180?"center":t<180?"left":"right"}function jV(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function BV(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function NV(t,e,r){const{left:n,top:i,right:l,bottom:u}=r,{backdropColor:s}=e;if(!Fr(s)){const m=ld(e.borderRadius),y=no(e.backdropPadding);t.fillStyle=s;const w=n-y.left,S=i-y.top,E=l-n+y.width,I=u-i+y.height;Object.values(m).some(F=>F!==0)?(t.beginPath(),Zg(t,{x:w,y:S,w:E,h:I,radius:m}),t.fill()):t.fillRect(w,S,E,I)}}function $V(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){const l=t._pointLabelItems[i];if(!l.visible)continue;const u=n.setContext(t.getPointLabelContext(i));NV(r,u,l);const s=qi(u.font),{x:m,y,textAlign:w}=l;md(r,t._pointLabels[i],m,y+s.lineHeight/2,s,{color:u.color,textAlign:w,textBaseline:"middle"})}}function VL(t,e,r,n){const{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,qn);else{let l=t.getPointPosition(0,e);i.moveTo(l.x,l.y);for(let u=1;u<n;u++)l=t.getPointPosition(u,e),i.lineTo(l.x,l.y)}}function VV(t,e,r,n,i){const l=t.ctx,u=e.circular,{color:s,lineWidth:m}=e;!u&&!n||!s||!m||r<0||(l.save(),l.strokeStyle=s,l.lineWidth=m,l.setLineDash(i.dash||[]),l.lineDashOffset=i.dashOffset,l.beginPath(),VL(t,r,u,n),l.closePath(),l.stroke(),l.restore())}function qV(t,e,r){return zh(t,{label:r,index:e,type:"pointLabel"})}class UV extends C_{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:M0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=no(C2(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=fi(e)&&!isNaN(e)?e:0,this.max=fi(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/C2(this.options))}generateTickLabels(e){C_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const i=zn(this.options.pointLabels.callback,[r,n],this);return i||i===0?i:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?IV(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,i){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,i))}getIndexAngle(e){const r=qn/(this._pointLabels.length||1),n=this.options.startAngle||0;return Ja(e*r+Ml(n))}getDistanceFromCenterForValue(e){if(Fr(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Fr(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return qV(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const i=this.getIndexAngle(e)-_i+n;return{x:Math.cos(i)*r+this.xCenter,y:Math.sin(i)*r+this.yCenter,angle:i}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:i,bottom:l}=this._pointLabelItems[e];return{left:r,top:n,right:i,bottom:l}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),VL(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:i,border:l}=r,u=this._pointLabels.length;let s,m,y;if(r.pointLabels.display&&$V(this,u),i.display&&this.ticks.forEach((w,S)=>{if(S!==0||S===0&&this.min<0){m=this.getDistanceFromCenterForValue(w.value);const E=this.getContext(S),I=i.setContext(E),F=l.setContext(E);VV(this,I,m,u,F)}}),n.display){for(e.save(),s=u-1;s>=0;s--){const w=n.setContext(this.getPointLabelContext(s)),{color:S,lineWidth:E}=w;!E||!S||(e.lineWidth=E,e.strokeStyle=S,e.setLineDash(w.borderDash),e.lineDashOffset=w.borderDashOffset,m=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),y=this.getPointPosition(s,m),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(y.x,y.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let l,u;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((s,m)=>{if(m===0&&this.min>=0&&!r.reverse)return;const y=n.setContext(this.getContext(m)),w=qi(y.font);if(l=this.getDistanceFromCenterForValue(this.ticks[m].value),y.showLabelBackdrop){e.font=w.string,u=e.measureText(s.label).width,e.fillStyle=y.backdropColor;const S=no(y.backdropPadding);e.fillRect(-u/2-S.left,-l-w.size/2-S.top,u+S.width,w.size+S.height)}md(e,s.label,0,-l,w,{color:y.color,strokeColor:y.textStrokeColor,strokeWidth:y.textStrokeWidth})}),e.restore()}drawTitle(){}}const F0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vo=Object.keys(F0);function wE(t,e){return t-e}function SE(t,e){if(Fr(e))return null;const r=t._adapter,{parser:n,round:i,isoWeekday:l}=t._parseOpts;let u=e;return typeof n=="function"&&(u=n(u)),fi(u)||(u=typeof n=="string"?r.parse(u,n):r.parse(u)),u===null?null:(i&&(u=i==="week"&&(qp(l)||l===!0)?r.startOf(u,"isoWeek",l):r.startOf(u,i)),+u)}function TE(t,e,r,n){const i=Vo.length;for(let l=Vo.indexOf(t);l<i-1;++l){const u=F0[Vo[l]],s=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((r-e)/(s*u.size))<=n)return Vo[l]}return Vo[i-1]}function WV(t,e,r,n,i){for(let l=Vo.length-1;l>=Vo.indexOf(r);l--){const u=Vo[l];if(F0[u].common&&t._adapter.diff(i,n,u)>=e-1)return u}return Vo[r?Vo.indexOf(r):0]}function HV(t){for(let e=Vo.indexOf(t)+1,r=Vo.length;e<r;++e)if(F0[Vo[e]].common)return Vo[e]}function PE(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:i}=cP(r,e),l=r[n]>=e?r[n]:r[i];t[l]=!0}}function GV(t,e,r,n){const i=t._adapter,l=+i.startOf(e[0].value,n),u=e[e.length-1].value;let s,m;for(s=l;s<=u;s=+i.add(s,1,n))m=r[s],m>=0&&(e[m].major=!0);return e}function AE(t,e,r){const n=[],i={},l=e.length;let u,s;for(u=0;u<l;++u)s=e[u],i[s]=u,n.push({value:s,major:!1});return l===0||!r?n:GV(t,n,i,r)}class O2 extends bd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),i=this._adapter=new Z4._date(e.adapters.date);i.init(r),Lg(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:SE(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:i,max:l,minDefined:u,maxDefined:s}=this.getUserBounds();function m(y){!u&&!isNaN(y.min)&&(i=Math.min(i,y.min)),!s&&!isNaN(y.max)&&(l=Math.max(l,y.max))}(!u||!s)&&(m(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&m(this.getMinMax(!1))),i=fi(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),l=fi(l)&&!isNaN(l)?l:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,l-1),this.max=Math.max(i+1,l)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const l=this.min,u=this.max,s=dN(i,l,u);return this._unit=r.unit||(n.autoSkip?TE(r.minUnit,this.min,this.max,this._getLabelCapacity(l)):WV(this,s.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:HV(this._unit),this.initOffsets(i),e.reverse&&s.reverse(),AE(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,l;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,l=this.getDecimalForValue(e[e.length-1]),e.length===1?n=l:n=(l-this.getDecimalForValue(e[e.length-2]))/2);const u=e.length<3?.5:.25;r=fa(r,0,u),n=fa(n,0,u),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,i=this.options,l=i.time,u=l.unit||TE(l.minUnit,r,n,this._getLabelCapacity(r)),s=Ar(i.ticks.stepSize,1),m=u==="week"?l.isoWeekday:!1,y=qp(m)||m===!0,w={};let S=r,E,I;if(y&&(S=+e.startOf(S,"isoWeek",m)),S=+e.startOf(S,y?"day":u),e.diff(n,r,u)>1e5*s)throw new Error(r+" and "+n+" are too far apart with stepSize of "+s+" "+u);const F=i.ticks.source==="data"&&this.getDataTimestamps();for(E=S,I=0;E<n;E=+e.add(E,s,u),I++)PE(w,E,F);return(E===n||i.bounds==="ticks"||I===1)&&PE(w,E,F),Object.keys(w).sort(wE).map(L=>+L)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const i=this.options.time.displayFormats,l=this._unit,u=r||i[l];return this._adapter.format(e,u)}_tickFormatFunction(e,r,n,i){const l=this.options,u=l.ticks.callback;if(u)return zn(u,[e,r,n],this);const s=l.time.displayFormats,m=this._unit,y=this._majorUnit,w=m&&s[m],S=y&&s[y],E=n[r],I=y&&S&&E&&E.major;return this._adapter.format(e,i||(I?S:w))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,i=Ml(this.isHorizontal()?r.maxRotation:r.minRotation),l=Math.cos(i),u=Math.sin(i),s=this._resolveTickFontOptions(0).size;return{w:n*l+s*u,h:n*u+s*l}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,l=this._tickFormatFunction(e,0,AE(this,[e],this._majorUnit),i),u=this._getLabelSize(l),s=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return s>0?s:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(SE(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return JR(e.sort(wE))}}function Jv(t,e,r){let n=0,i=t.length-1,l,u,s,m;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=xc(t,"pos",e)),{pos:l,time:s}=t[n],{pos:u,time:m}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=xc(t,"time",e)),{time:l,pos:s}=t[n],{time:u,pos:m}=t[i]);const y=u-l;return y?s+(m-s)*(e-l)/y:s}class ZV extends O2{static id="timeseries";static defaults=O2.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=Jv(r,this.min),this._tableRange=Jv(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,i=[],l=[];let u,s,m,y,w;for(u=0,s=e.length;u<s;++u)y=e[u],y>=r&&y<=n&&i.push(y);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(u=0,s=i.length;u<s;++u)w=i[u+1],m=i[u-1],y=i[u],Math.round((w+m)/2)!==y&&l.push({time:y,pos:u/(s-1)});return l}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,l)=>i-l)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Jv(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return Jv(this._table,n*this._tableRange+this._minPos,!0)}}var XV=Object.freeze({__proto__:null,CategoryScale:PV,LinearScale:kV,LogarithmicScale:CV,RadialLinearScale:UV,TimeScale:O2,TimeSeriesScale:ZV});const KV=[G4,A6,bV,XV],qL="label";function kE(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function YV(t,e){const r=t.options;r&&e&&Object.assign(r,e)}function UL(t,e){t.labels=e}function WL(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qL;const n=[];t.datasets=e.map(i=>{const l=t.datasets.find(u=>u[r]===i[r]);return!l||!i.data||n.includes(l)?{...i}:(n.push(l),Object.assign(l,i),l)})}function JV(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:qL;const r={labels:[],datasets:[]};return UL(r,t.labels),WL(r,t.datasets,e),r}function QV(t,e){const{height:r=150,width:n=300,redraw:i=!1,datasetIdKey:l,type:u,data:s,options:m,plugins:y=[],fallbackContent:w,updateMode:S,...E}=t,I=it.useRef(null),F=it.useRef(null),L=()=>{I.current&&(F.current=new z0(I.current,{type:u,data:JV(s,l),options:m&&{...m},plugins:y}),kE(e,F.current))},R=()=>{kE(e,null),F.current&&(F.current.destroy(),F.current=null)};return it.useEffect(()=>{!i&&F.current&&m&&YV(F.current,m)},[i,m]),it.useEffect(()=>{!i&&F.current&&UL(F.current.config.data,s.labels)},[i,s.labels]),it.useEffect(()=>{!i&&F.current&&s.datasets&&WL(F.current.config.data,s.datasets,l)},[i,s.datasets]),it.useEffect(()=>{F.current&&(i?(R(),setTimeout(L)):F.current.update(S))},[i,m,s.labels,s.datasets,S]),it.useEffect(()=>{F.current&&(R(),setTimeout(L))},[u]),it.useEffect(()=>(L(),()=>R()),[]),He.createElement("canvas",{ref:I,role:"img",height:r,width:n,...E},w)}const e8=it.forwardRef(QV);function t8(t,e){return z0.register(e),it.forwardRef((r,n)=>He.createElement(e8,{...r,ref:n,type:t}))}const r8=t8("line",bL);z0.register(...KV);const EE=({data:t,darkMode:e})=>{if(!t||t.length===0)return We.jsx("div",{style:{height:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:We.jsx("p",{children:"Nenhum dado disponível"})});const r={labels:t.map(n=>new Date(Number(n.date)*1e3).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})),datasets:[{label:"Temperatura Média",data:t.map(n=>n.temperature),borderColor:e?"#3b82f6":"#1d4ed8",backgroundColor:e?"rgba(59, 130, 246, 0.1)":"rgba(29, 78, 216, 0.1)",tension:.3,fill:!0,borderWidth:2,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:e?"#3b82f6":"#1d4ed8",pointBorderColor:e?"#1e293b":"#ffffff",pointBorderWidth:2},{label:"Temperatura Mínima",data:t.map(n=>n.minTemperature),borderColor:e?"#eab308":"#fbbf24",backgroundColor:e?"rgba(234, 179, 8, 0.1)":"rgba(251, 191, 36, 0.1)",tension:.3,pointRadius:3,pointHoverRadius:5,fill:!1,borderWidth:1},{label:"Temperatura Máxima",data:t.map(n=>n.maxTemperature),borderColor:e?"#ff7f50":"#ff5722",backgroundColor:e?"rgba(255, 127, 80, 0.1)":"rgba(255, 87, 34, 0.1)",tension:.3,pointRadius:3,pointHoverRadius:5,fill:!1,borderWidth:1}]};return We.jsx("div",{style:{height:"300px",backgroundColor:e?"#1e293b":"#f1f5f9",borderRadius:"8px",padding:"20px"},children:We.jsx(r8,{data:r,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{display:!0,position:"top",labels:{color:e?"#cbd5e1":"#1e293b"}},tooltip:{mode:"index",intersect:!1,backgroundColor:e?"#1e293b":"#ffffff",titleColor:e?"#cbd5e1":"#1e293b",bodyColor:e?"#cbd5e1":"#1e293b",borderColor:e?"#334155":"#e2e8f0",borderWidth:1,callbacks:{label:n=>{const i=n.dataset.label||"";return i==="Temperatura Média"?`${n.parsed.y.toFixed(1)}°C`:i==="Temperatura Mínima"?`Min: ${n.parsed.y.toFixed(1)}°C`:i==="Temperatura Máxima"?`Max: ${n.parsed.y.toFixed(1)}°C`:""}}}},scales:{y:{title:{display:!0,text:"Temperatura (°C)",color:e?"#cbd5e1":"#1e293b"},ticks:{color:e?"#94a3b8":"#64748b",callback:n=>`${n}°C`},grid:{color:e?"rgba(203, 213, 225, 0.1)":"rgba(0, 0, 0, 0.1)"}},x:{title:{display:!0,text:"Data",color:e?"#cbd5e1":"#1e293b"},ticks:{color:e?"#94a3b8":"#64748b"},grid:{color:e?"rgba(203, 213, 225, 0.1)":"rgba(0, 0, 0, 0.1)"}}}}})})};class wd extends Error{}class n8 extends wd{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class i8 extends wd{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class a8 extends wd{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Dp extends wd{}class HL extends wd{constructor(e){super(`Invalid unit ${e}`)}}class Ya extends wd{}class _h extends wd{constructor(){super("Zone is an abstract class")}}const Ft="numeric",Dl="short",xs="long",O_={year:Ft,month:Ft,day:Ft},GL={year:Ft,month:Dl,day:Ft},o8={year:Ft,month:Dl,day:Ft,weekday:Dl},ZL={year:Ft,month:xs,day:Ft},XL={year:Ft,month:xs,day:Ft,weekday:xs},KL={hour:Ft,minute:Ft},YL={hour:Ft,minute:Ft,second:Ft},JL={hour:Ft,minute:Ft,second:Ft,timeZoneName:Dl},QL={hour:Ft,minute:Ft,second:Ft,timeZoneName:xs},eF={hour:Ft,minute:Ft,hourCycle:"h23"},tF={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23"},rF={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23",timeZoneName:Dl},nF={hour:Ft,minute:Ft,second:Ft,hourCycle:"h23",timeZoneName:xs},iF={year:Ft,month:Ft,day:Ft,hour:Ft,minute:Ft},aF={year:Ft,month:Ft,day:Ft,hour:Ft,minute:Ft,second:Ft},oF={year:Ft,month:Dl,day:Ft,hour:Ft,minute:Ft},sF={year:Ft,month:Dl,day:Ft,hour:Ft,minute:Ft,second:Ft},s8={year:Ft,month:Dl,day:Ft,weekday:Dl,hour:Ft,minute:Ft},lF={year:Ft,month:xs,day:Ft,hour:Ft,minute:Ft,timeZoneName:Dl},uF={year:Ft,month:xs,day:Ft,hour:Ft,minute:Ft,second:Ft,timeZoneName:Dl},cF={year:Ft,month:xs,day:Ft,weekday:xs,hour:Ft,minute:Ft,timeZoneName:xs},hF={year:Ft,month:xs,day:Ft,weekday:xs,hour:Ft,minute:Ft,second:Ft,timeZoneName:xs};class Ry{get type(){throw new _h}get name(){throw new _h}get ianaName(){return this.name}get isUniversal(){throw new _h}offsetName(e,r){throw new _h}formatOffset(e,r){throw new _h}offset(e){throw new _h}equals(e){throw new _h}get isValid(){throw new _h}}let fb=null;class j0 extends Ry{static get instance(){return fb===null&&(fb=new j0),fb}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return wF(e,r,n)}formatOffset(e,r){return Ng(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const I2=new Map;function l8(t){let e=I2.get(t);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),I2.set(t,e)),e}const u8={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function c8(t,e){const r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,l,u,s,m,y,w]=n;return[u,i,l,s,m,y,w]}function h8(t,e){const r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){const{type:l,value:u}=r[i],s=u8[l];l==="era"?n[s]=u:_r(s)||(n[s]=parseInt(u,10))}return n}const db=new Map;class Ec extends Ry{static create(e){let r=db.get(e);return r===void 0&&db.set(e,r=new Ec(e)),r}static resetCache(){db.clear(),I2.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ec.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return wF(e,r,n,this.name)}formatOffset(e,r){return Ng(this.offset(e),r)}offset(e){if(!this.valid)return NaN;const r=new Date(e);if(isNaN(r))return NaN;const n=l8(this.name);let[i,l,u,s,m,y,w]=n.formatToParts?h8(n,r):c8(n,r);s==="BC"&&(i=-Math.abs(i)+1);const E=N0({year:i,month:l,day:u,hour:m===24?0:m,minute:y,second:w,millisecond:0});let I=+r;const F=I%1e3;return I-=F>=0?F:1e3+F,(E-I)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let ME={};function f8(t,e={}){const r=JSON.stringify([t,e]);let n=ME[r];return n||(n=new Intl.ListFormat(t,e),ME[r]=n),n}const D2=new Map;function z2(t,e={}){const r=JSON.stringify([t,e]);let n=D2.get(r);return n===void 0&&(n=new Intl.DateTimeFormat(t,e),D2.set(r,n)),n}const R2=new Map;function d8(t,e={}){const r=JSON.stringify([t,e]);let n=R2.get(r);return n===void 0&&(n=new Intl.NumberFormat(t,e),R2.set(r,n)),n}const L2=new Map;function p8(t,e={}){const{base:r,...n}=e,i=JSON.stringify([t,n]);let l=L2.get(i);return l===void 0&&(l=new Intl.RelativeTimeFormat(t,e),L2.set(i,l)),l}let Cg=null;function m8(){return Cg||(Cg=new Intl.DateTimeFormat().resolvedOptions().locale,Cg)}const F2=new Map;function fF(t){let e=F2.get(t);return e===void 0&&(e=new Intl.DateTimeFormat(t).resolvedOptions(),F2.set(t,e)),e}const j2=new Map;function g8(t){let e=j2.get(t);if(!e){const r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in e||(e={...dF,...e}),j2.set(t,e)}return e}function y8(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const r=t.indexOf("-u-");if(r===-1)return[t];{let n,i;try{n=z2(t).resolvedOptions(),i=t}catch{const m=t.substring(0,r);n=z2(m).resolvedOptions(),i=m}const{numberingSystem:l,calendar:u}=n;return[i,l,u]}}function v8(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function _8(t){const e=[];for(let r=1;r<=12;r++){const n=Sr.utc(2009,r,1);e.push(t(n))}return e}function x8(t){const e=[];for(let r=1;r<=7;r++){const n=Sr.utc(2016,11,13+r);e.push(t(n))}return e}function Qv(t,e,r,n){const i=t.listingMode();return i==="error"?null:i==="en"?r(e):n(e)}function b8(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||fF(t.locale).numberingSystem==="latn"}class w8{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:i,floor:l,...u}=n;if(!r||Object.keys(u).length>0){const s={useGrouping:!1,...n};n.padTo>0&&(s.minimumIntegerDigits=n.padTo),this.inf=d8(e,s)}}format(e){if(this.inf){const r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{const r=this.floor?Math.floor(e):AP(e,3);return Mi(r,this.padTo)}}}class S8{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const u=-1*(e.offset/60),s=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&Ec.create(s).valid?(i=s,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const l={...this.opts};l.timeZone=l.timeZone||i,this.dtf=z2(r,l)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){const n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class T8{constructor(e,r,n){this.opts={style:"long",...n},!r&&xF()&&(this.rtf=p8(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):H8(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}}const dF={firstDay:1,minimalDays:4,weekend:[6,7]};class yn{static fromOpts(e){return yn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,i,l=!1){const u=e||ci.defaultLocale,s=u||(l?"en-US":m8()),m=r||ci.defaultNumberingSystem,y=n||ci.defaultOutputCalendar,w=N2(i)||ci.defaultWeekSettings;return new yn(s,m,y,w,u)}static resetCache(){Cg=null,D2.clear(),R2.clear(),L2.clear(),F2.clear(),j2.clear()}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return yn.create(e,r,n,i)}constructor(e,r,n,i,l){const[u,s,m]=y8(e);this.locale=u,this.numberingSystem=r||s||null,this.outputCalendar=n||m||null,this.weekSettings=i,this.intl=v8(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=l,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=b8(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:yn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,N2(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return Qv(this,e,PF,()=>{const n=this.intl==="ja"||this.intl.startsWith("ja-");r&=!n;const i=r?{month:e,day:"numeric"}:{month:e},l=r?"format":"standalone";if(!this.monthsCache[l][e]){const u=n?s=>this.dtFormatter(s,i).format():s=>this.extract(s,i,"month");this.monthsCache[l][e]=_8(u)}return this.monthsCache[l][e]})}weekdays(e,r=!1){return Qv(this,e,EF,()=>{const n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=x8(l=>this.extract(l,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Qv(this,void 0,()=>MF,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Sr.utc(2016,11,13,9),Sr.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Qv(this,e,CF,()=>{const r={era:e};return this.eraCache[e]||(this.eraCache[e]=[Sr.utc(-40,1,1),Sr.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){const i=this.dtFormatter(e,r),l=i.formatToParts(),u=l.find(s=>s.type.toLowerCase()===n);return u?u.value:null}numberFormatter(e={}){return new w8(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new S8(e,this.intl,r)}relFormatter(e={}){return new T8(this.intl,this.isEnglish(),e)}listFormatter(e={}){return f8(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||fF(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bF()?g8(this.locale):dF}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let pb=null;class Ao extends Ry{static get utcInstance(){return pb===null&&(pb=new Ao(0)),pb}static instance(e){return e===0?Ao.utcInstance:new Ao(e)}static parseSpecifier(e){if(e){const r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new Ao($0(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Ng(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Ng(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return Ng(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class P8 extends Ry{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function wh(t,e){if(_r(t)||t===null)return e;if(t instanceof Ry)return t;if(O8(t)){const r=t.toLowerCase();return r==="default"?e:r==="local"||r==="system"?j0.instance:r==="utc"||r==="gmt"?Ao.utcInstance:Ao.parseSpecifier(r)||Ec.create(t)}else return Mh(t)?Ao.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new P8(t)}const wP={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},CE={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},A8=wP.hanidec.replace(/[\[|\]]/g,"").split("");function k8(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);if(t[r].search(wP.hanidec)!==-1)e+=A8.indexOf(t[r]);else for(const i in CE){const[l,u]=CE[i];n>=l&&n<=u&&(e+=n-l)}}return parseInt(e,10)}else return e}const B2=new Map;function E8(){B2.clear()}function Tl({numberingSystem:t},e=""){const r=t||"latn";let n=B2.get(r);n===void 0&&(n=new Map,B2.set(r,n));let i=n.get(e);return i===void 0&&(i=new RegExp(`${wP[r]}${e}`),n.set(e,i)),i}let OE=()=>Date.now(),IE="system",DE=null,zE=null,RE=null,LE=60,FE,jE=null;class ci{static get now(){return OE}static set now(e){OE=e}static set defaultZone(e){IE=e}static get defaultZone(){return wh(IE,j0.instance)}static get defaultLocale(){return DE}static set defaultLocale(e){DE=e}static get defaultNumberingSystem(){return zE}static set defaultNumberingSystem(e){zE=e}static get defaultOutputCalendar(){return RE}static set defaultOutputCalendar(e){RE=e}static get defaultWeekSettings(){return jE}static set defaultWeekSettings(e){jE=N2(e)}static get twoDigitCutoffYear(){return LE}static set twoDigitCutoffYear(e){LE=e%100}static get throwOnInvalid(){return FE}static set throwOnInvalid(e){FE=e}static resetCaches(){yn.resetCache(),Ec.resetCache(),Sr.resetCache(),E8()}}class Cl{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pF=[0,31,59,90,120,151,181,212,243,273,304,334],mF=[0,31,60,91,121,152,182,213,244,274,305,335];function Gs(t,e){return new Cl("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function SP(t,e,r){const n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const i=n.getUTCDay();return i===0?7:i}function gF(t,e,r){return r+(Ly(t)?mF:pF)[e-1]}function yF(t,e){const r=Ly(t)?mF:pF,n=r.findIndex(l=>l<e),i=e-r[n];return{month:n+1,day:i}}function TP(t,e){return(t-e+7)%7+1}function I_(t,e=4,r=1){const{year:n,month:i,day:l}=t,u=gF(n,i,l),s=TP(SP(n,i,l),r);let m=Math.floor((u-s+14-e)/7),y;return m<1?(y=n-1,m=Yg(y,e,r)):m>Yg(n,e,r)?(y=n+1,m=1):y=n,{weekYear:y,weekNumber:m,weekday:s,...V0(t)}}function BE(t,e=4,r=1){const{weekYear:n,weekNumber:i,weekday:l}=t,u=TP(SP(n,1,e),r),s=jp(n);let m=i*7+l-u-7+e,y;m<1?(y=n-1,m+=jp(y)):m>s?(y=n+1,m-=jp(n)):y=n;const{month:w,day:S}=yF(y,m);return{year:y,month:w,day:S,...V0(t)}}function mb(t){const{year:e,month:r,day:n}=t,i=gF(e,r,n);return{year:e,ordinal:i,...V0(t)}}function NE(t){const{year:e,ordinal:r}=t,{month:n,day:i}=yF(e,r);return{year:e,month:n,day:i,...V0(t)}}function $E(t,e){if(!_r(t.localWeekday)||!_r(t.localWeekNumber)||!_r(t.localWeekYear)){if(!_r(t.weekday)||!_r(t.weekNumber)||!_r(t.weekYear))throw new Dp("Cannot mix locale-based week fields with ISO-based week fields");return _r(t.localWeekday)||(t.weekday=t.localWeekday),_r(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),_r(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function M8(t,e=4,r=1){const n=B0(t.weekYear),i=Zs(t.weekNumber,1,Yg(t.weekYear,e,r)),l=Zs(t.weekday,1,7);return n?i?l?!1:Gs("weekday",t.weekday):Gs("week",t.weekNumber):Gs("weekYear",t.weekYear)}function C8(t){const e=B0(t.year),r=Zs(t.ordinal,1,jp(t.year));return e?r?!1:Gs("ordinal",t.ordinal):Gs("year",t.year)}function vF(t){const e=B0(t.year),r=Zs(t.month,1,12),n=Zs(t.day,1,D_(t.year,t.month));return e?r?n?!1:Gs("day",t.day):Gs("month",t.month):Gs("year",t.year)}function _F(t){const{hour:e,minute:r,second:n,millisecond:i}=t,l=Zs(e,0,23)||e===24&&r===0&&n===0&&i===0,u=Zs(r,0,59),s=Zs(n,0,59),m=Zs(i,0,999);return l?u?s?m?!1:Gs("millisecond",i):Gs("second",n):Gs("minute",r):Gs("hour",e)}function _r(t){return typeof t>"u"}function Mh(t){return typeof t=="number"}function B0(t){return typeof t=="number"&&t%1===0}function O8(t){return typeof t=="string"}function I8(t){return Object.prototype.toString.call(t)==="[object Date]"}function xF(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bF(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function D8(t){return Array.isArray(t)?t:[t]}function VE(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{const l=[e(i),i];return n&&r(n[0],l[0])===n[0]?n:l},null)[1]}function z8(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function Hp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function N2(t){if(t==null)return null;if(typeof t!="object")throw new Ya("Week settings must be an object");if(!Zs(t.firstDay,1,7)||!Zs(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Zs(e,1,7)))throw new Ya("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Zs(t,e,r){return B0(t)&&t>=e&&t<=r}function R8(t,e){return t-e*Math.floor(t/e)}function Mi(t,e=2){const r=t<0;let n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function xh(t){if(!(_r(t)||t===null||t===""))return parseInt(t,10)}function Kf(t){if(!(_r(t)||t===null||t===""))return parseFloat(t)}function PP(t){if(!(_r(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function AP(t,e,r="round"){const n=10**e;switch(r){case"expand":return t>0?Math.ceil(t*n)/n:Math.floor(t*n)/n;case"trunc":return Math.trunc(t*n)/n;case"round":return Math.round(t*n)/n;case"floor":return Math.floor(t*n)/n;case"ceil":return Math.ceil(t*n)/n;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Ly(t){return t%4===0&&(t%100!==0||t%400===0)}function jp(t){return Ly(t)?366:365}function D_(t,e){const r=R8(e-1,12)+1,n=t+(e-r)/12;return r===2?Ly(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function N0(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function qE(t,e,r){return-TP(SP(t,1,e),r)+e-1}function Yg(t,e=4,r=1){const n=qE(t,e,r),i=qE(t+1,e,r);return(jp(t)-n+i)/7}function $2(t){return t>99?t:t>ci.twoDigitCutoffYear?1900+t:2e3+t}function wF(t,e,r,n=null){const i=new Date(t),l={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(l.timeZone=n);const u={timeZoneName:e,...l},s=new Intl.DateTimeFormat(r,u).formatToParts(i).find(m=>m.type.toLowerCase()==="timezonename");return s?s.value:null}function $0(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);const n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function SF(t){const e=Number(t);if(typeof t=="boolean"||t===""||!Number.isFinite(e))throw new Ya(`Invalid unit value ${t}`);return e}function z_(t,e){const r={};for(const n in t)if(Hp(t,n)){const i=t[n];if(i==null)continue;r[e(n)]=SF(i)}return r}function Ng(t,e){const r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Mi(r,2)}:${Mi(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${Mi(r,2)}${Mi(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function V0(t){return z8(t,["hour","minute","second","millisecond"])}const L8=["January","February","March","April","May","June","July","August","September","October","November","December"],TF=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],F8=["J","F","M","A","M","J","J","A","S","O","N","D"];function PF(t){switch(t){case"narrow":return[...F8];case"short":return[...TF];case"long":return[...L8];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const AF=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],kF=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],j8=["M","T","W","T","F","S","S"];function EF(t){switch(t){case"narrow":return[...j8];case"short":return[...kF];case"long":return[...AF];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const MF=["AM","PM"],B8=["Before Christ","Anno Domini"],N8=["BC","AD"],$8=["B","A"];function CF(t){switch(t){case"narrow":return[...$8];case"short":return[...N8];case"long":return[...B8];default:return null}}function V8(t){return MF[t.hour<12?0:1]}function q8(t,e){return EF(e)[t.weekday-1]}function U8(t,e){return PF(e)[t.month-1]}function W8(t,e){return CF(e)[t.year<0?0:1]}function H8(t,e,r="always",n=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},l=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&l){const S=t==="days";switch(e){case 1:return S?"tomorrow":`next ${i[t][0]}`;case-1:return S?"yesterday":`last ${i[t][0]}`;case 0:return S?"today":`this ${i[t][0]}`}}const u=Object.is(e,-0)||e<0,s=Math.abs(e),m=s===1,y=i[t],w=n?m?y[1]:y[2]||y[1]:m?i[t][0]:t;return u?`${s} ${w} ago`:`in ${s} ${w}`}function UE(t,e){let r="";for(const n of t)n.literal?r+=n.val:r+=e(n.val);return r}const G8={D:O_,DD:GL,DDD:ZL,DDDD:XL,t:KL,tt:YL,ttt:JL,tttt:QL,T:eF,TT:tF,TTT:rF,TTTT:nF,f:iF,ff:oF,fff:lF,ffff:cF,F:aF,FF:sF,FFF:uF,FFFF:hF};class to{static create(e,r={}){return new to(e,r)}static parseFormat(e){let r=null,n="",i=!1;const l=[];for(let u=0;u<e.length;u++){const s=e.charAt(u);s==="'"?((n.length>0||i)&&l.push({literal:i||/^\s+$/.test(n),val:n===""?"'":n}),r=null,n="",i=!i):i||s===r?n+=s:(n.length>0&&l.push({literal:/^\s+$/.test(n),val:n}),n=s,r=s)}return n.length>0&&l.push({literal:i||/^\s+$/.test(n),val:n}),l}static macroTokenToFormatOpts(e){return G8[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0,n=void 0){if(this.opts.forceSimple)return Mi(e,r);const i={...this.opts};return r>0&&(i.padTo=r),n&&(i.signDisplay=n),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,r){const n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",l=(I,F)=>this.loc.extract(e,I,F),u=I=>e.isOffsetFixed&&e.offset===0&&I.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,I.format):"",s=()=>n?V8(e):l({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(I,F)=>n?U8(e,I):l(F?{month:I}:{month:I,day:"numeric"},"month"),y=(I,F)=>n?q8(e,I):l(F?{weekday:I}:{weekday:I,month:"long",day:"numeric"},"weekday"),w=I=>{const F=to.macroTokenToFormatOpts(I);return F?this.formatWithSystemDefault(e,F):I},S=I=>n?W8(e,I):l({era:I},"era"),E=I=>{switch(I){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return s();case"d":return i?l({day:"numeric"},"day"):this.num(e.day);case"dd":return i?l({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return i?l({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?l({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return i?l({month:"numeric"},"month"):this.num(e.month);case"MM":return i?l({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return i?l({year:"numeric"},"year"):this.num(e.year);case"yy":return i?l({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?l({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?l({year:"numeric"},"year"):this.num(e.year,6);case"G":return S("short");case"GG":return S("long");case"GGGGG":return S("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return w(I)}};return UE(to.parseFormat(r),E)}formatDurationFromString(e,r){const n=this.opts.signMode==="negativeLargestOnly"?-1:1,i=w=>{switch(w[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},l=(w,S)=>E=>{const I=i(E);if(I){const F=S.isNegativeDuration&&I!==S.largestUnit?n:1;let L;return this.opts.signMode==="negativeLargestOnly"&&I!==S.largestUnit?L="never":this.opts.signMode==="all"?L="always":L="auto",this.num(w.get(I)*F,E.length,L)}else return E},u=to.parseFormat(r),s=u.reduce((w,{literal:S,val:E})=>S?w:w.concat(E),[]),m=e.shiftTo(...s.map(i).filter(w=>w)),y={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return UE(u,l(m,y))}}const OF=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function pm(...t){const e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function mm(...t){return e=>t.reduce(([r,n,i],l)=>{const[u,s,m]=l(e,i);return[{...r,...u},s||n,m]},[{},null,1]).slice(0,2)}function gm(t,...e){if(t==null)return[null,null];for(const[r,n]of e){const i=r.exec(t);if(i)return n(i)}return[null,null]}function IF(...t){return(e,r)=>{const n={};let i;for(i=0;i<t.length;i++)n[t[i]]=xh(e[r+i]);return[n,null,r+i]}}const DF=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,Z8=`(?:${DF.source}?(?:\\[(${OF.source})\\])?)?`,kP=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zF=RegExp(`${kP.source}${Z8}`),EP=RegExp(`(?:[Tt]${zF.source})?`),X8=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,K8=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Y8=/(\d{4})-?(\d{3})/,J8=IF("weekYear","weekNumber","weekDay"),Q8=IF("year","ordinal"),eq=/(\d{4})-(\d\d)-(\d\d)/,RF=RegExp(`${kP.source} ?(?:${DF.source}|(${OF.source}))?`),tq=RegExp(`(?: ${RF.source})?`);function Bp(t,e,r){const n=t[e];return _r(n)?r:xh(n)}function rq(t,e){return[{year:Bp(t,e),month:Bp(t,e+1,1),day:Bp(t,e+2,1)},null,e+3]}function ym(t,e){return[{hours:Bp(t,e,0),minutes:Bp(t,e+1,0),seconds:Bp(t,e+2,0),milliseconds:PP(t[e+3])},null,e+4]}function Fy(t,e){const r=!t[e]&&!t[e+1],n=$0(t[e+1],t[e+2]),i=r?null:Ao.instance(n);return[{},i,e+3]}function jy(t,e){const r=t[e]?Ec.create(t[e]):null;return[{},r,e+1]}const nq=RegExp(`^T?${kP.source}$`),iq=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function aq(t){const[e,r,n,i,l,u,s,m,y]=t,w=e[0]==="-",S=m&&m[0]==="-",E=(I,F=!1)=>I!==void 0&&(F||I&&w)?-I:I;return[{years:E(Kf(r)),months:E(Kf(n)),weeks:E(Kf(i)),days:E(Kf(l)),hours:E(Kf(u)),minutes:E(Kf(s)),seconds:E(Kf(m),m==="-0"),milliseconds:E(PP(y),S)}]}const oq={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function MP(t,e,r,n,i,l,u){const s={year:e.length===2?$2(xh(e)):xh(e),month:TF.indexOf(r)+1,day:xh(n),hour:xh(i),minute:xh(l)};return u&&(s.second=xh(u)),t&&(s.weekday=t.length>3?AF.indexOf(t)+1:kF.indexOf(t)+1),s}const sq=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function lq(t){const[,e,r,n,i,l,u,s,m,y,w,S]=t,E=MP(e,i,n,r,l,u,s);let I;return m?I=oq[m]:y?I=0:I=$0(w,S),[E,new Ao(I)]}function uq(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const cq=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,hq=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,fq=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function WE(t){const[,e,r,n,i,l,u,s]=t;return[MP(e,i,n,r,l,u,s),Ao.utcInstance]}function dq(t){const[,e,r,n,i,l,u,s]=t;return[MP(e,s,r,n,i,l,u),Ao.utcInstance]}const pq=pm(X8,EP),mq=pm(K8,EP),gq=pm(Y8,EP),yq=pm(zF),LF=mm(rq,ym,Fy,jy),vq=mm(J8,ym,Fy,jy),_q=mm(Q8,ym,Fy,jy),xq=mm(ym,Fy,jy);function bq(t){return gm(t,[pq,LF],[mq,vq],[gq,_q],[yq,xq])}function wq(t){return gm(uq(t),[sq,lq])}function Sq(t){return gm(t,[cq,WE],[hq,WE],[fq,dq])}function Tq(t){return gm(t,[iq,aq])}const Pq=mm(ym);function Aq(t){return gm(t,[nq,Pq])}const kq=pm(eq,tq),Eq=pm(RF),Mq=mm(ym,Fy,jy);function Cq(t){return gm(t,[kq,LF],[Eq,Mq])}const HE="Invalid Duration",FF={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Oq={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...FF},qs=146097/400,Ap=146097/4800,Iq={years:{quarters:4,months:12,weeks:qs/7,days:qs,hours:qs*24,minutes:qs*24*60,seconds:qs*24*60*60,milliseconds:qs*24*60*60*1e3},quarters:{months:3,weeks:qs/28,days:qs/4,hours:qs*24/4,minutes:qs*24*60/4,seconds:qs*24*60*60/4,milliseconds:qs*24*60*60*1e3/4},months:{weeks:Ap/7,days:Ap,hours:Ap*24,minutes:Ap*24*60,seconds:Ap*24*60*60,milliseconds:Ap*24*60*60*1e3},...FF},nd=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Dq=nd.slice(0).reverse();function pc(t,e,r=!1){const n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Xr(n)}function jF(t,e){let r=e.milliseconds??0;for(const n of Dq.slice(1))e[n]&&(r+=e[n]*t[n].milliseconds);return r}function GE(t,e){const r=jF(t,e)<0?-1:1;nd.reduceRight((n,i)=>{if(_r(e[i]))return n;if(n){const l=e[n]*r,u=t[i][n],s=Math.floor(l/u);e[i]+=s*r,e[n]-=s*u*r}return i},null),nd.reduce((n,i)=>{if(_r(e[i]))return n;if(n){const l=e[n]%1;e[n]-=l,e[i]+=l*t[n][i]}return i},null)}function ZE(t){const e={};for(const[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}class Xr{constructor(e){const r=e.conversionAccuracy==="longterm"||!1;let n=r?Iq:Oq;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||yn.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return Xr.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new Ya(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Xr({values:z_(e,Xr.normalizeUnit),loc:yn.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(Mh(e))return Xr.fromMillis(e);if(Xr.isDuration(e))return e;if(typeof e=="object")return Xr.fromObject(e);throw new Ya(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){const[n]=Tq(e);return n?Xr.fromObject(n,r):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){const[n]=Aq(e);return n?Xr.fromObject(n,r):Xr.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new Ya("need to specify a reason the Duration is invalid");const n=e instanceof Cl?e:new Cl(e,r);if(ci.throwOnInvalid)throw new a8(n);return new Xr({invalid:n})}static normalizeUnit(e){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new HL(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){const n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?to.create(this.loc,n).formatDurationFromString(this,e):HE}toHuman(e={}){if(!this.isValid)return HE;const r=e.showZeros!==!1,n=nd.map(i=>{const l=this.values[i];return _r(l)||l===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(l)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=AP(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Sr.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?jF(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const r=Xr.fromDurationLike(e),n={};for(const i of nd)(Hp(r.values,i)||Hp(this.values,i))&&(n[i]=r.get(i)+this.get(i));return pc(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const r=Xr.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;const r={};for(const n of Object.keys(this.values))r[n]=SF(e(this.values[n],n));return pc(this,{values:r},!0)}get(e){return this[Xr.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const r={...this.values,...z_(e,Xr.normalizeUnit)};return pc(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){const u={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:n};return pc(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return GE(this.matrix,e),pc(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=ZE(this.normalize().shiftToAll().toObject());return pc(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>Xr.normalizeUnit(u));const r={},n={},i=this.toObject();let l;for(const u of nd)if(e.indexOf(u)>=0){l=u;let s=0;for(const y in n)s+=this.matrix[y][u]*n[y],n[y]=0;Mh(i[u])&&(s+=i[u]);const m=Math.trunc(s);r[u]=m,n[u]=(s*1e3-m*1e3)/1e3}else Mh(i[u])&&(n[u]=i[u]);for(const u in n)n[u]!==0&&(r[l]+=u===l?n[u]:n[u]/this.matrix[l][u]);return GE(this.matrix,r),pc(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return pc(this,{values:e},!0)}removeZeros(){if(!this.isValid)return this;const e=ZE(this.values);return pc(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(const n of nd)if(!r(this.values[n],e.values[n]))return!1;return!0}}const kp="Invalid Interval";function zq(t,e){return!t||!t.isValid?ui.invalid("missing or invalid start"):!e||!e.isValid?ui.invalid("missing or invalid end"):e<t?ui.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class ui{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new Ya("need to specify a reason the Interval is invalid");const n=e instanceof Cl?e:new Cl(e,r);if(ci.throwOnInvalid)throw new i8(n);return new ui({invalid:n})}static fromDateTimes(e,r){const n=gg(e),i=gg(r),l=zq(n,i);return l??new ui({start:n,end:i})}static after(e,r){const n=Xr.fromDurationLike(r),i=gg(e);return ui.fromDateTimes(i,i.plus(n))}static before(e,r){const n=Xr.fromDurationLike(r),i=gg(e);return ui.fromDateTimes(i.minus(n),i)}static fromISO(e,r){const[n,i]=(e||"").split("/",2);if(n&&i){let l,u;try{l=Sr.fromISO(n,r),u=l.isValid}catch{u=!1}let s,m;try{s=Sr.fromISO(i,r),m=s.isValid}catch{m=!1}if(u&&m)return ui.fromDateTimes(l,s);if(u){const y=Xr.fromISO(i,r);if(y.isValid)return ui.after(l,y)}else if(m){const y=Xr.fromISO(n,r);if(y.isValid)return ui.before(s,y)}}return ui.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;const n=this.start.startOf(e,r);let i;return r?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?ui.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];const r=e.map(gg).filter(u=>this.contains(u)).sort((u,s)=>u.toMillis()-s.toMillis()),n=[];let{s:i}=this,l=0;for(;i<this.e;){const u=r[l]||this.e,s=+u>+this.e?this.e:u;n.push(ui.fromDateTimes(i,s)),i=s,l+=1}return n}splitBy(e){const r=Xr.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,l;const u=[];for(;n<this.e;){const s=this.start.plus(r.mapUnits(m=>m*i));l=+s>+this.e?this.e:s,u.push(ui.fromDateTimes(n,l)),n=l,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:ui.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;const r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return ui.fromDateTimes(r,n)}static merge(e){const[r,n]=e.sort((i,l)=>i.s-l.s).reduce(([i,l],u)=>l?l.overlaps(u)||l.abutsStart(u)?[i,l.union(u)]:[i.concat([l]),u]:[i,u],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0;const i=[],l=e.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),u=Array.prototype.concat(...l),s=u.sort((m,y)=>m.time-y.time);for(const m of s)n+=m.type==="s"?1:-1,n===1?r=m.time:(r&&+r!=+m.time&&i.push(ui.fromDateTimes(r,m.time)),r=null);return ui.merge(i)}difference(...e){return ui.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:kp}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=O_,r={}){return this.isValid?to.create(this.s.loc.clone(r),e).formatInterval(this):kp}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:kp}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:kp}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:kp}toFormat(e,{separator:r=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:kp}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):Xr.invalid(this.invalidReason)}mapEndpoints(e){return ui.fromDateTimes(e(this.s),e(this.e))}}class e_{static hasDST(e=ci.defaultZone){const r=Sr.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return Ec.isValidZone(e)}static normalizeZone(e){return wh(e,ci.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||yn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||yn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||yn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:l="gregory"}={}){return(i||yn.create(r,n,l)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:l="gregory"}={}){return(i||yn.create(r,n,l)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||yn.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||yn.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return yn.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return yn.create(r,null,"gregory").eras(e)}static features(){return{relative:xF(),localeWeek:bF()}}}function XE(t,e){const r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(Xr.fromMillis(n).as("days"))}function Rq(t,e,r){const n=[["years",(m,y)=>y.year-m.year],["quarters",(m,y)=>y.quarter-m.quarter+(y.year-m.year)*4],["months",(m,y)=>y.month-m.month+(y.year-m.year)*12],["weeks",(m,y)=>{const w=XE(m,y);return(w-w%7)/7}],["days",XE]],i={},l=t;let u,s;for(const[m,y]of n)r.indexOf(m)>=0&&(u=m,i[m]=y(t,e),s=l.plus(i),s>e?(i[m]--,t=l.plus(i),t>e&&(s=t,i[m]--,t=l.plus(i))):t=s);return[t,i,s,u]}function Lq(t,e,r,n){let[i,l,u,s]=Rq(t,e,r);const m=e-i,y=r.filter(S=>["hours","minutes","seconds","milliseconds"].indexOf(S)>=0);y.length===0&&(u<e&&(u=i.plus({[s]:1})),u!==i&&(l[s]=(l[s]||0)+m/(u-i)));const w=Xr.fromObject(l,n);return y.length>0?Xr.fromMillis(m,n).shiftTo(...y).plus(w):w}const Fq="missing Intl.DateTimeFormat.formatToParts support";function sn(t,e=r=>r){return{regex:t,deser:([r])=>e(k8(r))}}const jq=" ",BF=`[ ${jq}]`,NF=new RegExp(BF,"g");function Bq(t){return t.replace(/\./g,"\\.?").replace(NF,BF)}function KE(t){return t.replace(/\./g,"").replace(NF," ").toLowerCase()}function Pl(t,e){return t===null?null:{regex:RegExp(t.map(Bq).join("|")),deser:([r])=>t.findIndex(n=>KE(r)===KE(n))+e}}function YE(t,e){return{regex:t,deser:([,r,n])=>$0(r,n),groups:e}}function t_(t){return{regex:t,deser:([e])=>e}}function Nq(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function $q(t,e){const r=Tl(e),n=Tl(e,"{2}"),i=Tl(e,"{3}"),l=Tl(e,"{4}"),u=Tl(e,"{6}"),s=Tl(e,"{1,2}"),m=Tl(e,"{1,3}"),y=Tl(e,"{1,6}"),w=Tl(e,"{1,9}"),S=Tl(e,"{2,4}"),E=Tl(e,"{4,6}"),I=R=>({regex:RegExp(Nq(R.val)),deser:([U])=>U,literal:!0}),L=(R=>{if(t.literal)return I(R);switch(R.val){case"G":return Pl(e.eras("short"),0);case"GG":return Pl(e.eras("long"),0);case"y":return sn(y);case"yy":return sn(S,$2);case"yyyy":return sn(l);case"yyyyy":return sn(E);case"yyyyyy":return sn(u);case"M":return sn(s);case"MM":return sn(n);case"MMM":return Pl(e.months("short",!0),1);case"MMMM":return Pl(e.months("long",!0),1);case"L":return sn(s);case"LL":return sn(n);case"LLL":return Pl(e.months("short",!1),1);case"LLLL":return Pl(e.months("long",!1),1);case"d":return sn(s);case"dd":return sn(n);case"o":return sn(m);case"ooo":return sn(i);case"HH":return sn(n);case"H":return sn(s);case"hh":return sn(n);case"h":return sn(s);case"mm":return sn(n);case"m":return sn(s);case"q":return sn(s);case"qq":return sn(n);case"s":return sn(s);case"ss":return sn(n);case"S":return sn(m);case"SSS":return sn(i);case"u":return t_(w);case"uu":return t_(s);case"uuu":return sn(r);case"a":return Pl(e.meridiems(),0);case"kkkk":return sn(l);case"kk":return sn(S,$2);case"W":return sn(s);case"WW":return sn(n);case"E":case"c":return sn(r);case"EEE":return Pl(e.weekdays("short",!1),1);case"EEEE":return Pl(e.weekdays("long",!1),1);case"ccc":return Pl(e.weekdays("short",!0),1);case"cccc":return Pl(e.weekdays("long",!0),1);case"Z":case"ZZ":return YE(new RegExp(`([+-]${s.source})(?::(${n.source}))?`),2);case"ZZZ":return YE(new RegExp(`([+-]${s.source})(${n.source})?`),2);case"z":return t_(/[a-z_+-/]{1,256}?/i);case" ":return t_(/[^\S\n\r]/);default:return I(R)}})(t)||{invalidReason:Fq};return L.token=t,L}const Vq={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function qq(t,e,r){const{type:n,value:i}=t;if(n==="literal"){const m=/^\s+$/.test(i);return{literal:!m,val:m?" ":i}}const l=e[n];let u=n;n==="hour"&&(e.hour12!=null?u=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?u="hour12":u="hour24":u=r.hour12?"hour12":"hour24");let s=Vq[u];if(typeof s=="object"&&(s=s[l]),s)return{literal:!1,val:s}}function Uq(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function Wq(t,e,r){const n=t.match(e);if(n){const i={};let l=1;for(const u in r)if(Hp(r,u)){const s=r[u],m=s.groups?s.groups+1:1;!s.literal&&s.token&&(i[s.token.val[0]]=s.deser(n.slice(l,l+m))),l+=m}return[n,i]}else return[n,{}]}function Hq(t){const e=l=>{switch(l){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,n;return _r(t.z)||(r=Ec.create(t.z)),_r(t.Z)||(r||(r=new Ao(t.Z)),n=t.Z),_r(t.q)||(t.M=(t.q-1)*3+1),_r(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),_r(t.u)||(t.S=PP(t.u)),[Object.keys(t).reduce((l,u)=>{const s=e(u);return s&&(l[s]=t[u]),l},{}),r,n]}let gb=null;function Gq(){return gb||(gb=Sr.fromMillis(1555555555555)),gb}function Zq(t,e){if(t.literal)return t;const r=to.macroTokenToFormatOpts(t.val),n=UF(r,e);return n==null||n.includes(void 0)?t:n}function $F(t,e){return Array.prototype.concat(...t.map(r=>Zq(r,e)))}class VF{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=$F(to.parseFormat(r),e),this.units=this.tokens.map(n=>$q(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){const[n,i]=Uq(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){const[r,n]=Wq(e,this.regex,this.handlers),[i,l,u]=n?Hq(n):[null,null,void 0];if(Hp(n,"a")&&Hp(n,"H"))throw new Dp("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:l,specificOffset:u}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function qF(t,e,r){return new VF(t,r).explainFromTokens(e)}function Xq(t,e,r){const{result:n,zone:i,specificOffset:l,invalidReason:u}=qF(t,e,r);return[n,i,l,u]}function UF(t,e){if(!t)return null;const n=to.create(e,t).dtFormatter(Gq()),i=n.formatToParts(),l=n.resolvedOptions();return i.map(u=>qq(u,t,l))}const yb="Invalid DateTime",JE=864e13;function Og(t){return new Cl("unsupported zone",`the zone "${t.name}" is not supported`)}function vb(t){return t.weekData===null&&(t.weekData=I_(t.c)),t.weekData}function _b(t){return t.localWeekData===null&&(t.localWeekData=I_(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Yf(t,e){const r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Sr({...r,...e,old:r})}function WF(t,e,r){let n=t-e*60*1e3;const i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;const l=r.offset(n);return i===l?[n,i]:[t-Math.min(i,l)*60*1e3,Math.max(i,l)]}function r_(t,e){t+=e*60*1e3;const r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function __(t,e,r){return WF(N0(t),e,r)}function QE(t,e){const r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,l={...t.c,year:n,month:i,day:Math.min(t.c.day,D_(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=Xr.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),s=N0(l);let[m,y]=WF(s,r,t.zone);return u!==0&&(m+=u,y=t.zone.offset(m)),{ts:m,o:y}}function Ep(t,e,r,n,i,l){const{setZone:u,zone:s}=r;if(t&&Object.keys(t).length!==0||e){const m=e||s,y=Sr.fromObject(t,{...r,zone:m,specificOffset:l});return u?y:y.setZone(s)}else return Sr.invalid(new Cl("unparsable",`the input "${i}" can't be parsed as ${n}`))}function n_(t,e,r=!0){return t.isValid?to.create(yn.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function xb(t,e,r){const n=t.c.year>9999||t.c.year<0;let i="";if(n&&t.c.year>=0&&(i+="+"),i+=Mi(t.c.year,n?6:4),r==="year")return i;if(e){if(i+="-",i+=Mi(t.c.month),r==="month")return i;i+="-"}else if(i+=Mi(t.c.month),r==="month")return i;return i+=Mi(t.c.day),i}function eM(t,e,r,n,i,l,u){let s=!r||t.c.millisecond!==0||t.c.second!==0,m="";switch(u){case"day":case"month":case"year":break;default:if(m+=Mi(t.c.hour),u==="hour")break;if(e){if(m+=":",m+=Mi(t.c.minute),u==="minute")break;s&&(m+=":",m+=Mi(t.c.second))}else{if(m+=Mi(t.c.minute),u==="minute")break;s&&(m+=Mi(t.c.second))}if(u==="second")break;s&&(!n||t.c.millisecond!==0)&&(m+=".",m+=Mi(t.c.millisecond,3))}return i&&(t.isOffsetFixed&&t.offset===0&&!l?m+="Z":t.o<0?(m+="-",m+=Mi(Math.trunc(-t.o/60)),m+=":",m+=Mi(Math.trunc(-t.o%60))):(m+="+",m+=Mi(Math.trunc(t.o/60)),m+=":",m+=Mi(Math.trunc(t.o%60)))),l&&(m+="["+t.zone.ianaName+"]"),m}const HF={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Kq={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Yq={ordinal:1,hour:0,minute:0,second:0,millisecond:0},x_=["year","month","day","hour","minute","second","millisecond"],Jq=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Qq=["year","ordinal","hour","minute","second","millisecond"];function b_(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new HL(t);return e}function tM(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return b_(t)}}function eU(t){if(Ig===void 0&&(Ig=ci.now()),t.type!=="iana")return t.offset(Ig);const e=t.name;let r=V2.get(e);return r===void 0&&(r=t.offset(Ig),V2.set(e,r)),r}function rM(t,e){const r=wh(e.zone,ci.defaultZone);if(!r.isValid)return Sr.invalid(Og(r));const n=yn.fromObject(e);let i,l;if(_r(t.year))i=ci.now();else{for(const m of x_)_r(t[m])&&(t[m]=HF[m]);const u=vF(t)||_F(t);if(u)return Sr.invalid(u);const s=eU(r);[i,l]=__(t,s,r)}return new Sr({ts:i,zone:r,loc:n,o:l})}function nM(t,e,r){const n=_r(r.round)?!0:r.round,i=_r(r.rounding)?"trunc":r.rounding,l=(s,m)=>(s=AP(s,n||r.calendary?0:2,r.calendary?"round":i),e.loc.clone(r).relFormatter(r).format(s,m)),u=s=>r.calendary?e.hasSame(t,s)?0:e.startOf(s).diff(t.startOf(s),s).get(s):e.diff(t,s).get(s);if(r.unit)return l(u(r.unit),r.unit);for(const s of r.units){const m=u(s);if(Math.abs(m)>=1)return l(m,s)}return l(t>e?-0:0,r.units[r.units.length-1])}function iM(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}let Ig;const V2=new Map;class Sr{constructor(e){const r=e.zone||ci.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new Cl("invalid input"):null)||(r.isValid?null:Og(r));this.ts=_r(e.ts)?ci.now():e.ts;let i=null,l=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,l]=[e.old.c,e.old.o];else{const s=Mh(e.o)&&!e.old?e.o:r.offset(this.ts);i=r_(this.ts,s),n=Number.isNaN(i.year)?new Cl("invalid input"):null,i=n?null:i,l=n?null:s}this._zone=r,this.loc=e.loc||yn.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=l,this.isLuxonDateTime=!0}static now(){return new Sr({})}static local(){const[e,r]=iM(arguments),[n,i,l,u,s,m,y]=r;return rM({year:n,month:i,day:l,hour:u,minute:s,second:m,millisecond:y},e)}static utc(){const[e,r]=iM(arguments),[n,i,l,u,s,m,y]=r;return e.zone=Ao.utcInstance,rM({year:n,month:i,day:l,hour:u,minute:s,second:m,millisecond:y},e)}static fromJSDate(e,r={}){const n=I8(e)?e.valueOf():NaN;if(Number.isNaN(n))return Sr.invalid("invalid input");const i=wh(r.zone,ci.defaultZone);return i.isValid?new Sr({ts:n,zone:i,loc:yn.fromObject(r)}):Sr.invalid(Og(i))}static fromMillis(e,r={}){if(Mh(e))return e<-JE||e>JE?Sr.invalid("Timestamp out of range"):new Sr({ts:e,zone:wh(r.zone,ci.defaultZone),loc:yn.fromObject(r)});throw new Ya(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Mh(e))return new Sr({ts:e*1e3,zone:wh(r.zone,ci.defaultZone),loc:yn.fromObject(r)});throw new Ya("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};const n=wh(r.zone,ci.defaultZone);if(!n.isValid)return Sr.invalid(Og(n));const i=yn.fromObject(r),l=z_(e,tM),{minDaysInFirstWeek:u,startOfWeek:s}=$E(l,i),m=ci.now(),y=_r(r.specificOffset)?n.offset(m):r.specificOffset,w=!_r(l.ordinal),S=!_r(l.year),E=!_r(l.month)||!_r(l.day),I=S||E,F=l.weekYear||l.weekNumber;if((I||w)&&F)throw new Dp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(E&&w)throw new Dp("Can't mix ordinal dates with month/day");const L=F||l.weekday&&!I;let R,U,X=r_(m,y);L?(R=Jq,U=Kq,X=I_(X,u,s)):w?(R=Qq,U=Yq,X=mb(X)):(R=x_,U=HF);let K=!1;for(const Re of R){const de=l[Re];_r(de)?K?l[Re]=U[Re]:l[Re]=X[Re]:K=!0}const re=L?M8(l,u,s):w?C8(l):vF(l),W=re||_F(l);if(W)return Sr.invalid(W);const J=L?BE(l,u,s):w?NE(l):l,[ie,he]=__(J,y,n),ve=new Sr({ts:ie,zone:n,o:he,loc:i});return l.weekday&&I&&e.weekday!==ve.weekday?Sr.invalid("mismatched weekday",`you can't specify both a weekday of ${l.weekday} and a date of ${ve.toISO()}`):ve.isValid?ve:Sr.invalid(ve.invalid)}static fromISO(e,r={}){const[n,i]=bq(e);return Ep(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){const[n,i]=wq(e);return Ep(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){const[n,i]=Sq(e);return Ep(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(_r(e)||_r(r))throw new Ya("fromFormat requires an input string and a format");const{locale:i=null,numberingSystem:l=null}=n,u=yn.fromOpts({locale:i,numberingSystem:l,defaultToEN:!0}),[s,m,y,w]=Xq(u,e,r);return w?Sr.invalid(w):Ep(s,m,n,`format ${r}`,e,y)}static fromString(e,r,n={}){return Sr.fromFormat(e,r,n)}static fromSQL(e,r={}){const[n,i]=Cq(e);return Ep(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new Ya("need to specify a reason the DateTime is invalid");const n=e instanceof Cl?e:new Cl(e,r);if(ci.throwOnInvalid)throw new n8(n);return new Sr({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){const n=UF(e,yn.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return $F(to.parseFormat(e),yn.fromObject(r)).map(i=>i.val).join("")}static resetCache(){Ig=void 0,V2.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?vb(this).weekYear:NaN}get weekNumber(){return this.isValid?vb(this).weekNumber:NaN}get weekday(){return this.isValid?vb(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?_b(this).weekday:NaN}get localWeekNumber(){return this.isValid?_b(this).weekNumber:NaN}get localWeekYear(){return this.isValid?_b(this).weekYear:NaN}get ordinal(){return this.isValid?mb(this.c).ordinal:NaN}get monthShort(){return this.isValid?e_.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?e_.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?e_.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?e_.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,r=6e4,n=N0(this.c),i=this.zone.offset(n-e),l=this.zone.offset(n+e),u=this.zone.offset(n-i*r),s=this.zone.offset(n-l*r);if(u===s)return[this];const m=n-u*r,y=n-s*r,w=r_(m,u),S=r_(y,s);return w.hour===S.hour&&w.minute===S.minute&&w.second===S.second&&w.millisecond===S.millisecond?[Yf(this,{ts:m}),Yf(this,{ts:y})]:[this]}get isInLeapYear(){return Ly(this.year)}get daysInMonth(){return D_(this.year,this.month)}get daysInYear(){return this.isValid?jp(this.year):NaN}get weeksInWeekYear(){return this.isValid?Yg(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Yg(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:r,numberingSystem:n,calendar:i}=to.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(Ao.instance(e),r)}toLocal(){return this.setZone(ci.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=wh(e,ci.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){const l=e.offset(this.ts),u=this.toObject();[i]=__(u,l,e)}return Yf(this,{ts:i,zone:e})}else return Sr.invalid(Og(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){const i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return Yf(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const r=z_(e,tM),{minDaysInFirstWeek:n,startOfWeek:i}=$E(r,this.loc),l=!_r(r.weekYear)||!_r(r.weekNumber)||!_r(r.weekday),u=!_r(r.ordinal),s=!_r(r.year),m=!_r(r.month)||!_r(r.day),y=s||m,w=r.weekYear||r.weekNumber;if((y||u)&&w)throw new Dp("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&u)throw new Dp("Can't mix ordinal dates with month/day");let S;l?S=BE({...I_(this.c,n,i),...r},n,i):_r(r.ordinal)?(S={...this.toObject(),...r},_r(r.day)&&(S.day=Math.min(D_(S.year,S.month),S.day))):S=NE({...mb(this.c),...r});const[E,I]=__(S,this.o,this.zone);return Yf(this,{ts:E,o:I})}plus(e){if(!this.isValid)return this;const r=Xr.fromDurationLike(e);return Yf(this,QE(this,r))}minus(e){if(!this.isValid)return this;const r=Xr.fromDurationLike(e).negate();return Yf(this,QE(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const n={},i=Xr.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(i==="weeks")if(r){const l=this.loc.getStartOfWeek(),{weekday:u}=this;u<l&&(n.weekNumber=this.weekNumber-1),n.weekday=l}else n.weekday=1;if(i==="quarters"){const l=Math.ceil(this.month/3);n.month=(l-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?to.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):yb}toLocaleString(e=O_,r={}){return this.isValid?to.create(this.loc.clone(r),e).formatDateTime(this):yb}toLocaleParts(e={}){return this.isValid?to.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:l=!1,precision:u="milliseconds"}={}){if(!this.isValid)return null;u=b_(u);const s=e==="extended";let m=xb(this,s,u);return x_.indexOf(u)>=3&&(m+="T"),m+=eM(this,s,r,n,i,l,u),m}toISODate({format:e="extended",precision:r="day"}={}){return this.isValid?xb(this,e==="extended",b_(r)):null}toISOWeekDate(){return n_(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:l=!1,format:u="extended",precision:s="milliseconds"}={}){return this.isValid?(s=b_(s),(i&&x_.indexOf(s)>=3?"T":"")+eM(this,u==="extended",r,e,n,l,s)):null}toRFC2822(){return n_(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return n_(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?xb(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),n_(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():yb}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return Xr.invalid("created by diffing an invalid DateTime");const i={locale:this.locale,numberingSystem:this.numberingSystem,...n},l=D8(r).map(Xr.normalizeUnit),u=e.valueOf()>this.valueOf(),s=u?this:e,m=u?e:this,y=Lq(s,m,l,i);return u?y.negate():y}diffNow(e="milliseconds",r={}){return this.diff(Sr.now(),e,r)}until(e){return this.isValid?ui.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;const i=e.valueOf(),l=this.setZone(e.zone,{keepLocalTime:!0});return l.startOf(r,n)<=i&&i<=l.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const r=e.base||Sr.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0;let i=["years","months","days","hours","minutes","seconds"],l=e.unit;return Array.isArray(e.unit)&&(i=e.unit,l=void 0),nM(r,this.plus(n),{...e,numeric:"always",units:i,unit:l})}toRelativeCalendar(e={}){return this.isValid?nM(e.base||Sr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Sr.isDateTime))throw new Ya("min requires all arguments be DateTimes");return VE(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(Sr.isDateTime))throw new Ya("max requires all arguments be DateTimes");return VE(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){const{locale:i=null,numberingSystem:l=null}=n,u=yn.fromOpts({locale:i,numberingSystem:l,defaultToEN:!0});return qF(u,e,r)}static fromStringExplain(e,r,n={}){return Sr.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){const{locale:n=null,numberingSystem:i=null}=r,l=yn.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new VF(l,e)}static fromFormatParser(e,r,n={}){if(_r(e)||_r(r))throw new Ya("fromFormatParser requires an input string and a format parser");const{locale:i=null,numberingSystem:l=null}=n,u=yn.fromOpts({locale:i,numberingSystem:l,defaultToEN:!0});if(!u.equals(r.locale))throw new Ya(`fromFormatParser called with a locale of ${u}, but the format parser was created for ${r.locale}`);const{result:s,zone:m,specificOffset:y,invalidReason:w}=r.explainFromTokens(e);return w?Sr.invalid(w):Ep(s,m,n,`format ${r.format}`,e,y)}static get DATE_SHORT(){return O_}static get DATE_MED(){return GL}static get DATE_MED_WITH_WEEKDAY(){return o8}static get DATE_FULL(){return ZL}static get DATE_HUGE(){return XL}static get TIME_SIMPLE(){return KL}static get TIME_WITH_SECONDS(){return YL}static get TIME_WITH_SHORT_OFFSET(){return JL}static get TIME_WITH_LONG_OFFSET(){return QL}static get TIME_24_SIMPLE(){return eF}static get TIME_24_WITH_SECONDS(){return tF}static get TIME_24_WITH_SHORT_OFFSET(){return rF}static get TIME_24_WITH_LONG_OFFSET(){return nF}static get DATETIME_SHORT(){return iF}static get DATETIME_SHORT_WITH_SECONDS(){return aF}static get DATETIME_MED(){return oF}static get DATETIME_MED_WITH_SECONDS(){return sF}static get DATETIME_MED_WITH_WEEKDAY(){return s8}static get DATETIME_FULL(){return lF}static get DATETIME_FULL_WITH_SECONDS(){return uF}static get DATETIME_HUGE(){return cF}static get DATETIME_HUGE_WITH_SECONDS(){return hF}}function gg(t){if(Sr.isDateTime(t))return t;if(t&&t.valueOf&&Mh(t.valueOf()))return Sr.fromJSDate(t);if(t&&typeof t=="object")return Sr.fromObject(t);throw new Ya(`Unknown datetime argument: ${t}, of type ${typeof t}`)}const tU=({data:t,city:e,darkMode:r=!1,toggleDarkMode:n})=>We.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 0",marginBottom:"24px",borderBottom:r?"1px solid #334155":"1px solid #e2e8f0"},children:[We.jsxs("div",{children:[We.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"bold",margin:0,color:r?"#f1f5f9":"#0f172a",display:"flex",alignItems:"center",gap:"12px"},children:"🌆 City Sense"}),We.jsx("p",{style:{color:r?"#94a3b8":"#64748b",marginTop:"4px",fontSize:"1.1rem"},children:"Índice de Qualidade de Vida Urbana"})]}),We.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[We.jsx("span",{style:{color:r?"#94a3b8":"#64748b",fontSize:"0.9rem"},children:"Modo de cores"}),We.jsx("button",{onClick:n,style:{background:"none",border:`1px solid ${r?"#475569":"#cbd5e1"}`,borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:r?"#cbd5e1":"#475569",transition:"all 0.3s ease"},title:r?"Modo claro":"Modo escuro",children:r?"☀️":"🌙"})]})]}),rU=({inputCity:t,showSuggestions:e,suggestedCities:r,setInputCity:n,setShowSuggestions:i,handleSearch:l,handleCitySelect:u,isSearching:s,darkMode:m,searchRef:y,onSelectSuggestion:w})=>We.jsxs("form",{onSubmit:l,style:{marginBottom:"24px"},children:[We.jsxs("div",{ref:y,style:{position:"relative"},children:[We.jsx("input",{type:"text",value:t,onChange:S=>{n(S.target.value)},placeholder:"Digite o nome da cidade",style:{padding:"8px 12px",borderRadius:"6px",border:m?"1px solid #334155":"1px solid #e2e8f0",backgroundColor:m?"#334155":"#f1f5f9",color:m?"#e2e8f0":"#1e293b",width:"100%"}}),e&&r.length>0&&We.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:m?"#1e293b":"white",border:m?"1px solid #334155":"1px solid #e2e8f0",borderRadius:"6px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,marginTop:"4px"},children:r.map((S,E)=>We.jsx("div",{onClick:()=>{n(S),i(!1),w?w(S):u(S)},style:{padding:"8px 12px",cursor:"pointer",borderBottom:m?"1px solid #334155":"1px solid #e2e8f0",color:m?"#e2e8f0":"#1e293b"},children:S},E))})]}),We.jsx("button",{type:"submit",disabled:s,style:{padding:"10px 20px",backgroundColor:m?"#3b82f6":"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:s?"not-allowed":"pointer",fontWeight:"600",marginLeft:"8px"},children:s?"Buscando...":"Buscar"})]}),nU=({darkMode:t=!1})=>We.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[We.jsx("div",{style:{width:"60px",height:"60px",border:`5px solid ${t?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.1)"}`,borderTop:`5px solid ${t?"#94a3b8":"#3b82f6"}`,borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"20px"}}),We.jsx("h3",{style:{color:t?"#cbd5e1":"#1e293b",margin:0},children:"Carregando dados..."}),We.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]}),iU=({error:t,onRetry:e,darkMode:r=!1})=>We.jsx("div",{style:{backgroundColor:r?"#b91c1c":"#fee2e2",borderLeft:"4px solid",borderLeftColor:r?"#f87171":"#ef4444",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:We.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[We.jsxs("div",{children:[We.jsx("h3",{style:{color:r?"#fca5a5":"#b91c1c",marginTop:0,marginBottom:"8px"},children:"⚠️ Erro ao carregar dados"}),We.jsx("p",{style:{color:r?"#fca5a5":"#b91c1c",margin:0},children:t})]}),We.jsx("button",{onClick:e,style:{background:"none",border:`1px solid ${r?"#fca5a5":"#b91c1c"}`,color:r?"#fca5a5":"#b91c1c",borderRadius:"6px",padding:"6px 12px",cursor:"pointer",marginLeft:"16px",transition:"all 0.2s ease"},onMouseOver:n=>{n.currentTarget.style.backgroundColor=r?"#dc2626":"#fecaca",n.currentTarget.style.color=r?"#f8fafc":"#991b1b"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="transparent",n.currentTarget.style.color=r?"#fca5a5":"#b91c1c"},children:"Tentar novamente"})]})}),aU=({data:t,dataFormatada:e,getWeatherIcon:r,darkMode:n=!1})=>We.jsxs("div",{style:{backgroundColor:n?"#1e293b":"white",borderRadius:"12px",padding:"24px",boxShadow:n?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",marginBottom:"24px"},children:[We.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px"},children:[We.jsx("div",{children:We.jsxs("h2",{style:{fontSize:"2rem",fontWeight:"bold",margin:"0 0 8px 0",color:n?"#f1f5f9":"#0f172a"},children:[t.city,", ",t.country]})}),We.jsx("div",{style:{fontSize:"3.5rem",display:"flex",alignItems:"center"},children:r()})]}),We.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginTop:"16px"},children:[We.jsxs("div",{style:{backgroundColor:n?"#334155":"#f1f5f8",padding:"16px",borderRadius:"8px"},children:[We.jsx("p",{style:{color:n?"#94a3b8":"#64748b",fontSize:"0.875rem",margin:"0 0 4px 0"},children:"Temperatura"}),We.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0,color:n?"#f1f5f9":"#0f172a"},children:[t.temperature,"°C"]})]}),We.jsxs("div",{style:{backgroundColor:n?"#334155":"#f1f5f8",padding:"16px",borderRadius:"8px"},children:[We.jsx("p",{style:{color:n?"#94a3b8":"#64748b",fontSize:"0.875rem",margin:"0 0 4px 0"},children:"Umidade"}),We.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:0,color:n?"#f1f5f9":"#0f172a"},children:[t.humidity,"%"]})]})]})]}),oU=({data:t,formatTrafficDelay:e,darkMode:r=!1})=>{const n=[{title:"IQV Geral",value:t.iqv_overall,description:"Índice geral de qualidade de vida",color:t.iqv_overall>=7?"#10b981":t.iqv_overall>=5?"#eab308":"#ef4444"},{title:"IQV Clima",value:t.iqv_climate,description:"Qualidade do clima local",color:t.iqv_climate>=7?"#10b981":t.iqv_climate>=5?"#eab308":"#ef4444"},{title:"IQV Umidade",value:t.iqv_humidity,description:"Nível de conforto da umidade",color:t.iqv_humidity>=7?"#10b981":t.iqv_humidity>=5?"#eab308":"#ef4444"},{title:"IQV Trânsito",value:t.iqv_traffic,description:"Qualidade do trânsito",color:t.iqv_traffic>=7?"#10b981":t.iqv_traffic>=5?"#eab308":"#ef4444"}];return We.jsxs("div",{style:{backgroundColor:r?"#1e293b":"white",borderRadius:"12px",padding:"24px",boxShadow:r?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[We.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"20px",color:r?"#f1f5f9":"#1e293b"},children:"Métricas Detalhadas"}),We.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:n.map((i,l)=>We.jsxs("div",{style:{backgroundColor:r?"#334155":"#f1f5f8",padding:"16px",borderRadius:"8px",transition:"transform 0.2s ease"},onMouseOver:u=>{u.currentTarget.style.transform="translateY(-2px)"},onMouseOut:u=>{u.currentTarget.style.transform="translateY(0)"},children:[We.jsx("p",{style:{color:r?"#94a3b8":"#64748b",fontSize:"0.875rem",margin:"0 0 4px 0"},children:i.title}),We.jsxs("p",{style:{fontSize:"2rem",fontWeight:"bold",margin:"0",color:i.color},children:[i.value.toFixed(1),"/10"]}),We.jsx("p",{style:{color:r?"#cbd5e1":"#475569",fontSize:"0.875rem",margin:"8px 0 0 0"},children:i.description})]},l))}),We.jsxs("div",{style:{marginTop:"24px",backgroundColor:r?"#334155":"#f1f5f8",padding:"16px",borderRadius:"8px"},children:[We.jsx("p",{style:{color:r?"#94a3b8":"#64748b",fontSize:"0.875rem",margin:"0 0 4px 0"},children:"Atraso médio no trânsito"}),We.jsx("p",{style:{fontSize:"1.5rem",fontWeight:"bold",margin:"0",color:r?"#f1f5f9":"#1e293b"},children:e(t.avg_traffic_delay_min)})]})]})},sU=({data:t,darkMode:e=!1})=>{const r=[{name:"Temperatura",value:t.temperature,unit:"°C",ideal:"22.5°C",color:t.iqv_climate>=7?"#10b981":t.iqv_climate>=5?"#eab308":"#ef4444"},{name:"Umidade",value:t.humidity,unit:"%",ideal:"50%",color:t.iqv_humidity>=7?"#10b981":t.iqv_humidity>=5?"#eab308":"#ef4444"},{name:"Trânsito",value:t.avg_traffic_delay_min,unit:"min",ideal:"0 min",color:t.iqv_traffic>=7?"#10b981":t.iqv_traffic>=5?"#eab308":"#ef4444"},{name:"Tendência",value:t.iqv_trend.toFixed(1),unit:"",ideal:"5-10",color:t.iqv_trend>=7?"#10b981":t.iqv_trend>=5?"#eab308":"#ef4444"}];return We.jsxs("div",{style:{backgroundColor:e?"#1e293b":"white",borderRadius:"12px",padding:"24px",boxShadow:e?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[We.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"20px",color:e?"#f1f5f9":"#1e293b"},children:"Análise Detalhada do IQV"}),r.map((n,i)=>We.jsxs("div",{style:{marginBottom:"16px"},children:[We.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[We.jsx("span",{style:{color:e?"#cbd5e1":"#1e293b",fontWeight:500},children:n.name}),We.jsxs("span",{style:{color:n.color,fontWeight:600},children:[n.value,n.unit]})]}),We.jsx("div",{style:{height:"8px",backgroundColor:e?"#334155":"#e2e8f0",borderRadius:"4px",overflow:"hidden"},children:We.jsx("div",{style:{height:"100%",width:`${Math.min(n.value/10*100,100)}%`,backgroundColor:n.color,borderRadius:"4px"}})}),We.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.75rem",color:e?"#94a3b8":"#64748b"},children:[We.jsx("span",{children:"Condição atual"}),We.jsxs("span",{children:["Condição ideal: ",n.ideal]})]})]},i))]})},lU=({data:t,darkMode:e=!1})=>{const r=[{condition:t.iqv_climate<5,title:"Clima extremo",description:"A temperatura está muito fora do ideal. Considere ajustar suas atividades ao ar livre.",icon:"🌡️"},{condition:t.iqv_humidity<5,title:"Umidade desfavorável",description:"A umidade está muito alta/baixa para o conforto ideal. Mantenha-se hidratado e use roupas adequadas.",icon:"💧"},{condition:t.iqv_traffic<5,title:"Trânsito intenso",description:"Espera-se trânsito intenso. Planeje suas viagens com antecedência e considere opções alternativas.",icon:"🚦"},{condition:t.iqv_trend<5,title:"Tendência negativa",description:"A tendência climática está se deteriorando. Fique atento às atualizações meteorológicas.",icon:"📉"}].filter(n=>n.condition);return We.jsxs("div",{style:{backgroundColor:e?"#1e293b":"white",borderRadius:"12px",padding:"24px",boxShadow:e?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",marginTop:"24px"},children:[We.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"16px",color:e?"#f1f5f9":"#1e293b"},children:["Dicas para ",t.city]}),r.length>0?We.jsx("div",{children:r.map((n,i)=>We.jsxs("div",{style:{backgroundColor:e?"#334155":"#f1f5f8",padding:"12px",borderRadius:"8px",marginBottom:"12px"},children:[We.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[We.jsx("span",{style:{fontSize:"1.2rem"},children:n.icon}),We.jsx("strong",{style:{color:e?"#f1f5f9":"#1e293b"},children:n.title})]}),We.jsx("p",{style:{margin:0,color:e?"#cbd5e1":"#475569"},children:n.description})]},i))}):We.jsx("div",{style:{textAlign:"center",padding:"20px",backgroundColor:e?"#334155":"#f1f5f8",borderRadius:"8px"},children:We.jsx("p",{style:{color:e?"#cbd5e1":"#475569",margin:0},children:"🎯 Condições climáticas ideais para atividades ao ar livre!"})})]})},uU=({darkMode:t=!1})=>We.jsxs("footer",{style:{textAlign:"center",paddingTop:"24px",marginTop:"24px",borderTop:t?"1px solid #334155":"1px solid #e2e8f0",color:t?"#94a3b8":"#64748b",fontSize:"0.875rem"},children:[We.jsxs("p",{style:{margin:"8px 0"},children:["City Sense © ",new Date().getFullYear()," - Todos os direitos reservados"]}),We.jsx("p",{style:{margin:"8px 0"},children:"Dados climáticos fornecidos por OpenWeatherMap"})]}),GF=it.createContext({darkMode:!1,toggleDarkMode:()=>{}}),cU=({children:t})=>{const[e,r]=it.useState(()=>{const i=localStorage.getItem("city-sense-dark-mode");return i!==null?JSON.parse(i):window.matchMedia("(prefers-color-scheme: dark)").matches});it.useEffect(()=>{localStorage.setItem("city-sense-dark-mode",JSON.stringify(e)),document.documentElement.classList.toggle("dark",e)},[e]);const n=()=>r(!e);return We.jsx(GF.Provider,{value:{darkMode:e,toggleDarkMode:n},children:t})};var w_={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var hU=w_.exports,aM;function fU(){return aM||(aM=1,(function(t,e){(function(r,n){t.exports=n()})(hU,(function(){var r={},n={};function i(u,s,m){if(n[u]=m,u==="index"){var y="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",w={};return n.shared(w),n.index(r,w),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),r}}i("shared",["exports"],(function(u){function s(c,o,h,g){return new(h||(h=Promise))((function(x,A){function k(N){try{D(g.next(N))}catch(q){A(q)}}function C(N){try{D(g.throw(N))}catch(q){A(q)}}function D(N){var q;N.done?x(N.value):(q=N.value,q instanceof h?q:new h((function(H){H(q)}))).then(k,C)}D((g=g.apply(c,o||[])).next())}))}function m(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var y=w;function w(c,o){this.x=c,this.y=o}w.prototype={clone:function(){return new w(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,o){return this.clone()._rotateAround(c,o)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var o=c.x-this.x,h=c.y-this.y;return o*o+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,o){return Math.atan2(this.x*o-this.y*c,this.x*c+this.y*o)},_matMult:function(c){var o=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=o,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var o=Math.cos(c),h=Math.sin(c),g=h*this.x+o*this.y;return this.x=o*this.x-h*this.y,this.y=g,this},_rotateAround:function(c,o){var h=Math.cos(c),g=Math.sin(c),x=o.y+g*(this.x-o.x)+h*(this.y-o.y);return this.x=o.x+h*(this.x-o.x)-g*(this.y-o.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},w.convert=function(c){return c instanceof w?c:Array.isArray(c)?new w(c[0],c[1]):c};var S=m(y),E=I;function I(c,o,h,g){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=h,this.p2y=g}I.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,g=0;g<8;g++){var x=this.sampleCurveX(h)-c;if(Math.abs(x)<o)return h;var A=this.sampleCurveDerivativeX(h);if(Math.abs(A)<1e-6)break;h-=x/A}var k=0,C=1;for(h=c,g=0;g<20&&(x=this.sampleCurveX(h),!(Math.abs(x-c)<o));g++)c>x?k=h:C=h,h=.5*(C-k)+k;return h},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var F=m(E);let L,R;function U(){return L==null&&(L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),L}function X(){if(R==null&&(R=!1,U())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let g=0;g<25;g++){const x=4*g;o.fillStyle=`rgb(${x},${x+1},${x+2})`,o.fillRect(g%5,Math.floor(g/5),1,1)}const h=o.getImageData(0,0,5,5).data;for(let g=0;g<100;g++)if(g%4!=3&&h[g]!==g){R=!0;break}}}return R||!1}function K(c,o,h,g){const x=new F(c,o,h,g);return A=>x.solve(A)}const re=K(.25,.1,.25,1);function W(c,o,h){return Math.min(h,Math.max(o,c))}function J(c,o,h){const g=h-o,x=((c-o)%g+g)%g+o;return x===o?h:x}function ie(c,...o){for(const h of o)for(const g in h)c[g]=h[g];return c}let he=1;function ve(c,o,h){const g={};for(const x in c)g[x]=o.call(this,c[x],x,c);return g}function Re(c,o,h){const g={};for(const x in c)o.call(this,c[x],x,c)&&(g[x]=c[x]);return g}function de(c){return Array.isArray(c)?c.map(de):typeof c=="object"&&c?ve(c,de):c}const Oe={};function Le(c){Oe[c]||(typeof console<"u"&&console.warn(c),Oe[c]=!0)}function Ge(c,o,h){return(h.y-c.y)*(o.x-c.x)>(o.y-c.y)*(h.x-c.x)}function Ne(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Ue=null;function Qe(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const $e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ye(c,o,h,g,x){return s(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const A=new VideoFrame(c,{timestamp:0});try{const k=A?.format;if(!k||!k.startsWith("BGR")&&!k.startsWith("RGB"))throw new Error(`Unrecognized format ${k}`);const C=k.startsWith("BGR"),D=new Uint8ClampedArray(g*x*4);if(yield A.copyTo(D,(function(N,q,H,Y,te){const oe=4*Math.max(-q,0),ue=(Math.max(0,H)-H)*Y*4+oe,ye=4*Y,we=Math.max(0,q),Be=Math.max(0,H);return{rect:{x:we,y:Be,width:Math.min(N.width,q+Y)-we,height:Math.min(N.height,H+te)-Be},layout:[{offset:ue,stride:ye}]}})(c,o,h,g,x)),C)for(let N=0;N<D.length;N+=4){const q=D[N];D[N]=D[N+2],D[N+2]=q}return D}finally{A.close()}}))}let nt,Se;const De="AbortError";function ft(){return new Error(De)}const At={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function jt(c){return At.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Nt="global-dispatcher";class or extends Error{constructor(o,h,g,x){super(`AJAXError: ${h} (${o}): ${g}`),this.status=o,this.statusText=h,this.url=g,this.body=x}}const er=()=>Ne(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ct=function(c,o){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const g=jt(c.url);if(g)return g(c,o);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Nt},o)}if(!(/^file:/.test(h=c.url)||/^file:/.test(er())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(g,x){return s(this,void 0,void 0,(function*(){const A=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:er(),signal:x.signal});g.type!=="json"||A.headers.has("Accept")||A.headers.set("Accept","application/json");const k=yield fetch(A);if(!k.ok){const N=yield k.blob();throw new or(k.status,k.statusText,g.url,N)}let C;C=g.type==="arrayBuffer"||g.type==="image"?k.arrayBuffer():g.type==="json"?k.json():k.text();const D=yield C;if(x.signal.aborted)throw ft();return{data:D,cacheControl:k.headers.get("Cache-Control"),expires:k.headers.get("Expires")}}))})(c,o);if(Ne(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Nt},o)}var h;return(function(g,x){return new Promise(((A,k)=>{var C;const D=new XMLHttpRequest;D.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(D.responseType="arraybuffer");for(const N in g.headers)D.setRequestHeader(N,g.headers[N]);g.type==="json"&&(D.responseType="text",!((C=g.headers)===null||C===void 0)&&C.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=g.credentials==="include",D.onerror=()=>{k(new Error(D.statusText))},D.onload=()=>{if(!x.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let N=D.response;if(g.type==="json")try{N=JSON.parse(D.response)}catch(q){return void k(q)}A({data:N,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const N=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});k(new or(D.status,D.statusText,g.url,N))}},x.signal.addEventListener("abort",(()=>{D.abort(),k(ft())})),D.send(g.body)}))})(c,o)};function Ht(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const o=new URL(c),h=window.location;return o.protocol===h.protocol&&o.host===h.host}function lr(c,o,h){h[c]&&h[c].indexOf(o)!==-1||(h[c]=h[c]||[],h[c].push(o))}function Je(c,o,h){if(h&&h[c]){const g=h[c].indexOf(o);g!==-1&&h[c].splice(g,1)}}class rr{constructor(o,h={}){ie(this,h),this.type=o}}class Bt extends rr{constructor(o,h={}){super("error",ie({error:o},h))}}class Er{on(o,h){return this._listeners=this._listeners||{},lr(o,h,this._listeners),this}off(o,h){return Je(o,h,this._listeners),Je(o,h,this._oneTimeListeners),this}once(o,h){return h?(this._oneTimeListeners=this._oneTimeListeners||{},lr(o,h,this._oneTimeListeners),this):new Promise((g=>this.once(o,g)))}fire(o,h){typeof o=="string"&&(o=new rr(o,h||{}));const g=o.type;if(this.listens(g)){o.target=this;const x=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(const C of x)C.call(this,o);const A=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(const C of A)Je(g,C,this._oneTimeListeners),C.call(this,o);const k=this._eventedParent;k&&(ie(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),k.fire(o))}else o instanceof Bt&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,h){return this._eventedParent=o,this._eventedParentData=h,this}}var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Gr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Oi(c,o){const h={};for(const g in c)g!=="ref"&&(h[g]=c[g]);return Gr.forEach((g=>{g in o&&(h[g]=o[g])})),h}function xr(c,o){if(Array.isArray(c)){if(!Array.isArray(o)||c.length!==o.length)return!1;for(let h=0;h<c.length;h++)if(!xr(c[h],o[h]))return!1;return!0}if(typeof c=="object"&&c!==null&&o!==null){if(typeof o!="object"||Object.keys(c).length!==Object.keys(o).length)return!1;for(const h in c)if(!xr(c[h],o[h]))return!1;return!0}return c===o}function jr(c,o){c.push(o)}function ri(c,o,h){jr(h,{command:"addSource",args:[c,o[c]]})}function ni(c,o,h){jr(o,{command:"removeSource",args:[c]}),h[c]=!0}function Hi(c,o,h,g){ni(c,h,g),ri(c,o,h)}function Eo(c,o,h){let g;for(g in c[h])if(Object.prototype.hasOwnProperty.call(c[h],g)&&g!=="data"&&!xr(c[h][g],o[h][g]))return!1;for(g in o[h])if(Object.prototype.hasOwnProperty.call(o[h],g)&&g!=="data"&&!xr(c[h][g],o[h][g]))return!1;return!0}function xi(c,o,h,g,x,A){c=c||{},o=o||{};for(const k in c)Object.prototype.hasOwnProperty.call(c,k)&&(xr(c[k],o[k])||h.push({command:A,args:[g,k,o[k],x]}));for(const k in o)Object.prototype.hasOwnProperty.call(o,k)&&!Object.prototype.hasOwnProperty.call(c,k)&&(xr(c[k],o[k])||h.push({command:A,args:[g,k,o[k],x]}))}function Rl(c){return c.id}function Qs(c,o){return c[o.id]=o,c}class mt{constructor(o,h,g,x){this.message=(o?`${o}: `:"")+g,x&&(this.identifier=x),h!=null&&h.__line__&&(this.line=h.__line__)}}function io(c,...o){for(const h of o)for(const g in h)c[g]=h[g];return c}class Xn extends Error{constructor(o,h){super(h),this.message=h,this.key=o}}class Gi{constructor(o,h=[]){this.parent=o,this.bindings={};for(const[g,x]of h)this.bindings[g]=x}concat(o){return new Gi(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const bs={kind:"null"},bt={kind:"number"},yr={kind:"string"},nr={kind:"boolean"},bi={kind:"color"},pa={kind:"object"},ur={kind:"value"},Oa={kind:"collator"},ao={kind:"formatted"},ma={kind:"padding"},Ii={kind:"resolvedImage"},_e={kind:"variableAnchorOffsetCollection"};function ee(c,o){return{kind:"array",itemType:c,N:o}}function Q(c){if(c.kind==="array"){const o=Q(c.itemType);return typeof c.N=="number"?`array<${o}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${o}>`}return c.kind}const le=[bs,bt,yr,nr,bi,ao,pa,ee(ur),ma,Ii,_e];function me(c,o){if(o.kind==="error")return null;if(c.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!me(c.itemType,o.itemType))&&(typeof c.N!="number"||c.N===o.N))return null}else{if(c.kind===o.kind)return null;if(c.kind==="value"){for(const h of le)if(!me(h,o))return null}}return`Expected ${Q(c)} but found ${Q(o)} instead.`}function Ae(c,o){return o.some((h=>h.kind===c.kind))}function Ce(c,o){return o.some((h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c))}function je(c,o){return c.kind==="array"&&o.kind==="array"?c.itemType.kind===o.itemType.kind&&typeof c.N=="number":c.kind===o.kind}const Te=.96422,tt=.82521,lt=4/29,Xe=6/29,vt=3*Xe*Xe,$t=Xe*Xe*Xe,Xt=Math.PI/180,Or=180/Math.PI;function fr(c){return(c%=360)<0&&(c+=360),c}function Ir([c,o,h,g]){let x,A;const k=Ln((.2225045*(c=gr(c))+.7168786*(o=gr(o))+.0606169*(h=gr(h)))/1);c===o&&o===h?x=A=k:(x=Ln((.4360747*c+.3850649*o+.1430804*h)/Te),A=Ln((.0139322*c+.0971045*o+.7141733*h)/tt));const C=116*k-16;return[C<0?0:C,500*(x-k),200*(k-A),g]}function gr(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Ln(c){return c>$t?Math.pow(c,1/3):c/vt+lt}function bn([c,o,h,g]){let x=(c+16)/116,A=isNaN(o)?x:x+o/500,k=isNaN(h)?x:x-h/200;return x=1*Vr(x),A=Te*Vr(A),k=tt*Vr(k),[br(3.1338561*A-1.6168667*x-.4906146*k),br(-.9787684*A+1.9161415*x+.033454*k),br(.0719453*A-.2289914*x+1.4052427*k),g]}function br(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function Vr(c){return c>Xe?c*c*c:vt*(c-lt)}function hn(c){return parseInt(c.padEnd(2,c),16)/255}function Kn(c,o){return ii(o?c/100:c,0,1)}function ii(c,o,h){return Math.min(Math.max(o,c),h)}function Di(c){return!c.some(Number.isNaN)}const Ll={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class cr{constructor(o,h,g,x=1,A=!0){this.r=o,this.g=h,this.b=g,this.a=x,A||(this.r*=x,this.g*=x,this.b*=x,x||this.overwriteGetter("rgb",[o,h,g,x]))}static parse(o){if(o instanceof cr)return o;if(typeof o!="string")return;const h=(function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];const x=Ll[g];if(x){const[k,C,D]=x;return[k/255,C/255,D/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){const k=g.length<6?1:2;let C=1;return[hn(g.slice(C,C+=k)),hn(g.slice(C,C+=k)),hn(g.slice(C,C+=k)),hn(g.slice(C,C+k)||"ff")]}if(g.startsWith("rgb")){const k=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(k){const[C,D,N,q,H,Y,te,oe,ue,ye,we,Be]=k,ke=[q||" ",te||" ",ye].join("");if(ke==="  "||ke==="  /"||ke===",,"||ke===",,,"){const Fe=[N,Y,ue].join(""),rt=Fe==="%%%"?100:Fe===""?255:0;if(rt){const ut=[ii(+D/rt,0,1),ii(+H/rt,0,1),ii(+oe/rt,0,1),we?Kn(+we,Be):1];if(Di(ut))return ut}}return}}const A=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(A){const[k,C,D,N,q,H,Y,te,oe]=A,ue=[D||" ",q||" ",Y].join("");if(ue==="  "||ue==="  /"||ue===",,"||ue===",,,"){const ye=[+C,ii(+N,0,100),ii(+H,0,100),te?Kn(+te,oe):1];if(Di(ye))return(function([we,Be,ke,Fe]){function rt(ut){const Ct=(ut+we/30)%12,tr=Be*Math.min(ke,1-ke);return ke-tr*Math.max(-1,Math.min(Ct-3,9-Ct,1))}return we=fr(we),Be/=100,ke/=100,[rt(0),rt(8),rt(4),Fe]})(ye)}}})(o);return h?new cr(...h,!1):void 0}get rgb(){const{r:o,g:h,b:g,a:x}=this,A=x||1/0;return this.overwriteGetter("rgb",[o/A,h/A,g/A,x])}get hcl(){return this.overwriteGetter("hcl",(function(o){const[h,g,x,A]=Ir(o),k=Math.sqrt(g*g+x*x);return[Math.round(1e4*k)?fr(Math.atan2(x,g)*Or):NaN,k,h,A]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Ir(this.rgb))}overwriteGetter(o,h){return Object.defineProperty(this,o,{value:h}),h}toString(){const[o,h,g,x]=this.rgb;return`rgba(${[o,h,g].map((A=>Math.round(255*A))).join(",")},${x})`}}cr.black=new cr(0,0,0,1),cr.white=new cr(1,1,1,1),cr.transparent=new cr(0,0,0,0),cr.red=new cr(1,0,0,1);class $h{constructor(o,h,g){this.sensitivity=o?h?"variant":"case":h?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,h){return this.collator.compare(o,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Iu{constructor(o,h,g,x,A){this.text=o,this.image=h,this.scale=g,this.fontStack=x,this.textColor=A}}class Zi{constructor(o){this.sections=o}static fromString(o){return new Zi([new Iu(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((o=>o.text.length!==0||o.image&&o.image.name.length!==0))}static factory(o){return o instanceof Zi?o:Zi.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map((o=>o.text)).join("")}}class wi{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof wi)return o;if(typeof o=="number")return new wi([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const h of o)if(typeof h!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new wi(o)}}toString(){return JSON.stringify(this.values)}}const Pm=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ga{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof ga)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let h=0;h<o.length;h+=2){const g=o[h],x=o[h+1];if(typeof g!="string"||!Pm.has(g)||!Array.isArray(x)||x.length!==2||typeof x[0]!="number"||typeof x[1]!="number")return}return new ga(o)}}toString(){return JSON.stringify(this.values)}}class Si{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Si({name:o,available:!1}):null}}function zi(c,o,h,g){return typeof c=="number"&&c>=0&&c<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof h=="number"&&h>=0&&h<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[c,o,h,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[c,o,h,g]:[c,o,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function el(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof cr||c instanceof $h||c instanceof Zi||c instanceof wi||c instanceof ga||c instanceof Si)return!0;if(Array.isArray(c)){for(const o of c)if(!el(o))return!1;return!0}if(typeof c=="object"){for(const o in c)if(!el(c[o]))return!1;return!0}return!1}function Hr(c){if(c===null)return bs;if(typeof c=="string")return yr;if(typeof c=="boolean")return nr;if(typeof c=="number")return bt;if(c instanceof cr)return bi;if(c instanceof $h)return Oa;if(c instanceof Zi)return ao;if(c instanceof wi)return ma;if(c instanceof ga)return _e;if(c instanceof Si)return Ii;if(Array.isArray(c)){const o=c.length;let h;for(const g of c){const x=Hr(g);if(h){if(h===x)continue;h=ur;break}h=x}return ee(h||ur,o)}return pa}function Du(c){const o=typeof c;return c===null?"":o==="string"||o==="number"||o==="boolean"?String(c):c instanceof cr||c instanceof Zi||c instanceof wi||c instanceof ga||c instanceof Si?c.toString():JSON.stringify(c)}class oo{constructor(o,h){this.type=o,this.value=h}static parse(o,h){if(o.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!el(o[1]))return h.error("invalid value");const g=o[1];let x=Hr(g);const A=h.expectedType;return x.kind!=="array"||x.N!==0||!A||A.kind!=="array"||typeof A.N=="number"&&A.N!==0||(x=A),new oo(x,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Fn{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const tl={string:yr,number:bt,boolean:nr,object:pa};class Xi{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");let g,x=1;const A=o[0];if(A==="array"){let C,D;if(o.length>2){const N=o[1];if(typeof N!="string"||!(N in tl)||N==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);C=tl[N],x++}else C=ur;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return h.error('The length argument to "array" must be a positive integer literal',2);D=o[2],x++}g=ee(C,D)}else{if(!tl[A])throw new Error(`Types doesn't contain name = ${A}`);g=tl[A]}const k=[];for(;x<o.length;x++){const C=h.parse(o[x],x,ur);if(!C)return null;k.push(C)}return new Xi(g,k)}evaluate(o){for(let h=0;h<this.args.length;h++){const g=this.args[h].evaluate(o);if(!me(this.type,Hr(g)))return g;if(h===this.args.length-1)throw new Fn(`Expected value to be of type ${Q(this.type)}, but found ${Q(Hr(g))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const rl={"to-boolean":nr,"to-color":bi,"to-number":bt,"to-string":yr};class Ki{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");const g=o[0];if(!rl[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&o.length!==2)return h.error("Expected one argument.");const x=rl[g],A=[];for(let k=1;k<o.length;k++){const C=h.parse(o[k],k,ur);if(!C)return null;A.push(C)}return new Ki(x,A)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let h,g;for(const x of this.args){if(h=x.evaluate(o),g=null,h instanceof cr)return h;if(typeof h=="string"){const A=o.parseColor(h);if(A)return A}else if(Array.isArray(h)&&(g=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:zi(h[0],h[1],h[2],h[3]),!g))return new cr(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new Fn(g||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"padding":{let h;for(const g of this.args){h=g.evaluate(o);const x=wi.parse(h);if(x)return x}throw new Fn(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"variableAnchorOffsetCollection":{let h;for(const g of this.args){h=g.evaluate(o);const x=ga.parse(h);if(x)return x}throw new Fn(`Could not parse variableAnchorOffsetCollection from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}case"number":{let h=null;for(const g of this.args){if(h=g.evaluate(o),h===null)return 0;const x=Number(h);if(!isNaN(x))return x}throw new Fn(`Could not convert ${JSON.stringify(h)} to number.`)}case"formatted":return Zi.fromString(Du(this.args[0].evaluate(o)));case"resolvedImage":return Si.fromString(Du(this.args[0].evaluate(o)));default:return Du(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}const Am=["Unknown","Point","LineString","Polygon"];class Lc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Am[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let h=this._parseColorCache[o];return h||(h=this._parseColorCache[o]=cr.parse(o)),h}}class Wo{constructor(o,h,g=[],x,A=new Gi,k=[]){this.registry=o,this.path=g,this.key=g.map((C=>`[${C}]`)).join(""),this.scope=A,this.errors=k,this.expectedType=x,this._isConstant=h}parse(o,h,g,x,A={}){return h?this.concat(h,g,x)._parse(o,A):this._parse(o,A)}_parse(o,h){function g(x,A,k){return k==="assert"?new Xi(A,[x]):k==="coerce"?new Ki(A,[x]):x}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const x=o[0];if(typeof x!="string")return this.error(`Expression name must be a string, but found ${typeof x} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const A=this.registry[x];if(A){let k=A.parse(o,this);if(!k)return null;if(this.expectedType){const C=this.expectedType,D=k.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||D.kind!=="value")if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||D.kind!=="value"&&D.kind!=="string")if(C.kind!=="padding"||D.kind!=="value"&&D.kind!=="number"&&D.kind!=="array")if(C.kind!=="variableAnchorOffsetCollection"||D.kind!=="value"&&D.kind!=="array"){if(this.checkSubtype(C,D))return null}else k=g(k,C,h.typeAnnotation||"coerce");else k=g(k,C,h.typeAnnotation||"coerce");else k=g(k,C,h.typeAnnotation||"coerce");else k=g(k,C,h.typeAnnotation||"assert")}if(!(k instanceof oo)&&k.type.kind!=="resolvedImage"&&this._isConstant(k)){const C=new Lc;try{k=new oo(k.type,k.evaluate(C))}catch(D){return this.error(D.message),null}}return k}return this.error(`Unknown expression "${x}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,h,g){const x=typeof o=="number"?this.path.concat(o):this.path,A=g?this.scope.concat(g):this.scope;return new Wo(this.registry,this._isConstant,x,h||null,A,this.errors)}error(o,...h){const g=`${this.key}${h.map((x=>`[${x}]`)).join("")}`;this.errors.push(new Xn(g,o))}checkSubtype(o,h){const g=me(o,h);return g&&this.error(g),g}}class Ho{constructor(o,h){this.type=h.type,this.bindings=[].concat(o),this.result=h}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const h of this.bindings)o(h[1]);o(this.result)}static parse(o,h){if(o.length<4)return h.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const g=[];for(let A=1;A<o.length-1;A+=2){const k=o[A];if(typeof k!="string")return h.error(`Expected string, but found ${typeof k} instead.`,A);if(/[^a-zA-Z0-9_]/.test(k))return h.error("Variable names must contain only alphanumeric characters or '_'.",A);const C=h.parse(o[A+1],A+1);if(!C)return null;g.push([k,C])}const x=h.parse(o[o.length-1],o.length-1,h.expectedType,g);return x?new Ho(g,x):null}outputDefined(){return this.result.outputDefined()}}class Dr{constructor(o,h){this.type=h.type,this.name=o,this.boundExpression=h}static parse(o,h){if(o.length!==2||typeof o[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const g=o[1];return h.scope.has(g)?new Dr(g,h.scope.get(g)):h.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class nl{constructor(o,h,g){this.type=o,this.index=h,this.input=g}static parse(o,h){if(o.length!==3)return h.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,bt),x=h.parse(o[2],2,ee(h.expectedType||ur));return g&&x?new nl(x.type.itemType,g,x):null}evaluate(o){const h=this.index.evaluate(o),g=this.input.evaluate(o);if(h<0)throw new Fn(`Array index out of bounds: ${h} < 0.`);if(h>=g.length)throw new Fn(`Array index out of bounds: ${h} > ${g.length-1}.`);if(h!==Math.floor(h))throw new Fn(`Array index must be an integer, but found ${h} instead.`);return g[h]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Vh{constructor(o,h){this.type=nr,this.needle=o,this.haystack=h}static parse(o,h){if(o.length!==3)return h.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,ur),x=h.parse(o[2],2,ur);return g&&x?Ae(g.type,[nr,yr,bt,bs,ur])?new Vh(g,x):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Q(g.type)} instead`):null}evaluate(o){const h=this.needle.evaluate(o),g=this.haystack.evaluate(o);if(!g)return!1;if(!Ce(h,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${Q(Hr(h))} instead.`);if(!Ce(g,["string","array"]))throw new Fn(`Expected second argument to be of type array or string, but found ${Q(Hr(g))} instead.`);return g.indexOf(h)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class ws{constructor(o,h,g){this.type=bt,this.needle=o,this.haystack=h,this.fromIndex=g}static parse(o,h){if(o.length<=2||o.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,ur),x=h.parse(o[2],2,ur);if(!g||!x)return null;if(!Ae(g.type,[nr,yr,bt,bs,ur]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Q(g.type)} instead`);if(o.length===4){const A=h.parse(o[3],3,bt);return A?new ws(g,x,A):null}return new ws(g,x)}evaluate(o){const h=this.needle.evaluate(o),g=this.haystack.evaluate(o);if(!Ce(h,["boolean","string","number","null"]))throw new Fn(`Expected first argument to be of type boolean, string, number or null, but found ${Q(Hr(h))} instead.`);let x;if(this.fromIndex&&(x=this.fromIndex.evaluate(o)),Ce(g,["string"])){const A=g.indexOf(h,x);return A===-1?-1:[...g.slice(0,A)].length}if(Ce(g,["array"]))return g.indexOf(h,x);throw new Fn(`Expected second argument to be of type array or string, but found ${Q(Hr(g))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class qr{constructor(o,h,g,x,A,k){this.inputType=o,this.type=h,this.input=g,this.cases=x,this.outputs=A,this.otherwise=k}static parse(o,h){if(o.length<5)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return h.error("Expected an even number of arguments.");let g,x;h.expectedType&&h.expectedType.kind!=="value"&&(x=h.expectedType);const A={},k=[];for(let N=2;N<o.length-1;N+=2){let q=o[N];const H=o[N+1];Array.isArray(q)||(q=[q]);const Y=h.concat(N);if(q.length===0)return Y.error("Expected at least one branch label.");for(const oe of q){if(typeof oe!="number"&&typeof oe!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return Y.error("Numeric branch labels must be integer values.");if(g){if(Y.checkSubtype(g,Hr(oe)))return null}else g=Hr(oe);if(A[String(oe)]!==void 0)return Y.error("Branch labels must be unique.");A[String(oe)]=k.length}const te=h.parse(H,N,x);if(!te)return null;x=x||te.type,k.push(te)}const C=h.parse(o[1],1,ur);if(!C)return null;const D=h.parse(o[o.length-1],o.length-1,x);return D?C.type.kind!=="value"&&h.concat(1).checkSubtype(g,C.type)?null:new qr(g,x,C,A,k,D):null}evaluate(o){const h=this.input.evaluate(o);return(Hr(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))&&this.otherwise.outputDefined()}}class zu{constructor(o,h,g){this.type=o,this.branches=h,this.otherwise=g}static parse(o,h){if(o.length<4)return h.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return h.error("Expected an odd number of arguments.");let g;h.expectedType&&h.expectedType.kind!=="value"&&(g=h.expectedType);const x=[];for(let k=1;k<o.length-1;k+=2){const C=h.parse(o[k],k,nr);if(!C)return null;const D=h.parse(o[k+1],k+1,g);if(!D)return null;x.push([C,D]),g=g||D.type}const A=h.parse(o[o.length-1],o.length-1,g);if(!A)return null;if(!g)throw new Error("Can't infer output type");return new zu(g,x,A)}evaluate(o){for(const[h,g]of this.branches)if(h.evaluate(o))return g.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[h,g]of this.branches)o(h),o(g);o(this.otherwise)}outputDefined(){return this.branches.every((([o,h])=>h.outputDefined()))&&this.otherwise.outputDefined()}}class Fl{constructor(o,h,g,x){this.type=o,this.input=h,this.beginIndex=g,this.endIndex=x}static parse(o,h){if(o.length<=2||o.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const g=h.parse(o[1],1,ur),x=h.parse(o[2],2,bt);if(!g||!x)return null;if(!Ae(g.type,[ee(ur),yr,ur]))return h.error(`Expected first argument to be of type array or string, but found ${Q(g.type)} instead`);if(o.length===4){const A=h.parse(o[3],3,bt);return A?new Fl(g.type,g,x,A):null}return new Fl(g.type,g,x)}evaluate(o){const h=this.input.evaluate(o),g=this.beginIndex.evaluate(o);let x;if(this.endIndex&&(x=this.endIndex.evaluate(o)),Ce(h,["string"]))return[...h].slice(g,x).join("");if(Ce(h,["array"]))return h.slice(g,x);throw new Fn(`Expected first argument to be of type array or string, but found ${Q(Hr(h))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function jl(c,o){const h=c.length-1;let g,x,A=0,k=h,C=0;for(;A<=k;)if(C=Math.floor((A+k)/2),g=c[C],x=c[C+1],g<=o){if(C===h||o<x)return C;A=C+1}else{if(!(g>o))throw new Fn("Input is not a number.");k=C-1}return 0}class il{constructor(o,h,g){this.type=o,this.input=h,this.labels=[],this.outputs=[];for(const[x,A]of g)this.labels.push(x),this.outputs.push(A)}static parse(o,h){if(o.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");const g=h.parse(o[1],1,bt);if(!g)return null;const x=[];let A=null;h.expectedType&&h.expectedType.kind!=="value"&&(A=h.expectedType);for(let k=1;k<o.length;k+=2){const C=k===1?-1/0:o[k],D=o[k+1],N=k,q=k+1;if(typeof C!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(x.length&&x[x.length-1][0]>=C)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const H=h.parse(D,q,A);if(!H)return null;A=A||H.type,x.push([C,H])}return new il(A,g,x)}evaluate(o){const h=this.labels,g=this.outputs;if(h.length===1)return g[0].evaluate(o);const x=this.input.evaluate(o);if(x<=h[0])return g[0].evaluate(o);const A=h.length;return x>=h[A-1]?g[A-1].evaluate(o):g[jl(h,x)].evaluate(o)}eachChild(o){o(this.input);for(const h of this.outputs)o(h)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function qh(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var kd=Fc;function Fc(c,o,h,g){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(g-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=o,this.p2x=h,this.p2y=g}Fc.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,o){if(o===void 0&&(o=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,g=0;g<8;g++){var x=this.sampleCurveX(h)-c;if(Math.abs(x)<o)return h;var A=this.sampleCurveDerivativeX(h);if(Math.abs(A)<1e-6)break;h-=x/A}var k=0,C=1;for(h=c,g=0;g<20&&(x=this.sampleCurveX(h),!(Math.abs(x-c)<o));g++)c>x?k=h:C=h,h=.5*(C-k)+k;return h},solve:function(c,o){return this.sampleCurveY(this.solveCurveX(c,o))}};var jc=qh(kd);function Yi(c,o,h){return c+h*(o-c)}function Ia(c,o,h){return c.map(((g,x)=>Yi(g,o[x],h)))}const jn={number:Yi,color:function(c,o,h,g="rgb"){switch(g){case"rgb":{const[x,A,k,C]=Ia(c.rgb,o.rgb,h);return new cr(x,A,k,C,!1)}case"hcl":{const[x,A,k,C]=c.hcl,[D,N,q,H]=o.hcl;let Y,te;if(isNaN(x)||isNaN(D))isNaN(x)?isNaN(D)?Y=NaN:(Y=D,k!==1&&k!==0||(te=N)):(Y=x,q!==1&&q!==0||(te=A));else{let Be=D-x;D>x&&Be>180?Be-=360:D<x&&x-D>180&&(Be+=360),Y=x+h*Be}const[oe,ue,ye,we]=(function([Be,ke,Fe,rt]){return Be=isNaN(Be)?0:Be*Xt,bn([Fe,Math.cos(Be)*ke,Math.sin(Be)*ke,rt])})([Y,te??Yi(A,N,h),Yi(k,q,h),Yi(C,H,h)]);return new cr(oe,ue,ye,we,!1)}case"lab":{const[x,A,k,C]=bn(Ia(c.lab,o.lab,h));return new cr(x,A,k,C,!1)}}},array:Ia,padding:function(c,o,h){return new wi(Ia(c.values,o.values,h))},variableAnchorOffsetCollection:function(c,o,h){const g=c.values,x=o.values;if(g.length!==x.length)throw new Fn(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${o.toString()}`);const A=[];for(let k=0;k<g.length;k+=2){if(g[k]!==x[k])throw new Fn(`Cannot interpolate values containing mismatched anchors. from[${k}]: ${g[k]}, to[${k}]: ${x[k]}`);A.push(g[k]);const[C,D]=g[k+1],[N,q]=x[k+1];A.push([Yi(C,N,h),Yi(D,q,h)])}return new ga(A)}};class ai{constructor(o,h,g,x,A){this.type=o,this.operator=h,this.interpolation=g,this.input=x,this.labels=[],this.outputs=[];for(const[k,C]of A)this.labels.push(k),this.outputs.push(C)}static interpolationFactor(o,h,g,x){let A=0;if(o.name==="exponential")A=Ss(h,o.base,g,x);else if(o.name==="linear")A=Ss(h,1,g,x);else if(o.name==="cubic-bezier"){const k=o.controlPoints;A=new jc(k[0],k[1],k[2],k[3]).solve(Ss(h,1,g,x))}return A}static parse(o,h){let[g,x,A,...k]=o;if(!Array.isArray(x)||x.length===0)return h.error("Expected an interpolation type expression.",1);if(x[0]==="linear")x={name:"linear"};else if(x[0]==="exponential"){const N=x[1];if(typeof N!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);x={name:"exponential",base:N}}else{if(x[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(x[0])}`,1,0);{const N=x.slice(1);if(N.length!==4||N.some((q=>typeof q!="number"||q<0||q>1)))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);x={name:"cubic-bezier",controlPoints:N}}}if(o.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(A=h.parse(A,2,bt),!A)return null;const C=[];let D=null;g==="interpolate-hcl"||g==="interpolate-lab"?D=bi:h.expectedType&&h.expectedType.kind!=="value"&&(D=h.expectedType);for(let N=0;N<k.length;N+=2){const q=k[N],H=k[N+1],Y=N+3,te=N+4;if(typeof q!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(C.length&&C[C.length-1][0]>=q)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const oe=h.parse(H,te,D);if(!oe)return null;D=D||oe.type,C.push([q,oe])}return je(D,bt)||je(D,bi)||je(D,ma)||je(D,_e)||je(D,ee(bt))?new ai(D,g,x,A,C):h.error(`Type ${Q(D)} is not interpolatable.`)}evaluate(o){const h=this.labels,g=this.outputs;if(h.length===1)return g[0].evaluate(o);const x=this.input.evaluate(o);if(x<=h[0])return g[0].evaluate(o);const A=h.length;if(x>=h[A-1])return g[A-1].evaluate(o);const k=jl(h,x),C=ai.interpolationFactor(this.interpolation,x,h[k],h[k+1]),D=g[k].evaluate(o),N=g[k+1].evaluate(o);switch(this.operator){case"interpolate":return jn[this.type.kind](D,N,C);case"interpolate-hcl":return jn.color(D,N,C,"hcl");case"interpolate-lab":return jn.color(D,N,C,"lab")}}eachChild(o){o(this.input);for(const h of this.outputs)o(h)}outputDefined(){return this.outputs.every((o=>o.outputDefined()))}}function Ss(c,o,h,g){const x=g-h,A=c-h;return x===0?0:o===1?A/x:(Math.pow(o,A)-1)/(Math.pow(o,x)-1)}class so{constructor(o,h){this.type=o,this.args=h}static parse(o,h){if(o.length<2)return h.error("Expectected at least one argument.");let g=null;const x=h.expectedType;x&&x.kind!=="value"&&(g=x);const A=[];for(const C of o.slice(1)){const D=h.parse(C,1+A.length,g,void 0,{typeAnnotation:"omit"});if(!D)return null;g=g||D.type,A.push(D)}if(!g)throw new Error("No output type");const k=x&&A.some((C=>me(x,C.type)));return new so(k?ur:g,A)}evaluate(o){let h,g=null,x=0;for(const A of this.args)if(x++,g=A.evaluate(o),g&&g instanceof Si&&!g.available&&(h||(h=g.name),g=null,x===this.args.length&&(g=h)),g!==null)break;return g}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every((o=>o.outputDefined()))}}function Bc(c,o){return c==="=="||c==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Uh(c,o,h,g){return g.compare(o,h)===0}function Mo(c,o,h){const g=c!=="=="&&c!=="!=";return class ZF{constructor(A,k,C){this.type=nr,this.lhs=A,this.rhs=k,this.collator=C,this.hasUntypedArgument=A.type.kind==="value"||k.type.kind==="value"}static parse(A,k){if(A.length!==3&&A.length!==4)return k.error("Expected two or three arguments.");const C=A[0];let D=k.parse(A[1],1,ur);if(!D)return null;if(!Bc(C,D.type))return k.concat(1).error(`"${C}" comparisons are not supported for type '${Q(D.type)}'.`);let N=k.parse(A[2],2,ur);if(!N)return null;if(!Bc(C,N.type))return k.concat(2).error(`"${C}" comparisons are not supported for type '${Q(N.type)}'.`);if(D.type.kind!==N.type.kind&&D.type.kind!=="value"&&N.type.kind!=="value")return k.error(`Cannot compare types '${Q(D.type)}' and '${Q(N.type)}'.`);g&&(D.type.kind==="value"&&N.type.kind!=="value"?D=new Xi(N.type,[D]):D.type.kind!=="value"&&N.type.kind==="value"&&(N=new Xi(D.type,[N])));let q=null;if(A.length===4){if(D.type.kind!=="string"&&N.type.kind!=="string"&&D.type.kind!=="value"&&N.type.kind!=="value")return k.error("Cannot use collator to compare non-string types.");if(q=k.parse(A[3],3,Oa),!q)return null}return new ZF(D,N,q)}evaluate(A){const k=this.lhs.evaluate(A),C=this.rhs.evaluate(A);if(g&&this.hasUntypedArgument){const D=Hr(k),N=Hr(C);if(D.kind!==N.kind||D.kind!=="string"&&D.kind!=="number")throw new Fn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${N.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){const D=Hr(k),N=Hr(C);if(D.kind!=="string"||N.kind!=="string")return o(A,k,C)}return this.collator?h(A,k,C,this.collator.evaluate(A)):o(A,k,C)}eachChild(A){A(this.lhs),A(this.rhs),this.collator&&A(this.collator)}outputDefined(){return!0}}}const km=Mo("==",(function(c,o,h){return o===h}),Uh),Wh=Mo("!=",(function(c,o,h){return o!==h}),(function(c,o,h,g){return!Uh(0,o,h,g)})),Ru=Mo("<",(function(c,o,h){return o<h}),(function(c,o,h,g){return g.compare(o,h)<0})),Ed=Mo(">",(function(c,o,h){return o>h}),(function(c,o,h,g){return g.compare(o,h)>0})),Em=Mo("<=",(function(c,o,h){return o<=h}),(function(c,o,h,g){return g.compare(o,h)<=0})),Bl=Mo(">=",(function(c,o,h){return o>=h}),(function(c,o,h,g){return g.compare(o,h)>=0}));class Go{constructor(o,h,g){this.type=Oa,this.locale=g,this.caseSensitive=o,this.diacriticSensitive=h}static parse(o,h){if(o.length!==2)return h.error("Expected one argument.");const g=o[1];if(typeof g!="object"||Array.isArray(g))return h.error("Collator options argument must be an object.");const x=h.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,nr);if(!x)return null;const A=h.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,nr);if(!A)return null;let k=null;return g.locale&&(k=h.parse(g.locale,1,yr),!k)?null:new Go(x,A,k)}evaluate(o){return new $h(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Ts{constructor(o,h,g,x,A){this.type=yr,this.number=o,this.locale=h,this.currency=g,this.minFractionDigits=x,this.maxFractionDigits=A}static parse(o,h){if(o.length!==3)return h.error("Expected two arguments.");const g=h.parse(o[1],1,bt);if(!g)return null;const x=o[2];if(typeof x!="object"||Array.isArray(x))return h.error("NumberFormat options argument must be an object.");let A=null;if(x.locale&&(A=h.parse(x.locale,1,yr),!A))return null;let k=null;if(x.currency&&(k=h.parse(x.currency,1,yr),!k))return null;let C=null;if(x["min-fraction-digits"]&&(C=h.parse(x["min-fraction-digits"],1,bt),!C))return null;let D=null;return x["max-fraction-digits"]&&(D=h.parse(x["max-fraction-digits"],1,bt),!D)?null:new Ts(g,A,k,C,D)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class al{constructor(o){this.type=ao,this.sections=o}static parse(o,h){if(o.length<2)return h.error("Expected at least one argument.");const g=o[1];if(!Array.isArray(g)&&typeof g=="object")return h.error("First argument must be an image or text section.");const x=[];let A=!1;for(let k=1;k<=o.length-1;++k){const C=o[k];if(A&&typeof C=="object"&&!Array.isArray(C)){A=!1;let D=null;if(C["font-scale"]&&(D=h.parse(C["font-scale"],1,bt),!D))return null;let N=null;if(C["text-font"]&&(N=h.parse(C["text-font"],1,ee(yr)),!N))return null;let q=null;if(C["text-color"]&&(q=h.parse(C["text-color"],1,bi),!q))return null;const H=x[x.length-1];H.scale=D,H.font=N,H.textColor=q}else{const D=h.parse(o[k],1,ur);if(!D)return null;const N=D.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");A=!0,x.push({content:D,scale:null,font:null,textColor:null})}}return new al(x)}evaluate(o){return new Zi(this.sections.map((h=>{const g=h.content.evaluate(o);return Hr(g)===Ii?new Iu("",g,null,null,null):new Iu(Du(g),null,h.scale?h.scale.evaluate(o):null,h.font?h.font.evaluate(o).join(","):null,h.textColor?h.textColor.evaluate(o):null)})))}eachChild(o){for(const h of this.sections)o(h.content),h.scale&&o(h.scale),h.font&&o(h.font),h.textColor&&o(h.textColor)}outputDefined(){return!1}}class Hh{constructor(o){this.type=Ii,this.input=o}static parse(o,h){if(o.length!==2)return h.error("Expected two arguments.");const g=h.parse(o[1],1,yr);return g?new Hh(g):h.error("No image name provided.")}evaluate(o){const h=this.input.evaluate(o),g=Si.fromString(h);return g&&o.availableImages&&(g.available=o.availableImages.indexOf(h)>-1),g}eachChild(o){o(this.input)}outputDefined(){return!1}}class Gh{constructor(o){this.type=bt,this.input=o}static parse(o,h){if(o.length!==2)return h.error(`Expected 1 argument, but found ${o.length-1} instead.`);const g=h.parse(o[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Q(g.type)} instead.`):new Gh(g):null}evaluate(o){const h=this.input.evaluate(o);if(typeof h=="string")return[...h].length;if(Array.isArray(h))return h.length;throw new Fn(`Expected value to be of type string or array, but found ${Q(Hr(h))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const Da=8192;function Nc(c,o){const h=(180+c[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,x=Math.pow(2,o.z);return[Math.round(h*x*Da),Math.round(g*x*Da)]}function Lu(c,o){const h=Math.pow(2,o.z);return[(x=(c[0]/Da+o.x)/h,360*x-180),(g=(c[1]/Da+o.y)/h,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,x}function Ps(c,o){c[0]=Math.min(c[0],o[0]),c[1]=Math.min(c[1],o[1]),c[2]=Math.max(c[2],o[0]),c[3]=Math.max(c[3],o[1])}function Ri(c,o){return!(c[0]<=o[0]||c[2]>=o[2]||c[1]<=o[1]||c[3]>=o[3])}function zr(c,o,h){const g=c[0]-o[0],x=c[1]-o[1],A=c[0]-h[0],k=c[1]-h[1];return g*k-A*x==0&&g*A<=0&&x*k<=0}function ol(c,o,h,g){return(x=[g[0]-h[0],g[1]-h[1]])[0]*(A=[o[0]-c[0],o[1]-c[1]])[1]-x[1]*A[0]!=0&&!(!sl(c,o,h,g)||!sl(h,g,c,o));var x,A}function Md(c,o,h){for(const g of h)for(let x=0;x<g.length-1;++x)if(ol(c,o,g[x],g[x+1]))return!0;return!1}function Zo(c,o,h=!1){let g=!1;for(const C of o)for(let D=0;D<C.length-1;D++){if(zr(c,C[D],C[D+1]))return h;(A=C[D])[1]>(x=c)[1]!=(k=C[D+1])[1]>x[1]&&x[0]<(k[0]-A[0])*(x[1]-A[1])/(k[1]-A[1])+A[0]&&(g=!g)}var x,A,k;return g}function $c(c,o){for(const h of o)if(Zo(c,h))return!0;return!1}function Zh(c,o){for(const h of c)if(!Zo(h,o))return!1;for(let h=0;h<c.length-1;++h)if(Md(c[h],c[h+1],o))return!1;return!0}function ya(c,o){for(const h of o)if(Zh(c,h))return!0;return!1}function sl(c,o,h,g){const x=g[0]-h[0],A=g[1]-h[1],k=(c[0]-h[0])*A-x*(c[1]-h[1]),C=(o[0]-h[0])*A-x*(o[1]-h[1]);return k>0&&C<0||k<0&&C>0}function Fu(c,o,h){const g=[];for(let x=0;x<c.length;x++){const A=[];for(let k=0;k<c[x].length;k++){const C=Nc(c[x][k],h);Ps(o,C),A.push(C)}g.push(A)}return g}function Nl(c,o,h){const g=[];for(let x=0;x<c.length;x++){const A=Fu(c[x],o,h);g.push(A)}return g}function Cd(c,o,h,g){if(c[0]<h[0]||c[0]>h[2]){const x=.5*g;let A=c[0]-h[0]>x?-g:h[0]-c[0]>x?g:0;A===0&&(A=c[0]-h[2]>x?-g:h[2]-c[0]>x?g:0),c[0]+=A}Ps(o,c)}function Vc(c,o,h,g){const x=Math.pow(2,g.z)*Da,A=[g.x*Da,g.y*Da],k=[];for(const C of c)for(const D of C){const N=[D.x+A[0],D.y+A[1]];Cd(N,o,h,x),k.push(N)}return k}function qc(c,o,h,g){const x=Math.pow(2,g.z)*Da,A=[g.x*Da,g.y*Da],k=[];for(const D of c){const N=[];for(const q of D){const H=[q.x+A[0],q.y+A[1]];Ps(o,H),N.push(H)}k.push(N)}if(o[2]-o[0]<=x/2){(C=o)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const D of k)for(const N of D)Cd(N,o,h,x)}var C;return k}class lo{constructor(o,h){this.type=nr,this.geojson=o,this.geometries=h}static parse(o,h){if(o.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(el(o[1])){const g=o[1];if(g.type==="FeatureCollection"){const x=[];for(const A of g.features){const{type:k,coordinates:C}=A.geometry;k==="Polygon"&&x.push(C),k==="MultiPolygon"&&x.push(...C)}if(x.length)return new lo(g,{type:"MultiPolygon",coordinates:x})}else if(g.type==="Feature"){const x=g.geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new lo(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new lo(g,g)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(h,g){const x=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(g.type==="Polygon"){const C=Fu(g.coordinates,A,k),D=Vc(h.geometry(),x,A,k);if(!Ri(x,A))return!1;for(const N of D)if(!Zo(N,C))return!1}if(g.type==="MultiPolygon"){const C=Nl(g.coordinates,A,k),D=Vc(h.geometry(),x,A,k);if(!Ri(x,A))return!1;for(const N of D)if(!$c(N,C))return!1}return!0})(o,this.geometries);if(o.geometryType()==="LineString")return(function(h,g){const x=[1/0,1/0,-1/0,-1/0],A=[1/0,1/0,-1/0,-1/0],k=h.canonicalID();if(g.type==="Polygon"){const C=Fu(g.coordinates,A,k),D=qc(h.geometry(),x,A,k);if(!Ri(x,A))return!1;for(const N of D)if(!Zh(N,C))return!1}if(g.type==="MultiPolygon"){const C=Nl(g.coordinates,A,k),D=qc(h.geometry(),x,A,k);if(!Ri(x,A))return!1;for(const N of D)if(!ya(N,C))return!1}return!0})(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let ju=class{constructor(c=[],o=((h,g)=>h<g?-1:h>g?1:0)){if(this.data=c,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:o,compare:h}=this,g=o[c];for(;c>0;){const x=c-1>>1,A=o[x];if(h(g,A)>=0)break;o[c]=A,c=x}o[c]=g}_down(c){const{data:o,compare:h}=this,g=this.length>>1,x=o[c];for(;c<g;){let A=1+(c<<1);const k=A+1;if(k<this.length&&h(o[k],o[A])<0&&(A=k),h(o[A],x)>=0)break;o[c]=o[A],c=A}o[c]=x}};function Od(c,o,h,g,x){Id(c,o,h,g||c.length-1,x||Mm)}function Id(c,o,h,g,x){for(;g>h;){if(g-h>600){var A=g-h+1,k=o-h+1,C=Math.log(A),D=.5*Math.exp(2*C/3),N=.5*Math.sqrt(C*D*(A-D)/A)*(k-A/2<0?-1:1);Id(c,o,Math.max(h,Math.floor(o-k*D/A+N)),Math.min(g,Math.floor(o+(A-k)*D/A+N)),x)}var q=c[o],H=h,Y=g;for(Bu(c,h,o),x(c[g],q)>0&&Bu(c,h,g);H<Y;){for(Bu(c,H,Y),H++,Y--;x(c[H],q)<0;)H++;for(;x(c[Y],q)>0;)Y--}x(c[h],q)===0?Bu(c,h,Y):Bu(c,++Y,g),Y<=o&&(h=Y+1),o<=Y&&(g=Y-1)}}function Bu(c,o,h){var g=c[o];c[o]=c[h],c[h]=g}function Mm(c,o){return c<o?-1:c>o?1:0}function $l(c,o){if(c.length<=1)return[c];const h=[];let g,x;for(const A of c){const k=Om(A);k!==0&&(A.area=Math.abs(k),x===void 0&&(x=k<0),x===k<0?(g&&h.push(g),g=[A]):g.push(A))}if(g&&h.push(g),o>1)for(let A=0;A<h.length;A++)h[A].length<=o||(Od(h[A],o,1,h[A].length-1,Cm),h[A]=h[A].slice(0,o));return h}function Cm(c,o){return o.area-c.area}function Om(c){let o=0;for(let h,g,x=0,A=c.length,k=A-1;x<A;k=x++)h=c[x],g=c[k],o+=(g.x-h.x)*(h.y+g.y);return o}const Dd=1/298.257223563,zd=Dd*(2-Dd),Rd=Math.PI/180;class Uc{constructor(o){const h=6378.137*Rd*1e3,g=Math.cos(o*Rd),x=1/(1-zd*(1-g*g)),A=Math.sqrt(x);this.kx=h*A*g,this.ky=h*A*x*(1-zd)}distance(o,h){const g=this.wrap(o[0]-h[0])*this.kx,x=(o[1]-h[1])*this.ky;return Math.sqrt(g*g+x*x)}pointOnLine(o,h){let g,x,A,k,C=1/0;for(let D=0;D<o.length-1;D++){let N=o[D][0],q=o[D][1],H=this.wrap(o[D+1][0]-N)*this.kx,Y=(o[D+1][1]-q)*this.ky,te=0;H===0&&Y===0||(te=(this.wrap(h[0]-N)*this.kx*H+(h[1]-q)*this.ky*Y)/(H*H+Y*Y),te>1?(N=o[D+1][0],q=o[D+1][1]):te>0&&(N+=H/this.kx*te,q+=Y/this.ky*te)),H=this.wrap(h[0]-N)*this.kx,Y=(h[1]-q)*this.ky;const oe=H*H+Y*Y;oe<C&&(C=oe,g=N,x=q,A=D,k=te)}return{point:[g,x],index:A,t:Math.max(0,Math.min(1,k))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function Ld(c,o){return o[0]-c[0]}function Wc(c){return c[1]-c[0]+1}function Xo(c,o){return c[1]>=c[0]&&c[1]<o}function Xh(c,o){if(c[0]>c[1])return[null,null];const h=Wc(c);if(o){if(h===2)return[c,null];const x=Math.floor(h/2);return[[c[0],c[0]+x],[c[0]+x,c[1]]]}if(h===1)return[c,null];const g=Math.floor(h/2)-1;return[[c[0],c[0]+g],[c[0]+g+1,c[1]]]}function Nu(c,o){if(!Xo(o,c.length))return[1/0,1/0,-1/0,-1/0];const h=[1/0,1/0,-1/0,-1/0];for(let g=o[0];g<=o[1];++g)Ps(h,c[g]);return h}function Kh(c){const o=[1/0,1/0,-1/0,-1/0];for(const h of c)for(const g of h)Ps(o,g);return o}function Hc(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Yh(c,o,h){if(!Hc(c)||!Hc(o))return NaN;let g=0,x=0;return c[2]<o[0]&&(g=o[0]-c[2]),c[0]>o[2]&&(g=c[0]-o[2]),c[1]>o[3]&&(x=c[1]-o[3]),c[3]<o[1]&&(x=o[1]-c[3]),h.distance([0,0],[g,x])}function As(c,o,h){const g=h.pointOnLine(o,c);return h.distance(c,g.point)}function Jh(c,o,h,g,x){const A=Math.min(As(c,[h,g],x),As(o,[h,g],x)),k=Math.min(As(h,[c,o],x),As(g,[c,o],x));return Math.min(A,k)}function Im(c,o,h,g,x){if(!Xo(o,c.length)||!Xo(g,h.length))return 1/0;let A=1/0;for(let k=o[0];k<o[1];++k){const C=c[k],D=c[k+1];for(let N=g[0];N<g[1];++N){const q=h[N],H=h[N+1];if(ol(C,D,q,H))return 0;A=Math.min(A,Jh(C,D,q,H,x))}}return A}function On(c,o,h,g,x){if(!Xo(o,c.length)||!Xo(g,h.length))return NaN;let A=1/0;for(let k=o[0];k<=o[1];++k)for(let C=g[0];C<=g[1];++C)if(A=Math.min(A,x.distance(c[k],h[C])),A===0)return A;return A}function Dm(c,o,h){if(Zo(c,o,!0))return 0;let g=1/0;for(const x of o){const A=x[0],k=x[x.length-1];if(A!==k&&(g=Math.min(g,As(c,[k,A],h)),g===0))return g;const C=h.pointOnLine(x,c);if(g=Math.min(g,h.distance(c,C.point)),g===0)return g}return g}function Tr(c,o,h,g){if(!Xo(o,c.length))return NaN;for(let A=o[0];A<=o[1];++A)if(Zo(c[A],h,!0))return 0;let x=1/0;for(let A=o[0];A<o[1];++A){const k=c[A],C=c[A+1];for(const D of h)for(let N=0,q=D.length,H=q-1;N<q;H=N++){const Y=D[H],te=D[N];if(ol(k,C,Y,te))return 0;x=Math.min(x,Jh(k,C,Y,te,g))}}return x}function Gc(c,o){for(const h of c)for(const g of h)if(Zo(g,o,!0))return!0;return!1}function rn(c,o,h,g=1/0){const x=Kh(c),A=Kh(o);if(g!==1/0&&Yh(x,A,h)>=g)return g;if(Ri(x,A)){if(Gc(c,o))return 0}else if(Gc(o,c))return 0;let k=1/0;for(const C of c)for(let D=0,N=C.length,q=N-1;D<N;q=D++){const H=C[q],Y=C[D];for(const te of o)for(let oe=0,ue=te.length,ye=ue-1;oe<ue;ye=oe++){const we=te[ye],Be=te[oe];if(ol(H,Y,we,Be))return 0;k=Math.min(k,Jh(H,Y,we,Be,h))}}return k}function Ur(c,o,h,g,x,A){if(!A)return;const k=Yh(Nu(g,A),x,h);k<o&&c.push([k,A,[0,0]])}function uo(c,o,h,g,x,A,k){if(!A||!k)return;const C=Yh(Nu(g,A),Nu(x,k),h);C<o&&c.push([C,A,k])}function $u(c,o,h,g,x=1/0){let A=Math.min(g.distance(c[0],h[0][0]),x);if(A===0)return A;const k=new ju([[0,[0,c.length-1],[0,0]]],Ld),C=Kh(h);for(;k.length>0;){const D=k.pop();if(D[0]>=A)continue;const N=D[1],q=o?50:100;if(Wc(N)<=q){if(!Xo(N,c.length))return NaN;if(o){const H=Tr(c,N,h,g);if(isNaN(H)||H===0)return H;A=Math.min(A,H)}else for(let H=N[0];H<=N[1];++H){const Y=Dm(c[H],h,g);if(A=Math.min(A,Y),A===0)return 0}}else{const H=Xh(N,o);Ur(k,A,g,c,C,H[0]),Ur(k,A,g,c,C,H[1])}}return A}function Vl(c,o,h,g,x,A=1/0){let k=Math.min(A,x.distance(c[0],h[0]));if(k===0)return k;const C=new ju([[0,[0,c.length-1],[0,h.length-1]]],Ld);for(;C.length>0;){const D=C.pop();if(D[0]>=k)continue;const N=D[1],q=D[2],H=o?50:100,Y=g?50:100;if(Wc(N)<=H&&Wc(q)<=Y){if(!Xo(N,c.length)&&Xo(q,h.length))return NaN;let te;if(o&&g)te=Im(c,N,h,q,x),k=Math.min(k,te);else if(o&&!g){const oe=c.slice(N[0],N[1]+1);for(let ue=q[0];ue<=q[1];++ue)if(te=As(h[ue],oe,x),k=Math.min(k,te),k===0)return k}else if(!o&&g){const oe=h.slice(q[0],q[1]+1);for(let ue=N[0];ue<=N[1];++ue)if(te=As(c[ue],oe,x),k=Math.min(k,te),k===0)return k}else te=On(c,N,h,q,x),k=Math.min(k,te)}else{const te=Xh(N,o),oe=Xh(q,g);uo(C,k,x,c,h,te[0],oe[0]),uo(C,k,x,c,h,te[0],oe[1]),uo(C,k,x,c,h,te[1],oe[0]),uo(C,k,x,c,h,te[1],oe[1])}}return k}function Zc(c){return c.type==="MultiPolygon"?c.coordinates.map((o=>({type:"Polygon",coordinates:o}))):c.type==="MultiLineString"?c.coordinates.map((o=>({type:"LineString",coordinates:o}))):c.type==="MultiPoint"?c.coordinates.map((o=>({type:"Point",coordinates:o}))):[c]}class ks{constructor(o,h){this.type=bt,this.geojson=o,this.geometries=h}static parse(o,h){if(o.length!==2)return h.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(el(o[1])){const g=o[1];if(g.type==="FeatureCollection")return new ks(g,g.features.map((x=>Zc(x.geometry))).flat());if(g.type==="Feature")return new ks(g,Zc(g.geometry));if("type"in g&&"coordinates"in g)return new ks(g,Zc(g))}return h.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return(function(h,g){const x=h.geometry(),A=x.flat().map((D=>Lu([D.x,D.y],h.canonical)));if(x.length===0)return NaN;const k=new Uc(A[0][1]);let C=1/0;for(const D of g){switch(D.type){case"Point":C=Math.min(C,Vl(A,!1,[D.coordinates],!1,k,C));break;case"LineString":C=Math.min(C,Vl(A,!1,D.coordinates,!0,k,C));break;case"Polygon":C=Math.min(C,$u(A,!1,D.coordinates,k,C))}if(C===0)return C}return C})(o,this.geometries);if(o.geometryType()==="LineString")return(function(h,g){const x=h.geometry(),A=x.flat().map((D=>Lu([D.x,D.y],h.canonical)));if(x.length===0)return NaN;const k=new Uc(A[0][1]);let C=1/0;for(const D of g){switch(D.type){case"Point":C=Math.min(C,Vl(A,!0,[D.coordinates],!1,k,C));break;case"LineString":C=Math.min(C,Vl(A,!0,D.coordinates,!0,k,C));break;case"Polygon":C=Math.min(C,$u(A,!0,D.coordinates,k,C))}if(C===0)return C}return C})(o,this.geometries);if(o.geometryType()==="Polygon")return(function(h,g){const x=h.geometry();if(x.length===0||x[0].length===0)return NaN;const A=$l(x,0).map((D=>D.map((N=>N.map((q=>Lu([q.x,q.y],h.canonical))))))),k=new Uc(A[0][0][0][1]);let C=1/0;for(const D of g)for(const N of A){switch(D.type){case"Point":C=Math.min(C,$u([D.coordinates],!1,N,k,C));break;case"LineString":C=Math.min(C,$u(D.coordinates,!0,N,k,C));break;case"Polygon":C=Math.min(C,rn(N,D.coordinates,k,C))}if(C===0)return C}return C})(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const ll={"==":km,"!=":Wh,">":Ed,"<":Ru,">=":Bl,"<=":Em,array:Xi,at:nl,boolean:Xi,case:zu,coalesce:so,collator:Go,format:al,image:Hh,in:Vh,"index-of":ws,interpolate:ai,"interpolate-hcl":ai,"interpolate-lab":ai,length:Gh,let:Ho,literal:oo,match:qr,number:Xi,"number-format":Ts,object:Xi,slice:Fl,step:il,string:Xi,"to-boolean":Ki,"to-color":Ki,"to-number":Ki,"to-string":Ki,var:Dr,within:lo,distance:ks};class va{constructor(o,h,g,x){this.name=o,this.type=h,this._evaluate=g,this.args=x}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,h){const g=o[0],x=va.definitions[g];if(!x)return h.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);const A=Array.isArray(x)?x[0]:x.type,k=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,C=k.filter((([N])=>!Array.isArray(N)||N.length===o.length-1));let D=null;for(const[N,q]of C){D=new Wo(h.registry,ql,h.path,null,h.scope);const H=[];let Y=!1;for(let te=1;te<o.length;te++){const oe=o[te],ue=Array.isArray(N)?N[te-1]:N.type,ye=D.parse(oe,1+H.length,ue);if(!ye){Y=!0;break}H.push(ye)}if(!Y)if(Array.isArray(N)&&N.length!==H.length)D.error(`Expected ${N.length} arguments, but found ${H.length} instead.`);else{for(let te=0;te<H.length;te++){const oe=Array.isArray(N)?N[te]:N.type,ue=H[te];D.concat(te+1).checkSubtype(oe,ue.type)}if(D.errors.length===0)return new va(g,A,q,H)}}if(C.length===1)h.errors.push(...D.errors);else{const N=(C.length?C:k).map((([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(Q).join(", ")})`:`(${Q(Y.type)}...)`;var Y})).join(" | "),q=[];for(let H=1;H<o.length;H++){const Y=h.parse(o[H],1+q.length);if(!Y)return null;q.push(Q(Y.type))}h.error(`Expected arguments of type ${N}, but found (${q.join(", ")}) instead.`)}return null}static register(o,h){va.definitions=h;for(const g in h)o[g]=va}}function Es(c,[o,h,g,x]){o=o.evaluate(c),h=h.evaluate(c),g=g.evaluate(c);const A=x?x.evaluate(c):1,k=zi(o,h,g,A);if(k)throw new Fn(k);return new cr(o/255,h/255,g/255,A,!1)}function Qh(c,o){return c in o}function ef(c,o){const h=o[c];return h===void 0?null:h}function ul(c){return{type:c}}function ql(c){if(c instanceof Dr)return ql(c.boundExpression);if(c instanceof va&&c.name==="error"||c instanceof Go||c instanceof lo||c instanceof ks)return!1;const o=c instanceof Ki||c instanceof Xi;let h=!0;return c.eachChild((g=>{h=o?h&&ql(g):h&&g instanceof oo})),!!h&&Ul(c)&&Ko(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ul(c){if(c instanceof va&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof lo||c instanceof ks)return!1;let o=!0;return c.eachChild((h=>{o&&!Ul(h)&&(o=!1)})),o}function Co(c){if(c instanceof va&&c.name==="feature-state")return!1;let o=!0;return c.eachChild((h=>{o&&!Co(h)&&(o=!1)})),o}function Ko(c,o){if(c instanceof va&&o.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild((g=>{h&&!Ko(g,o)&&(h=!1)})),h}function Xc(c){return{result:"success",value:c}}function Yo(c){return{result:"error",value:c}}function Wl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function tf(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Vu(c){return!!c.expression&&c.expression.interpolated}function Mr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function qu(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function Fd(c){return c}function rf(c,o){const h=o.type==="color",g=c.stops&&typeof c.stops[0][0]=="object",x=g||!(g||c.property!==void 0),A=c.type||(Vu(o)?"exponential":"interval");if(h||o.type==="padding"){const q=h?cr.parse:wi.parse;(c=io({},c)).stops&&(c.stops=c.stops.map((H=>[H[0],q(H[1])]))),c.default=q(c.default?c.default:o.default)}if(c.colorSpace&&(k=c.colorSpace)!=="rgb"&&k!=="hcl"&&k!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var k;let C,D,N;if(A==="exponential")C=Bd;else if(A==="interval")C=Kc;else if(A==="categorical"){C=jd,D=Object.create(null);for(const q of c.stops)D[q[0]]=q[1];N=typeof c.stops[0][0]}else{if(A!=="identity")throw new Error(`Unknown function type "${A}"`);C=Nd}if(g){const q={},H=[];for(let oe=0;oe<c.stops.length;oe++){const ue=c.stops[oe],ye=ue[0].zoom;q[ye]===void 0&&(q[ye]={zoom:ye,type:c.type,property:c.property,default:c.default,stops:[]},H.push(ye)),q[ye].stops.push([ue[0].value,ue[1]])}const Y=[];for(const oe of H)Y.push([q[oe].zoom,rf(q[oe],o)]);const te={name:"linear"};return{kind:"composite",interpolationType:te,interpolationFactor:ai.interpolationFactor.bind(void 0,te),zoomStops:Y.map((oe=>oe[0])),evaluate:({zoom:oe},ue)=>Bd({stops:Y,base:c.base},o,oe).evaluate(oe,ue)}}if(x){const q=A==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:q,interpolationFactor:ai.interpolationFactor.bind(void 0,q),zoomStops:c.stops.map((H=>H[0])),evaluate:({zoom:H})=>C(c,o,H,D,N)}}return{kind:"source",evaluate(q,H){const Y=H&&H.properties?H.properties[c.property]:void 0;return Y===void 0?Hl(c.default,o.default):C(c,o,Y,D,N)}}}function Hl(c,o,h){return c!==void 0?c:o!==void 0?o:h!==void 0?h:void 0}function jd(c,o,h,g,x){return Hl(typeof h===x?g[h]:void 0,c.default,o.default)}function Kc(c,o,h){if(Mr(h)!=="number")return Hl(c.default,o.default);const g=c.stops.length;if(g===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[g-1][0])return c.stops[g-1][1];const x=jl(c.stops.map((A=>A[0])),h);return c.stops[x][1]}function Bd(c,o,h){const g=c.base!==void 0?c.base:1;if(Mr(h)!=="number")return Hl(c.default,o.default);const x=c.stops.length;if(x===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[x-1][0])return c.stops[x-1][1];const A=jl(c.stops.map((q=>q[0])),h),k=(function(q,H,Y,te){const oe=te-Y,ue=q-Y;return oe===0?0:H===1?ue/oe:(Math.pow(H,ue)-1)/(Math.pow(H,oe)-1)})(h,g,c.stops[A][0],c.stops[A+1][0]),C=c.stops[A][1],D=c.stops[A+1][1],N=jn[o.type]||Fd;return typeof C.evaluate=="function"?{evaluate(...q){const H=C.evaluate.apply(void 0,q),Y=D.evaluate.apply(void 0,q);if(H!==void 0&&Y!==void 0)return N(H,Y,k,c.colorSpace)}}:N(C,D,k,c.colorSpace)}function Nd(c,o,h){switch(o.type){case"color":h=cr.parse(h);break;case"formatted":h=Zi.fromString(h.toString());break;case"resolvedImage":h=Si.fromString(h.toString());break;case"padding":h=wi.parse(h);break;default:Mr(h)===o.type||o.type==="enum"&&o.values[h]||(h=void 0)}return Hl(h,c.default,o.default)}va.register(ll,{error:[{kind:"error"},[yr],(c,[o])=>{throw new Fn(o.evaluate(c))}],typeof:[yr,[ur],(c,[o])=>Q(Hr(o.evaluate(c)))],"to-rgba":[ee(bt,4),[bi],(c,[o])=>{const[h,g,x,A]=o.evaluate(c).rgb;return[255*h,255*g,255*x,A]}],rgb:[bi,[bt,bt,bt],Es],rgba:[bi,[bt,bt,bt,bt],Es],has:{type:nr,overloads:[[[yr],(c,[o])=>Qh(o.evaluate(c),c.properties())],[[yr,pa],(c,[o,h])=>Qh(o.evaluate(c),h.evaluate(c))]]},get:{type:ur,overloads:[[[yr],(c,[o])=>ef(o.evaluate(c),c.properties())],[[yr,pa],(c,[o,h])=>ef(o.evaluate(c),h.evaluate(c))]]},"feature-state":[ur,[yr],(c,[o])=>ef(o.evaluate(c),c.featureState||{})],properties:[pa,[],c=>c.properties()],"geometry-type":[yr,[],c=>c.geometryType()],id:[ur,[],c=>c.id()],zoom:[bt,[],c=>c.globals.zoom],"heatmap-density":[bt,[],c=>c.globals.heatmapDensity||0],"line-progress":[bt,[],c=>c.globals.lineProgress||0],accumulated:[ur,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[bt,ul(bt),(c,o)=>{let h=0;for(const g of o)h+=g.evaluate(c);return h}],"*":[bt,ul(bt),(c,o)=>{let h=1;for(const g of o)h*=g.evaluate(c);return h}],"-":{type:bt,overloads:[[[bt,bt],(c,[o,h])=>o.evaluate(c)-h.evaluate(c)],[[bt],(c,[o])=>-o.evaluate(c)]]},"/":[bt,[bt,bt],(c,[o,h])=>o.evaluate(c)/h.evaluate(c)],"%":[bt,[bt,bt],(c,[o,h])=>o.evaluate(c)%h.evaluate(c)],ln2:[bt,[],()=>Math.LN2],pi:[bt,[],()=>Math.PI],e:[bt,[],()=>Math.E],"^":[bt,[bt,bt],(c,[o,h])=>Math.pow(o.evaluate(c),h.evaluate(c))],sqrt:[bt,[bt],(c,[o])=>Math.sqrt(o.evaluate(c))],log10:[bt,[bt],(c,[o])=>Math.log(o.evaluate(c))/Math.LN10],ln:[bt,[bt],(c,[o])=>Math.log(o.evaluate(c))],log2:[bt,[bt],(c,[o])=>Math.log(o.evaluate(c))/Math.LN2],sin:[bt,[bt],(c,[o])=>Math.sin(o.evaluate(c))],cos:[bt,[bt],(c,[o])=>Math.cos(o.evaluate(c))],tan:[bt,[bt],(c,[o])=>Math.tan(o.evaluate(c))],asin:[bt,[bt],(c,[o])=>Math.asin(o.evaluate(c))],acos:[bt,[bt],(c,[o])=>Math.acos(o.evaluate(c))],atan:[bt,[bt],(c,[o])=>Math.atan(o.evaluate(c))],min:[bt,ul(bt),(c,o)=>Math.min(...o.map((h=>h.evaluate(c))))],max:[bt,ul(bt),(c,o)=>Math.max(...o.map((h=>h.evaluate(c))))],abs:[bt,[bt],(c,[o])=>Math.abs(o.evaluate(c))],round:[bt,[bt],(c,[o])=>{const h=o.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[bt,[bt],(c,[o])=>Math.floor(o.evaluate(c))],ceil:[bt,[bt],(c,[o])=>Math.ceil(o.evaluate(c))],"filter-==":[nr,[yr,ur],(c,[o,h])=>c.properties()[o.value]===h.value],"filter-id-==":[nr,[ur],(c,[o])=>c.id()===o.value],"filter-type-==":[nr,[yr],(c,[o])=>c.geometryType()===o.value],"filter-<":[nr,[yr,ur],(c,[o,h])=>{const g=c.properties()[o.value],x=h.value;return typeof g==typeof x&&g<x}],"filter-id-<":[nr,[ur],(c,[o])=>{const h=c.id(),g=o.value;return typeof h==typeof g&&h<g}],"filter->":[nr,[yr,ur],(c,[o,h])=>{const g=c.properties()[o.value],x=h.value;return typeof g==typeof x&&g>x}],"filter-id->":[nr,[ur],(c,[o])=>{const h=c.id(),g=o.value;return typeof h==typeof g&&h>g}],"filter-<=":[nr,[yr,ur],(c,[o,h])=>{const g=c.properties()[o.value],x=h.value;return typeof g==typeof x&&g<=x}],"filter-id-<=":[nr,[ur],(c,[o])=>{const h=c.id(),g=o.value;return typeof h==typeof g&&h<=g}],"filter->=":[nr,[yr,ur],(c,[o,h])=>{const g=c.properties()[o.value],x=h.value;return typeof g==typeof x&&g>=x}],"filter-id->=":[nr,[ur],(c,[o])=>{const h=c.id(),g=o.value;return typeof h==typeof g&&h>=g}],"filter-has":[nr,[ur],(c,[o])=>o.value in c.properties()],"filter-has-id":[nr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[nr,[ee(yr)],(c,[o])=>o.value.indexOf(c.geometryType())>=0],"filter-id-in":[nr,[ee(ur)],(c,[o])=>o.value.indexOf(c.id())>=0],"filter-in-small":[nr,[yr,ee(ur)],(c,[o,h])=>h.value.indexOf(c.properties()[o.value])>=0],"filter-in-large":[nr,[yr,ee(ur)],(c,[o,h])=>(function(g,x,A,k){for(;A<=k;){const C=A+k>>1;if(x[C]===g)return!0;x[C]>g?k=C-1:A=C+1}return!1})(c.properties()[o.value],h.value,0,h.value.length-1)],all:{type:nr,overloads:[[[nr,nr],(c,[o,h])=>o.evaluate(c)&&h.evaluate(c)],[ul(nr),(c,o)=>{for(const h of o)if(!h.evaluate(c))return!1;return!0}]]},any:{type:nr,overloads:[[[nr,nr],(c,[o,h])=>o.evaluate(c)||h.evaluate(c)],[ul(nr),(c,o)=>{for(const h of o)if(h.evaluate(c))return!0;return!1}]]},"!":[nr,[nr],(c,[o])=>!o.evaluate(c)],"is-supported-script":[nr,[yr],(c,[o])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(o.evaluate(c))}],upcase:[yr,[yr],(c,[o])=>o.evaluate(c).toUpperCase()],downcase:[yr,[yr],(c,[o])=>o.evaluate(c).toLowerCase()],concat:[yr,ul(ur),(c,o)=>o.map((h=>Du(h.evaluate(c)))).join("")],"resolved-locale":[yr,[Oa],(c,[o])=>o.evaluate(c).resolvedLocale()]});class Ji{constructor(o,h){var g;this.expression=o,this._warningHistory={},this._evaluator=new Lc,this._defaultValue=h?(g=h).type==="color"&&qu(g.default)?new cr(0,0,0,0):g.type==="color"?cr.parse(g.default)||null:g.type==="padding"?wi.parse(g.default)||null:g.type==="variableAnchorOffsetCollection"?ga.parse(g.default)||null:g.default===void 0?null:g.default:null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(o,h,g,x,A,k){return this._evaluator.globals=o,this._evaluator.feature=h,this._evaluator.featureState=g,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k,this.expression.evaluate(this._evaluator)}evaluate(o,h,g,x,A,k){this._evaluator.globals=o,this._evaluator.feature=h||null,this._evaluator.featureState=g||null,this._evaluator.canonical=x,this._evaluator.availableImages=A||null,this._evaluator.formattedSection=k||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Fn(`Expected value to be one of ${Object.keys(this._enumValues).map((D=>JSON.stringify(D))).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Ms(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in ll}function cl(c,o){const h=new Wo(ll,ql,[],o?(function(x){const A={color:bi,string:yr,number:bt,enum:yr,boolean:nr,formatted:ao,padding:ma,resolvedImage:Ii,variableAnchorOffsetCollection:_e};return x.type==="array"?ee(A[x.value]||ur,x.length):A[x.type]})(o):void 0),g=h.parse(c,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?Xc(new Ji(g,o)):Yo(h.errors)}class hl{constructor(o,h){this.kind=o,this._styleExpression=h,this.isStateDependent=o!=="constant"&&!Co(h.expression)}evaluateWithoutErrorHandling(o,h,g,x,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,h,g,x,A,k)}evaluate(o,h,g,x,A,k){return this._styleExpression.evaluate(o,h,g,x,A,k)}}class fl{constructor(o,h,g,x){this.kind=o,this.zoomStops=g,this._styleExpression=h,this.isStateDependent=o!=="camera"&&!Co(h.expression),this.interpolationType=x}evaluateWithoutErrorHandling(o,h,g,x,A,k){return this._styleExpression.evaluateWithoutErrorHandling(o,h,g,x,A,k)}evaluate(o,h,g,x,A,k){return this._styleExpression.evaluate(o,h,g,x,A,k)}interpolationFactor(o,h,g){return this.interpolationType?ai.interpolationFactor(this.interpolationType,o,h,g):0}}function Yc(c,o){const h=cl(c,o);if(h.result==="error")return h;const g=h.value.expression,x=Ul(g);if(!x&&!Wl(o))return Yo([new Xn("","data expressions not supported")]);const A=Ko(g,["zoom"]);if(!A&&!tf(o))return Yo([new Xn("","zoom expressions not supported")]);const k=Uu(g);return k||A?k instanceof Xn?Yo([k]):k instanceof ai&&!Vu(o)?Yo([new Xn("",'"interpolate" expressions cannot be used with this property')]):Xc(k?new fl(x?"camera":"composite",h.value,k.labels,k instanceof ai?k.interpolation:void 0):new hl(x?"constant":"source",h.value)):Yo([new Xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Cs{constructor(o,h){this._parameters=o,this._specification=h,io(this,rf(this._parameters,this._specification))}static deserialize(o){return new Cs(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Uu(c){let o=null;if(c instanceof Ho)o=Uu(c.result);else if(c instanceof so){for(const h of c.args)if(o=Uu(h),o)break}else(c instanceof il||c instanceof ai)&&c.input instanceof va&&c.input.name==="zoom"&&(o=c);return o instanceof Xn||c.eachChild((h=>{const g=Uu(h);g instanceof Xn?o=g:!o&&g?o=new Xn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&g&&o!==g&&(o=new Xn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),o}function Jc(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const o of c.slice(1))if(!Jc(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Jo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wu(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Jc(c)||(c=Gu(c));const o=cl(c,Jo);if(o.result==="error")throw new Error(o.value.map((h=>`${h.key}: ${h.message}`)).join(", "));return{filter:(h,g,x)=>o.value.evaluate(h,g,{},x),needGeometry:Qc(c)}}function Hu(c,o){return c<o?-1:c>o?1:0}function Qc(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let o=1;o<c.length;o++)if(Qc(c[o]))return!0;return!1}function Gu(c){if(!c)return!0;const o=c[0];return c.length<=1?o!=="any":o==="=="?Gl(c[1],c[2],"=="):o==="!="?di(Gl(c[1],c[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Gl(c[1],c[2],o):o==="any"?(h=c.slice(1),["any"].concat(h.map(Gu))):o==="all"?["all"].concat(c.slice(1).map(Gu)):o==="none"?["all"].concat(c.slice(1).map(Gu).map(di)):o==="in"?Oo(c[1],c.slice(2)):o==="!in"?di(Oo(c[1],c.slice(2))):o==="has"?dl(c[1]):o!=="!has"||di(dl(c[1]));var h}function Gl(c,o,h){switch(c){case"$type":return[`filter-type-${h}`,o];case"$id":return[`filter-id-${h}`,o];default:return[`filter-${h}`,c,o]}}function Oo(c,o){if(o.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some((h=>typeof h!=typeof o[0]))?["filter-in-large",c,["literal",o.sort(Hu)]]:["filter-in-small",c,["literal",o]]}}function dl(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function di(c){return["!",c]}function Io(c){const o=typeof c;if(o==="number"||o==="boolean"||o==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let x="[";for(const A of c)x+=`${Io(A)},`;return`${x}]`}const h=Object.keys(c).sort();let g="{";for(let x=0;x<h.length;x++)g+=`${JSON.stringify(h[x])}:${Io(c[h[x]])},`;return`${g}}`}function nf(c){let o="";for(const h of Gr)o+=`/${Io(c[h])}`;return o}function af(c){const o=c.value;return o?[new mt(c.key,o,"constants have been deprecated as of v8")]:[]}function kn(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function za(c){if(Array.isArray(c))return c.map(za);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const o={};for(const h in c)o[h]=za(c[h]);return o}return kn(c)}function Qi(c){const o=c.key,h=c.value,g=c.valueSpec||{},x=c.objectElementValidators||{},A=c.style,k=c.styleSpec,C=c.validateSpec;let D=[];const N=Mr(h);if(N!=="object")return[new mt(o,h,`object expected, ${N} found`)];for(const q in h){const H=q.split(".")[0],Y=g[H]||g["*"];let te;if(x[H])te=x[H];else if(g[H])te=C;else if(x["*"])te=x["*"];else{if(!g["*"]){D.push(new mt(o,h[q],`unknown property "${q}"`));continue}te=C}D=D.concat(te({key:(o&&`${o}.`)+q,value:h[q],valueSpec:Y,style:A,styleSpec:k,object:h,objectKey:q,validateSpec:C},h))}for(const q in g)x[q]||g[q].required&&g[q].default===void 0&&h[q]===void 0&&D.push(new mt(o,h,`missing required property "${q}"`));return D}function Zl(c){const o=c.value,h=c.valueSpec,g=c.style,x=c.styleSpec,A=c.key,k=c.arrayElementValidator||c.validateSpec;if(Mr(o)!=="array")return[new mt(A,o,`array expected, ${Mr(o)} found`)];if(h.length&&o.length!==h.length)return[new mt(A,o,`array length ${h.length} expected, length ${o.length} found`)];if(h["min-length"]&&o.length<h["min-length"])return[new mt(A,o,`array length at least ${h["min-length"]} expected, length ${o.length} found`)];let C={type:h.value,values:h.values};x.$version<7&&(C.function=h.function),Mr(h.value)==="object"&&(C=h.value);let D=[];for(let N=0;N<o.length;N++)D=D.concat(k({array:o,arrayIndex:N,value:o[N],valueSpec:C,validateSpec:c.validateSpec,style:g,styleSpec:x,key:`${A}[${N}]`}));return D}function Do(c){const o=c.key,h=c.value,g=c.valueSpec;let x=Mr(h);return x==="number"&&h!=h&&(x="NaN"),x!=="number"?[new mt(o,h,`number expected, ${x} found`)]:"minimum"in g&&h<g.minimum?[new mt(o,h,`${h} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&h>g.maximum?[new mt(o,h,`${h} is greater than the maximum value ${g.maximum}`)]:[]}function Xl(c){const o=c.valueSpec,h=kn(c.value.type);let g,x,A,k={};const C=h!=="categorical"&&c.value.property===void 0,D=!C,N=Mr(c.value.stops)==="array"&&Mr(c.value.stops[0])==="array"&&Mr(c.value.stops[0][0])==="object",q=Qi({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(te){if(h==="identity")return[new mt(te.key,te.value,'identity function may not have a "stops" property')];let oe=[];const ue=te.value;return oe=oe.concat(Zl({key:te.key,value:ue,valueSpec:te.valueSpec,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,arrayElementValidator:H})),Mr(ue)==="array"&&ue.length===0&&oe.push(new mt(te.key,ue,"array must have at least one stop")),oe},default:function(te){return te.validateSpec({key:te.key,value:te.value,valueSpec:o,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec})}}});return h==="identity"&&C&&q.push(new mt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||q.push(new mt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!Vu(c.valueSpec)&&q.push(new mt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(D&&!Wl(c.valueSpec)?q.push(new mt(c.key,c.value,"property functions not supported")):C&&!tf(c.valueSpec)&&q.push(new mt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!N||c.value.property!==void 0||q.push(new mt(c.key,c.value,'"property" property is required')),q;function H(te){let oe=[];const ue=te.value,ye=te.key;if(Mr(ue)!=="array")return[new mt(ye,ue,`array expected, ${Mr(ue)} found`)];if(ue.length!==2)return[new mt(ye,ue,`array length 2 expected, length ${ue.length} found`)];if(N){if(Mr(ue[0])!=="object")return[new mt(ye,ue,`object expected, ${Mr(ue[0])} found`)];if(ue[0].zoom===void 0)return[new mt(ye,ue,"object stop key must have zoom")];if(ue[0].value===void 0)return[new mt(ye,ue,"object stop key must have value")];if(A&&A>kn(ue[0].zoom))return[new mt(ye,ue[0].zoom,"stop zoom values must appear in ascending order")];kn(ue[0].zoom)!==A&&(A=kn(ue[0].zoom),x=void 0,k={}),oe=oe.concat(Qi({key:`${ye}[0]`,value:ue[0],valueSpec:{zoom:{}},validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec,objectElementValidators:{zoom:Do,value:Y}}))}else oe=oe.concat(Y({key:`${ye}[0]`,value:ue[0],validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec},ue));return Ms(za(ue[1]))?oe.concat([new mt(`${ye}[1]`,ue[1],"expressions are not allowed in function stops.")]):oe.concat(te.validateSpec({key:`${ye}[1]`,value:ue[1],valueSpec:o,validateSpec:te.validateSpec,style:te.style,styleSpec:te.styleSpec}))}function Y(te,oe){const ue=Mr(te.value),ye=kn(te.value),we=te.value!==null?te.value:oe;if(g){if(ue!==g)return[new mt(te.key,we,`${ue} stop domain type must match previous stop domain type ${g}`)]}else g=ue;if(ue!=="number"&&ue!=="string"&&ue!=="boolean")return[new mt(te.key,we,"stop domain value must be a number, string, or boolean")];if(ue!=="number"&&h!=="categorical"){let Be=`number expected, ${ue} found`;return Wl(o)&&h===void 0&&(Be+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mt(te.key,we,Be)]}return h!=="categorical"||ue!=="number"||isFinite(ye)&&Math.floor(ye)===ye?h!=="categorical"&&ue==="number"&&x!==void 0&&ye<x?[new mt(te.key,we,"stop domain values must appear in ascending order")]:(x=ye,h==="categorical"&&ye in k?[new mt(te.key,we,"stop domain values must be unique")]:(k[ye]=!0,[])):[new mt(te.key,we,`integer expected, found ${ye}`)]}}function Os(c){const o=(c.expressionContext==="property"?Yc:cl)(za(c.value),c.valueSpec);if(o.result==="error")return o.value.map((g=>new mt(`${c.key}${g.key}`,c.value,g.message)));const h=o.value.expression||o.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new mt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Co(h))return[new mt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Co(h))return[new mt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Ko(h,["zoom","feature-state"]))return[new mt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ul(h))return[new mt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Qo(c){const o=c.key,h=c.value,g=c.valueSpec,x=[];return Array.isArray(g.values)?g.values.indexOf(kn(h))===-1&&x.push(new mt(o,h,`expected one of [${g.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(g.values).indexOf(kn(h))===-1&&x.push(new mt(o,h,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(h)} found`)),x}function of(c){return Jc(za(c.value))?Os(io({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Is(c)}function Is(c){const o=c.value,h=c.key;if(Mr(o)!=="array")return[new mt(h,o,`array expected, ${Mr(o)} found`)];const g=c.styleSpec;let x,A=[];if(o.length<1)return[new mt(h,o,"filter array must have at least 1 element")];switch(A=A.concat(Qo({key:`${h}[0]`,value:o[0],valueSpec:g.filter_operator,style:c.style,styleSpec:c.styleSpec})),kn(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&kn(o[1])==="$type"&&A.push(new mt(h,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&A.push(new mt(h,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(x=Mr(o[1]),x!=="string"&&A.push(new mt(`${h}[1]`,o[1],`string expected, ${x} found`)));for(let k=2;k<o.length;k++)x=Mr(o[k]),kn(o[1])==="$type"?A=A.concat(Qo({key:`${h}[${k}]`,value:o[k],valueSpec:g.geometry_type,style:c.style,styleSpec:c.styleSpec})):x!=="string"&&x!=="number"&&x!=="boolean"&&A.push(new mt(`${h}[${k}]`,o[k],`string, number, or boolean expected, ${x} found`));break;case"any":case"all":case"none":for(let k=1;k<o.length;k++)A=A.concat(Is({key:`${h}[${k}]`,value:o[k],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":x=Mr(o[1]),o.length!==2?A.push(new mt(h,o,`filter array for "${o[0]}" operator must have 2 elements`)):x!=="string"&&A.push(new mt(`${h}[1]`,o[1],`string expected, ${x} found`))}return A}function sf(c,o){const h=c.key,g=c.validateSpec,x=c.style,A=c.styleSpec,k=c.value,C=c.objectKey,D=A[`${o}_${c.layerType}`];if(!D)return[];const N=C.match(/^(.*)-transition$/);if(o==="paint"&&N&&D[N[1]]&&D[N[1]].transition)return g({key:h,value:k,valueSpec:A.transition,style:x,styleSpec:A});const q=c.valueSpec||D[C];if(!q)return[new mt(h,k,`unknown property "${C}"`)];let H;if(Mr(k)==="string"&&Wl(q)&&!q.tokens&&(H=/^{([^}]+)}$/.exec(k)))return[new mt(h,k,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(H[1])} }\`.`)];const Y=[];return c.layerType==="symbol"&&(C==="text-field"&&x&&!x.glyphs&&Y.push(new mt(h,k,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&qu(za(k))&&kn(k.type)==="identity"&&Y.push(new mt(h,k,'"text-font" does not support identity functions'))),Y.concat(g({key:c.key,value:k,valueSpec:q,style:x,styleSpec:A,expressionContext:"property",propertyType:o,propertyKey:C}))}function Zu(c){return sf(c,"paint")}function eh(c){return sf(c,"layout")}function nn(c){let o=[];const h=c.value,g=c.key,x=c.style,A=c.styleSpec;h.type||h.ref||o.push(new mt(g,h,'either "type" or "ref" is required'));let k=kn(h.type);const C=kn(h.ref);if(h.id){const D=kn(h.id);for(let N=0;N<c.arrayIndex;N++){const q=x.layers[N];kn(q.id)===D&&o.push(new mt(g,h.id,`duplicate layer id "${h.id}", previously used at line ${q.id.__line__}`))}}if("ref"in h){let D;["type","source","source-layer","filter","layout"].forEach((N=>{N in h&&o.push(new mt(g,h[N],`"${N}" is prohibited for ref layers`))})),x.layers.forEach((N=>{kn(N.id)===C&&(D=N)})),D?D.ref?o.push(new mt(g,h.ref,"ref cannot reference another ref layer")):k=kn(D.type):o.push(new mt(g,h.ref,`ref layer "${C}" not found`))}else if(k!=="background")if(h.source){const D=x.sources&&x.sources[h.source],N=D&&kn(D.type);D?N==="vector"&&k==="raster"?o.push(new mt(g,h.source,`layer "${h.id}" requires a raster source`)):N!=="raster-dem"&&k==="hillshade"?o.push(new mt(g,h.source,`layer "${h.id}" requires a raster-dem source`)):N==="raster"&&k!=="raster"?o.push(new mt(g,h.source,`layer "${h.id}" requires a vector source`)):N!=="vector"||h["source-layer"]?N==="raster-dem"&&k!=="hillshade"?o.push(new mt(g,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):k!=="line"||!h.paint||!h.paint["line-gradient"]||N==="geojson"&&D.lineMetrics||o.push(new mt(g,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new mt(g,h,`layer "${h.id}" must specify a "source-layer"`)):o.push(new mt(g,h.source,`source "${h.source}" not found`))}else o.push(new mt(g,h,'missing required property "source"'));return o=o.concat(Qi({key:g,value:h,valueSpec:A.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${g}.type`,value:h.type,valueSpec:A.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:h,objectKey:"type"}),filter:of,layout:D=>Qi({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":N=>eh(io({layerType:k},N))}}),paint:D=>Qi({layer:h,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":N=>Zu(io({layerType:k},N))}})}})),o}function es(c){const o=c.value,h=c.key,g=Mr(o);return g!=="string"?[new mt(h,o,`string expected, ${g} found`)]:[]}const pl={promoteId:function({key:c,value:o}){if(Mr(o)==="string")return es({key:c,value:o});{const h=[];for(const g in o)h.push(...es({key:`${c}.${g}`,value:o[g]}));return h}}};function ts(c){const o=c.value,h=c.key,g=c.styleSpec,x=c.style,A=c.validateSpec;if(!o.type)return[new mt(h,o,'"type" is required')];const k=kn(o.type);let C;switch(k){case"vector":case"raster":return C=Qi({key:h,value:o,valueSpec:g[`source_${k.replace("-","_")}`],style:c.style,styleSpec:g,objectElementValidators:pl,validateSpec:A}),C;case"raster-dem":return C=(function(D){var N;const q=(N=D.sourceName)!==null&&N!==void 0?N:"",H=D.value,Y=D.styleSpec,te=Y.source_raster_dem,oe=D.style;let ue=[];const ye=Mr(H);if(H===void 0)return ue;if(ye!=="object")return ue.push(new mt("source_raster_dem",H,`object expected, ${ye} found`)),ue;const we=kn(H.encoding)==="custom",Be=["redFactor","greenFactor","blueFactor","baseShift"],ke=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const Fe in H)!we&&Be.includes(Fe)?ue.push(new mt(Fe,H[Fe],`In "${q}": "${Fe}" is only valid when "encoding" is set to "custom". ${ke} encoding found`)):te[Fe]?ue=ue.concat(D.validateSpec({key:Fe,value:H[Fe],valueSpec:te[Fe],validateSpec:D.validateSpec,style:oe,styleSpec:Y})):ue.push(new mt(Fe,H[Fe],`unknown property "${Fe}"`));return ue})({sourceName:h,value:o,style:c.style,styleSpec:g,validateSpec:A}),C;case"geojson":if(C=Qi({key:h,value:o,valueSpec:g.source_geojson,style:x,styleSpec:g,validateSpec:A,objectElementValidators:pl}),o.cluster)for(const D in o.clusterProperties){const[N,q]=o.clusterProperties[D],H=typeof N=="string"?[N,["accumulated"],["get",D]]:N;C.push(...Os({key:`${h}.${D}.map`,value:q,expressionContext:"cluster-map"})),C.push(...Os({key:`${h}.${D}.reduce`,value:H,expressionContext:"cluster-reduce"}))}return C;case"video":return Qi({key:h,value:o,valueSpec:g.source_video,style:x,validateSpec:A,styleSpec:g});case"image":return Qi({key:h,value:o,valueSpec:g.source_image,style:x,validateSpec:A,styleSpec:g});case"canvas":return[new mt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Qo({key:`${h}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function th(c){const o=c.value,h=c.styleSpec,g=h.light,x=c.style;let A=[];const k=Mr(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new mt("light",o,`object expected, ${k} found`)]),A;for(const C in o){const D=C.match(/^(.*)-transition$/);A=A.concat(D&&g[D[1]]&&g[D[1]].transition?c.validateSpec({key:C,value:o[C],valueSpec:h.transition,validateSpec:c.validateSpec,style:x,styleSpec:h}):g[C]?c.validateSpec({key:C,value:o[C],valueSpec:g[C],validateSpec:c.validateSpec,style:x,styleSpec:h}):[new mt(C,o[C],`unknown property "${C}"`)])}return A}function Xu(c){const o=c.value,h=c.styleSpec,g=h.sky,x=c.style,A=Mr(o);if(o===void 0)return[];if(A!=="object")return[new mt("sky",o,`object expected, ${A} found`)];let k=[];for(const C in o)k=k.concat(g[C]?c.validateSpec({key:C,value:o[C],valueSpec:g[C],style:x,styleSpec:h}):[new mt(C,o[C],`unknown property "${C}"`)]);return k}function ml(c){const o=c.value,h=c.styleSpec,g=h.terrain,x=c.style;let A=[];const k=Mr(o);if(o===void 0)return A;if(k!=="object")return A=A.concat([new mt("terrain",o,`object expected, ${k} found`)]),A;for(const C in o)A=A.concat(g[C]?c.validateSpec({key:C,value:o[C],valueSpec:g[C],validateSpec:c.validateSpec,style:x,styleSpec:h}):[new mt(C,o[C],`unknown property "${C}"`)]);return A}function Kl(c){let o=[];const h=c.value,g=c.key;if(Array.isArray(h)){const x=[],A=[];for(const k in h)h[k].id&&x.includes(h[k].id)&&o.push(new mt(g,h,`all the sprites' ids must be unique, but ${h[k].id} is duplicated`)),x.push(h[k].id),h[k].url&&A.includes(h[k].url)&&o.push(new mt(g,h,`all the sprites' URLs must be unique, but ${h[k].url} is duplicated`)),A.push(h[k].url),o=o.concat(Qi({key:`${g}[${k}]`,value:h[k],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return o}return es({key:g,value:h})}const rs={"*":()=>[],array:Zl,boolean:function(c){const o=c.value,h=c.key,g=Mr(o);return g!=="boolean"?[new mt(h,o,`boolean expected, ${g} found`)]:[]},number:Do,color:function(c){const o=c.key,h=c.value,g=Mr(h);return g!=="string"?[new mt(o,h,`color expected, ${g} found`)]:cr.parse(String(h))?[]:[new mt(o,h,`color expected, "${h}" found`)]},constants:af,enum:Qo,filter:of,function:Xl,layer:nn,object:Qi,source:ts,light:th,sky:Xu,terrain:ml,projection:function(c){const o=c.value,h=c.styleSpec,g=h.projection,x=c.style,A=Mr(o);if(o===void 0)return[];if(A!=="object")return[new mt("projection",o,`object expected, ${A} found`)];let k=[];for(const C in o)k=k.concat(g[C]?c.validateSpec({key:C,value:o[C],valueSpec:g[C],style:x,styleSpec:h}):[new mt(C,o[C],`unknown property "${C}"`)]);return k},string:es,formatted:function(c){return es(c).length===0?[]:Os(c)},resolvedImage:function(c){return es(c).length===0?[]:Os(c)},padding:function(c){const o=c.key,h=c.value;if(Mr(h)==="array"){if(h.length<1||h.length>4)return[new mt(o,h,`padding requires 1 to 4 values; ${h.length} values found`)];const g={type:"number"};let x=[];for(let A=0;A<h.length;A++)x=x.concat(c.validateSpec({key:`${o}[${A}]`,value:h[A],validateSpec:c.validateSpec,valueSpec:g}));return x}return Do({key:o,value:h,valueSpec:{}})},variableAnchorOffsetCollection:function(c){const o=c.key,h=c.value,g=Mr(h),x=c.styleSpec;if(g!=="array"||h.length<1||h.length%2!=0)return[new mt(o,h,"variableAnchorOffsetCollection requires a non-empty array of even length")];let A=[];for(let k=0;k<h.length;k+=2)A=A.concat(Qo({key:`${o}[${k}]`,value:h[k],valueSpec:x.layout_symbol["text-anchor"]})),A=A.concat(Zl({key:`${o}[${k+1}]`,value:h[k+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:x}));return A},sprite:Kl};function Yl(c){const o=c.value,h=c.valueSpec,g=c.styleSpec;return c.validateSpec=Yl,h.expression&&qu(kn(o))?Xl(c):h.expression&&Ms(za(o))?Os(c):h.type&&rs[h.type]?rs[h.type](c):Qi(io({},c,{valueSpec:h.type?g[h.type]:h}))}function $d(c){const o=c.value,h=c.key,g=es(c);return g.length||(o.indexOf("{fontstack}")===-1&&g.push(new mt(h,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&g.push(new mt(h,o,'"glyphs" url must include a "{range}" token'))),g}function Ra(c,o=Ve){let h=[];return h=h.concat(Yl({key:"",value:c,valueSpec:o.$root,styleSpec:o,style:c,validateSpec:Yl,objectElementValidators:{glyphs:$d,"*":()=>[]}})),c.constants&&(h=h.concat(af({key:"constants",value:c.constants}))),Jl(h)}function co(c){return function(o){return c({...o,validateSpec:Yl})}}function Jl(c){return[].concat(c).sort(((o,h)=>o.line-h.line))}function ea(c){return function(...o){return Jl(c.apply(this,o))}}Ra.source=ea(co(ts)),Ra.sprite=ea(co(Kl)),Ra.glyphs=ea(co($d)),Ra.light=ea(co(th)),Ra.sky=ea(co(Xu)),Ra.terrain=ea(co(ml)),Ra.layer=ea(co(nn)),Ra.filter=ea(co(of)),Ra.paintProperty=ea(co(Zu)),Ra.layoutProperty=ea(co(eh));const ns=Ra,lf=ns.light,uf=ns.sky,rh=ns.paintProperty,Vd=ns.layoutProperty;function nh(c,o){let h=!1;if(o&&o.length)for(const g of o)c.fire(new Bt(new Error(g.message))),h=!0;return h}class Ql{constructor(o,h,g){const x=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const k=new Int32Array(this.arrayBuffer);o=k[0],this.d=(h=k[1])+2*(g=k[2]);for(let D=0;D<this.d*this.d;D++){const N=k[3+D],q=k[3+D+1];x.push(N===q?null:k.subarray(N,q))}const C=k[3+x.length+1];this.keys=k.subarray(k[3+x.length],C),this.bboxes=k.subarray(C),this.insert=this._insertReadonly}else{this.d=h+2*g;for(let k=0;k<this.d*this.d;k++)x.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=o,this.padding=g,this.scale=h/o,this.uid=0;const A=g/h*o;this.min=-A,this.max=o+A}insert(o,h,g,x,A){this._forEachCell(h,g,x,A,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(A)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,h,g,x,A,k){this.cells[A].push(k)}query(o,h,g,x,A){const k=this.min,C=this.max;if(o<=k&&h<=k&&C<=g&&C<=x&&!A)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(o,h,g,x,this._queryCell,D,{},A),D}}_queryCell(o,h,g,x,A,k,C,D){const N=this.cells[A];if(N!==null){const q=this.keys,H=this.bboxes;for(let Y=0;Y<N.length;Y++){const te=N[Y];if(C[te]===void 0){const oe=4*te;(D?D(H[oe+0],H[oe+1],H[oe+2],H[oe+3]):o<=H[oe+2]&&h<=H[oe+3]&&g>=H[oe+0]&&x>=H[oe+1])?(C[te]=!0,k.push(q[te])):C[te]=!1}}}}_forEachCell(o,h,g,x,A,k,C,D){const N=this._convertToCellCoord(o),q=this._convertToCellCoord(h),H=this._convertToCellCoord(g),Y=this._convertToCellCoord(x);for(let te=N;te<=H;te++)for(let oe=q;oe<=Y;oe++){const ue=this.d*oe+te;if((!D||D(this._convertFromCellCoord(te),this._convertFromCellCoord(oe),this._convertFromCellCoord(te+1),this._convertFromCellCoord(oe+1)))&&A.call(this,o,h,g,x,ue,k,C,D))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,h=3+this.cells.length+1+1;let g=0;for(let k=0;k<this.cells.length;k++)g+=this.cells[k].length;const x=new Int32Array(h+g+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;let A=h;for(let k=0;k<o.length;k++){const C=o[k];x[3+k]=A,x.set(C,A),A+=C.length}return x[3+o.length]=A,x.set(this.keys,A),A+=this.keys.length,x[3+o.length+1]=A,x.set(this.bboxes,A),A+=this.bboxes.length,x.buffer}static serialize(o,h){const g=o.toArrayBuffer();return h&&h.push(g),{buffer:g}}static deserialize(o){return new Ql(o.buffer)}}const La={};function Ot(c,o,h={}){if(La[c])throw new Error(`${c} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:c,writeable:!1}),La[c]={klass:o,omit:h.omit||[],shallow:h.shallow||[]}}Ot("Object",Object),Ot("TransferableGridIndex",Ql),Ot("Color",cr),Ot("Error",Error),Ot("AJAXError",or),Ot("ResolvedImage",Si),Ot("StylePropertyFunction",Cs),Ot("StyleExpression",Ji,{omit:["_evaluator"]}),Ot("ZoomDependentExpression",fl),Ot("ZoomConstantExpression",hl),Ot("CompoundExpression",va,{omit:["_evaluate"]});for(const c in ll)ll[c]._classRegistryKey||Ot(`Expression_${c}`,ll[c]);function ho(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function ih(c){return c.$name||c.constructor._classRegistryKey}function gl(c){return!(function(o){if(o===null||typeof o!="object")return!1;const h=ih(o);return!(!h||h==="Object")})(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||ho(c)||Qe(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Li(c,o){if(gl(c))return(ho(c)||Qe(c))&&o&&o.push(c),ArrayBuffer.isView(c)&&o&&o.push(c.buffer),c instanceof ImageData&&o&&o.push(c.data.buffer),c;if(Array.isArray(c)){const A=[];for(const k of c)A.push(Li(k,o));return A}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const h=ih(c);if(!h)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!La[h])throw new Error(`${h} is not registered.`);const{klass:g}=La[h],x=g.serialize?g.serialize(c,o):{};if(g.serialize){if(o&&x===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const A in c){if(!c.hasOwnProperty(A)||La[h].omit.indexOf(A)>=0)continue;const k=c[A];x[A]=La[h].shallow.indexOf(A)>=0?k:Li(k,o)}c instanceof Error&&(x.message=c.message)}if(x.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(x.$name=h),x}function zo(c){if(gl(c))return c;if(Array.isArray(c))return c.map(zo);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const o=ih(c)||"Object";if(!La[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:h}=La[o];if(!h)throw new Error(`can't deserialize unregistered class ${o}`);if(h.deserialize)return h.deserialize(c);const g=Object.create(h.prototype);for(const x of Object.keys(c)){if(x==="$name")continue;const A=c[x];g[x]=La[o].shallow.indexOf(x)>=0?A:zo(A)}return g}class fo{constructor(){this.first=!0}update(o,h){const g=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=h),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=g,!0))}}const Pr={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function cf(c){for(const o of c)if(Ju(o.charCodeAt(0)))return!0;return!1}function zm(c){for(const o of c)if(!po(o.charCodeAt(0)))return!1;return!0}function is(c){const o=c.map((h=>{try{return new RegExp(`\\p{sc=${h}}`,"u").source}catch{return null}})).filter((h=>h));return new RegExp(o.join("|"),"u")}const Ku=is(["Arab","Dupl","Mong","Ougr","Syrc"]);function po(c){return!Ku.test(String.fromCodePoint(c))}const Yu=is(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ju(c){return!(c!==746&&c!==747&&(c<4352||!(Pr["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Pr["CJK Compatibility"](c)||Pr["CJK Strokes"](c)||!(!Pr["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Pr["Enclosed CJK Letters and Months"](c)||Pr["Ideographic Description Characters"](c)||Pr.Kanbun(c)||Pr.Katakana(c)&&c!==12540||!(!Pr["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Pr["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Pr["Vertical Forms"](c)||Pr["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Yu.test(String.fromCodePoint(c)))))}function yl(c){return!(Ju(c)||(function(o){return!!(Pr["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||Pr["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||Pr["Letterlike Symbols"](o)||Pr["Number Forms"](o)||Pr["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||Pr["Control Pictures"](o)&&o!==9251||Pr["Optical Character Recognition"](o)||Pr["Enclosed Alphanumerics"](o)||Pr["Geometric Shapes"](o)||Pr["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||Pr["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||Pr["CJK Symbols and Punctuation"](o)||Pr.Katakana(o)||Pr["Private Use Area"](o)||Pr["CJK Compatibility Forms"](o)||Pr["Small Form Variants"](o)||Pr["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)})(c))}const Ds=is(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function an(c){return Ds.test(String.fromCodePoint(c))}function fn(c,o){return!(!o&&an(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Pr.Khmer(c))}function zs(c){for(const o of c)if(an(o.charCodeAt(0)))return!0;return!1}const Kr=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class kr{constructor(o,h){this.zoom=o,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new fo,this.transition={})}isSupportedScript(o){return(function(h,g){for(const x of h)if(!fn(x.charCodeAt(0),g))return!1;return!0})(o,Kr.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,h=o-Math.floor(o),g=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*h}}}class Fa{constructor(o,h){this.property=o,this.value=h,this.expression=(function(g,x){if(qu(g))return new Cs(g,x);if(Ms(g)){const A=Yc(g,x);if(A.result==="error")throw new Error(A.value.map((k=>`${k.key}: ${k.message}`)).join(", "));return A.value}{let A=g;return x.type==="color"&&typeof g=="string"?A=cr.parse(g):x.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(g)&&(A=ga.parse(g)):A=wi.parse(g),{kind:"constant",evaluate:()=>A}}})(h===void 0?o.specification.default:h,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,h,g){return this.property.possiblyEvaluate(this,o,h,g)}}class as{constructor(o){this.property=o,this.value=new Fa(o,void 0)}transitioned(o,h){return new Qu(this.property,this.value,h,ie({},o.transition,this.transition),o.now)}untransitioned(){return new Qu(this.property,this.value,null,{},0)}}class pi{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return de(this._values[o].value.value)}setValue(o,h){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new as(this._values[o].property)),this._values[o].value=new Fa(this._values[o].property,h===null?void 0:de(h))}getTransition(o){return de(this._values[o].transition)}setTransition(o,h){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new as(this._values[o].property)),this._values[o].transition=de(h)||void 0}serialize(){const o={};for(const h of Object.keys(this._values)){const g=this.getValue(h);g!==void 0&&(o[h]=g);const x=this.getTransition(h);x!==void 0&&(o[`${h}-transition`]=x)}return o}transitioned(o,h){const g=new eu(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].transitioned(o,h._values[x]);return g}untransitioned(){const o=new eu(this._properties);for(const h of Object.keys(this._values))o._values[h]=this._values[h].untransitioned();return o}}class Qu{constructor(o,h,g,x,A){this.property=o,this.value=h,this.begin=A+x.delay||0,this.end=this.begin+x.duration||0,o.specification.transition&&(x.delay||x.duration)&&(this.prior=g)}possiblyEvaluate(o,h,g){const x=o.now||0,A=this.value.possiblyEvaluate(o,h,g),k=this.prior;if(k){if(x>this.end)return this.prior=null,A;if(this.value.isDataDriven())return this.prior=null,A;if(x<this.begin)return k.possiblyEvaluate(o,h,g);{const C=(x-this.begin)/(this.end-this.begin);return this.property.interpolate(k.possiblyEvaluate(o,h,g),A,(function(D){if(D<=0)return 0;if(D>=1)return 1;const N=D*D,q=N*D;return 4*(D<.5?q:3*(D-N)+q-.75)})(C))}}return A}}class eu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,h,g){const x=new ru(this._properties);for(const A of Object.keys(this._values))x._values[A]=this._values[A].possiblyEvaluate(o,h,g);return x}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class tu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return de(this._values[o].value)}setValue(o,h){this._values[o]=new Fa(this._values[o].property,h===null?void 0:de(h))}serialize(){const o={};for(const h of Object.keys(this._values)){const g=this.getValue(h);g!==void 0&&(o[h]=g)}return o}possiblyEvaluate(o,h,g){const x=new ru(this._properties);for(const A of Object.keys(this._values))x._values[A]=this._values[A].possiblyEvaluate(o,h,g);return x}}class _a{constructor(o,h,g){this.property=o,this.value=h,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,h,g,x){return this.property.evaluate(this.value,this.parameters,o,h,g,x)}}class ru{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class It{constructor(o){this.specification=o}possiblyEvaluate(o,h){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(h)}interpolate(o,h,g){const x=jn[this.specification.type];return x?x(o,h,g):o}}class Yt{constructor(o,h){this.specification=o,this.overrides=h}possiblyEvaluate(o,h,g,x){return new _a(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(h,null,{},g,x)}:o.expression,h)}interpolate(o,h,g){if(o.value.kind!=="constant"||h.value.kind!=="constant")return o;if(o.value.value===void 0||h.value.value===void 0)return new _a(this,{kind:"constant",value:void 0},o.parameters);const x=jn[this.specification.type];if(x){const A=x(o.value.value,h.value.value,g);return new _a(this,{kind:"constant",value:A},o.parameters)}return o}evaluate(o,h,g,x,A,k){return o.kind==="constant"?o.value:o.evaluate(h,g,x,A,k)}}class nu extends Yt{possiblyEvaluate(o,h,g,x){if(o.value===void 0)return new _a(this,{kind:"constant",value:void 0},h);if(o.expression.kind==="constant"){const A=o.expression.evaluate(h,null,{},g,x),k=o.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,C=this._calculate(k,k,k,h);return new _a(this,{kind:"constant",value:C},h)}if(o.expression.kind==="camera"){const A=this._calculate(o.expression.evaluate({zoom:h.zoom-1}),o.expression.evaluate({zoom:h.zoom}),o.expression.evaluate({zoom:h.zoom+1}),h);return new _a(this,{kind:"constant",value:A},h)}return new _a(this,o.expression,h)}evaluate(o,h,g,x,A,k){if(o.kind==="source"){const C=o.evaluate(h,g,x,A,k);return this._calculate(C,C,C,h)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(h.zoom)-1},g,x),o.evaluate({zoom:Math.floor(h.zoom)},g,x),o.evaluate({zoom:Math.floor(h.zoom)+1},g,x),h):o.value}_calculate(o,h,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:o,to:h}:{from:g,to:h}}interpolate(o){return o}}class ec{constructor(o){this.specification=o}possiblyEvaluate(o,h,g,x){if(o.value!==void 0){if(o.expression.kind==="constant"){const A=o.expression.evaluate(h,null,{},g,x);return this._calculate(A,A,A,h)}return this._calculate(o.expression.evaluate(new kr(Math.floor(h.zoom-1),h)),o.expression.evaluate(new kr(Math.floor(h.zoom),h)),o.expression.evaluate(new kr(Math.floor(h.zoom+1),h)),h)}}_calculate(o,h,g,x){return x.zoom>x.zoomHistory.lastIntegerZoom?{from:o,to:h}:{from:g,to:h}}interpolate(o){return o}}class hf{constructor(o){this.specification=o}possiblyEvaluate(o,h,g,x){return!!o.expression.evaluate(h,null,{},g,x)}interpolate(){return!1}}class P{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in o){const g=o[h];g.specification.overridable&&this.overridableProperties.push(h);const x=this.defaultPropertyValues[h]=new Fa(g,void 0),A=this.defaultTransitionablePropertyValues[h]=new as(g);this.defaultTransitioningPropertyValues[h]=A.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=x.possiblyEvaluate({})}}}Ot("DataDrivenProperty",Yt),Ot("DataConstantProperty",It),Ot("CrossFadedDataDrivenProperty",nu),Ot("CrossFadedProperty",ec),Ot("ColorRampProperty",hf);const a="-transition";class d extends Er{constructor(o,h){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),h.layout&&(this._unevaluatedLayout=new tu(h.layout)),h.paint)){this._transitionablePaint=new pi(h.paint);for(const g in o.paint)this.setPaintProperty(g,o.paint[g],{validate:!1});for(const g in o.layout)this.setLayoutProperty(g,o.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ru(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,h,g={}){h!=null&&this._validate(Vd,`layers.${this.id}.layout.${o}`,o,h,g)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,h):this.visibility=h)}getPaintProperty(o){return o.endsWith(a)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,h,g={}){if(h!=null&&this._validate(rh,`layers.${this.id}.paint.${o}`,o,h,g))return!1;if(o.endsWith(a))return this._transitionablePaint.setTransition(o.slice(0,-11),h||void 0),!1;{const x=this._transitionablePaint._values[o],A=x.property.specification["property-type"]==="cross-faded-data-driven",k=x.value.isDataDriven(),C=x.value;this._transitionablePaint.setValue(o,h),this._handleSpecialPaintPropertyUpdate(o);const D=this._transitionablePaint._values[o].value;return D.isDataDriven()||k||A||this._handleOverridablePaintPropertyUpdate(o,C,D)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,h,g){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,h){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,h)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Re(o,((h,g)=>!(h===void 0||g==="layout"&&!Object.keys(h).length||g==="paint"&&!Object.keys(h).length)))}_validate(o,h,g,x,A={}){return(!A||A.validate!==!1)&&nh(this,o.call(ns,{key:h,layerType:this.type,objectKey:g,value:x,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const h=this.paint.get(o);if(h instanceof _a&&Wl(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class _{constructor(o,h){this._structArray=o,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class T{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,h){return o._trim(),h&&(o.isTransferred=!0,h.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const h=Object.create(this.prototype);return h.arrayBuffer=o.arrayBuffer,h.length=o.length,h.capacity=o.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function O(c,o=1){let h=0,g=0;return{members:c.map((x=>{const A=v[x.type].BYTES_PER_ELEMENT,k=h=z(h,Math.max(o,A)),C=x.components||1;return g=Math.max(g,A),h+=A*C,{name:x.name,type:x.type,components:C,offset:k}})),size:z(h,Math.max(g,o)),alignment:o}}function z(c,o){return Math.ceil(c/o)*o}class B extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const x=2*o;return this.int16[x+0]=h,this.int16[x+1]=g,o}}B.prototype.bytesPerElement=4,Ot("StructArrayLayout2i4",B);class V extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,h,g)}emplace(o,h,g,x){const A=3*o;return this.int16[A+0]=h,this.int16[A+1]=g,this.int16[A+2]=x,o}}V.prototype.bytesPerElement=6,Ot("StructArrayLayout3i6",V);class G extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x){const A=this.length;return this.resize(A+1),this.emplace(A,o,h,g,x)}emplace(o,h,g,x,A){const k=4*o;return this.int16[k+0]=h,this.int16[k+1]=g,this.int16[k+2]=x,this.int16[k+3]=A,o}}G.prototype.bytesPerElement=8,Ot("StructArrayLayout4i8",G);class Z extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k){const C=this.length;return this.resize(C+1),this.emplace(C,o,h,g,x,A,k)}emplace(o,h,g,x,A,k,C){const D=6*o;return this.int16[D+0]=h,this.int16[D+1]=g,this.int16[D+2]=x,this.int16[D+3]=A,this.int16[D+4]=k,this.int16[D+5]=C,o}}Z.prototype.bytesPerElement=12,Ot("StructArrayLayout2i4i12",Z);class ne extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k){const C=this.length;return this.resize(C+1),this.emplace(C,o,h,g,x,A,k)}emplace(o,h,g,x,A,k,C){const D=4*o,N=8*o;return this.int16[D+0]=h,this.int16[D+1]=g,this.uint8[N+4]=x,this.uint8[N+5]=A,this.uint8[N+6]=k,this.uint8[N+7]=C,o}}ne.prototype.bytesPerElement=8,Ot("StructArrayLayout2i4ub8",ne);class se extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const x=2*o;return this.float32[x+0]=h,this.float32[x+1]=g,o}}se.prototype.bytesPerElement=8,Ot("StructArrayLayout2f8",se);class ce extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k,C,D,N,q){const H=this.length;return this.resize(H+1),this.emplace(H,o,h,g,x,A,k,C,D,N,q)}emplace(o,h,g,x,A,k,C,D,N,q,H){const Y=10*o;return this.uint16[Y+0]=h,this.uint16[Y+1]=g,this.uint16[Y+2]=x,this.uint16[Y+3]=A,this.uint16[Y+4]=k,this.uint16[Y+5]=C,this.uint16[Y+6]=D,this.uint16[Y+7]=N,this.uint16[Y+8]=q,this.uint16[Y+9]=H,o}}ce.prototype.bytesPerElement=20,Ot("StructArrayLayout10ui20",ce);class fe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k,C,D,N,q,H,Y){const te=this.length;return this.resize(te+1),this.emplace(te,o,h,g,x,A,k,C,D,N,q,H,Y)}emplace(o,h,g,x,A,k,C,D,N,q,H,Y,te){const oe=12*o;return this.int16[oe+0]=h,this.int16[oe+1]=g,this.int16[oe+2]=x,this.int16[oe+3]=A,this.uint16[oe+4]=k,this.uint16[oe+5]=C,this.uint16[oe+6]=D,this.uint16[oe+7]=N,this.int16[oe+8]=q,this.int16[oe+9]=H,this.int16[oe+10]=Y,this.int16[oe+11]=te,o}}fe.prototype.bytesPerElement=24,Ot("StructArrayLayout4i4ui4i24",fe);class ge extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,h,g)}emplace(o,h,g,x){const A=3*o;return this.float32[A+0]=h,this.float32[A+1]=g,this.float32[A+2]=x,o}}ge.prototype.bytesPerElement=12,Ot("StructArrayLayout3f12",ge);class xe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.uint32[1*o+0]=h,o}}xe.prototype.bytesPerElement=4,Ot("StructArrayLayout1ul4",xe);class Pe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k,C,D,N){const q=this.length;return this.resize(q+1),this.emplace(q,o,h,g,x,A,k,C,D,N)}emplace(o,h,g,x,A,k,C,D,N,q){const H=10*o,Y=5*o;return this.int16[H+0]=h,this.int16[H+1]=g,this.int16[H+2]=x,this.int16[H+3]=A,this.int16[H+4]=k,this.int16[H+5]=C,this.uint32[Y+3]=D,this.uint16[H+8]=N,this.uint16[H+9]=q,o}}Pe.prototype.bytesPerElement=20,Ot("StructArrayLayout6i1ul2ui20",Pe);class pe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k){const C=this.length;return this.resize(C+1),this.emplace(C,o,h,g,x,A,k)}emplace(o,h,g,x,A,k,C){const D=6*o;return this.int16[D+0]=h,this.int16[D+1]=g,this.int16[D+2]=x,this.int16[D+3]=A,this.int16[D+4]=k,this.int16[D+5]=C,o}}pe.prototype.bytesPerElement=12,Ot("StructArrayLayout2i2i2i12",pe);class Me extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A){const k=this.length;return this.resize(k+1),this.emplace(k,o,h,g,x,A)}emplace(o,h,g,x,A,k){const C=4*o,D=8*o;return this.float32[C+0]=h,this.float32[C+1]=g,this.float32[C+2]=x,this.int16[D+6]=A,this.int16[D+7]=k,o}}Me.prototype.bytesPerElement=16,Ot("StructArrayLayout2f1f2i16",Me);class ze extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k){const C=this.length;return this.resize(C+1),this.emplace(C,o,h,g,x,A,k)}emplace(o,h,g,x,A,k,C){const D=16*o,N=4*o,q=8*o;return this.uint8[D+0]=h,this.uint8[D+1]=g,this.float32[N+1]=x,this.float32[N+2]=A,this.int16[q+6]=k,this.int16[q+7]=C,o}}ze.prototype.bytesPerElement=16,Ot("StructArrayLayout2ub2f2i16",ze);class qe extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,h,g)}emplace(o,h,g,x){const A=3*o;return this.uint16[A+0]=h,this.uint16[A+1]=g,this.uint16[A+2]=x,o}}qe.prototype.bytesPerElement=6,Ot("StructArrayLayout3ui6",qe);class ot extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we){const Be=this.length;return this.resize(Be+1),this.emplace(Be,o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we)}emplace(o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we,Be){const ke=24*o,Fe=12*o,rt=48*o;return this.int16[ke+0]=h,this.int16[ke+1]=g,this.uint16[ke+2]=x,this.uint16[ke+3]=A,this.uint32[Fe+2]=k,this.uint32[Fe+3]=C,this.uint32[Fe+4]=D,this.uint16[ke+10]=N,this.uint16[ke+11]=q,this.uint16[ke+12]=H,this.float32[Fe+7]=Y,this.float32[Fe+8]=te,this.uint8[rt+36]=oe,this.uint8[rt+37]=ue,this.uint8[rt+38]=ye,this.uint32[Fe+10]=we,this.int16[ke+22]=Be,o}}ot.prototype.bytesPerElement=48,Ot("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ot);class pt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we,Be,ke,Fe,rt,ut,Ct,tr,Mt,Pt,Ut,Lt){const zt=this.length;return this.resize(zt+1),this.emplace(zt,o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we,Be,ke,Fe,rt,ut,Ct,tr,Mt,Pt,Ut,Lt)}emplace(o,h,g,x,A,k,C,D,N,q,H,Y,te,oe,ue,ye,we,Be,ke,Fe,rt,ut,Ct,tr,Mt,Pt,Ut,Lt,zt){const at=32*o,Gt=16*o;return this.int16[at+0]=h,this.int16[at+1]=g,this.int16[at+2]=x,this.int16[at+3]=A,this.int16[at+4]=k,this.int16[at+5]=C,this.int16[at+6]=D,this.int16[at+7]=N,this.uint16[at+8]=q,this.uint16[at+9]=H,this.uint16[at+10]=Y,this.uint16[at+11]=te,this.uint16[at+12]=oe,this.uint16[at+13]=ue,this.uint16[at+14]=ye,this.uint16[at+15]=we,this.uint16[at+16]=Be,this.uint16[at+17]=ke,this.uint16[at+18]=Fe,this.uint16[at+19]=rt,this.uint16[at+20]=ut,this.uint16[at+21]=Ct,this.uint16[at+22]=tr,this.uint32[Gt+12]=Mt,this.float32[Gt+13]=Pt,this.float32[Gt+14]=Ut,this.uint16[at+30]=Lt,this.uint16[at+31]=zt,o}}pt.prototype.bytesPerElement=64,Ot("StructArrayLayout8i15ui1ul2f2ui64",pt);class _t extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.float32[1*o+0]=h,o}}_t.prototype.bytesPerElement=4,Ot("StructArrayLayout1f4",_t);class kt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,h,g)}emplace(o,h,g,x){const A=3*o;return this.uint16[6*o+0]=h,this.float32[A+1]=g,this.float32[A+2]=x,o}}kt.prototype.bytesPerElement=12,Ot("StructArrayLayout1ui2f12",kt);class xt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,o,h,g)}emplace(o,h,g,x){const A=4*o;return this.uint32[2*o+0]=h,this.uint16[A+2]=g,this.uint16[A+3]=x,o}}xt.prototype.bytesPerElement=8,Ot("StructArrayLayout1ul2ui8",xt);class yt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,h){const g=this.length;return this.resize(g+1),this.emplace(g,o,h)}emplace(o,h,g){const x=2*o;return this.uint16[x+0]=h,this.uint16[x+1]=g,o}}yt.prototype.bytesPerElement=4,Ot("StructArrayLayout2ui4",yt);class Rt extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const h=this.length;return this.resize(h+1),this.emplace(h,o)}emplace(o,h){return this.uint16[1*o+0]=h,o}}Rt.prototype.bytesPerElement=2,Ot("StructArrayLayout1ui2",Rt);class ar extends T{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,h,g,x){const A=this.length;return this.resize(A+1),this.emplace(A,o,h,g,x)}emplace(o,h,g,x,A){const k=4*o;return this.float32[k+0]=h,this.float32[k+1]=g,this.float32[k+2]=x,this.float32[k+3]=A,o}}ar.prototype.bytesPerElement=16,Ot("StructArrayLayout4f16",ar);class wt extends _{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new S(this.anchorPointX,this.anchorPointY)}}wt.prototype.size=20;class Tt extends Pe{get(o){return new wt(this,o)}}Ot("CollisionBoxArray",Tt);class ir extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ir.prototype.size=48;class Zr extends ot{get(o){return new ir(this,o)}}Ot("PlacedSymbolArray",Zr);class dr extends _{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}dr.prototype.size=64;class vr extends pt{get(o){return new dr(this,o)}}Ot("SymbolInstanceArray",vr);class Yr extends _t{getoffsetX(o){return this.float32[1*o+0]}}Ot("GlyphOffsetArray",Yr);class oi extends V{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}Ot("SymbolLineVertexArray",oi);class xa extends _{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}xa.prototype.size=12;class Jr extends kt{get(o){return new xa(this,o)}}Ot("TextAnchorOffsetArray",Jr);class Yn extends _{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Yn.prototype.size=8;class dn extends xt{get(o){return new Yn(this,o)}}Ot("FeatureIndexArray",dn);class In extends B{}class mi extends B{}class mo extends B{}class ta extends Z{}class go extends ne{}class Rs extends se{}class ba extends ce{}class ja extends fe{}class Ro extends ge{}class Fi extends xe{}class wa extends pe{}class yo extends ze{}class Ba extends qe{}class Bn extends yt{}const vn=O([{name:"a_pos",components:2,type:"Int16"}],4),{members:gi}=vn;class wr{constructor(o=[]){this.segments=o}prepareSegment(o,h,g,x){let A=this.segments[this.segments.length-1];return o>wr.MAX_VERTEX_ARRAY_LENGTH&&Le(`Max vertices per segment is ${wr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!A||A.vertexLength+o>wr.MAX_VERTEX_ARRAY_LENGTH||A.sortKey!==x)&&(A={vertexOffset:h.length,primitiveOffset:g.length,vertexLength:0,primitiveLength:0},x!==void 0&&(A.sortKey=x),this.segments.push(A)),A}get(){return this.segments}destroy(){for(const o of this.segments)for(const h in o.vaos)o.vaos[h].destroy()}static simpleSegment(o,h,g,x){return new wr([{vertexOffset:o,primitiveOffset:h,vertexLength:g,primitiveLength:x,vaos:{},sortKey:0}])}}function Sa(c,o){return 256*(c=W(Math.floor(c),0,255))+W(Math.floor(o),0,255)}wr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ot("SegmentVector",wr);const Ls=O([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var vo={exports:{}},ff={exports:{}};ff.exports=function(c,o){var h,g,x,A,k,C,D,N;for(g=c.length-(h=3&c.length),x=o,k=3432918353,C=461845907,N=0;N<g;)D=255&c.charCodeAt(N)|(255&c.charCodeAt(++N))<<8|(255&c.charCodeAt(++N))<<16|(255&c.charCodeAt(++N))<<24,++N,x=27492+(65535&(A=5*(65535&(x=(x^=D=(65535&(D=(D=(65535&D)*k+(((D>>>16)*k&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(D=0,h){case 3:D^=(255&c.charCodeAt(N+2))<<16;case 2:D^=(255&c.charCodeAt(N+1))<<8;case 1:x^=D=(65535&(D=(D=(65535&(D^=255&c.charCodeAt(N)))*k+(((D>>>16)*k&65535)<<16)&4294967295)<<15|D>>>17))*C+(((D>>>16)*C&65535)<<16)&4294967295}return x^=c.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0};var df=ff.exports,wn={exports:{}};wn.exports=function(c,o){for(var h,g=c.length,x=o^g,A=0;g>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(A)|(255&c.charCodeAt(++A))<<8|(255&c.charCodeAt(++A))<<16|(255&c.charCodeAt(++A))<<24))+((1540483477*(h>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),g-=4,++A;switch(g){case 3:x^=(255&c.charCodeAt(A+2))<<16;case 2:x^=(255&c.charCodeAt(A+1))<<8;case 1:x=1540483477*(65535&(x^=255&c.charCodeAt(A)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0};var _o=df,ah=wn.exports;vo.exports=_o,vo.exports.murmur3=_o,vo.exports.murmur2=ah;var iu=m(vo.exports);class Fs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,h,g,x){this.ids.push(au(o)),this.positions.push(h,g,x)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=au(o);let g=0,x=this.ids.length-1;for(;g<x;){const k=g+x>>1;this.ids[k]>=h?x=k:g=k+1}const A=[];for(;this.ids[g]===h;)A.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return A}static serialize(o,h){const g=new Float64Array(o.ids),x=new Uint32Array(o.positions);return Lo(g,x,0,g.length-1),h&&h.push(g.buffer,x.buffer),{ids:g,positions:x}}static deserialize(o){const h=new Fs;return h.ids=o.ids,h.positions=o.positions,h.indexed=!0,h}}function au(c){const o=+c;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:iu(String(c))}function Lo(c,o,h,g){for(;h<g;){const x=c[h+g>>1];let A=h-1,k=g+1;for(;;){do A++;while(c[A]<x);do k--;while(c[k]>x);if(A>=k)break;Qr(c,A,k),Qr(o,3*A,3*k),Qr(o,3*A+1,3*k+1),Qr(o,3*A+2,3*k+2)}k-h<g-k?(Lo(c,o,h,k),h=k+1):(Lo(c,o,k+1,g),g=k)}}function Qr(c,o,h){const g=c[o];c[o]=c[h],c[h]=g}Ot("FeaturePositionMap",Fs);class En{constructor(o,h){this.gl=o.gl,this.location=h}}class Jn extends En{constructor(o,h){super(o,h),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class pf extends En{constructor(o,h){super(o,h),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class oh extends En{constructor(o,h){super(o,h),this.current=cr.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const mf=new Float32Array(16);function Rm(c){return[Sa(255*c.r,255*c.g),Sa(255*c.b,255*c.a)]}class si{constructor(o,h,g){this.value=o,this.uniformNames=h.map((x=>`u_${x}`)),this.type=g}setUniform(o,h,g){o.set(g.constantOr(this.value))}getBinding(o,h,g){return this.type==="color"?new oh(o,h):new Jn(o,h)}}class ou{constructor(o,h){this.uniformNames=h.map((g=>`u_${g}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=o.tlbr}setUniform(o,h,g,x){const A=x==="u_pattern_to"?this.patternTo:x==="u_pattern_from"?this.patternFrom:x==="u_pixel_ratio_to"?this.pixelRatioTo:x==="u_pixel_ratio_from"?this.pixelRatioFrom:null;A&&o.set(A)}getBinding(o,h,g){return g.substr(0,9)==="u_pattern"?new pf(o,h):new Jn(o,h)}}class os{constructor(o,h,g,x){this.expression=o,this.type=g,this.maxValue=0,this.paintVertexAttributes=h.map((A=>({name:`a_${A}`,type:"Float32",components:g==="color"?2:1,offset:0}))),this.paintVertexArray=new x}populatePaintArray(o,h,g,x,A){const k=this.paintVertexArray.length,C=this.expression.evaluate(new kr(0),h,{},x,[],A);this.paintVertexArray.resize(o),this._setPaintValue(k,o,C)}updatePaintArray(o,h,g,x){const A=this.expression.evaluate({zoom:0},g,x);this._setPaintValue(o,h,A)}_setPaintValue(o,h,g){if(this.type==="color"){const x=Rm(g);for(let A=o;A<h;A++)this.paintVertexArray.emplace(A,x[0],x[1])}else{for(let x=o;x<h;x++)this.paintVertexArray.emplace(x,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class xo{constructor(o,h,g,x,A,k){this.expression=o,this.uniformNames=h.map((C=>`u_${C}_t`)),this.type=g,this.useIntegerZoom=x,this.zoom=A,this.maxValue=0,this.paintVertexAttributes=h.map((C=>({name:`a_${C}`,type:"Float32",components:g==="color"?4:2,offset:0}))),this.paintVertexArray=new k}populatePaintArray(o,h,g,x,A){const k=this.expression.evaluate(new kr(this.zoom),h,{},x,[],A),C=this.expression.evaluate(new kr(this.zoom+1),h,{},x,[],A),D=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(D,o,k,C)}updatePaintArray(o,h,g,x){const A=this.expression.evaluate({zoom:this.zoom},g,x),k=this.expression.evaluate({zoom:this.zoom+1},g,x);this._setPaintValue(o,h,A,k)}_setPaintValue(o,h,g,x){if(this.type==="color"){const A=Rm(g),k=Rm(x);for(let C=o;C<h;C++)this.paintVertexArray.emplace(C,A[0],A[1],k[0],k[1])}else{for(let A=o;A<h;A++)this.paintVertexArray.emplace(A,g,x);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(x))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,h){const g=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,x=W(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);o.set(x)}getBinding(o,h,g){return new Jn(o,h)}}class ji{constructor(o,h,g,x,A,k){this.expression=o,this.type=h,this.useIntegerZoom=g,this.zoom=x,this.layerId=k,this.zoomInPaintVertexArray=new A,this.zoomOutPaintVertexArray=new A}populatePaintArray(o,h,g){const x=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(x,o,h.patterns&&h.patterns[this.layerId],g)}updatePaintArray(o,h,g,x,A){this._setPaintValues(o,h,g.patterns&&g.patterns[this.layerId],A)}_setPaintValues(o,h,g,x){if(!x||!g)return;const{min:A,mid:k,max:C}=g,D=x[A],N=x[k],q=x[C];if(D&&N&&q)for(let H=o;H<h;H++)this.zoomInPaintVertexArray.emplace(H,N.tl[0],N.tl[1],N.br[0],N.br[1],D.tl[0],D.tl[1],D.br[0],D.br[1],N.pixelRatio,D.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,N.tl[0],N.tl[1],N.br[0],N.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],N.pixelRatio,q.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Ls.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Ls.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class bo{constructor(o,h,g){this.binders={},this._buffers=[];const x=[];for(const A in o.paint._values){if(!g(A))continue;const k=o.paint.get(A);if(!(k instanceof _a&&Wl(k.property.specification)))continue;const C=Lm(A,o.type),D=k.value,N=k.property.specification.type,q=k.property.useIntegerZoom,H=k.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(D.kind==="constant")this.binders[A]=Y?new ou(D.value,C):new si(D.value,C,N),x.push(`/u_${A}`);else if(D.kind==="source"||Y){const te=qd(A,N,"source");this.binders[A]=Y?new ji(D,N,q,h,te,o.id):new os(D,C,N,te),x.push(`/a_${A}`)}else{const te=qd(A,N,"composite");this.binders[A]=new xo(D,C,N,q,h,te),x.push(`/z_${A}`)}}this.cacheKey=x.sort().join("")}getMaxValue(o){const h=this.binders[o];return h instanceof os||h instanceof xo?h.maxValue:0}populatePaintArrays(o,h,g,x,A){for(const k in this.binders){const C=this.binders[k];(C instanceof os||C instanceof xo||C instanceof ji)&&C.populatePaintArray(o,h,g,x,A)}}setConstantPatternPositions(o,h){for(const g in this.binders){const x=this.binders[g];x instanceof ou&&x.setConstantPatternPositions(o,h)}}updatePaintArrays(o,h,g,x,A){let k=!1;for(const C in o){const D=h.getPositions(C);for(const N of D){const q=g.feature(N.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof os||Y instanceof xo||Y instanceof ji)&&Y.expression.isStateDependent===!0){const te=x.paint.get(H);Y.expression=te.value,Y.updatePaintArray(N.start,N.end,q,o[C],A),k=!0}}}}return k}defines(){const o=[];for(const h in this.binders){const g=this.binders[h];(g instanceof si||g instanceof ou)&&o.push(...g.uniformNames.map((x=>`#define HAS_UNIFORM_${x}`)))}return o}getBinderAttributes(){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof os||g instanceof xo)for(let x=0;x<g.paintVertexAttributes.length;x++)o.push(g.paintVertexAttributes[x].name);else if(g instanceof ji)for(let x=0;x<Ls.members.length;x++)o.push(Ls.members[x].name)}return o}getBinderUniforms(){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof si||g instanceof ou||g instanceof xo)for(const x of g.uniformNames)o.push(x)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,h){const g=[];for(const x in this.binders){const A=this.binders[x];if(A instanceof si||A instanceof ou||A instanceof xo){for(const k of A.uniformNames)if(h[k]){const C=A.getBinding(o,h[k],k);g.push({name:k,property:x,binding:C})}}}return g}setUniforms(o,h,g,x){for(const{name:A,property:k,binding:C}of h)this.binders[k].setUniform(C,x,g.get(k),A)}updatePaintBuffers(o){this._buffers=[];for(const h in this.binders){const g=this.binders[h];if(o&&g instanceof ji){const x=o.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;x&&this._buffers.push(x)}else(g instanceof os||g instanceof xo)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(o){for(const h in this.binders){const g=this.binders[h];(g instanceof os||g instanceof xo||g instanceof ji)&&g.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const h=this.binders[o];(h instanceof os||h instanceof xo||h instanceof ji)&&h.destroy()}}}class ss{constructor(o,h,g=(()=>!0)){this.programConfigurations={};for(const x of o)this.programConfigurations[x.id]=new bo(x,h,g);this.needsUpload=!1,this._featureMap=new Fs,this._bufferOffset=0}populatePaintArrays(o,h,g,x,A,k){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(o,h,x,A,k);h.id!==void 0&&this._featureMap.add(h.id,g,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,h,g,x){for(const A of g)this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(o,this._featureMap,h,A,x)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function Lm(c,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${o}-`,"").replace(/-/g,"_")]}function qd(c,o,h){const g={color:{source:se,composite:ar},number:{source:_t,composite:se}},x=(function(A){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[A]})(c);return x&&x[h]||g[o][h]}Ot("ConstantBinder",si),Ot("CrossFadedConstantBinder",ou),Ot("SourceExpressionBinder",os),Ot("CrossFadedCompositeBinder",ji),Ot("CompositeExpressionBinder",xo),Ot("ProgramConfiguration",bo,{omit:["_buffers"]}),Ot("ProgramConfigurationSet",ss);const Nn=8192,Ud=Math.pow(2,14)-1,Fm=-Ud-1;function su(c){const o=Nn/c.extent,h=c.loadGeometry();for(let g=0;g<h.length;g++){const x=h[g];for(let A=0;A<x.length;A++){const k=x[A],C=Math.round(k.x*o),D=Math.round(k.y*o);k.x=W(C,Fm,Ud),k.y=W(D,Fm,Ud),(C<k.x||C>k.x+1||D<k.y||D>k.y+1)&&Le("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function lu(c,o){return{type:c.type,id:c.id,properties:c.properties,geometry:o?su(c):[]}}function gf(c,o,h,g,x){c.emplaceBack(2*o+(g+1)/2,2*h+(x+1)/2)}class Wd{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new mi,this.indexArray=new Ba,this.segments=new wr,this.programConfigurations=new ss(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(o,h,g){const x=this.layers[0],A=[];let k=null,C=!1;x.type==="circle"&&(k=x.layout.get("circle-sort-key"),C=!k.isConstant());for(const{feature:D,id:N,index:q,sourceLayerIndex:H}of o){const Y=this.layers[0]._featureFilter.needGeometry,te=lu(D,Y);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),te,g))continue;const oe=C?k.evaluate(te,{},g):void 0,ue={id:N,properties:D.properties,type:D.type,sourceLayerIndex:H,index:q,geometry:Y?te.geometry:su(D),patterns:{},sortKey:oe};A.push(ue)}C&&A.sort(((D,N)=>D.sortKey-N.sortKey));for(const D of A){const{geometry:N,index:q,sourceLayerIndex:H}=D,Y=o[q].feature;this.addFeature(D,N,q,g),h.featureIndex.insert(Y,N,q,H,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,gi),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,h,g,x){for(const A of h)for(const k of A){const C=k.x,D=k.y;if(C<0||C>=Nn||D<0||D>=Nn)continue;const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),q=N.vertexLength;gf(this.layoutVertexArray,C,D,-1,-1),gf(this.layoutVertexArray,C,D,1,-1),gf(this.layoutVertexArray,C,D,1,1),gf(this.layoutVertexArray,C,D,-1,1),this.indexArray.emplaceBack(q,q+1,q+2),this.indexArray.emplaceBack(q,q+3,q+2),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,{},x)}}function jm(c,o){for(let h=0;h<c.length;h++)if(tc(o,c[h]))return!0;for(let h=0;h<o.length;h++)if(tc(c,o[h]))return!0;return!!sh(c,o)}function yf(c,o,h){return!!tc(c,o)||!!vf(o,c,h)}function Bm(c,o){if(c.length===1)return $m(o,c[0]);for(let h=0;h<o.length;h++){const g=o[h];for(let x=0;x<g.length;x++)if(tc(c,g[x]))return!0}for(let h=0;h<c.length;h++)if($m(o,c[h]))return!0;for(let h=0;h<o.length;h++)if(sh(c,o[h]))return!0;return!1}function Hd(c,o,h){if(c.length>1){if(sh(c,o))return!0;for(let g=0;g<o.length;g++)if(vf(o[g],c,h))return!0}for(let g=0;g<c.length;g++)if(vf(c[g],o,h))return!0;return!1}function sh(c,o){if(c.length===0||o.length===0)return!1;for(let h=0;h<c.length-1;h++){const g=c[h],x=c[h+1];for(let A=0;A<o.length-1;A++)if(Gy(g,x,o[A],o[A+1]))return!0}return!1}function Gy(c,o,h,g){return Ge(c,h,g)!==Ge(o,h,g)&&Ge(c,o,h)!==Ge(c,o,g)}function vf(c,o,h){const g=h*h;if(o.length===1)return c.distSqr(o[0])<g;for(let x=1;x<o.length;x++)if(Nm(c,o[x-1],o[x])<g)return!0;return!1}function Nm(c,o,h){const g=o.distSqr(h);if(g===0)return c.distSqr(o);const x=((c.x-o.x)*(h.x-o.x)+(c.y-o.y)*(h.y-o.y))/g;return c.distSqr(x<0?o:x>1?h:h.sub(o)._mult(x)._add(o))}function $m(c,o){let h,g,x,A=!1;for(let k=0;k<c.length;k++){h=c[k];for(let C=0,D=h.length-1;C<h.length;D=C++)g=h[C],x=h[D],g.y>o.y!=x.y>o.y&&o.x<(x.x-g.x)*(o.y-g.y)/(x.y-g.y)+g.x&&(A=!A)}return A}function tc(c,o){let h=!1;for(let g=0,x=c.length-1;g<c.length;x=g++){const A=c[g],k=c[x];A.y>o.y!=k.y>o.y&&o.x<(k.x-A.x)*(o.y-A.y)/(k.y-A.y)+A.x&&(h=!h)}return h}function Zy(c,o,h){const g=h[0],x=h[2];if(c.x<g.x&&o.x<g.x||c.x>x.x&&o.x>x.x||c.y<g.y&&o.y<g.y||c.y>x.y&&o.y>x.y)return!1;const A=Ge(c,o,h[0]);return A!==Ge(c,o,h[1])||A!==Ge(c,o,h[2])||A!==Ge(c,o,h[3])}function rc(c,o,h){const g=o.paint.get(c).value;return g.kind==="constant"?g.value:h.programConfigurations.get(o.id).getMaxValue(c)}function _f(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function xf(c,o,h,g,x){if(!o[0]&&!o[1])return c;const A=S.convert(o)._mult(x);h==="viewport"&&A._rotate(-g);const k=[];for(let C=0;C<c.length;C++)k.push(c[C].sub(A));return k}let Vm,Xy;Ot("CircleBucket",Wd,{omit:["layers"]});var Ky={get paint(){return Xy=Xy||new P({"circle-radius":new Yt(Ve.paint_circle["circle-radius"]),"circle-color":new Yt(Ve.paint_circle["circle-color"]),"circle-blur":new Yt(Ve.paint_circle["circle-blur"]),"circle-opacity":new Yt(Ve.paint_circle["circle-opacity"]),"circle-translate":new It(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new It(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new It(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new It(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yt(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yt(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yt(Ve.paint_circle["circle-stroke-opacity"])})},get layout(){return Vm=Vm||new P({"circle-sort-key":new Yt(Ve.layout_circle["circle-sort-key"])})}},ra=1e-6,lh=typeof Float32Array<"u"?Float32Array:Array;function Gd(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function qm(c,o,h){var g=o[0],x=o[1],A=o[2],k=o[3],C=o[4],D=o[5],N=o[6],q=o[7],H=o[8],Y=o[9],te=o[10],oe=o[11],ue=o[12],ye=o[13],we=o[14],Be=o[15],ke=h[0],Fe=h[1],rt=h[2],ut=h[3];return c[0]=ke*g+Fe*C+rt*H+ut*ue,c[1]=ke*x+Fe*D+rt*Y+ut*ye,c[2]=ke*A+Fe*N+rt*te+ut*we,c[3]=ke*k+Fe*q+rt*oe+ut*Be,c[4]=(ke=h[4])*g+(Fe=h[5])*C+(rt=h[6])*H+(ut=h[7])*ue,c[5]=ke*x+Fe*D+rt*Y+ut*ye,c[6]=ke*A+Fe*N+rt*te+ut*we,c[7]=ke*k+Fe*q+rt*oe+ut*Be,c[8]=(ke=h[8])*g+(Fe=h[9])*C+(rt=h[10])*H+(ut=h[11])*ue,c[9]=ke*x+Fe*D+rt*Y+ut*ye,c[10]=ke*A+Fe*N+rt*te+ut*we,c[11]=ke*k+Fe*q+rt*oe+ut*Be,c[12]=(ke=h[12])*g+(Fe=h[13])*C+(rt=h[14])*H+(ut=h[15])*ue,c[13]=ke*x+Fe*D+rt*Y+ut*ye,c[14]=ke*A+Fe*N+rt*te+ut*we,c[15]=ke*k+Fe*q+rt*oe+ut*Be,c}Math.hypot||(Math.hypot=function(){for(var c=0,o=arguments.length;o--;)c+=arguments[o]*arguments[o];return Math.sqrt(c)});var uh,Zd=qm;function Xd(c,o,h){var g=o[0],x=o[1],A=o[2],k=o[3];return c[0]=h[0]*g+h[4]*x+h[8]*A+h[12]*k,c[1]=h[1]*g+h[5]*x+h[9]*A+h[13]*k,c[2]=h[2]*g+h[6]*x+h[10]*A+h[14]*k,c[3]=h[3]*g+h[7]*x+h[11]*A+h[15]*k,c}uh=new lh(4),lh!=Float32Array&&(uh[0]=0,uh[1]=0,uh[2]=0,uh[3]=0);class Sx extends d{constructor(o){super(o,Ky)}createBucket(o){return new Wd(o)}queryRadius(o){const h=o;return rc("circle-radius",this,h)+rc("circle-stroke-width",this,h)+_f(this.paint.get("circle-translate"))}queryIntersectsFeature(o,h,g,x,A,k,C,D){const N=xf(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),k.angle,C),q=this.paint.get("circle-radius").evaluate(h,g)+this.paint.get("circle-stroke-width").evaluate(h,g),H=this.paint.get("circle-pitch-alignment")==="map",Y=H?N:(function(oe,ue){return oe.map((ye=>Yy(ye,ue)))})(N,D),te=H?q*C:q;for(const oe of x)for(const ue of oe){const ye=H?ue:Yy(ue,D);let we=te;const Be=Xd([],[ue.x,ue.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?we*=Be[3]/k.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(we*=k.cameraToCenterDistance/Be[3]),yf(Y,ye,we))return!0}return!1}}function Yy(c,o){const h=Xd([],[c.x,c.y,0,1],o);return new S(h[0]/h[3],h[1]/h[3])}class Fo extends Wd{}let Kd;Ot("HeatmapBucket",Fo,{omit:["layers"]});var Yd={get paint(){return Kd=Kd||new P({"heatmap-radius":new Yt(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yt(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new It(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new hf(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new It(Ve.paint_heatmap["heatmap-opacity"])})}};function Jd(c,{width:o,height:h},g,x){if(x){if(x instanceof Uint8ClampedArray)x=new Uint8Array(x.buffer);else if(x.length!==o*h*g)throw new RangeError(`mismatched image size. expected: ${x.length} but got: ${o*h*g}`)}else x=new Uint8Array(o*h*g);return c.width=o,c.height=h,c.data=x,c}function Um(c,{width:o,height:h},g){if(o===c.width&&h===c.height)return;const x=Jd({},{width:o,height:h},g);Qd(c,x,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,o),height:Math.min(c.height,h)},g),c.width=o,c.height=h,c.data=x.data}function Qd(c,o,h,g,x,A){if(x.width===0||x.height===0)return o;if(x.width>c.width||x.height>c.height||h.x>c.width-x.width||h.y>c.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>o.width||x.height>o.height||g.x>o.width-x.width||g.y>o.height-x.height)throw new RangeError("out of range destination coordinates for image copy");const k=c.data,C=o.data;if(k===C)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<x.height;D++){const N=((h.y+D)*c.width+h.x)*A,q=((g.y+D)*o.width+g.x)*A;for(let H=0;H<x.width*A;H++)C[q+H]=k[N+H]}return o}class nc{constructor(o,h){Jd(this,o,1,h)}resize(o){Um(this,o,1)}clone(){return new nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,h,g,x,A){Qd(o,h,g,x,A,1)}}class Ti{constructor(o,h){Jd(this,o,4,h)}resize(o){Um(this,o,4)}replace(o,h){h?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Ti({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,h,g,x,A){Qd(o,h,g,x,A,4)}}function ep(c){const o={},h=c.resolution||256,g=c.clips?c.clips.length:1,x=c.image||new Ti({width:h,height:g});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const A=(k,C,D)=>{o[c.evaluationKey]=D;const N=c.expression.evaluate(o);x.data[k+C+0]=Math.floor(255*N.r/N.a),x.data[k+C+1]=Math.floor(255*N.g/N.a),x.data[k+C+2]=Math.floor(255*N.b/N.a),x.data[k+C+3]=Math.floor(255*N.a)};if(c.clips)for(let k=0,C=0;k<g;++k,C+=4*h)for(let D=0,N=0;D<h;D++,N+=4){const q=D/(h-1),{start:H,end:Y}=c.clips[k];A(C,N,H*(1-q)+Y*q)}else for(let k=0,C=0;k<h;k++,C+=4)A(0,C,k/(h-1));return x}Ot("AlphaImage",nc),Ot("RGBAImage",Ti);const bf="big-fb";class Tx extends d{createBucket(o){return new Fo(o)}constructor(o){super(o,Yd),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=ep({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(bf)&&this.heatmapFbos.delete(bf)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Wm;var Jy={get paint(){return Wm=Wm||new P({"hillshade-illumination-direction":new It(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new It(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new It(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new It(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new It(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new It(Ve.paint_hillshade["hillshade-accent-color"])})}};class Qy extends d{constructor(o){super(o,Jy)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const ev=O([{name:"a_pos",components:2,type:"Int16"}],4),{members:tv}=ev;function rv(c,o,h=2){const g=o&&o.length,x=g?o[0]*h:c.length;let A=Ta(c,0,x,h,!0);const k=[];if(!A||A.next===A.prev)return k;let C,D,N;if(g&&(A=(function(q,H,Y,te){const oe=[];for(let ue=0,ye=H.length;ue<ye;ue++){const we=Ta(q,H[ue]*te,ue<ye-1?H[ue+1]*te:q.length,te,!1);we===we.next&&(we.steiner=!0),oe.push(lv(we))}oe.sort(Hm);for(let ue=0;ue<oe.length;ue++)Y=sv(oe[ue],Y);return Y})(c,o,A,h)),c.length>80*h){C=1/0,D=1/0;let q=-1/0,H=-1/0;for(let Y=h;Y<x;Y+=h){const te=c[Y],oe=c[Y+1];te<C&&(C=te),oe<D&&(D=oe),te>q&&(q=te),oe>H&&(H=oe)}N=Math.max(q-C,H-D),N=N!==0?32767/N:0}return ch(A,k,h,C,D,N,0),k}function Ta(c,o,h,g,x){let A;if(x===(function(k,C,D,N){let q=0;for(let H=C,Y=D-N;H<D;H+=N)q+=(k[Y]-k[H])*(k[H+1]+k[Y+1]),Y=H;return q})(c,o,h,g)>0)for(let k=o;k<h;k+=g)A=Tf(k/g|0,c[k],c[k+1],A);else for(let k=h-g;k>=o;k-=g)A=Tf(k/g|0,c[k],c[k+1],A);return A&&hh(A,A.next)&&(wo(A),A=A.next),A}function Qn(c,o){if(!c)return c;o||(o=c);let h,g=c;do if(h=!1,g.steiner||!hh(g,g.next)&&Dn(g.prev,g,g.next)!==0)g=g.next;else{if(wo(g),g=o=g.prev,g===g.next)break;h=!0}while(h||g!==o);return o}function ch(c,o,h,g,x,A,k){if(!c)return;!k&&A&&(function(D,N,q,H){let Y=D;do Y.z===0&&(Y.z=tp(Y.x,Y.y,N,q,H)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==D);Y.prevZ.nextZ=null,Y.prevZ=null,(function(te){let oe,ue=1;do{let ye,we=te;te=null;let Be=null;for(oe=0;we;){oe++;let ke=we,Fe=0;for(let ut=0;ut<ue&&(Fe++,ke=ke.nextZ,ke);ut++);let rt=ue;for(;Fe>0||rt>0&&ke;)Fe!==0&&(rt===0||!ke||we.z<=ke.z)?(ye=we,we=we.nextZ,Fe--):(ye=ke,ke=ke.nextZ,rt--),Be?Be.nextZ=ye:te=ye,ye.prevZ=Be,Be=ye;we=ke}Be.nextZ=null,ue*=2}while(oe>1)})(Y)})(c,g,x,A);let C=c;for(;c.prev!==c.next;){const D=c.prev,N=c.next;if(A?iv(c,g,x,A):nv(c))o.push(D.i,c.i,N.i),wo(c),c=N.next,C=N.next;else if((c=N)===C){k?k===1?ch(c=av(Qn(c),o),o,h,g,x,A,2):k===2&&ov(c,o,h,g,x,A):ch(Qn(c),o,h,g,x,A,1);break}}}function nv(c){const o=c.prev,h=c,g=c.next;if(Dn(o,h,g)>=0)return!1;const x=o.x,A=h.x,k=g.x,C=o.y,D=h.y,N=g.y,q=x<A?x<k?x:k:A<k?A:k,H=C<D?C<N?C:N:D<N?D:N,Y=x>A?x>k?x:k:A>k?A:k,te=C>D?C>N?C:N:D>N?D:N;let oe=g.next;for(;oe!==o;){if(oe.x>=q&&oe.x<=Y&&oe.y>=H&&oe.y<=te&&uu(x,C,A,D,k,N,oe.x,oe.y)&&Dn(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function iv(c,o,h,g){const x=c.prev,A=c,k=c.next;if(Dn(x,A,k)>=0)return!1;const C=x.x,D=A.x,N=k.x,q=x.y,H=A.y,Y=k.y,te=C<D?C<N?C:N:D<N?D:N,oe=q<H?q<Y?q:Y:H<Y?H:Y,ue=C>D?C>N?C:N:D>N?D:N,ye=q>H?q>Y?q:Y:H>Y?H:Y,we=tp(te,oe,o,h,g),Be=tp(ue,ye,o,h,g);let ke=c.prevZ,Fe=c.nextZ;for(;ke&&ke.z>=we&&Fe&&Fe.z<=Be;){if(ke.x>=te&&ke.x<=ue&&ke.y>=oe&&ke.y<=ye&&ke!==x&&ke!==k&&uu(C,q,D,H,N,Y,ke.x,ke.y)&&Dn(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,Fe.x>=te&&Fe.x<=ue&&Fe.y>=oe&&Fe.y<=ye&&Fe!==x&&Fe!==k&&uu(C,q,D,H,N,Y,Fe.x,Fe.y)&&Dn(Fe.prev,Fe,Fe.next)>=0))return!1;Fe=Fe.nextZ}for(;ke&&ke.z>=we;){if(ke.x>=te&&ke.x<=ue&&ke.y>=oe&&ke.y<=ye&&ke!==x&&ke!==k&&uu(C,q,D,H,N,Y,ke.x,ke.y)&&Dn(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;Fe&&Fe.z<=Be;){if(Fe.x>=te&&Fe.x<=ue&&Fe.y>=oe&&Fe.y<=ye&&Fe!==x&&Fe!==k&&uu(C,q,D,H,N,Y,Fe.x,Fe.y)&&Dn(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.nextZ}return!0}function av(c,o){let h=c;do{const g=h.prev,x=h.next.next;!hh(g,x)&&wf(g,h,h.next,x)&&ic(g,x)&&ic(x,g)&&(o.push(g.i,h.i,x.i),wo(h),wo(h.next),h=c=x),h=h.next}while(h!==c);return Qn(h)}function ov(c,o,h,g,x,A){let k=c;do{let C=k.next.next;for(;C!==k.prev;){if(k.i!==C.i&&Zm(k,C)){let D=Xm(k,C);return k=Qn(k,k.next),D=Qn(D,D.next),ch(k,o,h,g,x,A,0),void ch(D,o,h,g,x,A,0)}C=C.next}k=k.next}while(k!==c)}function Hm(c,o){return c.x-o.x}function sv(c,o){const h=(function(x,A){let k=A;const C=x.x,D=x.y;let N,q=-1/0;do{if(D<=k.y&&D>=k.next.y&&k.next.y!==k.y){const ue=k.x+(D-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(ue<=C&&ue>q&&(q=ue,N=k.x<k.next.x?k:k.next,ue===C))return N}k=k.next}while(k!==A);if(!N)return null;const H=N,Y=N.x,te=N.y;let oe=1/0;k=N;do{if(C>=k.x&&k.x>=Y&&C!==k.x&&uu(D<te?C:q,D,Y,te,D<te?q:C,D,k.x,k.y)){const ue=Math.abs(D-k.y)/(C-k.x);ic(k,x)&&(ue<oe||ue===oe&&(k.x>N.x||k.x===N.x&&Gm(N,k)))&&(N=k,oe=ue)}k=k.next}while(k!==H);return N})(c,o);if(!h)return o;const g=Xm(h,c);return Qn(g,g.next),Qn(h,h.next)}function Gm(c,o){return Dn(c.prev,c,o.prev)<0&&Dn(o.next,c,c.next)<0}function tp(c,o,h,g,x){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*x|0)|c<<8))|c<<4))|c<<2))|c<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-g)*x|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function lv(c){let o=c,h=c;do(o.x<h.x||o.x===h.x&&o.y<h.y)&&(h=o),o=o.next;while(o!==c);return h}function uu(c,o,h,g,x,A,k,C){return(x-k)*(o-C)>=(c-k)*(A-C)&&(c-k)*(g-C)>=(h-k)*(o-C)&&(h-k)*(A-C)>=(x-k)*(g-C)}function Zm(c,o){return c.next.i!==o.i&&c.prev.i!==o.i&&!(function(h,g){let x=h;do{if(x.i!==h.i&&x.next.i!==h.i&&x.i!==g.i&&x.next.i!==g.i&&wf(x,x.next,h,g))return!0;x=x.next}while(x!==h);return!1})(c,o)&&(ic(c,o)&&ic(o,c)&&(function(h,g){let x=h,A=!1;const k=(h.x+g.x)/2,C=(h.y+g.y)/2;do x.y>C!=x.next.y>C&&x.next.y!==x.y&&k<(x.next.x-x.x)*(C-x.y)/(x.next.y-x.y)+x.x&&(A=!A),x=x.next;while(x!==h);return A})(c,o)&&(Dn(c.prev,c,o.prev)||Dn(c,o.prev,o))||hh(c,o)&&Dn(c.prev,c,c.next)>0&&Dn(o.prev,o,o.next)>0)}function Dn(c,o,h){return(o.y-c.y)*(h.x-o.x)-(o.x-c.x)*(h.y-o.y)}function hh(c,o){return c.x===o.x&&c.y===o.y}function wf(c,o,h,g){const x=Sf(Dn(c,o,h)),A=Sf(Dn(c,o,g)),k=Sf(Dn(h,g,c)),C=Sf(Dn(h,g,o));return x!==A&&k!==C||!(x!==0||!rp(c,h,o))||!(A!==0||!rp(c,g,o))||!(k!==0||!rp(h,c,g))||!(C!==0||!rp(h,o,g))}function rp(c,o,h){return o.x<=Math.max(c.x,h.x)&&o.x>=Math.min(c.x,h.x)&&o.y<=Math.max(c.y,h.y)&&o.y>=Math.min(c.y,h.y)}function Sf(c){return c>0?1:c<0?-1:0}function ic(c,o){return Dn(c.prev,c,c.next)<0?Dn(c,o,c.next)>=0&&Dn(c,c.prev,o)>=0:Dn(c,o,c.prev)<0||Dn(c,c.next,o)<0}function Xm(c,o){const h=Km(c.i,c.x,c.y),g=Km(o.i,o.x,o.y),x=c.next,A=o.prev;return c.next=o,o.prev=c,h.next=x,x.prev=h,g.next=h,h.prev=g,A.next=g,g.prev=A,g}function Tf(c,o,h,g){const x=Km(c,o,h);return g?(x.next=g.next,x.prev=g,g.next.prev=x,g.next=x):(x.prev=x,x.next=x),x}function wo(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Km(c,o,h){return{i:c,x:o,y:h,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function np(c,o,h){const g=h.patternDependencies;let x=!1;for(const A of o){const k=A.paint.get(`${c}-pattern`);k.isConstant()||(x=!0);const C=k.constantOr(null);C&&(x=!0,g[C.to]=!0,g[C.from]=!0)}return x}function Pf(c,o,h,g,x){const A=x.patternDependencies;for(const k of o){const C=k.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let D=C.evaluate({zoom:g-1},h,{},x.availableImages),N=C.evaluate({zoom:g},h,{},x.availableImages),q=C.evaluate({zoom:g+1},h,{},x.availableImages);D=D&&D.name?D.name:D,N=N&&N.name?N.name:N,q=q&&q.name?q.name:q,A[D]=!0,A[N]=!0,A[q]=!0,h.patterns[k.id]={min:D,mid:N,max:q}}}return h}class ip{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mo,this.indexArray=new Ba,this.indexArray2=new Bn,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new wr,this.segments2=new wr,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(o,h,g){this.hasPattern=np("fill",this.layers,h);const x=this.layers[0].layout.get("fill-sort-key"),A=!x.isConstant(),k=[];for(const{feature:C,id:D,index:N,sourceLayerIndex:q}of o){const H=this.layers[0]._featureFilter.needGeometry,Y=lu(C,H);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),Y,g))continue;const te=A?x.evaluate(Y,{},g,h.availableImages):void 0,oe={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:N,geometry:H?Y.geometry:su(C),patterns:{},sortKey:te};k.push(oe)}A&&k.sort(((C,D)=>C.sortKey-D.sortKey));for(const C of k){const{geometry:D,index:N,sourceLayerIndex:q}=C;if(this.hasPattern){const H=Pf("fill",this.layers,C,this.zoom,h);this.patternFeatures.push(H)}else this.addFeature(C,D,N,g,{});h.featureIndex.insert(o[N].feature,D,N,q,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}addFeatures(o,h,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,tv),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,h,g,x,A){for(const k of $l(h,500)){let C=0;for(const te of k)C+=te.length;const D=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),N=D.vertexLength,q=[],H=[];for(const te of k){if(te.length===0)continue;te!==k[0]&&H.push(q.length/2);const oe=this.segments2.prepareSegment(te.length,this.layoutVertexArray,this.indexArray2),ue=oe.vertexLength;this.layoutVertexArray.emplaceBack(te[0].x,te[0].y),this.indexArray2.emplaceBack(ue+te.length-1,ue),q.push(te[0].x),q.push(te[0].y);for(let ye=1;ye<te.length;ye++)this.layoutVertexArray.emplaceBack(te[ye].x,te[ye].y),this.indexArray2.emplaceBack(ue+ye-1,ue+ye),q.push(te[ye].x),q.push(te[ye].y);oe.vertexLength+=te.length,oe.primitiveLength+=te.length}const Y=rv(q,H);for(let te=0;te<Y.length;te+=3)this.indexArray.emplaceBack(N+Y[te],N+Y[te+1],N+Y[te+2]);D.vertexLength+=C,D.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,A,x)}}let Ym,fh;Ot("FillBucket",ip,{omit:["layers","patternFeatures"]});var na={get paint(){return fh=fh||new P({"fill-antialias":new It(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Yt(Ve.paint_fill["fill-opacity"]),"fill-color":new Yt(Ve.paint_fill["fill-color"]),"fill-outline-color":new Yt(Ve.paint_fill["fill-outline-color"]),"fill-translate":new It(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new It(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new nu(Ve.paint_fill["fill-pattern"])})},get layout(){return Ym=Ym||new P({"fill-sort-key":new Yt(Ve.layout_fill["fill-sort-key"])})}};class Px extends d{constructor(o){super(o,na)}recalculate(o,h){super.recalculate(o,h);const g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new ip(o)}queryRadius(){return _f(this.paint.get("fill-translate"))}queryIntersectsFeature(o,h,g,x,A,k,C){return Bm(xf(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),k.angle,C),x)}isTileClipped(){return!0}}const Ax=O([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ap=O([{name:"a_centroid",components:2,type:"Int16"}],4),{members:ia}=Ax;var cu={},Wt=y,ac=hu;function hu(c,o,h,g,x){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=g,this._values=x,c.readFields(uv,this,o)}function uv(c,o,h){c==1?o.id=h.readVarint():c==2?(function(g,x){for(var A=g.readVarint()+g.pos;g.pos<A;){var k=x._keys[g.readVarint()],C=x._values[g.readVarint()];x.properties[k]=C}})(h,o):c==3?o.type=h.readVarint():c==4&&(o._geometry=h.pos)}function kx(c){for(var o,h,g=0,x=0,A=c.length,k=A-1;x<A;k=x++)g+=((h=c[k]).x-(o=c[x]).x)*(o.y+h.y);return g}hu.types=["Unknown","Point","LineString","Polygon"],hu.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var o,h=c.readVarint()+c.pos,g=1,x=0,A=0,k=0,C=[];c.pos<h;){if(x<=0){var D=c.readVarint();g=7&D,x=D>>3}if(x--,g===1||g===2)A+=c.readSVarint(),k+=c.readSVarint(),g===1&&(o&&C.push(o),o=[]),o.push(new Wt(A,k));else{if(g!==7)throw new Error("unknown command "+g);o&&o.push(o[0].clone())}}return o&&C.push(o),C},hu.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var o=c.readVarint()+c.pos,h=1,g=0,x=0,A=0,k=1/0,C=-1/0,D=1/0,N=-1/0;c.pos<o;){if(g<=0){var q=c.readVarint();h=7&q,g=q>>3}if(g--,h===1||h===2)(x+=c.readSVarint())<k&&(k=x),x>C&&(C=x),(A+=c.readSVarint())<D&&(D=A),A>N&&(N=A);else if(h!==7)throw new Error("unknown command "+h)}return[k,D,C,N]},hu.prototype.toGeoJSON=function(c,o,h){var g,x,A=this.extent*Math.pow(2,h),k=this.extent*c,C=this.extent*o,D=this.loadGeometry(),N=hu.types[this.type];function q(te){for(var oe=0;oe<te.length;oe++){var ue=te[oe];te[oe]=[360*(ue.x+k)/A-180,360/Math.PI*Math.atan(Math.exp((180-360*(ue.y+C)/A)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(g=0;g<D.length;g++)H[g]=D[g][0];q(D=H);break;case 2:for(g=0;g<D.length;g++)q(D[g]);break;case 3:for(D=(function(te){var oe=te.length;if(oe<=1)return[te];for(var ue,ye,we=[],Be=0;Be<oe;Be++){var ke=kx(te[Be]);ke!==0&&(ye===void 0&&(ye=ke<0),ye===ke<0?(ue&&we.push(ue),ue=[te[Be]]):ue.push(te[Be]))}return ue&&we.push(ue),we})(D),g=0;g<D.length;g++)for(x=0;x<D[g].length;x++)q(D[g][x])}D.length===1?D=D[0]:N="Multi"+N;var Y={type:"Feature",geometry:{type:N,coordinates:D},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var Af=ac,kf=op;function op(c,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(cv,this,o),this.length=this._features.length}function cv(c,o,h){c===15?o.version=h.readVarint():c===1?o.name=h.readString():c===5?o.extent=h.readVarint():c===2?o._features.push(h.pos):c===3?o._keys.push(h.readString()):c===4&&o._values.push((function(g){for(var x=null,A=g.readVarint()+g.pos;g.pos<A;){var k=g.readVarint()>>3;x=k===1?g.readString():k===2?g.readFloat():k===3?g.readDouble():k===4?g.readVarint64():k===5?g.readVarint():k===6?g.readSVarint():k===7?g.readBoolean():null}return x})(h))}op.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var o=this._pbf.readVarint()+this._pbf.pos;return new Af(this._pbf,o,this.extent,this._keys,this._values)};var hv=kf;function fv(c,o,h){if(c===3){var g=new hv(h,h.readVarint()+h.pos);g.length&&(o[g.name]=g)}}cu.VectorTile=function(c,o){this.layers=c.readFields(fv,{},o)},cu.VectorTileFeature=ac,cu.VectorTileLayer=kf;const Jm=cu.VectorTileFeature.types,Ef=Math.pow(2,13);function ei(c,o,h,g,x,A,k,C){c.emplaceBack(o,h,2*Math.floor(g*Ef)+k,x*Ef*2,A*Ef*2,Math.round(C))}class So{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new ta,this.centroidVertexArray=new In,this.indexArray=new Ba,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new wr,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(o,h,g){this.features=[],this.hasPattern=np("fill-extrusion",this.layers,h);for(const{feature:x,id:A,index:k,sourceLayerIndex:C}of o){const D=this.layers[0]._featureFilter.needGeometry,N=lu(x,D);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),N,g))continue;const q={id:A,sourceLayerIndex:C,index:k,geometry:D?N.geometry:su(x),properties:x.properties,type:x.type,patterns:{}};this.hasPattern?this.features.push(Pf("fill-extrusion",this.layers,q,this.zoom,h)):this.addFeature(q,q.geometry,k,g,{}),h.featureIndex.insert(x,q.geometry,k,C,this.index,!0)}}addFeatures(o,h,g){for(const x of this.features){const{geometry:A}=x;this.addFeature(x,A,x.index,h,g)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ia),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,ap.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,h,g,x,A){for(const k of $l(h,500)){const C={x:0,y:0,vertexCount:0};let D=0;for(const oe of k)D+=oe.length;let N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const oe of k){if(oe.length===0||dv(oe))continue;let ue=0;for(let ye=0;ye<oe.length;ye++){const we=oe[ye];if(ye>=1){const Be=oe[ye-1];if(!fu(we,Be)){N.vertexLength+4>wr.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ke=we.sub(Be)._perp()._unit(),Fe=Be.dist(we);ue+Fe>32768&&(ue=0),ei(this.layoutVertexArray,we.x,we.y,ke.x,ke.y,0,0,ue),ei(this.layoutVertexArray,we.x,we.y,ke.x,ke.y,0,1,ue),C.x+=2*we.x,C.y+=2*we.y,C.vertexCount+=2,ue+=Fe,ei(this.layoutVertexArray,Be.x,Be.y,ke.x,ke.y,0,0,ue),ei(this.layoutVertexArray,Be.x,Be.y,ke.x,ke.y,0,1,ue),C.x+=2*Be.x,C.y+=2*Be.y,C.vertexCount+=2;const rt=N.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),N.vertexLength+=4,N.primitiveLength+=2}}}}if(N.vertexLength+D>wr.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray)),Jm[o.type]!=="Polygon")continue;const q=[],H=[],Y=N.vertexLength;for(const oe of k)if(oe.length!==0){oe!==k[0]&&H.push(q.length/2);for(let ue=0;ue<oe.length;ue++){const ye=oe[ue];ei(this.layoutVertexArray,ye.x,ye.y,0,0,1,1,0),C.x+=ye.x,C.y+=ye.y,C.vertexCount+=1,q.push(ye.x),q.push(ye.y)}}const te=rv(q,H);for(let oe=0;oe<te.length;oe+=3)this.indexArray.emplaceBack(Y+te[oe],Y+te[oe+2],Y+te[oe+1]);N.primitiveLength+=te.length/3,N.vertexLength+=D;for(let oe=0;oe<C.vertexCount;oe++){const ue=Math.floor(C.x/C.vertexCount),ye=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(ue,ye)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,A,x)}}function fu(c,o){return c.x===o.x&&(c.x<0||c.x>Nn)||c.y===o.y&&(c.y<0||c.y>Nn)}function dv(c){return c.every((o=>o.x<0))||c.every((o=>o.x>Nn))||c.every((o=>o.y<0))||c.every((o=>o.y>Nn))}let Qm;Ot("FillExtrusionBucket",So,{omit:["layers","features"]});var ls={get paint(){return Qm=Qm||new P({"fill-extrusion-opacity":new It(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yt(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new It(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new It(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new nu(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yt(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yt(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new It(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class pv extends d{constructor(o){super(o,ls)}createBucket(o){return new So(o)}queryRadius(){return _f(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,h,g,x,A,k,C,D){const N=xf(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),k.angle,C),q=this.paint.get("fill-extrusion-height").evaluate(h,g),H=this.paint.get("fill-extrusion-base").evaluate(h,g),Y=(function(oe,ue,ye,we){const Be=[];for(const ke of oe){const Fe=[ke.x,ke.y,0,1];Xd(Fe,Fe,ue),Be.push(new S(Fe[0]/Fe[3],Fe[1]/Fe[3]))}return Be})(N,D),te=(function(oe,ue,ye,we){const Be=[],ke=[],Fe=we[8]*ue,rt=we[9]*ue,ut=we[10]*ue,Ct=we[11]*ue,tr=we[8]*ye,Mt=we[9]*ye,Pt=we[10]*ye,Ut=we[11]*ye;for(const Lt of oe){const zt=[],at=[];for(const Gt of Lt){const qt=Gt.x,hr=Gt.y,pn=we[0]*qt+we[4]*hr+we[12],on=we[1]*qt+we[5]*hr+we[13],Pi=we[2]*qt+we[6]*hr+we[14],Ns=we[3]*qt+we[7]*hr+we[15],sa=Pi+ut,Ai=Ns+Ct,Wa=pn+tr,Ha=on+Mt,Ga=Pi+Pt,Wn=Ns+Ut,ki=new S((pn+Fe)/Ai,(on+rt)/Ai);ki.z=sa/Ai,zt.push(ki);const ka=new S(Wa/Wn,Ha/Wn);ka.z=Ga/Wn,at.push(ka)}Be.push(zt),ke.push(at)}return[Be,ke]})(x,H,q,D);return(function(oe,ue,ye){let we=1/0;Bm(ye,ue)&&(we=mv(ye,ue[0]));for(let Be=0;Be<ue.length;Be++){const ke=ue[Be],Fe=oe[Be];for(let rt=0;rt<ke.length-1;rt++){const ut=ke[rt],Ct=[ut,ke[rt+1],Fe[rt+1],Fe[rt],ut];jm(ye,Ct)&&(we=Math.min(we,mv(ye,Ct)))}}return we!==1/0&&we})(te[0],te[1],Y)}}function Na(c,o){return c.x*o.x+c.y*o.y}function mv(c,o){if(c.length===1){let h=0;const g=o[h++];let x;for(;!x||g.equals(x);)if(x=o[h++],!x)return 1/0;for(;h<o.length;h++){const A=o[h],k=c[0],C=x.sub(g),D=A.sub(g),N=k.sub(g),q=Na(C,C),H=Na(C,D),Y=Na(D,D),te=Na(N,C),oe=Na(N,D),ue=q*Y-H*H,ye=(Y*te-H*oe)/ue,we=(q*oe-H*te)/ue,Be=g.z*(1-ye-we)+x.z*ye+A.z*we;if(isFinite(Be))return Be}return 1/0}{let h=1/0;for(const g of o)h=Math.min(h,g.z);return h}}const gv=O([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:yv}=gv,vv=O([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_v}=vv,Ex=cu.VectorTileFeature.types,sp=Math.cos(Math.PI/180*37.5),lp=Math.pow(2,14)/.5;class $a{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((h=>h.id)),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((h=>{this.gradients[h.id]={}})),this.layoutVertexArray=new go,this.layoutVertexArray2=new Rs,this.indexArray=new Ba,this.programConfigurations=new ss(o.layers,o.zoom),this.segments=new wr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((h=>h.isStateDependent())).map((h=>h.id))}populate(o,h,g){this.hasPattern=np("line",this.layers,h);const x=this.layers[0].layout.get("line-sort-key"),A=!x.isConstant(),k=[];for(const{feature:C,id:D,index:N,sourceLayerIndex:q}of o){const H=this.layers[0]._featureFilter.needGeometry,Y=lu(C,H);if(!this.layers[0]._featureFilter.filter(new kr(this.zoom),Y,g))continue;const te=A?x.evaluate(Y,{},g):void 0,oe={id:D,properties:C.properties,type:C.type,sourceLayerIndex:q,index:N,geometry:H?Y.geometry:su(C),patterns:{},sortKey:te};k.push(oe)}A&&k.sort(((C,D)=>C.sortKey-D.sortKey));for(const C of k){const{geometry:D,index:N,sourceLayerIndex:q}=C;if(this.hasPattern){const H=Pf("line",this.layers,C,this.zoom,h);this.patternFeatures.push(H)}else this.addFeature(C,D,N,g,{});h.featureIndex.insert(o[N].feature,D,N,q,this.index)}}update(o,h,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,h,this.stateDependentLayers,g)}addFeatures(o,h,g){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,h,g)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,_v)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,yv),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,h,g,x,A){const k=this.layers[0].layout,C=k.get("line-join").evaluate(o,{}),D=k.get("line-cap"),N=k.get("line-miter-limit"),q=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const H of h)this.addLine(H,o,C,D,N,q);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,g,A,x)}addLine(o,h,g,x,A,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let we=0;we<o.length-1;we++)this.totalDistance+=o[we].dist(o[we+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const C=Ex[h.type]==="Polygon";let D=o.length;for(;D>=2&&o[D-1].equals(o[D-2]);)D--;let N=0;for(;N<D-1&&o[N].equals(o[N+1]);)N++;if(D<(C?3:2))return;g==="bevel"&&(A=1.05);const q=this.overscaling<=16?15*Nn/(512*this.overscaling):0,H=this.segments.prepareSegment(10*D,this.layoutVertexArray,this.indexArray);let Y,te,oe,ue,ye;this.e1=this.e2=-1,C&&(Y=o[D-2],ye=o[N].sub(Y)._unit()._perp());for(let we=N;we<D;we++){if(oe=we===D-1?C?o[N+1]:void 0:o[we+1],oe&&o[we].equals(oe))continue;ye&&(ue=ye),Y&&(te=Y),Y=o[we],ye=oe?oe.sub(Y)._unit()._perp():ue,ue=ue||ye;let Be=ue.add(ye);Be.x===0&&Be.y===0||Be._unit();const ke=ue.x*ye.x+ue.y*ye.y,Fe=Be.x*ye.x+Be.y*ye.y,rt=Fe!==0?1/Fe:1/0,ut=2*Math.sqrt(2-2*Fe),Ct=Fe<sp&&te&&oe,tr=ue.x*ye.y-ue.y*ye.x>0;if(Ct&&we>N){const Ut=Y.dist(te);if(Ut>2*q){const Lt=Y.sub(Y.sub(te)._mult(q/Ut)._round());this.updateDistance(te,Lt),this.addCurrentVertex(Lt,ue,0,0,H),te=Lt}}const Mt=te&&oe;let Pt=Mt?g:C?"butt":x;if(Mt&&Pt==="round"&&(rt<k?Pt="miter":rt<=2&&(Pt="fakeround")),Pt==="miter"&&rt>A&&(Pt="bevel"),Pt==="bevel"&&(rt>2&&(Pt="flipbevel"),rt<A&&(Pt="miter")),te&&this.updateDistance(te,Y),Pt==="miter")Be._mult(rt),this.addCurrentVertex(Y,Be,0,0,H);else if(Pt==="flipbevel"){if(rt>100)Be=ye.mult(-1);else{const Ut=rt*ue.add(ye).mag()/ue.sub(ye).mag();Be._perp()._mult(Ut*(tr?-1:1))}this.addCurrentVertex(Y,Be,0,0,H),this.addCurrentVertex(Y,Be.mult(-1),0,0,H)}else if(Pt==="bevel"||Pt==="fakeround"){const Ut=-Math.sqrt(rt*rt-1),Lt=tr?Ut:0,zt=tr?0:Ut;if(te&&this.addCurrentVertex(Y,ue,Lt,zt,H),Pt==="fakeround"){const at=Math.round(180*ut/Math.PI/20);for(let Gt=1;Gt<at;Gt++){let qt=Gt/at;if(qt!==.5){const pn=qt-.5;qt+=qt*pn*(qt-1)*((1.0904+ke*(ke*(3.55645-1.43519*ke)-3.2452))*pn*pn+(.848013+ke*(.215638*ke-1.06021)))}const hr=ye.sub(ue)._mult(qt)._add(ue)._unit()._mult(tr?-1:1);this.addHalfVertex(Y,hr.x,hr.y,!1,tr,0,H)}}oe&&this.addCurrentVertex(Y,ye,-Lt,-zt,H)}else if(Pt==="butt")this.addCurrentVertex(Y,Be,0,0,H);else if(Pt==="square"){const Ut=te?1:-1;this.addCurrentVertex(Y,Be,Ut,Ut,H)}else Pt==="round"&&(te&&(this.addCurrentVertex(Y,ue,0,0,H),this.addCurrentVertex(Y,ue,1,1,H,!0)),oe&&(this.addCurrentVertex(Y,ye,-1,-1,H,!0),this.addCurrentVertex(Y,ye,0,0,H)));if(Ct&&we<D-1){const Ut=Y.dist(oe);if(Ut>2*q){const Lt=Y.add(oe.sub(Y)._mult(q/Ut)._round());this.updateDistance(Y,Lt),this.addCurrentVertex(Lt,ye,0,0,H),Y=Lt}}}}addCurrentVertex(o,h,g,x,A,k=!1){const C=h.y*x-h.x,D=-h.y-h.x*x;this.addHalfVertex(o,h.x+h.y*g,h.y-h.x*g,k,!1,g,A),this.addHalfVertex(o,C,D,k,!0,-x,A),this.distance>lp/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,h,g,x,A,k))}addHalfVertex({x:o,y:h},g,x,A,k,C,D){const N=.5*(this.lineClips?this.scaledDistance*(lp-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(A?1:0),(h<<1)+(k?1:0),Math.round(63*g)+128,Math.round(63*x)+128,1+(C===0?0:C<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const q=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,q),D.primitiveLength++),k?this.e2=q:this.e1=q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,h){this.distance+=o.dist(h),this.updateScaledDistance()}}let Br,yi;Ot("LineBucket",$a,{omit:["layers","patternFeatures"]});var ti={get paint(){return yi=yi||new P({"line-opacity":new Yt(Ve.paint_line["line-opacity"]),"line-color":new Yt(Ve.paint_line["line-color"]),"line-translate":new It(Ve.paint_line["line-translate"]),"line-translate-anchor":new It(Ve.paint_line["line-translate-anchor"]),"line-width":new Yt(Ve.paint_line["line-width"]),"line-gap-width":new Yt(Ve.paint_line["line-gap-width"]),"line-offset":new Yt(Ve.paint_line["line-offset"]),"line-blur":new Yt(Ve.paint_line["line-blur"]),"line-dasharray":new ec(Ve.paint_line["line-dasharray"]),"line-pattern":new nu(Ve.paint_line["line-pattern"]),"line-gradient":new hf(Ve.paint_line["line-gradient"])})},get layout(){return Br=Br||new P({"line-cap":new It(Ve.layout_line["line-cap"]),"line-join":new Yt(Ve.layout_line["line-join"]),"line-miter-limit":new It(Ve.layout_line["line-miter-limit"]),"line-round-limit":new It(Ve.layout_line["line-round-limit"]),"line-sort-key":new Yt(Ve.layout_line["line-sort-key"])})}};class Bi extends Yt{possiblyEvaluate(o,h){return h=new kr(Math.floor(h.zoom),{now:h.now,fadeDuration:h.fadeDuration,zoomHistory:h.zoomHistory,transition:h.transition}),super.possiblyEvaluate(o,h)}evaluate(o,h,g,x){return h=ie({},h,{zoom:Math.floor(h.zoom)}),super.evaluate(o,h,g,x)}}let aa;class dh extends d{constructor(o){super(o,ti),this.gradientVersion=0,aa||(aa=new Bi(ti.paint.properties["line-width"].specification),aa.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const h=this.gradientExpression();this.stepInterpolant=!!(function(g){return g._styleExpression!==void 0})(h)&&h._styleExpression.expression instanceof il,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,h){super.recalculate(o,h),this.paint._values["line-floorwidth"]=aa.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new $a(o)}queryRadius(o){const h=o,g=li(rc("line-width",this,h),rc("line-gap-width",this,h)),x=rc("line-offset",this,h);return g/2+Math.abs(x)+_f(this.paint.get("line-translate"))}queryIntersectsFeature(o,h,g,x,A,k,C){const D=xf(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),k.angle,C),N=C/2*li(this.paint.get("line-width").evaluate(h,g),this.paint.get("line-gap-width").evaluate(h,g)),q=this.paint.get("line-offset").evaluate(h,g);return q&&(x=(function(H,Y){const te=[];for(let oe=0;oe<H.length;oe++){const ue=H[oe],ye=[];for(let we=0;we<ue.length;we++){const Be=ue[we-1],ke=ue[we],Fe=ue[we+1],rt=we===0?new S(0,0):ke.sub(Be)._unit()._perp(),ut=we===ue.length-1?new S(0,0):Fe.sub(ke)._unit()._perp(),Ct=rt._add(ut)._unit(),tr=Ct.x*ut.x+Ct.y*ut.y;tr!==0&&Ct._mult(1/tr),ye.push(Ct._mult(Y)._add(ke))}te.push(ye)}return te})(x,q*C)),(function(H,Y,te){for(let oe=0;oe<Y.length;oe++){const ue=Y[oe];if(H.length>=3){for(let ye=0;ye<ue.length;ye++)if(tc(H,ue[ye]))return!0}if(Hd(H,ue,te))return!0}return!1})(D,x,N)}isTileClipped(){return!0}}function li(c,o){return o>0?o+2*c:c}const Mf=O([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),oc=O([{name:"a_projected_pos",components:3,type:"Float32"}],4);O([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const up=O([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);O([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cp=O([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Cf=O([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Va(c,o,h){return c.sections.forEach((g=>{g.text=(function(x,A,k){const C=A.layout.get("text-transform").evaluate(k,{});return C==="uppercase"?x=x.toLocaleUpperCase():C==="lowercase"&&(x=x.toLocaleLowerCase()),Kr.applyArabicShaping&&(x=Kr.applyArabicShaping(x)),x})(g.text,o,h)})),c}O([{name:"triangle",components:3,type:"Uint16"}]),O([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),O([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),O([{type:"Float32",name:"offsetX"}]),O([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),O([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const sc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Sn=24,js=Cr,Of=function(c,o,h,g,x){var A,k,C=8*x-g-1,D=(1<<C)-1,N=D>>1,q=-7,H=x-1,Y=-1,te=c[o+H];for(H+=Y,A=te&(1<<-q)-1,te>>=-q,q+=C;q>0;A=256*A+c[o+H],H+=Y,q-=8);for(k=A&(1<<-q)-1,A>>=-q,q+=g;q>0;k=256*k+c[o+H],H+=Y,q-=8);if(A===0)A=1-N;else{if(A===D)return k?NaN:1/0*(te?-1:1);k+=Math.pow(2,g),A-=N}return(te?-1:1)*k*Math.pow(2,A-g)},hp=function(c,o,h,g,x,A){var k,C,D,N=8*A-x-1,q=(1<<N)-1,H=q>>1,Y=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,te=0,oe=1,ue=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(C=isNaN(o)?1:0,k=q):(k=Math.floor(Math.log(o)/Math.LN2),o*(D=Math.pow(2,-k))<1&&(k--,D*=2),(o+=k+H>=1?Y/D:Y*Math.pow(2,1-H))*D>=2&&(k++,D/=2),k+H>=q?(C=0,k=q):k+H>=1?(C=(o*D-1)*Math.pow(2,x),k+=H):(C=o*Math.pow(2,H-1)*Math.pow(2,x),k=0));x>=8;c[h+te]=255&C,te+=oe,C/=256,x-=8);for(k=k<<x|C,N+=x;N>0;c[h+te]=255&k,te+=oe,k/=256,N-=8);c[h+te-oe]|=128*ue};function Cr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Cr.Varint=0,Cr.Fixed64=1,Cr.Bytes=2,Cr.Fixed32=5;var ph=4294967296,vl=1/ph,If=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function To(c){return c.type===Cr.Bytes?c.readVarint()+c.pos:c.pos+1}function du(c,o,h){return h?4294967296*o+(c>>>0):4294967296*(o>>>0)+(c>>>0)}function Df(c,o,h){var g=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));h.realloc(g);for(var x=h.pos-1;x>=c;x--)h.buf[x+g]=h.buf[x]}function fp(c,o){for(var h=0;h<c.length;h++)o.writeVarint(c[h])}function Pa(c,o){for(var h=0;h<c.length;h++)o.writeSVarint(c[h])}function pu(c,o){for(var h=0;h<c.length;h++)o.writeFloat(c[h])}function us(c,o){for(var h=0;h<c.length;h++)o.writeDouble(c[h])}function qa(c,o){for(var h=0;h<c.length;h++)o.writeBoolean(c[h])}function xv(c,o){for(var h=0;h<c.length;h++)o.writeFixed32(c[h])}function eg(c,o){for(var h=0;h<c.length;h++)o.writeSFixed32(c[h])}function tg(c,o){for(var h=0;h<c.length;h++)o.writeFixed64(c[h])}function Mx(c,o){for(var h=0;h<c.length;h++)o.writeSFixed64(c[h])}function cs(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+16777216*c[o+3]}function lc(c,o,h){c[h]=o,c[h+1]=o>>>8,c[h+2]=o>>>16,c[h+3]=o>>>24}function dp(c,o){return(c[o]|c[o+1]<<8|c[o+2]<<16)+(c[o+3]<<24)}Cr.prototype={destroy:function(){this.buf=null},readFields:function(c,o,h){for(h=h||this.length;this.pos<h;){var g=this.readVarint(),x=g>>3,A=this.pos;this.type=7&g,c(x,o,this),this.pos===A&&this.skip(g)}return o},readMessage:function(c,o){return this.readFields(c,o,this.readVarint()+this.pos)},readFixed32:function(){var c=cs(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=dp(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=cs(this.buf,this.pos)+cs(this.buf,this.pos+4)*ph;return this.pos+=8,c},readSFixed64:function(){var c=cs(this.buf,this.pos)+dp(this.buf,this.pos+4)*ph;return this.pos+=8,c},readFloat:function(){var c=Of(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Of(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var o,h,g=this.buf;return o=127&(h=g[this.pos++]),h<128?o:(o|=(127&(h=g[this.pos++]))<<7,h<128?o:(o|=(127&(h=g[this.pos++]))<<14,h<128?o:(o|=(127&(h=g[this.pos++]))<<21,h<128?o:(function(x,A,k){var C,D,N=k.buf;if(C=(112&(D=N[k.pos++]))>>4,D<128||(C|=(127&(D=N[k.pos++]))<<3,D<128)||(C|=(127&(D=N[k.pos++]))<<10,D<128)||(C|=(127&(D=N[k.pos++]))<<17,D<128)||(C|=(127&(D=N[k.pos++]))<<24,D<128)||(C|=(1&(D=N[k.pos++]))<<31,D<128))return du(x,C,A);throw new Error("Expected varint not more than 10 bytes")})(o|=(15&(h=g[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,o=this.pos;return this.pos=c,c-o>=12&&If?(function(h,g,x){return If.decode(h.subarray(g,x))})(this.buf,o,c):(function(h,g,x){for(var A="",k=g;k<x;){var C,D,N,q=h[k],H=null,Y=q>239?4:q>223?3:q>191?2:1;if(k+Y>x)break;Y===1?q<128&&(H=q):Y===2?(192&(C=h[k+1]))==128&&(H=(31&q)<<6|63&C)<=127&&(H=null):Y===3?(D=h[k+2],(192&(C=h[k+1]))==128&&(192&D)==128&&((H=(15&q)<<12|(63&C)<<6|63&D)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(D=h[k+2],N=h[k+3],(192&(C=h[k+1]))==128&&(192&D)==128&&(192&N)==128&&((H=(15&q)<<18|(63&C)<<12|(63&D)<<6|63&N)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,A+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),A+=String.fromCharCode(H),k+=Y}return A})(this.buf,o,c)},readBytes:function(){var c=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,c);return this.pos=c,o},readPackedVarint:function(c,o){if(this.type!==Cr.Bytes)return c.push(this.readVarint(o));var h=To(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(o));return c},readPackedSVarint:function(c){if(this.type!==Cr.Bytes)return c.push(this.readSVarint());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Cr.Bytes)return c.push(this.readBoolean());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Cr.Bytes)return c.push(this.readFloat());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Cr.Bytes)return c.push(this.readDouble());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Cr.Bytes)return c.push(this.readFixed32());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Cr.Bytes)return c.push(this.readSFixed32());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Cr.Bytes)return c.push(this.readFixed64());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Cr.Bytes)return c.push(this.readSFixed64());var o=To(this);for(c=c||[];this.pos<o;)c.push(this.readSFixed64());return c},skip:function(c){var o=7&c;if(o===Cr.Varint)for(;this.buf[this.pos++]>127;);else if(o===Cr.Bytes)this.pos=this.readVarint()+this.pos;else if(o===Cr.Fixed32)this.pos+=4;else{if(o!==Cr.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(c,o){this.writeVarint(c<<3|o)},realloc:function(c){for(var o=this.length||16;o<this.pos+c;)o*=2;if(o!==this.length){var h=new Uint8Array(o);h.set(this.buf),this.buf=h,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),lc(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),lc(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),lc(this.buf,-1&c,this.pos),lc(this.buf,Math.floor(c*vl),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),lc(this.buf,-1&c,this.pos),lc(this.buf,Math.floor(c*vl),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?(function(o,h){var g,x;if(o>=0?(g=o%4294967296|0,x=o/4294967296|0):(x=~(-o/4294967296),4294967295^(g=~(-o%4294967296))?g=g+1|0:(g=0,x=x+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),(function(A,k,C){C.buf[C.pos++]=127&A|128,A>>>=7,C.buf[C.pos++]=127&A|128,A>>>=7,C.buf[C.pos++]=127&A|128,A>>>=7,C.buf[C.pos++]=127&A|128,C.buf[C.pos]=127&(A>>>=7)})(g,0,h),(function(A,k){var C=(7&A)<<4;k.buf[k.pos++]|=C|((A>>>=3)?128:0),A&&(k.buf[k.pos++]=127&A|((A>>>=7)?128:0),A&&(k.buf[k.pos++]=127&A|((A>>>=7)?128:0),A&&(k.buf[k.pos++]=127&A|((A>>>=7)?128:0),A&&(k.buf[k.pos++]=127&A|((A>>>=7)?128:0),A&&(k.buf[k.pos++]=127&A)))))})(x,h)})(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var o=this.pos;this.pos=(function(g,x,A){for(var k,C,D=0;D<x.length;D++){if((k=x.charCodeAt(D))>55295&&k<57344){if(!C){k>56319||D+1===x.length?(g[A++]=239,g[A++]=191,g[A++]=189):C=k;continue}if(k<56320){g[A++]=239,g[A++]=191,g[A++]=189,C=k;continue}k=C-55296<<10|k-56320|65536,C=null}else C&&(g[A++]=239,g[A++]=191,g[A++]=189,C=null);k<128?g[A++]=k:(k<2048?g[A++]=k>>6|192:(k<65536?g[A++]=k>>12|224:(g[A++]=k>>18|240,g[A++]=k>>12&63|128),g[A++]=k>>6&63|128),g[A++]=63&k|128)}return A})(this.buf,c,this.pos);var h=this.pos-o;h>=128&&Df(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),hp(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),hp(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var o=c.length;this.writeVarint(o),this.realloc(o);for(var h=0;h<o;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,o){this.pos++;var h=this.pos;c(o,this);var g=this.pos-h;g>=128&&Df(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g},writeMessage:function(c,o,h){this.writeTag(c,Cr.Bytes),this.writeRawMessage(o,h)},writePackedVarint:function(c,o){o.length&&this.writeMessage(c,fp,o)},writePackedSVarint:function(c,o){o.length&&this.writeMessage(c,Pa,o)},writePackedBoolean:function(c,o){o.length&&this.writeMessage(c,qa,o)},writePackedFloat:function(c,o){o.length&&this.writeMessage(c,pu,o)},writePackedDouble:function(c,o){o.length&&this.writeMessage(c,us,o)},writePackedFixed32:function(c,o){o.length&&this.writeMessage(c,xv,o)},writePackedSFixed32:function(c,o){o.length&&this.writeMessage(c,eg,o)},writePackedFixed64:function(c,o){o.length&&this.writeMessage(c,tg,o)},writePackedSFixed64:function(c,o){o.length&&this.writeMessage(c,Mx,o)},writeBytesField:function(c,o){this.writeTag(c,Cr.Bytes),this.writeBytes(o)},writeFixed32Field:function(c,o){this.writeTag(c,Cr.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(c,o){this.writeTag(c,Cr.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(c,o){this.writeTag(c,Cr.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(c,o){this.writeTag(c,Cr.Fixed64),this.writeSFixed64(o)},writeVarintField:function(c,o){this.writeTag(c,Cr.Varint),this.writeVarint(o)},writeSVarintField:function(c,o){this.writeTag(c,Cr.Varint),this.writeSVarint(o)},writeStringField:function(c,o){this.writeTag(c,Cr.Bytes),this.writeString(o)},writeFloatField:function(c,o){this.writeTag(c,Cr.Fixed32),this.writeFloat(o)},writeDoubleField:function(c,o){this.writeTag(c,Cr.Fixed64),this.writeDouble(o)},writeBooleanField:function(c,o){this.writeVarintField(c,!!o)}};var _l=m(js);const zf=3;function uc(c,o,h){c===1&&h.readMessage(bv,o)}function bv(c,o,h){if(c===3){const{id:g,bitmap:x,width:A,height:k,left:C,top:D,advance:N}=h.readMessage(wv,{});o.push({id:g,bitmap:new nc({width:A+2*zf,height:k+2*zf},x),metrics:{width:A,height:k,left:C,top:D,advance:N}})}}function wv(c,o,h){c===1?o.id=h.readVarint():c===2?o.bitmap=h.readBytes():c===3?o.width=h.readVarint():c===4?o.height=h.readVarint():c===5?o.left=h.readSVarint():c===6?o.top=h.readSVarint():c===7&&(o.advance=h.readVarint())}const pp=zf;function Rf(c){let o=0,h=0;for(const k of c)o+=k.w*k.h,h=Math.max(h,k.w);c.sort(((k,C)=>C.h-k.h));const g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),h),h:1/0}];let x=0,A=0;for(const k of c)for(let C=g.length-1;C>=0;C--){const D=g[C];if(!(k.w>D.w||k.h>D.h)){if(k.x=D.x,k.y=D.y,A=Math.max(A,k.y+k.h),x=Math.max(x,k.x+k.w),k.w===D.w&&k.h===D.h){const N=g.pop();C<g.length&&(g[C]=N)}else k.h===D.h?(D.x+=k.w,D.w-=k.w):k.w===D.w?(D.y+=k.h,D.h-=k.h):(g.push({x:D.x+k.w,y:D.y,w:D.w-k.w,h:k.h}),D.y+=k.h,D.h-=k.h);break}}return{w:x,h:A,fill:o/(x*A)||0}}const Aa=1;class rg{constructor(o,{pixelRatio:h,version:g,stretchX:x,stretchY:A,content:k,textFitWidth:C,textFitHeight:D}){this.paddedRect=o,this.pixelRatio=h,this.stretchX=x,this.stretchY=A,this.content=k,this.version=g,this.textFitWidth=C,this.textFitHeight=D}get tl(){return[this.paddedRect.x+Aa,this.paddedRect.y+Aa]}get br(){return[this.paddedRect.x+this.paddedRect.w-Aa,this.paddedRect.y+this.paddedRect.h-Aa]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Aa)/this.pixelRatio,(this.paddedRect.h-2*Aa)/this.pixelRatio]}}class ng{constructor(o,h){const g={},x={};this.haveRenderCallbacks=[];const A=[];this.addImages(o,g,A),this.addImages(h,x,A);const{w:k,h:C}=Rf(A),D=new Ti({width:k||1,height:C||1});for(const N in o){const q=o[N],H=g[N].paddedRect;Ti.copy(q.data,D,{x:0,y:0},{x:H.x+Aa,y:H.y+Aa},q.data)}for(const N in h){const q=h[N],H=x[N].paddedRect,Y=H.x+Aa,te=H.y+Aa,oe=q.data.width,ue=q.data.height;Ti.copy(q.data,D,{x:0,y:0},{x:Y,y:te},q.data),Ti.copy(q.data,D,{x:0,y:ue-1},{x:Y,y:te-1},{width:oe,height:1}),Ti.copy(q.data,D,{x:0,y:0},{x:Y,y:te+ue},{width:oe,height:1}),Ti.copy(q.data,D,{x:oe-1,y:0},{x:Y-1,y:te},{width:1,height:ue}),Ti.copy(q.data,D,{x:0,y:0},{x:Y+oe,y:te},{width:1,height:ue})}this.image=D,this.iconPositions=g,this.patternPositions=x}addImages(o,h,g){for(const x in o){const A=o[x],k={x:0,y:0,w:A.data.width+2*Aa,h:A.data.height+2*Aa};g.push(k),h[x]=new rg(k,A),A.hasRenderCallback&&this.haveRenderCallbacks.push(x)}}patchUpdatedImages(o,h){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const g in o.updatedImages)this.patchUpdatedImage(this.iconPositions[g],o.getImage(g),h),this.patchUpdatedImage(this.patternPositions[g],o.getImage(g),h)}patchUpdatedImage(o,h,g){if(!o||!h||o.version===h.version)return;o.version=h.version;const[x,A]=o.tl;g.update(h.data,void 0,{x,y:A})}}var xl;Ot("ImagePosition",rg),Ot("ImageAtlas",ng),u.ah=void 0,(xl=u.ah||(u.ah={}))[xl.none=0]="none",xl[xl.horizontal=1]="horizontal",xl[xl.vertical=2]="vertical",xl[xl.horizontalOnly=3]="horizontalOnly";const hs=-17;class Lf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,h){const g=new Lf;return g.scale=o||1,g.fontStack=h,g}static forImage(o){const h=new Lf;return h.imageName=o,h}}class fs{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,h){const g=new fs;for(let x=0;x<o.sections.length;x++){const A=o.sections[x];A.image?g.addImageSection(A):g.addTextSection(A,h)}return g}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=(function(o){let h="";for(let g=0;g<o.length;g++){const x=o.charCodeAt(g+1)||null,A=o.charCodeAt(g-1)||null;h+=x&&yl(x)&&!sc[o[g+1]]||A&&yl(A)&&!sc[o[g-1]]||!sc[o[g]]?o[g]:sc[o[g]]}return h})(this.text)}trim(){let o=0;for(let g=0;g<this.text.length&&Mn[this.text.charCodeAt(g)];g++)o++;let h=this.text.length;for(let g=this.text.length-1;g>=0&&g>=o&&Mn[this.text.charCodeAt(g)];g--)h--;this.text=this.text.substring(o,h),this.sectionIndex=this.sectionIndex.slice(o,h)}substring(o,h){const g=new fs;return g.text=this.text.substring(o,h),g.sectionIndex=this.sectionIndex.slice(o,h),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((o,h)=>Math.max(o,this.sections[h].scale)),0)}addTextSection(o,h){this.text+=o.text,this.sections.push(Lf.forText(o.scale,o.fontStack||h));const g=this.sections.length-1;for(let x=0;x<o.text.length;++x)this.sectionIndex.push(g)}addImageSection(o){const h=o.image?o.image.name:"";if(h.length===0)return void Le("Can't add FormattedSection with an empty image.");const g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(Lf.forImage(h)),this.sectionIndex.push(this.sections.length-1)):Le("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ff(c,o,h,g,x,A,k,C,D,N,q,H,Y,te,oe){const ue=fs.fromFeature(c,x);let ye;H===u.ah.vertical&&ue.verticalizePunctuation();const{processBidirectionalText:we,processStyledBidirectionalText:Be}=Kr;if(we&&ue.sections.length===1){ye=[];const rt=we(ue.toString(),Ua(ue,N,A,o,g,te));for(const ut of rt){const Ct=new fs;Ct.text=ut,Ct.sections=ue.sections;for(let tr=0;tr<ut.length;tr++)Ct.sectionIndex.push(0);ye.push(Ct)}}else if(Be){ye=[];const rt=Be(ue.text,ue.sectionIndex,Ua(ue,N,A,o,g,te));for(const ut of rt){const Ct=new fs;Ct.text=ut[0],Ct.sectionIndex=ut[1],Ct.sections=ue.sections,ye.push(Ct)}}else ye=(function(rt,ut){const Ct=[],tr=rt.text;let Mt=0;for(const Pt of ut)Ct.push(rt.substring(Mt,Pt)),Mt=Pt;return Mt<tr.length&&Ct.push(rt.substring(Mt,tr.length)),Ct})(ue,Ua(ue,N,A,o,g,te));const ke=[],Fe={positionedLines:ke,text:ue.toString(),top:q[1],bottom:q[1],left:q[0],right:q[0],writingMode:H,iconsInText:!1,verticalizable:!1};return(function(rt,ut,Ct,tr,Mt,Pt,Ut,Lt,zt,at,Gt,qt){let hr=0,pn=hs,on=0,Pi=0;const Ns=Lt==="right"?1:Lt==="left"?0:.5;let sa=0;for(const Wn of Mt){Wn.trim();const ki=Wn.getMaxScale(),ka=(ki-1)*Sn,la={positionedGlyphs:[],lineOffset:0};rt.positionedLines[sa]=la;const Za=la.positionedGlyphs;let ua=0;if(!Wn.length()){pn+=Pt,++sa;continue}for(let Po=0;Po<Wn.length();Po++){const Nr=Wn.getSection(Po),_n=Wn.getSectionIndex(Po),Tn=Wn.getCharCode(Po);let Bo=0,$n=null,Sp=null,vu=null,_u=Sn;const $s=!(zt===u.ah.horizontal||!Gt&&!Ju(Tn)||Gt&&(Mn[Tn]||(Ai=Tn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Ai)))));if(Nr.imageName){const ps=tr[Nr.imageName];if(!ps)continue;vu=Nr.imageName,rt.iconsInText=rt.iconsInText||!0,Sp=ps.paddedRect;const Ni=ps.displaySize;Nr.scale=Nr.scale*Sn/qt,$n={width:Ni[0],height:Ni[1],left:Aa,top:-pp,advance:$s?Ni[1]:Ni[0]},Bo=ka+(Sn-Ni[1]*Nr.scale),_u=$n.advance;const hc=$s?Ni[0]*Nr.scale-Sn*ki:Ni[1]*Nr.scale-Sn*ki;hc>0&&hc>ua&&(ua=hc)}else{const ps=Ct[Nr.fontStack],Ni=ps&&ps[Tn];if(Ni&&Ni.rect)Sp=Ni.rect,$n=Ni.metrics;else{const hc=ut[Nr.fontStack],ug=hc&&hc[Tn];if(!ug)continue;$n=ug.metrics}Bo=(ki-Nr.scale)*Sn}$s?(rt.verticalizable=!0,Za.push({glyph:Tn,imageName:vu,x:hr,y:pn+Bo,vertical:$s,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:_n,metrics:$n,rect:Sp}),hr+=_u*Nr.scale+at):(Za.push({glyph:Tn,imageName:vu,x:hr,y:pn+Bo,vertical:$s,scale:Nr.scale,fontStack:Nr.fontStack,sectionIndex:_n,metrics:$n,rect:Sp}),hr+=$n.advance*Nr.scale+at)}Za.length!==0&&(on=Math.max(hr-at,on),Ox(Za,0,Za.length-1,Ns,ua)),hr=0;const ds=Pt*ki+ua;la.lineOffset=Math.max(ua,ka),pn+=ds,Pi=Math.max(ds,Pi),++sa}var Ai;const Wa=pn-hs,{horizontalAlign:Ha,verticalAlign:Ga}=jf(Ut);(function(Wn,ki,ka,la,Za,ua,ds,Po,Nr){const _n=(ki-ka)*Za;let Tn=0;Tn=ua!==ds?-Po*la-hs:(-la*Nr+.5)*ds;for(const Bo of Wn)for(const $n of Bo.positionedGlyphs)$n.x+=_n,$n.y+=Tn})(rt.positionedLines,Ns,Ha,Ga,on,Pi,Pt,Wa,Mt.length),rt.top+=-Ga*Wa,rt.bottom=rt.top+Wa,rt.left+=-Ha*on,rt.right=rt.left+on})(Fe,o,h,g,ye,k,C,D,H,N,Y,oe),!(function(rt){for(const ut of rt)if(ut.positionedGlyphs.length!==0)return!1;return!0})(ke)&&Fe}const Mn={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Cx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Sv={40:!0};function Tv(c,o,h,g,x,A){if(o.imageName){const k=g[o.imageName];return k?k.displaySize[0]*o.scale*Sn/A+x:0}{const k=h[o.fontStack],C=k&&k[c];return C?C.metrics.advance*o.scale+x:0}}function Pv(c,o,h,g){const x=Math.pow(c-o,2);return g?c<o?x/2:2*x:x+Math.abs(h)*h}function Av(c,o,h){let g=0;return c===10&&(g-=1e4),h&&(g+=150),c!==40&&c!==65288||(g+=50),o!==41&&o!==65289||(g+=50),g}function ig(c,o,h,g,x,A){let k=null,C=Pv(o,h,x,A);for(const D of g){const N=Pv(o-D.x,h,x,A)+D.badness;N<=C&&(k=D,C=N)}return{index:c,x:o,priorBreak:k,badness:C}}function kv(c){return c?kv(c.priorBreak).concat(c.index):[]}function Ua(c,o,h,g,x,A){if(!c)return[];const k=[],C=(function(H,Y,te,oe,ue,ye){let we=0;for(let Be=0;Be<H.length();Be++){const ke=H.getSection(Be);we+=Tv(H.getCharCode(Be),ke,oe,ue,Y,ye)}return we/Math.max(1,Math.ceil(we/te))})(c,o,h,g,x,A),D=c.text.indexOf("​")>=0;let N=0;for(let H=0;H<c.length();H++){const Y=c.getSection(H),te=c.getCharCode(H);if(Mn[te]||(N+=Tv(te,Y,g,x,o,A)),H<c.length()-1){const oe=!((q=te)<11904)&&(!!Pr["CJK Compatibility Forms"](q)||!!Pr["CJK Compatibility"](q)||!!Pr["CJK Strokes"](q)||!!Pr["CJK Symbols and Punctuation"](q)||!!Pr["Enclosed CJK Letters and Months"](q)||!!Pr["Halfwidth and Fullwidth Forms"](q)||!!Pr["Ideographic Description Characters"](q)||!!Pr["Vertical Forms"](q)||Yu.test(String.fromCodePoint(q)));(Cx[te]||oe||Y.imageName||H!==c.length()-2&&Sv[c.getCharCode(H+1)])&&k.push(ig(H+1,N,C,k,Av(te,c.getCharCode(H+1),oe&&D),!1))}}var q;return kv(ig(c.length(),N,C,k,0,!0))}function jf(c){let o=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:o,verticalAlign:h}}function Ox(c,o,h,g,x){if(!g&&!x)return;const A=c[h],k=(c[h].x+A.metrics.advance*A.scale)*g;for(let C=o;C<=h;C++)c[C].x-=k,c[C].y+=x}function mu(c,o,h){const{horizontalAlign:g,verticalAlign:x}=jf(h),A=o[0]-c.displaySize[0]*g,k=o[1]-c.displaySize[1]*x;return{image:c,top:k,bottom:k+c.displaySize[1],left:A,right:A+c.displaySize[0]}}function Bf(c){var o,h;let g=c.left,x=c.top,A=c.right-g,k=c.bottom-x;const C=(o=c.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",D=(h=c.image.textFitHeight)!==null&&h!==void 0?h:"stretchOrShrink",N=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(D==="proportional"){if(C==="stretchOnly"&&A/k<N||C==="proportional"){const q=Math.ceil(k*N);g*=q/A,A=q}}else if(C==="proportional"&&D==="stretchOnly"&&N!==0&&A/k>N){const q=Math.ceil(A/N);x*=q/k,k=q}return{x1:g,y1:x,x2:g+A,y2:x+k}}function gu(c,o,h,g,x,A){const k=c.image;let C;if(k.content){const ye=k.content,we=k.pixelRatio||1;C=[ye[0]/we,ye[1]/we,k.displaySize[0]-ye[2]/we,k.displaySize[1]-ye[3]/we]}const D=o.left*A,N=o.right*A;let q,H,Y,te;h==="width"||h==="both"?(te=x[0]+D-g[3],H=x[0]+N+g[1]):(te=x[0]+(D+N-k.displaySize[0])/2,H=te+k.displaySize[0]);const oe=o.top*A,ue=o.bottom*A;return h==="height"||h==="both"?(q=x[1]+oe-g[0],Y=x[1]+ue+g[2]):(q=x[1]+(oe+ue-k.displaySize[1])/2,Y=q+k.displaySize[1]),{image:k,top:q,right:H,bottom:Y,left:te,collisionPadding:C}}const yu=255,jo=128,Bs=yu*jo;function Ev(c,o){const{expression:h}=o;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new kr(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:g,interpolationType:x}=h;let A=0;for(;A<g.length&&g[A]<=c;)A++;A=Math.max(0,A-1);let k=A;for(;k<g.length&&g[k]<c+1;)k++;k=Math.min(g.length-1,k);const C=g[A],D=g[k];return h.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:D,interpolationType:x}:{kind:"camera",minZoom:C,maxZoom:D,minSize:h.evaluate(new kr(C)),maxSize:h.evaluate(new kr(D)),interpolationType:x}}}function Nf(c,o,h){let g="never";const x=c.get(o);return x?g=x:c.get(h)&&(g="always"),g}const Ix=cu.VectorTileFeature.types,Mv=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $f(c,o,h,g,x,A,k,C,D,N,q,H,Y){const te=C?Math.min(Bs,Math.round(C[0])):0,oe=C?Math.min(Bs,Math.round(C[1])):0;c.emplaceBack(o,h,Math.round(32*g),Math.round(32*x),A,k,(te<<1)+(D?1:0),oe,16*N,16*q,256*H,256*Y)}function mh(c,o,h){c.emplaceBack(o.x,o.y,h),c.emplaceBack(o.x,o.y,h),c.emplaceBack(o.x,o.y,h),c.emplaceBack(o.x,o.y,h)}function mp(c){for(const o of c.sections)if(zs(o.text))return!0;return!1}class gp{constructor(o){this.layoutVertexArray=new ja,this.indexArray=new Ba,this.programConfigurations=o,this.segments=new wr,this.dynamicLayoutVertexArray=new Ro,this.opacityVertexArray=new Fi,this.hasVisibleVertices=!1,this.placedSymbolArray=new Zr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,h,g,x){this.isEmpty()||(g&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mf.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,oc.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,Mv,!0),this.opacityVertexBuffer.itemSize=1),(g||x)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ot("SymbolBuffers",gp);class Vf{constructor(o,h,g){this.layoutVertexArray=new o,this.layoutAttributes=h,this.indexArray=new g,this.segments=new wr,this.collisionVertexArray=new yo}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,up.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ot("CollisionBuffers",Vf);class gh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map((k=>k.id)),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Gd([]),this.placementViewportMatrix=Gd([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Ev(this.zoom,h["text-size"]),this.iconSizeData=Ev(this.zoom,h["icon-size"]);const g=this.layers[0].layout,x=g.get("symbol-sort-key"),A=g.get("symbol-z-order");this.canOverlap=Nf(g,"text-overlap","text-allow-overlap")!=="never"||Nf(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=A!=="viewport-y"&&!x.isConstant(),this.sortFeaturesByY=(A==="viewport-y"||A==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map((k=>u.ah[k]))),this.stateDependentLayerIds=this.layers.filter((k=>k.isStateDependent())).map((k=>k.id)),this.sourceID=o.sourceID}createArrays(){this.text=new gp(new ss(this.layers,this.zoom,(o=>/^text/.test(o)))),this.icon=new gp(new ss(this.layers,this.zoom,(o=>/^icon/.test(o)))),this.glyphOffsetArray=new Yr,this.lineVertexArray=new oi,this.symbolInstances=new vr,this.textAnchorOffsets=new Jr}calculateGlyphDependencies(o,h,g,x,A){for(let k=0;k<o.length;k++)if(h[o.charCodeAt(k)]=!0,(g||x)&&A){const C=sc[o.charAt(k)];C&&(h[C.charCodeAt(0)]=!0)}}populate(o,h,g){const x=this.layers[0],A=x.layout,k=A.get("text-font"),C=A.get("text-field"),D=A.get("icon-image"),N=(C.value.kind!=="constant"||C.value.value instanceof Zi&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),q=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,H=A.get("symbol-sort-key");if(this.features=[],!N&&!q)return;const Y=h.iconDependencies,te=h.glyphDependencies,oe=h.availableImages,ue=new kr(this.zoom);for(const{feature:ye,id:we,index:Be,sourceLayerIndex:ke}of o){const Fe=x._featureFilter.needGeometry,rt=lu(ye,Fe);if(!x._featureFilter.filter(ue,rt,g))continue;let ut,Ct;if(Fe||(rt.geometry=su(ye)),N){const Mt=x.getValueAndResolveTokens("text-field",rt,g,oe),Pt=Zi.factory(Mt),Ut=this.hasRTLText=this.hasRTLText||mp(Pt);(!Ut||Kr.getRTLTextPluginStatus()==="unavailable"||Ut&&Kr.isParsed())&&(ut=Va(Pt,x,rt))}if(q){const Mt=x.getValueAndResolveTokens("icon-image",rt,g,oe);Ct=Mt instanceof Si?Mt:Si.fromString(Mt)}if(!ut&&!Ct)continue;const tr=this.sortFeaturesByKey?H.evaluate(rt,{},g):void 0;if(this.features.push({id:we,text:ut,icon:Ct,index:Be,sourceLayerIndex:ke,geometry:rt.geometry,properties:ye.properties,type:Ix[ye.type],sortKey:tr}),Ct&&(Y[Ct.name]=!0),ut){const Mt=k.evaluate(rt,{},g).join(","),Pt=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(u.ah.vertical)>=0;for(const Ut of ut.sections)if(Ut.image)Y[Ut.image.name]=!0;else{const Lt=cf(ut.toString()),zt=Ut.fontStack||Mt,at=te[zt]=te[zt]||{};this.calculateGlyphDependencies(Ut.text,at,Pt,this.allowVerticalPlacement,Lt)}}}A.get("symbol-placement")==="line"&&(this.features=(function(ye){const we={},Be={},ke=[];let Fe=0;function rt(Mt){ke.push(ye[Mt]),Fe++}function ut(Mt,Pt,Ut){const Lt=Be[Mt];return delete Be[Mt],Be[Pt]=Lt,ke[Lt].geometry[0].pop(),ke[Lt].geometry[0]=ke[Lt].geometry[0].concat(Ut[0]),Lt}function Ct(Mt,Pt,Ut){const Lt=we[Pt];return delete we[Pt],we[Mt]=Lt,ke[Lt].geometry[0].shift(),ke[Lt].geometry[0]=Ut[0].concat(ke[Lt].geometry[0]),Lt}function tr(Mt,Pt,Ut){const Lt=Ut?Pt[0][Pt[0].length-1]:Pt[0][0];return`${Mt}:${Lt.x}:${Lt.y}`}for(let Mt=0;Mt<ye.length;Mt++){const Pt=ye[Mt],Ut=Pt.geometry,Lt=Pt.text?Pt.text.toString():null;if(!Lt){rt(Mt);continue}const zt=tr(Lt,Ut),at=tr(Lt,Ut,!0);if(zt in Be&&at in we&&Be[zt]!==we[at]){const Gt=Ct(zt,at,Ut),qt=ut(zt,at,ke[Gt].geometry);delete we[zt],delete Be[at],Be[tr(Lt,ke[qt].geometry,!0)]=qt,ke[Gt].geometry=null}else zt in Be?ut(zt,at,Ut):at in we?Ct(zt,at,Ut):(rt(Mt),we[zt]=Fe-1,Be[at]=Fe-1)}return ke.filter((Mt=>Mt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ye,we)=>ye.sortKey-we.sortKey))}update(o,h,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,h,this.layers,g),this.icon.programConfigurations.updatePaintArrays(o,h,this.layers,g))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,h){const g=this.lineVertexArray.length;if(o.segment!==void 0){let x=o.dist(h[o.segment+1]),A=o.dist(h[o.segment]);const k={};for(let C=o.segment+1;C<h.length;C++)k[C]={x:h[C].x,y:h[C].y,tileUnitDistanceFromAnchor:x},C<h.length-1&&(x+=h[C+1].dist(h[C]));for(let C=o.segment||0;C>=0;C--)k[C]={x:h[C].x,y:h[C].y,tileUnitDistanceFromAnchor:A},C>0&&(A+=h[C-1].dist(h[C]));for(let C=0;C<h.length;C++){const D=k[C];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(o,h,g,x,A,k,C,D,N,q,H,Y){const te=o.indexArray,oe=o.layoutVertexArray,ue=o.segments.prepareSegment(4*h.length,oe,te,this.canOverlap?k.sortKey:void 0),ye=this.glyphOffsetArray.length,we=ue.vertexLength,Be=this.allowVerticalPlacement&&C===u.ah.vertical?Math.PI/2:0,ke=k.text&&k.text.sections;for(let Fe=0;Fe<h.length;Fe++){const{tl:rt,tr:ut,bl:Ct,br:tr,tex:Mt,pixelOffsetTL:Pt,pixelOffsetBR:Ut,minFontScaleX:Lt,minFontScaleY:zt,glyphOffset:at,isSDF:Gt,sectionIndex:qt}=h[Fe],hr=ue.vertexLength,pn=at[1];$f(oe,D.x,D.y,rt.x,pn+rt.y,Mt.x,Mt.y,g,Gt,Pt.x,Pt.y,Lt,zt),$f(oe,D.x,D.y,ut.x,pn+ut.y,Mt.x+Mt.w,Mt.y,g,Gt,Ut.x,Pt.y,Lt,zt),$f(oe,D.x,D.y,Ct.x,pn+Ct.y,Mt.x,Mt.y+Mt.h,g,Gt,Pt.x,Ut.y,Lt,zt),$f(oe,D.x,D.y,tr.x,pn+tr.y,Mt.x+Mt.w,Mt.y+Mt.h,g,Gt,Ut.x,Ut.y,Lt,zt),mh(o.dynamicLayoutVertexArray,D,Be),te.emplaceBack(hr,hr+1,hr+2),te.emplaceBack(hr+1,hr+2,hr+3),ue.vertexLength+=4,ue.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(at[0]),Fe!==h.length-1&&qt===h[Fe+1].sectionIndex||o.programConfigurations.populatePaintArrays(oe.length,k,k.index,{},Y,ke&&ke[qt])}o.placedSymbolArray.emplaceBack(D.x,D.y,ye,this.glyphOffsetArray.length-ye,we,N,q,D.segment,g?g[0]:0,g?g[1]:0,x[0],x[1],C,0,!1,0,H)}_addCollisionDebugVertex(o,h,g,x,A,k){return h.emplaceBack(0,0),o.emplaceBack(g.x,g.y,x,A,Math.round(k.x),Math.round(k.y))}addCollisionDebugVertices(o,h,g,x,A,k,C){const D=A.segments.prepareSegment(4,A.layoutVertexArray,A.indexArray),N=D.vertexLength,q=A.layoutVertexArray,H=A.collisionVertexArray,Y=C.anchorX,te=C.anchorY;this._addCollisionDebugVertex(q,H,k,Y,te,new S(o,h)),this._addCollisionDebugVertex(q,H,k,Y,te,new S(g,h)),this._addCollisionDebugVertex(q,H,k,Y,te,new S(g,x)),this._addCollisionDebugVertex(q,H,k,Y,te,new S(o,x)),D.vertexLength+=4;const oe=A.indexArray;oe.emplaceBack(N,N+1),oe.emplaceBack(N+1,N+2),oe.emplaceBack(N+2,N+3),oe.emplaceBack(N+3,N),D.primitiveLength+=4}addDebugCollisionBoxes(o,h,g,x){for(let A=o;A<h;A++){const k=this.collisionBoxArray.get(A);this.addCollisionDebugVertices(k.x1,k.y1,k.x2,k.y2,x?this.textCollisionBox:this.iconCollisionBox,k.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Vf(wa,cp.members,Bn),this.iconCollisionBox=new Vf(wa,cp.members,Bn);for(let o=0;o<this.symbolInstances.length;o++){const h=this.symbolInstances.get(o);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(o,h,g,x,A,k,C,D,N){const q={};for(let H=h;H<g;H++){const Y=o.get(H);q.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.textFeatureIndex=Y.featureIndex;break}for(let H=x;H<A;H++){const Y=o.get(H);q.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=k;H<C;H++){const Y=o.get(H);q.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.iconFeatureIndex=Y.featureIndex;break}for(let H=D;H<N;H++){const Y=o.get(H);q.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},q.verticalIconFeatureIndex=Y.featureIndex;break}return q}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const g=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,h){const g=o.placedSymbolArray.get(h),x=g.vertexStartIndex+4*g.numGlyphs;for(let A=g.vertexStartIndex;A<x;A+=4)o.indexArray.emplaceBack(A,A+1,A+2),o.indexArray.emplaceBack(A+1,A+2,A+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(o),g=Math.cos(o),x=[],A=[],k=[];for(let C=0;C<this.symbolInstances.length;++C){k.push(C);const D=this.symbolInstances.get(C);x.push(0|Math.round(h*D.anchorX+g*D.anchorY)),A.push(D.featureIndex)}return k.sort(((C,D)=>x[C]-x[D]||A[D]-A[C])),k}addToSortKeyRanges(o,h){const g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===h?g.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const g=this.symbolInstances.get(h);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach(((x,A,k)=>{x>=0&&k.indexOf(x)===A&&this.addIndicesForPlacedSymbol(this.text,x)})),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ag,yp;Ot("SymbolBucket",gh,{omit:["layers","collisionBoxArray","features","compareText"]}),gh.MAX_GLYPHS=65535,gh.addDynamicAttributes=mh;var yh={get paint(){return yp=yp||new P({"icon-opacity":new Yt(Ve.paint_symbol["icon-opacity"]),"icon-color":new Yt(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Yt(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yt(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yt(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new It(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new It(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yt(Ve.paint_symbol["text-opacity"]),"text-color":new Yt(Ve.paint_symbol["text-color"],{runtimeType:bi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Yt(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Yt(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Yt(Ve.paint_symbol["text-halo-blur"]),"text-translate":new It(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new It(Ve.paint_symbol["text-translate-anchor"])})},get layout(){return ag=ag||new P({"symbol-placement":new It(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new It(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new It(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yt(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new It(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new It(Ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new It(Ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new It(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new It(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new It(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yt(Ve.layout_symbol["icon-size"]),"icon-text-fit":new It(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new It(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yt(Ve.layout_symbol["icon-image"]),"icon-rotate":new Yt(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Yt(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new It(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Yt(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Yt(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new It(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new It(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new It(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Yt(Ve.layout_symbol["text-field"]),"text-font":new Yt(Ve.layout_symbol["text-font"]),"text-size":new Yt(Ve.layout_symbol["text-size"]),"text-max-width":new Yt(Ve.layout_symbol["text-max-width"]),"text-line-height":new It(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Yt(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Yt(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Yt(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new It(Ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Yt(Ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Yt(Ve.layout_symbol["text-anchor"]),"text-max-angle":new It(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new It(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Yt(Ve.layout_symbol["text-rotate"]),"text-padding":new It(Ve.layout_symbol["text-padding"]),"text-keep-upright":new It(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Yt(Ve.layout_symbol["text-transform"]),"text-offset":new Yt(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new It(Ve.layout_symbol["text-allow-overlap"]),"text-overlap":new It(Ve.layout_symbol["text-overlap"]),"text-ignore-placement":new It(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new It(Ve.layout_symbol["text-optional"])})}};class vp{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:bs,this.defaultValue=o}evaluate(o){if(o.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(o.formattedSection))return h.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ot("FormatSectionOverride",vp,{omit:["defaultValue"]});class cc extends d{constructor(o){super(o,yh)}recalculate(o,h){if(super.recalculate(o,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const g=this.layout.get("text-writing-mode");if(g){const x=[];for(const A of g)x.indexOf(A)<0&&x.push(A);this.layout._values["text-writing-mode"]=x}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,h,g,x){const A=this.layout.get(o).evaluate(h,{},g,x),k=this._unevaluatedLayout._values[o];return k.isDataDriven()||Ms(k.value)||!A?A:(function(C,D){return D.replace(/{([^{}]+)}/g,((N,q)=>C&&q in C?String(C[q]):""))})(h.properties,A)}createBucket(o){return new gh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of yh.paint.overridableProperties){if(!cc.hasPaintOverride(this.layout,o))continue;const h=this.paint.get(o),g=new vp(h),x=new Ji(g,h.property.specification);let A=null;A=h.value.kind==="constant"||h.value.kind==="source"?new hl("source",x):new fl("composite",x,h.value.zoomStops),this.paint._values[o]=new _a(h.property,A,h.parameters)}}_handleOverridablePaintPropertyUpdate(o,h,g){return!(!this.layout||h.isDataDriven()||g.isDataDriven())&&cc.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,h){const g=o.get("text-field"),x=yh.paint.properties[h];let A=!1;const k=C=>{for(const D of C)if(x.overrides&&x.overrides.hasOverride(D))return void(A=!0)};if(g.value.kind==="constant"&&g.value.value instanceof Zi)k(g.value.value.sections);else if(g.value.kind==="source"){const C=N=>{A||(N instanceof oo&&Hr(N.value)===ao?k(N.value.sections):N instanceof al?k(N.sections):N.eachChild(C))},D=g.value;D._styleExpression&&C(D._styleExpression.expression)}return A}}let og;var Dx={get paint(){return og=og||new P({"background-color":new It(Ve.paint_background["background-color"]),"background-pattern":new ec(Ve.paint_background["background-pattern"]),"background-opacity":new It(Ve.paint_background["background-opacity"])})}};class _p extends d{constructor(o){super(o,Dx)}}let Cv;var qf={get paint(){return Cv=Cv||new P({"raster-opacity":new It(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new It(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new It(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new It(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new It(Ve.paint_raster["raster-saturation"]),"raster-contrast":new It(Ve.paint_raster["raster-contrast"]),"raster-resampling":new It(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new It(Ve.paint_raster["raster-fade-duration"])})}};class zx extends d{constructor(o){super(o,qf)}}class xp extends d{constructor(o){super(o,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class f{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const p=63710088e-1;class b{constructor(o,h){if(isNaN(o)||isNaN(h))throw new Error(`Invalid LngLat object: (${o}, ${h})`);if(this.lng=+o,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new b(J(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const h=Math.PI/180,g=this.lat*h,x=o.lat*h,A=Math.sin(g)*Math.sin(x)+Math.cos(g)*Math.cos(x)*Math.cos((o.lng-this.lng)*h);return p*Math.acos(Math.min(A,1))}static convert(o){if(o instanceof b)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new b(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new b(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const M=2*Math.PI*p;function j(c){return M*Math.cos(c*Math.PI/180)}function $(c){return(180+c)/360}function ae(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function be(c,o){return c/j(o)}function Ee(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class et{constructor(o,h,g=0){this.x=+o,this.y=+h,this.z=+g}static fromLngLat(o,h=0){const g=b.convert(o);return new et($(g.lng),ae(g.lat),be(h,g.lat))}toLngLat(){return new b(360*this.x-180,Ee(this.y))}toAltitude(){return this.z*j(Ee(this.y))}meterInMercatorCoordinateUnits(){return 1/M*(o=Ee(this.y),1/Math.cos(o*Math.PI/180));var o}}function dt(c,o,h){var g=2*Math.PI*6378137/256/Math.pow(2,h);return[c*g-2*Math.PI*6378137/2,o*g-2*Math.PI*6378137/2]}class gt{constructor(o,h,g){if(!(function(x,A,k){return!(x<0||x>25||k<0||k>=Math.pow(2,x)||A<0||A>=Math.pow(2,x))})(o,h,g))throw new Error(`x=${h}, y=${g}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=h,this.y=g,this.key=Vt(0,o,o,h,g)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,h,g){const x=(k=this.y,C=this.z,D=dt(256*(A=this.x),256*(k=Math.pow(2,C)-k-1),C),N=dt(256*(A+1),256*(k+1),C),D[0]+","+D[1]+","+N[0]+","+N[1]);var A,k,C,D,N;const q=(function(H,Y,te){let oe,ue="";for(let ye=H;ye>0;ye--)oe=1<<ye-1,ue+=(Y&oe?1:0)+(te&oe?2:0);return ue})(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,q).replace(/{bbox-epsg-3857}/g,x)}isChildOf(o){const h=this.z-o.z;return h>0&&o.x===this.x>>h&&o.y===this.y>>h}getTilePoint(o){const h=Math.pow(2,this.z);return new S((o.x*h-this.x)*Nn,(o.y*h-this.y)*Nn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ht{constructor(o,h){this.wrap=o,this.canonical=h,this.key=Vt(o,h.z,h.z,h.x,h.y)}}class Et{constructor(o,h,g,x,A){if(o<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${g}`);this.overscaledZ=o,this.wrap=h,this.canonical=new gt(g,+x,+A),this.key=Vt(h,o,g,x,A)}clone(){return new Et(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-o;return o>this.canonical.z?new Et(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Et(o,this.wrap,o,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(o,h){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const g=this.canonical.z-o;return o>this.canonical.z?Vt(this.wrap*+h,o,this.canonical.z,this.canonical.x,this.canonical.y):Vt(this.wrap*+h,o,o,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const h=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>h&&o.canonical.y===this.canonical.y>>h}children(o){if(this.overscaledZ>=o)return[new Et(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,g=2*this.canonical.x,x=2*this.canonical.y;return[new Et(h,this.wrap,h,g,x),new Et(h,this.wrap,h,g+1,x),new Et(h,this.wrap,h,g,x+1),new Et(h,this.wrap,h,g+1,x+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Et(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Et(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ht(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new et(o.x-this.wrap,o.y))}}function Vt(c,o,h,g,x){(c*=2)<0&&(c=-1*c-1);const A=1<<h;return(A*A*c+A*x+g).toString(36)+h.toString(36)+o.toString(36)}Ot("CanonicalTileID",gt),Ot("OverscaledTileID",Et,{omit:["posMatrix"]});class Kt{constructor(o,h,g,x=1,A=1,k=1,C=0){if(this.uid=o,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void Le(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=h.height;const D=this.dim=h.height-2;switch(this.data=new Uint32Array(h.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=x,this.greenFactor=A,this.blueFactor=k,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let N=0;N<D;N++)this.data[this._idx(-1,N)]=this.data[this._idx(0,N)],this.data[this._idx(D,N)]=this.data[this._idx(D-1,N)],this.data[this._idx(N,-1)]=this.data[this._idx(N,0)],this.data[this._idx(N,D)]=this.data[this._idx(N,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let N=0;N<D;N++)for(let q=0;q<D;q++){const H=this.get(N,q);H>this.max&&(this.max=H),H<this.min&&(this.min=H)}}get(o,h){const g=new Uint8Array(this.data.buffer),x=4*this._idx(o,h);return this.unpack(g[x],g[x+1],g[x+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,h){if(o<-1||o>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(o+1)}unpack(o,h,g){return o*this.redFactor+h*this.greenFactor+g*this.blueFactor-this.baseShift}getPixels(){return new Ti({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,h,g){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let x=h*this.dim,A=h*this.dim+this.dim,k=g*this.dim,C=g*this.dim+this.dim;switch(h){case-1:x=A-1;break;case 1:A=x+1}switch(g){case-1:k=C-1;break;case 1:C=k+1}const D=-h*this.dim,N=-g*this.dim;for(let q=k;q<C;q++)for(let H=x;H<A;H++)this.data[this._idx(H,q)]=o.data[this._idx(H+D,q+N)]}}Ot("DEMData",Kt);class Un{constructor(o){this._stringToNumber={},this._numberToString=[];for(let h=0;h<o.length;h++){const g=o[h];this._stringToNumber[g]=h,this._numberToString[h]=g}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class Ze{constructor(o,h,g,x,A){this.type="Feature",this._vectorTileFeature=o,o._z=h,o._x=g,o._y=x,this.properties=o.properties,this.id=A}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(o[h]=this[h]);return o}}class Ie{constructor(o,h){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Ql(Nn,16,0),this.grid3D=new Ql(Nn,16,0),this.featureIndexArray=new dn,this.promoteId=h}insert(o,h,g,x,A,k){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,x,A);const D=k?this.grid3D:this.grid;for(let N=0;N<h.length;N++){const q=h[N],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<q.length;Y++){const te=q[Y];H[0]=Math.min(H[0],te.x),H[1]=Math.min(H[1],te.y),H[2]=Math.max(H[2],te.x),H[3]=Math.max(H[3],te.y)}H[0]<Nn&&H[1]<Nn&&H[2]>=0&&H[3]>=0&&D.insert(C,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cu.VectorTile(new _l(this.rawTileData)).layers,this.sourceLayerCoder=new Un(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,h,g,x){this.loadVTLayers();const A=o.params||{},k=Nn/o.tileSize/o.scale,C=Wu(A.filter),D=o.queryGeometry,N=o.queryPadding*k,q=St(D),H=this.grid.query(q.minX-N,q.minY-N,q.maxX+N,q.maxY+N),Y=St(o.cameraQueryGeometry),te=this.grid3D.query(Y.minX-N,Y.minY-N,Y.maxX+N,Y.maxY+N,((ye,we,Be,ke)=>(function(Fe,rt,ut,Ct,tr){for(const Pt of Fe)if(rt<=Pt.x&&ut<=Pt.y&&Ct>=Pt.x&&tr>=Pt.y)return!0;const Mt=[new S(rt,ut),new S(rt,tr),new S(Ct,tr),new S(Ct,ut)];if(Fe.length>2){for(const Pt of Mt)if(tc(Fe,Pt))return!0}for(let Pt=0;Pt<Fe.length-1;Pt++)if(Zy(Fe[Pt],Fe[Pt+1],Mt))return!0;return!1})(o.cameraQueryGeometry,ye-N,we-N,Be+N,ke+N)));for(const ye of te)H.push(ye);H.sort(Jt);const oe={};let ue;for(let ye=0;ye<H.length;ye++){const we=H[ye];if(we===ue)continue;ue=we;const Be=this.featureIndexArray.get(we);let ke=null;this.loadMatchingFeature(oe,Be.bucketIndex,Be.sourceLayerIndex,Be.featureIndex,C,A.layers,A.availableImages,h,g,x,((Fe,rt,ut)=>(ke||(ke=su(Fe)),rt.queryIntersectsFeature(D,Fe,ut,ke,this.z,o.transform,k,o.pixelPosMatrix))))}return oe}loadMatchingFeature(o,h,g,x,A,k,C,D,N,q,H){const Y=this.bucketLayerIDs[h];if(k&&!(function(ye,we){for(let Be=0;Be<ye.length;Be++)if(we.indexOf(ye[Be])>=0)return!0;return!1})(k,Y))return;const te=this.sourceLayerCoder.decode(g),oe=this.vtLayers[te].feature(x);if(A.needGeometry){const ye=lu(oe,!0);if(!A.filter(new kr(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!A.filter(new kr(this.tileID.overscaledZ),oe))return;const ue=this.getId(oe,te);for(let ye=0;ye<Y.length;ye++){const we=Y[ye];if(k&&k.indexOf(we)<0)continue;const Be=D[we];if(!Be)continue;let ke={};ue&&q&&(ke=q.getState(Be.sourceLayer||"_geojsonTileLayer",ue));const Fe=ie({},N[we]);Fe.paint=Ke(Fe.paint,Be.paint,oe,ke,C),Fe.layout=Ke(Fe.layout,Be.layout,oe,ke,C);const rt=!H||H(oe,Be,ke);if(!rt)continue;const ut=new Ze(oe,this.z,this.x,this.y,ue);ut.layer=Fe;let Ct=o[we];Ct===void 0&&(Ct=o[we]=[]),Ct.push({featureIndex:x,feature:ut,intersectionZ:rt})}}lookupSymbolFeatures(o,h,g,x,A,k,C,D){const N={};this.loadVTLayers();const q=Wu(A);for(const H of o)this.loadMatchingFeature(N,g,x,H,q,k,C,D,h);return N}hasLayer(o){for(const h of this.bucketLayerIDs)for(const g of h)if(o===g)return!0;return!1}getId(o,h){let g=o.id;return this.promoteId&&(g=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof g=="boolean"&&(g=Number(g))),g}}function Ke(c,o,h,g,x){return ve(c,((A,k)=>{const C=o instanceof ru?o.get(k):null;return C&&C.evaluate?C.evaluate(h,g,x):C}))}function St(c){let o=1/0,h=1/0,g=-1/0,x=-1/0;for(const A of c)o=Math.min(o,A.x),h=Math.min(h,A.y),g=Math.max(g,A.x),x=Math.max(x,A.y);return{minX:o,minY:h,maxX:g,maxY:x}}function Jt(c,o){return o-c}function sr(c,o,h,g,x){const A=[];for(let k=0;k<c.length;k++){const C=c[k];let D;for(let N=0;N<C.length-1;N++){let q=C[N],H=C[N+1];q.x<o&&H.x<o||(q.x<o?q=new S(o,q.y+(o-q.x)/(H.x-q.x)*(H.y-q.y))._round():H.x<o&&(H=new S(o,q.y+(o-q.x)/(H.x-q.x)*(H.y-q.y))._round()),q.y<h&&H.y<h||(q.y<h?q=new S(q.x+(h-q.y)/(H.y-q.y)*(H.x-q.x),h)._round():H.y<h&&(H=new S(q.x+(h-q.y)/(H.y-q.y)*(H.x-q.x),h)._round()),q.x>=g&&H.x>=g||(q.x>=g?q=new S(g,q.y+(g-q.x)/(H.x-q.x)*(H.y-q.y))._round():H.x>=g&&(H=new S(g,q.y+(g-q.x)/(H.x-q.x)*(H.y-q.y))._round()),q.y>=x&&H.y>=x||(q.y>=x?q=new S(q.x+(x-q.y)/(H.y-q.y)*(H.x-q.x),x)._round():H.y>=x&&(H=new S(q.x+(x-q.y)/(H.y-q.y)*(H.x-q.x),x)._round()),D&&q.equals(D[D.length-1])||(D=[q],A.push(D)),D.push(H)))))}}return A}Ot("FeatureIndex",Ie,{omit:["rawTileData","sourceLayerCoder"]});class Qt extends S{constructor(o,h,g,x){super(o,h),this.angle=g,x!==void 0&&(this.segment=x)}clone(){return new Qt(this.x,this.y,this.angle,this.segment)}}function pr(c,o,h,g,x){if(o.segment===void 0||h===0)return!0;let A=o,k=o.segment+1,C=0;for(;C>-h/2;){if(k--,k<0)return!1;C-=c[k].dist(A),A=c[k]}C+=c[k].dist(c[k+1]),k++;const D=[];let N=0;for(;C<h/2;){const q=c[k],H=c[k+1];if(!H)return!1;let Y=c[k-1].angleTo(q)-q.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:C,angleDelta:Y}),N+=Y;C-D[0].distance>g;)N-=D.shift().angleDelta;if(N>x)return!1;k++,C+=q.dist(H)}return!0}function vi(c){let o=0;for(let h=0;h<c.length-1;h++)o+=c[h].dist(c[h+1]);return o}function Wr(c,o,h){return c?.6*o*h:0}function bl(c,o){return Math.max(c?c.right-c.left:0,o?o.right-o.left:0)}function Rx(c,o,h,g,x,A){const k=Wr(h,x,A),C=bl(h,g)*A;let D=0;const N=vi(c)/2;for(let q=0;q<c.length-1;q++){const H=c[q],Y=c[q+1],te=H.dist(Y);if(D+te>N){const oe=(N-D)/te,ue=jn.number(H.x,Y.x,oe),ye=jn.number(H.y,Y.y,oe),we=new Qt(ue,ye,Y.angleTo(H),q);return we._round(),!k||pr(c,we,C,k,o)?we:void 0}D+=te}}function r5(c,o,h,g,x,A,k,C,D){const N=Wr(g,A,k),q=bl(g,x),H=q*k,Y=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return o-H<o/4&&(o=H+o/4),zA(c,Y?o/2*C%o:(q/2+2*A)*k*C%o,o,N,h,H,Y,!1,D)}function zA(c,o,h,g,x,A,k,C,D){const N=A/2,q=vi(c);let H=0,Y=o-h,te=[];for(let oe=0;oe<c.length-1;oe++){const ue=c[oe],ye=c[oe+1],we=ue.dist(ye),Be=ye.angleTo(ue);for(;Y+h<H+we;){Y+=h;const ke=(Y-H)/we,Fe=jn.number(ue.x,ye.x,ke),rt=jn.number(ue.y,ye.y,ke);if(Fe>=0&&Fe<D&&rt>=0&&rt<D&&Y-N>=0&&Y+N<=q){const ut=new Qt(Fe,rt,Be,oe);ut._round(),g&&!pr(c,ut,A,g,x)||te.push(ut)}}H+=we}return C||te.length||k||(te=zA(c,H/2,h,g,x,A,k,!0,D)),te}Ot("Anchor",Qt);const bp=Aa;function RA(c,o,h,g){const x=[],A=c.image,k=A.pixelRatio,C=A.paddedRect.w-2*bp,D=A.paddedRect.h-2*bp;let N={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const q=A.stretchX||[[0,C]],H=A.stretchY||[[0,D]],Y=(at,Gt)=>at+Gt[1]-Gt[0],te=q.reduce(Y,0),oe=H.reduce(Y,0),ue=C-te,ye=D-oe;let we=0,Be=te,ke=0,Fe=oe,rt=0,ut=ue,Ct=0,tr=ye;if(A.content&&g){const at=A.content,Gt=at[2]-at[0],qt=at[3]-at[1];(A.textFitWidth||A.textFitHeight)&&(N=Bf(c)),we=Ov(q,0,at[0]),ke=Ov(H,0,at[1]),Be=Ov(q,at[0],at[2]),Fe=Ov(H,at[1],at[3]),rt=at[0]-we,Ct=at[1]-ke,ut=Gt-Be,tr=qt-Fe}const Mt=N.x1,Pt=N.y1,Ut=N.x2-Mt,Lt=N.y2-Pt,zt=(at,Gt,qt,hr)=>{const pn=Iv(at.stretch-we,Be,Ut,Mt),on=Dv(at.fixed-rt,ut,at.stretch,te),Pi=Iv(Gt.stretch-ke,Fe,Lt,Pt),Ns=Dv(Gt.fixed-Ct,tr,Gt.stretch,oe),sa=Iv(qt.stretch-we,Be,Ut,Mt),Ai=Dv(qt.fixed-rt,ut,qt.stretch,te),Wa=Iv(hr.stretch-ke,Fe,Lt,Pt),Ha=Dv(hr.fixed-Ct,tr,hr.stretch,oe),Ga=new S(pn,Pi),Wn=new S(sa,Pi),ki=new S(sa,Wa),ka=new S(pn,Wa),la=new S(on/k,Ns/k),Za=new S(Ai/k,Ha/k),ua=o*Math.PI/180;if(ua){const Nr=Math.sin(ua),_n=Math.cos(ua),Tn=[_n,-Nr,Nr,_n];Ga._matMult(Tn),Wn._matMult(Tn),ka._matMult(Tn),ki._matMult(Tn)}const ds=at.stretch+at.fixed,Po=Gt.stretch+Gt.fixed;return{tl:Ga,tr:Wn,bl:ka,br:ki,tex:{x:A.paddedRect.x+bp+ds,y:A.paddedRect.y+bp+Po,w:qt.stretch+qt.fixed-ds,h:hr.stretch+hr.fixed-Po},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:la,pixelOffsetBR:Za,minFontScaleX:ut/k/Ut,minFontScaleY:tr/k/Lt,isSDF:h}};if(g&&(A.stretchX||A.stretchY)){const at=LA(q,ue,te),Gt=LA(H,ye,oe);for(let qt=0;qt<at.length-1;qt++){const hr=at[qt],pn=at[qt+1];for(let on=0;on<Gt.length-1;on++)x.push(zt(hr,Gt[on],pn,Gt[on+1]))}}else x.push(zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:D+1}));return x}function Ov(c,o,h){let g=0;for(const x of c)g+=Math.max(o,Math.min(h,x[1]))-Math.max(o,Math.min(h,x[0]));return g}function LA(c,o,h){const g=[{fixed:-bp,stretch:0}];for(const[x,A]of c){const k=g[g.length-1];g.push({fixed:x-k.stretch,stretch:k.stretch}),g.push({fixed:x-k.stretch,stretch:k.stretch+(A-x)})}return g.push({fixed:o+bp,stretch:h}),g}function Iv(c,o,h,g){return c/o*h+g}function Dv(c,o,h,g){return c-o*h/g}class zv{constructor(o,h,g,x,A,k,C,D,N,q){var H;if(this.boxStartIndex=o.length,N){let Y=k.top,te=k.bottom;const oe=k.collisionPadding;oe&&(Y-=oe[1],te+=oe[3]);let ue=te-Y;ue>0&&(ue=Math.max(10,ue),this.circleDiameter=ue)}else{const Y=!((H=k.image)===null||H===void 0)&&H.content&&(k.image.textFitWidth||k.image.textFitHeight)?Bf(k):{x1:k.left,y1:k.top,x2:k.right,y2:k.bottom};Y.y1=Y.y1*C-D[0],Y.y2=Y.y2*C+D[2],Y.x1=Y.x1*C-D[3],Y.x2=Y.x2*C+D[1];const te=k.collisionPadding;if(te&&(Y.x1-=te[0]*C,Y.y1-=te[1]*C,Y.x2+=te[2]*C,Y.y2+=te[3]*C),q){const oe=new S(Y.x1,Y.y1),ue=new S(Y.x2,Y.y1),ye=new S(Y.x1,Y.y2),we=new S(Y.x2,Y.y2),Be=q*Math.PI/180;oe._rotate(Be),ue._rotate(Be),ye._rotate(Be),we._rotate(Be),Y.x1=Math.min(oe.x,ue.x,ye.x,we.x),Y.x2=Math.max(oe.x,ue.x,ye.x,we.x),Y.y1=Math.min(oe.y,ue.y,ye.y,we.y),Y.y2=Math.max(oe.y,ue.y,ye.y,we.y)}o.emplaceBack(h.x,h.y,Y.x1,Y.y1,Y.x2,Y.y2,g,x,A)}this.boxEndIndex=o.length}}class n5{constructor(o=[],h=((g,x)=>g<x?-1:g>x?1:0)){if(this.data=o,this.length=this.data.length,this.compare=h,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],h=this.data.pop();return--this.length>0&&(this.data[0]=h,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:h,compare:g}=this,x=h[o];for(;o>0;){const A=o-1>>1,k=h[A];if(g(x,k)>=0)break;h[o]=k,o=A}h[o]=x}_down(o){const{data:h,compare:g}=this,x=this.length>>1,A=h[o];for(;o<x;){let k=1+(o<<1);const C=k+1;if(C<this.length&&g(h[C],h[k])<0&&(k=C),g(h[k],A)>=0)break;h[o]=h[k],o=k}h[o]=A}}function i5(c,o=1,h=!1){let g=1/0,x=1/0,A=-1/0,k=-1/0;const C=c[0];for(let te=0;te<C.length;te++){const oe=C[te];(!te||oe.x<g)&&(g=oe.x),(!te||oe.y<x)&&(x=oe.y),(!te||oe.x>A)&&(A=oe.x),(!te||oe.y>k)&&(k=oe.y)}const D=Math.min(A-g,k-x);let N=D/2;const q=new n5([],a5);if(D===0)return new S(g,x);for(let te=g;te<A;te+=D)for(let oe=x;oe<k;oe+=D)q.push(new wp(te+N,oe+N,N,c));let H=(function(te){let oe=0,ue=0,ye=0;const we=te[0];for(let Be=0,ke=we.length,Fe=ke-1;Be<ke;Fe=Be++){const rt=we[Be],ut=we[Fe],Ct=rt.x*ut.y-ut.x*rt.y;ue+=(rt.x+ut.x)*Ct,ye+=(rt.y+ut.y)*Ct,oe+=3*Ct}return new wp(ue/oe,ye/oe,0,te)})(c),Y=q.length;for(;q.length;){const te=q.pop();(te.d>H.d||!H.d)&&(H=te,h&&console.log("found best %d after %d probes",Math.round(1e4*te.d)/1e4,Y)),te.max-H.d<=o||(N=te.h/2,q.push(new wp(te.p.x-N,te.p.y-N,N,c)),q.push(new wp(te.p.x+N,te.p.y-N,N,c)),q.push(new wp(te.p.x-N,te.p.y+N,N,c)),q.push(new wp(te.p.x+N,te.p.y+N,N,c)),Y+=4)}return h&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function a5(c,o){return o.max-c.max}function wp(c,o,h,g){this.p=new S(c,o),this.h=h,this.d=(function(x,A){let k=!1,C=1/0;for(let D=0;D<A.length;D++){const N=A[D];for(let q=0,H=N.length,Y=H-1;q<H;Y=q++){const te=N[q],oe=N[Y];te.y>x.y!=oe.y>x.y&&x.x<(oe.x-te.x)*(x.y-te.y)/(oe.y-te.y)+te.x&&(k=!k),C=Math.min(C,Nm(x,te,oe))}}return(k?1:-1)*Math.sqrt(C)})(this.p,g),this.max=this.d+this.h*Math.SQRT2}var oa;u.aq=void 0,(oa=u.aq||(u.aq={}))[oa.center=1]="center",oa[oa.left=2]="left",oa[oa.right=3]="right",oa[oa.top=4]="top",oa[oa.bottom=5]="bottom",oa[oa["top-left"]=6]="top-left",oa[oa["top-right"]=7]="top-right",oa[oa["bottom-left"]=8]="bottom-left",oa[oa["bottom-right"]=9]="bottom-right";const vh=7,Lx=Number.POSITIVE_INFINITY;function FA(c,o){return o[1]!==Lx?(function(h,g,x){let A=0,k=0;switch(g=Math.abs(g),x=Math.abs(x),h){case"top-right":case"top-left":case"top":k=x-vh;break;case"bottom-right":case"bottom-left":case"bottom":k=-x+vh}switch(h){case"top-right":case"bottom-right":case"right":A=-g;break;case"top-left":case"bottom-left":case"left":A=g}return[A,k]})(c,o[0],o[1]):(function(h,g){let x=0,A=0;g<0&&(g=0);const k=g/Math.SQRT2;switch(h){case"top-right":case"top-left":A=k-vh;break;case"bottom-right":case"bottom-left":A=-k+vh;break;case"bottom":A=-g+vh;break;case"top":A=g-vh}switch(h){case"top-right":case"bottom-right":x=-k;break;case"top-left":case"bottom-left":x=k;break;case"left":x=g;break;case"right":x=-g}return[x,A]})(c,o[0])}function jA(c,o,h){var g;const x=c.layout,A=(g=x.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(o,{},h);if(A){const C=A.values,D=[];for(let N=0;N<C.length;N+=2){const q=D[N]=C[N],H=C[N+1].map((Y=>Y*Sn));q.startsWith("top")?H[1]-=vh:q.startsWith("bottom")&&(H[1]+=vh),D[N+1]=H}return new ga(D)}const k=x.get("text-variable-anchor");if(k){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[x.get("text-radial-offset").evaluate(o,{},h)*Sn,Lx]:x.get("text-offset").evaluate(o,{},h).map((N=>N*Sn));const D=[];for(const N of k)D.push(N,FA(N,C));return new ga(D)}return null}function Fx(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function o5(c,o,h,g,x,A,k,C,D,N,q){let H=A.textMaxSize.evaluate(o,{});H===void 0&&(H=k);const Y=c.layers[0].layout,te=Y.get("icon-offset").evaluate(o,{},q),oe=NA(h.horizontal),ue=k/24,ye=c.tilePixelRatio*ue,we=c.tilePixelRatio*H/24,Be=c.tilePixelRatio*C,ke=c.tilePixelRatio*Y.get("symbol-spacing"),Fe=Y.get("text-padding")*c.tilePixelRatio,rt=(function(at,Gt,qt,hr=1){const pn=at.get("icon-padding").evaluate(Gt,{},qt),on=pn&&pn.values;return[on[0]*hr,on[1]*hr,on[2]*hr,on[3]*hr]})(Y,o,q,c.tilePixelRatio),ut=Y.get("text-max-angle")/180*Math.PI,Ct=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",tr=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Mt=Y.get("symbol-placement"),Pt=ke/2,Ut=Y.get("icon-text-fit");let Lt;g&&Ut!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(Lt=gu(g,h.vertical,Ut,Y.get("icon-text-fit-padding"),te,ue)),oe&&(g=gu(g,oe,Ut,Y.get("icon-text-fit-padding"),te,ue)));const zt=(at,Gt)=>{Gt.x<0||Gt.x>=Nn||Gt.y<0||Gt.y>=Nn||(function(qt,hr,pn,on,Pi,Ns,sa,Ai,Wa,Ha,Ga,Wn,ki,ka,la,Za,ua,ds,Po,Nr,_n,Tn,Bo,$n,Sp){const vu=qt.addToLineVertexArray(hr,pn);let _u,$s,ps,Ni,hc=0,ug=0,UA=0,WA=0,Wx=-1,Hx=-1;const fc={};let HA=iu("");if(qt.allowVerticalPlacement&&on.vertical){const Ea=Ai.layout.get("text-rotate").evaluate(_n,{},$n)+90;ps=new zv(Wa,hr,Ha,Ga,Wn,on.vertical,ki,ka,la,Ea),sa&&(Ni=new zv(Wa,hr,Ha,Ga,Wn,sa,ua,ds,la,Ea))}if(Pi){const Ea=Ai.layout.get("icon-rotate").evaluate(_n,{}),ms=Ai.layout.get("icon-text-fit")!=="none",Uf=RA(Pi,Ea,Bo,ms),Sl=sa?RA(sa,Ea,Bo,ms):void 0;$s=new zv(Wa,hr,Ha,Ga,Wn,Pi,ua,ds,!1,Ea),hc=4*Uf.length;const Wf=qt.iconSizeData;let xu=null;Wf.kind==="source"?(xu=[jo*Ai.layout.get("icon-size").evaluate(_n,{})],xu[0]>Bs&&Le(`${qt.layerIds[0]}: Value for "icon-size" is >= ${yu}. Reduce your "icon-size".`)):Wf.kind==="composite"&&(xu=[jo*Tn.compositeIconSizes[0].evaluate(_n,{},$n),jo*Tn.compositeIconSizes[1].evaluate(_n,{},$n)],(xu[0]>Bs||xu[1]>Bs)&&Le(`${qt.layerIds[0]}: Value for "icon-size" is >= ${yu}. Reduce your "icon-size".`)),qt.addSymbols(qt.icon,Uf,xu,Nr,Po,_n,u.ah.none,hr,vu.lineStartIndex,vu.lineLength,-1,$n),Wx=qt.icon.placedSymbolArray.length-1,Sl&&(ug=4*Sl.length,qt.addSymbols(qt.icon,Sl,xu,Nr,Po,_n,u.ah.vertical,hr,vu.lineStartIndex,vu.lineLength,-1,$n),Hx=qt.icon.placedSymbolArray.length-1)}const GA=Object.keys(on.horizontal);for(const Ea of GA){const ms=on.horizontal[Ea];if(!_u){HA=iu(ms.text);const Sl=Ai.layout.get("text-rotate").evaluate(_n,{},$n);_u=new zv(Wa,hr,Ha,Ga,Wn,ms,ki,ka,la,Sl)}const Uf=ms.positionedLines.length===1;if(UA+=BA(qt,hr,ms,Ns,Ai,la,_n,Za,vu,on.vertical?u.ah.horizontal:u.ah.horizontalOnly,Uf?GA:[Ea],fc,Wx,Tn,$n),Uf)break}on.vertical&&(WA+=BA(qt,hr,on.vertical,Ns,Ai,la,_n,Za,vu,u.ah.vertical,["vertical"],fc,Hx,Tn,$n));const u5=_u?_u.boxStartIndex:qt.collisionBoxArray.length,c5=_u?_u.boxEndIndex:qt.collisionBoxArray.length,h5=ps?ps.boxStartIndex:qt.collisionBoxArray.length,f5=ps?ps.boxEndIndex:qt.collisionBoxArray.length,d5=$s?$s.boxStartIndex:qt.collisionBoxArray.length,p5=$s?$s.boxEndIndex:qt.collisionBoxArray.length,m5=Ni?Ni.boxStartIndex:qt.collisionBoxArray.length,g5=Ni?Ni.boxEndIndex:qt.collisionBoxArray.length;let wl=-1;const Lv=(Ea,ms)=>Ea&&Ea.circleDiameter?Math.max(Ea.circleDiameter,ms):ms;wl=Lv(_u,wl),wl=Lv(ps,wl),wl=Lv($s,wl),wl=Lv(Ni,wl);const ZA=wl>-1?1:0;ZA&&(wl*=Sp/Sn),qt.glyphOffsetArray.length>=gh.MAX_GLYPHS&&Le("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_n.sortKey!==void 0&&qt.addToSortKeyRanges(qt.symbolInstances.length,_n.sortKey);const y5=jA(Ai,_n,$n),[v5,_5]=(function(Ea,ms){const Uf=Ea.length,Sl=ms?.values;if(Sl?.length>0)for(let Wf=0;Wf<Sl.length;Wf+=2){const xu=Sl[Wf+1];Ea.emplaceBack(u.aq[Sl[Wf]],xu[0],xu[1])}return[Uf,Ea.length]})(qt.textAnchorOffsets,y5);qt.symbolInstances.emplaceBack(hr.x,hr.y,fc.right>=0?fc.right:-1,fc.center>=0?fc.center:-1,fc.left>=0?fc.left:-1,fc.vertical||-1,Wx,Hx,HA,u5,c5,h5,f5,d5,p5,m5,g5,Ha,UA,WA,hc,ug,ZA,0,ki,wl,v5,_5)})(c,Gt,at,h,g,x,Lt,c.layers[0],c.collisionBoxArray,o.index,o.sourceLayerIndex,c.index,ye,[Fe,Fe,Fe,Fe],Ct,D,Be,rt,tr,te,o,A,N,q,k)};if(Mt==="line")for(const at of sr(o.geometry,0,0,Nn,Nn)){const Gt=r5(at,ke,ut,h.vertical||oe,g,24,we,c.overscaling,Nn);for(const qt of Gt)oe&&s5(c,oe.text,Pt,qt)||zt(at,qt)}else if(Mt==="line-center"){for(const at of o.geometry)if(at.length>1){const Gt=Rx(at,ut,h.vertical||oe,g,24,we);Gt&&zt(at,Gt)}}else if(o.type==="Polygon")for(const at of $l(o.geometry,0)){const Gt=i5(at,16);zt(at[0],new Qt(Gt.x,Gt.y,0))}else if(o.type==="LineString")for(const at of o.geometry)zt(at,new Qt(at[0].x,at[0].y,0));else if(o.type==="Point")for(const at of o.geometry)for(const Gt of at)zt([Gt],new Qt(Gt.x,Gt.y,0))}function BA(c,o,h,g,x,A,k,C,D,N,q,H,Y,te,oe){const ue=(function(Be,ke,Fe,rt,ut,Ct,tr,Mt){const Pt=rt.layout.get("text-rotate").evaluate(Ct,{})*Math.PI/180,Ut=[];for(const Lt of ke.positionedLines)for(const zt of Lt.positionedGlyphs){if(!zt.rect)continue;const at=zt.rect||{};let Gt=pp+1,qt=!0,hr=1,pn=0;const on=(ut||Mt)&&zt.vertical,Pi=zt.metrics.advance*zt.scale/2;if(Mt&&ke.verticalizable&&(pn=Lt.lineOffset/2-(zt.imageName?-(Sn-zt.metrics.width*zt.scale)/2:(zt.scale-1)*Sn)),zt.imageName){const Nr=tr[zt.imageName];qt=Nr.sdf,hr=Nr.pixelRatio,Gt=Aa/hr}const Ns=ut?[zt.x+Pi,zt.y]:[0,0];let sa=ut?[0,0]:[zt.x+Pi+Fe[0],zt.y+Fe[1]-pn],Ai=[0,0];on&&(Ai=sa,sa=[0,0]);const Wa=zt.metrics.isDoubleResolution?2:1,Ha=(zt.metrics.left-Gt)*zt.scale-Pi+sa[0],Ga=(-zt.metrics.top-Gt)*zt.scale+sa[1],Wn=Ha+at.w/Wa*zt.scale/hr,ki=Ga+at.h/Wa*zt.scale/hr,ka=new S(Ha,Ga),la=new S(Wn,Ga),Za=new S(Ha,ki),ua=new S(Wn,ki);if(on){const Nr=new S(-Pi,Pi-hs),_n=-Math.PI/2,Tn=Sn/2-Pi,Bo=new S(5-hs-Tn,-(zt.imageName?Tn:0)),$n=new S(...Ai);ka._rotateAround(_n,Nr)._add(Bo)._add($n),la._rotateAround(_n,Nr)._add(Bo)._add($n),Za._rotateAround(_n,Nr)._add(Bo)._add($n),ua._rotateAround(_n,Nr)._add(Bo)._add($n)}if(Pt){const Nr=Math.sin(Pt),_n=Math.cos(Pt),Tn=[_n,-Nr,Nr,_n];ka._matMult(Tn),la._matMult(Tn),Za._matMult(Tn),ua._matMult(Tn)}const ds=new S(0,0),Po=new S(0,0);Ut.push({tl:ka,tr:la,bl:Za,br:ua,tex:at,writingMode:ke.writingMode,glyphOffset:Ns,sectionIndex:zt.sectionIndex,isSDF:qt,pixelOffsetTL:ds,pixelOffsetBR:Po,minFontScaleX:0,minFontScaleY:0})}return Ut})(0,h,C,x,A,k,g,c.allowVerticalPlacement),ye=c.textSizeData;let we=null;ye.kind==="source"?(we=[jo*x.layout.get("text-size").evaluate(k,{})],we[0]>Bs&&Le(`${c.layerIds[0]}: Value for "text-size" is >= ${yu}. Reduce your "text-size".`)):ye.kind==="composite"&&(we=[jo*te.compositeTextSizes[0].evaluate(k,{},oe),jo*te.compositeTextSizes[1].evaluate(k,{},oe)],(we[0]>Bs||we[1]>Bs)&&Le(`${c.layerIds[0]}: Value for "text-size" is >= ${yu}. Reduce your "text-size".`)),c.addSymbols(c.text,ue,we,C,A,k,N,o,D.lineStartIndex,D.lineLength,Y,oe);for(const Be of q)H[Be]=c.text.placedSymbolArray.length-1;return 4*ue.length}function NA(c){for(const o in c)return c[o];return null}function s5(c,o,h,g){const x=c.compareText;if(o in x){const A=x[o];for(let k=A.length-1;k>=0;k--)if(g.dist(A[k])<h)return!0}else x[o]=[];return x[o].push(g),!1}const $A=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class jx{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[h,g]=new Uint8Array(o,0,2);if(h!==219)throw new Error("Data does not appear to be in a KDBush format.");const x=g>>4;if(x!==1)throw new Error(`Got v${x} data when expected v1.`);const A=$A[15&g];if(!A)throw new Error("Unrecognized array type.");const[k]=new Uint16Array(o,2,1),[C]=new Uint32Array(o,4,1);return new jx(C,k,A,o)}constructor(o,h=64,g=Float64Array,x){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+h,2),65535),this.ArrayType=g,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const A=$A.indexOf(this.ArrayType),k=2*o*this.ArrayType.BYTES_PER_ELEMENT,C=o*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-C%8)%8;if(A<0)throw new Error(`Unexpected typed array class: ${g}.`);x&&x instanceof ArrayBuffer?(this.data=x,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+D,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+k+C+D),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+C+D,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+A]),new Uint16Array(this.data,2,1)[0]=h,new Uint32Array(this.data,4,1)[0]=o)}add(o,h){const g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=o,this.coords[this._pos++]=h,g}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return Bx(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,h,g,x){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:A,coords:k,nodeSize:C}=this,D=[0,A.length-1,0],N=[];for(;D.length;){const q=D.pop()||0,H=D.pop()||0,Y=D.pop()||0;if(H-Y<=C){for(let ye=Y;ye<=H;ye++){const we=k[2*ye],Be=k[2*ye+1];we>=o&&we<=g&&Be>=h&&Be<=x&&N.push(A[ye])}continue}const te=Y+H>>1,oe=k[2*te],ue=k[2*te+1];oe>=o&&oe<=g&&ue>=h&&ue<=x&&N.push(A[te]),(q===0?o<=oe:h<=ue)&&(D.push(Y),D.push(te-1),D.push(1-q)),(q===0?g>=oe:x>=ue)&&(D.push(te+1),D.push(H),D.push(1-q))}return N}within(o,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:A,nodeSize:k}=this,C=[0,x.length-1,0],D=[],N=g*g;for(;C.length;){const q=C.pop()||0,H=C.pop()||0,Y=C.pop()||0;if(H-Y<=k){for(let ye=Y;ye<=H;ye++)qA(A[2*ye],A[2*ye+1],o,h)<=N&&D.push(x[ye]);continue}const te=Y+H>>1,oe=A[2*te],ue=A[2*te+1];qA(oe,ue,o,h)<=N&&D.push(x[te]),(q===0?o-g<=oe:h-g<=ue)&&(C.push(Y),C.push(te-1),C.push(1-q)),(q===0?o+g>=oe:h+g>=ue)&&(C.push(te+1),C.push(H),C.push(1-q))}return D}}function Bx(c,o,h,g,x,A){if(x-g<=h)return;const k=g+x>>1;VA(c,o,k,g,x,A),Bx(c,o,h,g,k-1,1-A),Bx(c,o,h,k+1,x,1-A)}function VA(c,o,h,g,x,A){for(;x>g;){if(x-g>600){const N=x-g+1,q=h-g+1,H=Math.log(N),Y=.5*Math.exp(2*H/3),te=.5*Math.sqrt(H*Y*(N-Y)/N)*(q-N/2<0?-1:1);VA(c,o,h,Math.max(g,Math.floor(h-q*Y/N+te)),Math.min(x,Math.floor(h+(N-q)*Y/N+te)),A)}const k=o[2*h+A];let C=g,D=x;for(sg(c,o,g,h),o[2*x+A]>k&&sg(c,o,g,x);C<D;){for(sg(c,o,C,D),C++,D--;o[2*C+A]<k;)C++;for(;o[2*D+A]>k;)D--}o[2*g+A]===k?sg(c,o,g,D):(D++,sg(c,o,D,x)),D<=h&&(g=D+1),h<=D&&(x=D-1)}}function sg(c,o,h,g){Nx(c,h,g),Nx(o,2*h,2*g),Nx(o,2*h+1,2*g+1)}function Nx(c,o,h){const g=c[o];c[o]=c[h],c[h]=g}function qA(c,o,h,g){const x=c-h,A=o-g;return x*x+A*A}var $x;u.bg=void 0,($x=u.bg||(u.bg={})).create="create",$x.load="load",$x.fullLoad="fullLoad";let Rv=null,lg=[];const Vx=1e3/60,qx="loadTime",Ux="fullLoadTime",l5={mark(c){performance.mark(c)},frame(c){const o=c;Rv!=null&&lg.push(o-Rv),Rv=o},clearMetrics(){Rv=null,lg=[],performance.clearMeasures(qx),performance.clearMeasures(Ux);for(const c in u.bg)performance.clearMarks(u.bg[c])},getPerformanceMetrics(){performance.measure(qx,u.bg.create,u.bg.load),performance.measure(Ux,u.bg.create,u.bg.fullLoad);const c=performance.getEntriesByName(qx)[0].duration,o=performance.getEntriesByName(Ux)[0].duration,h=lg.length,g=1/(lg.reduce(((A,k)=>A+k),0)/h/1e3),x=lg.filter((A=>A>Vx)).reduce(((A,k)=>A+(k-Vx)/Vx),0);return{loadTime:c,fullLoadTime:o,fps:g,percentDroppedFrames:x/(h+x)*100,totalFrames:h}}};u.$=class extends G{},u.A=lh,u.B=uf,u.C=function(c){if(Ue==null){const o=c.navigator?c.navigator.userAgent:null;Ue=!!c.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ue},u.D=It,u.E=Er,u.F=class{constructor(c,o){this.target=c,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new f((()=>this.process())),this.subscription=(function(h,g,x,A){return h.addEventListener(g,x,!1),{unsubscribe:()=>{h.removeEventListener(g,x,!1)}}})(this.target,"message",(h=>this.receive(h))),this.globalScope=Ne(self)?c:window}registerMessageHandler(c,o){this.messageHandlers[c]=o}sendAsync(c,o){return new Promise(((h,g)=>{const x=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[x]={resolve:h,reject:g},o&&o.signal.addEventListener("abort",(()=>{delete this.resolveRejects[x];const C={id:x,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)}),{once:!0});const A=[],k=Object.assign(Object.assign({},c),{id:x,sourceMapId:this.mapId,origin:location.origin,data:Li(c.data,A)});this.target.postMessage(k,{transfer:A})}))}receive(c){const o=c.data,h=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[h];const g=this.abortControllers[h];return delete this.abortControllers[h],void(g&&g.abort())}if(Ne(self)||o.mustQueue)return this.tasks[h]=o,this.taskQueue.push(h),void this.invoker.trigger();this.processTask(h,o)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),o=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(c,o)}processTask(c,o){return s(this,void 0,void 0,(function*(){if(o.type==="<response>"){const x=this.resolveRejects[c];return delete this.resolveRejects[c],x?void(o.error?x.reject(zo(o.error)):x.resolve(zo(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const h=zo(o.data),g=new AbortController;this.abortControllers[c]=g;try{const x=yield this.messageHandlers[o.type](o.sourceMapId,h,g);this.completeTask(c,null,x)}catch(x){this.completeTask(c,x)}}))}completeTask(c,o,h){const g=[];delete this.abortControllers[c];const x={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Li(o):null,data:Li(h,g)};this.target.postMessage(x,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},u.G=Nt,u.H=function(){var c=new lh(16);return lh!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},u.I=rg,u.J=function(c,o,h){var g,x,A,k,C,D,N,q,H,Y,te,oe,ue=h[0],ye=h[1],we=h[2];return o===c?(c[12]=o[0]*ue+o[4]*ye+o[8]*we+o[12],c[13]=o[1]*ue+o[5]*ye+o[9]*we+o[13],c[14]=o[2]*ue+o[6]*ye+o[10]*we+o[14],c[15]=o[3]*ue+o[7]*ye+o[11]*we+o[15]):(x=o[1],A=o[2],k=o[3],C=o[4],D=o[5],N=o[6],q=o[7],H=o[8],Y=o[9],te=o[10],oe=o[11],c[0]=g=o[0],c[1]=x,c[2]=A,c[3]=k,c[4]=C,c[5]=D,c[6]=N,c[7]=q,c[8]=H,c[9]=Y,c[10]=te,c[11]=oe,c[12]=g*ue+C*ye+H*we+o[12],c[13]=x*ue+D*ye+Y*we+o[13],c[14]=A*ue+N*ye+te*we+o[14],c[15]=k*ue+q*ye+oe*we+o[15]),c},u.K=function(c,o,h){var g=h[0],x=h[1],A=h[2];return c[0]=o[0]*g,c[1]=o[1]*g,c[2]=o[2]*g,c[3]=o[3]*g,c[4]=o[4]*x,c[5]=o[5]*x,c[6]=o[6]*x,c[7]=o[7]*x,c[8]=o[8]*A,c[9]=o[9]*A,c[10]=o[10]*A,c[11]=o[11]*A,c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},u.L=qm,u.M=function(c,o){const h={};for(let g=0;g<o.length;g++){const x=o[g];x in c&&(h[x]=c[x])}return h},u.N=b,u.O=$,u.P=S,u.Q=ae,u.R=Ti,u.S=Et,u.T=pi,u.U=U,u.V=X,u.W=Ye,u.X=Nn,u.Y=O,u.Z=et,u._=s,u.a=At,u.a$=function(c,o){var h=c[0],g=c[1],x=c[2],A=c[3],k=c[4],C=c[5],D=c[6],N=c[7],q=c[8],H=c[9],Y=c[10],te=c[11],oe=c[12],ue=c[13],ye=c[14],we=c[15],Be=o[0],ke=o[1],Fe=o[2],rt=o[3],ut=o[4],Ct=o[5],tr=o[6],Mt=o[7],Pt=o[8],Ut=o[9],Lt=o[10],zt=o[11],at=o[12],Gt=o[13],qt=o[14],hr=o[15];return Math.abs(h-Be)<=ra*Math.max(1,Math.abs(h),Math.abs(Be))&&Math.abs(g-ke)<=ra*Math.max(1,Math.abs(g),Math.abs(ke))&&Math.abs(x-Fe)<=ra*Math.max(1,Math.abs(x),Math.abs(Fe))&&Math.abs(A-rt)<=ra*Math.max(1,Math.abs(A),Math.abs(rt))&&Math.abs(k-ut)<=ra*Math.max(1,Math.abs(k),Math.abs(ut))&&Math.abs(C-Ct)<=ra*Math.max(1,Math.abs(C),Math.abs(Ct))&&Math.abs(D-tr)<=ra*Math.max(1,Math.abs(D),Math.abs(tr))&&Math.abs(N-Mt)<=ra*Math.max(1,Math.abs(N),Math.abs(Mt))&&Math.abs(q-Pt)<=ra*Math.max(1,Math.abs(q),Math.abs(Pt))&&Math.abs(H-Ut)<=ra*Math.max(1,Math.abs(H),Math.abs(Ut))&&Math.abs(Y-Lt)<=ra*Math.max(1,Math.abs(Y),Math.abs(Lt))&&Math.abs(te-zt)<=ra*Math.max(1,Math.abs(te),Math.abs(zt))&&Math.abs(oe-at)<=ra*Math.max(1,Math.abs(oe),Math.abs(at))&&Math.abs(ue-Gt)<=ra*Math.max(1,Math.abs(ue),Math.abs(Gt))&&Math.abs(ye-qt)<=ra*Math.max(1,Math.abs(ye),Math.abs(qt))&&Math.abs(we-hr)<=ra*Math.max(1,Math.abs(we),Math.abs(hr))},u.a0=wr,u.a1=gt,u.a2=mt,u.a3=c=>{const o=window.document.createElement("video");return o.muted=!0,new Promise((h=>{o.onloadstart=()=>{h(o)};for(const g of c){const x=window.document.createElement("source");Ht(g)||(o.crossOrigin="Anonymous"),x.src=g,o.appendChild(x)}}))},u.a4=function(){return he++},u.a5=Tt,u.a6=gh,u.a7=Wu,u.a8=lu,u.a9=Ze,u.aA=function(c){if(c.type==="custom")return new xp(c);switch(c.type){case"background":return new _p(c);case"circle":return new Sx(c);case"fill":return new Px(c);case"fill-extrusion":return new pv(c);case"heatmap":return new Tx(c);case"hillshade":return new Qy(c);case"line":return new dh(c);case"raster":return new zx(c);case"symbol":return new cc(c)}},u.aB=de,u.aC=function(c,o){if(!c)return[{command:"setStyle",args:[o]}];let h=[];try{if(!xr(c.version,o.version))return[{command:"setStyle",args:[o]}];xr(c.center,o.center)||h.push({command:"setCenter",args:[o.center]}),xr(c.zoom,o.zoom)||h.push({command:"setZoom",args:[o.zoom]}),xr(c.bearing,o.bearing)||h.push({command:"setBearing",args:[o.bearing]}),xr(c.pitch,o.pitch)||h.push({command:"setPitch",args:[o.pitch]}),xr(c.sprite,o.sprite)||h.push({command:"setSprite",args:[o.sprite]}),xr(c.glyphs,o.glyphs)||h.push({command:"setGlyphs",args:[o.glyphs]}),xr(c.transition,o.transition)||h.push({command:"setTransition",args:[o.transition]}),xr(c.light,o.light)||h.push({command:"setLight",args:[o.light]}),xr(c.terrain,o.terrain)||h.push({command:"setTerrain",args:[o.terrain]}),xr(c.sky,o.sky)||h.push({command:"setSky",args:[o.sky]}),xr(c.projection,o.projection)||h.push({command:"setProjection",args:[o.projection]});const g={},x=[];(function(k,C,D,N){let q;for(q in C=C||{},k=k||{})Object.prototype.hasOwnProperty.call(k,q)&&(Object.prototype.hasOwnProperty.call(C,q)||ni(q,D,N));for(q in C)Object.prototype.hasOwnProperty.call(C,q)&&(Object.prototype.hasOwnProperty.call(k,q)?xr(k[q],C[q])||(k[q].type==="geojson"&&C[q].type==="geojson"&&Eo(k,C,q)?jr(D,{command:"setGeoJSONSourceData",args:[q,C[q].data]}):Hi(q,C,D,N)):ri(q,C,D))})(c.sources,o.sources,x,g);const A=[];c.layers&&c.layers.forEach((k=>{"source"in k&&g[k.source]?h.push({command:"removeLayer",args:[k.id]}):A.push(k)})),h=h.concat(x),(function(k,C,D){C=C||[];const N=(k=k||[]).map(Rl),q=C.map(Rl),H=k.reduce(Qs,{}),Y=C.reduce(Qs,{}),te=N.slice(),oe=Object.create(null);let ue,ye,we,Be,ke;for(let Fe=0,rt=0;Fe<N.length;Fe++)ue=N[Fe],Object.prototype.hasOwnProperty.call(Y,ue)?rt++:(jr(D,{command:"removeLayer",args:[ue]}),te.splice(te.indexOf(ue,rt),1));for(let Fe=0,rt=0;Fe<q.length;Fe++)ue=q[q.length-1-Fe],te[te.length-1-Fe]!==ue&&(Object.prototype.hasOwnProperty.call(H,ue)?(jr(D,{command:"removeLayer",args:[ue]}),te.splice(te.lastIndexOf(ue,te.length-rt),1)):rt++,Be=te[te.length-Fe],jr(D,{command:"addLayer",args:[Y[ue],Be]}),te.splice(te.length-Fe,0,ue),oe[ue]=!0);for(let Fe=0;Fe<q.length;Fe++)if(ue=q[Fe],ye=H[ue],we=Y[ue],!oe[ue]&&!xr(ye,we))if(xr(ye.source,we.source)&&xr(ye["source-layer"],we["source-layer"])&&xr(ye.type,we.type)){for(ke in xi(ye.layout,we.layout,D,ue,null,"setLayoutProperty"),xi(ye.paint,we.paint,D,ue,null,"setPaintProperty"),xr(ye.filter,we.filter)||jr(D,{command:"setFilter",args:[ue,we.filter]}),xr(ye.minzoom,we.minzoom)&&xr(ye.maxzoom,we.maxzoom)||jr(D,{command:"setLayerZoomRange",args:[ue,we.minzoom,we.maxzoom]}),ye)Object.prototype.hasOwnProperty.call(ye,ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?xi(ye[ke],we[ke],D,ue,ke.slice(6),"setPaintProperty"):xr(ye[ke],we[ke])||jr(D,{command:"setLayerProperty",args:[ue,ke,we[ke]]}));for(ke in we)Object.prototype.hasOwnProperty.call(we,ke)&&!Object.prototype.hasOwnProperty.call(ye,ke)&&ke!=="layout"&&ke!=="paint"&&ke!=="filter"&&ke!=="metadata"&&ke!=="minzoom"&&ke!=="maxzoom"&&(ke.indexOf("paint.")===0?xi(ye[ke],we[ke],D,ue,ke.slice(6),"setPaintProperty"):xr(ye[ke],we[ke])||jr(D,{command:"setLayerProperty",args:[ue,ke,we[ke]]}))}else jr(D,{command:"removeLayer",args:[ue]}),Be=te[te.lastIndexOf(ue)+1],jr(D,{command:"addLayer",args:[we,Be]})})(A,o.layers,h)}catch(g){console.warn("Unable to compute style diff:",g),h=[{command:"setStyle",args:[o]}]}return h},u.aD=function(c){const o=[],h=c.id;return h===void 0&&o.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&o.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&o.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),o},u.aE=function c(o,h){if(Array.isArray(o)){if(!Array.isArray(h)||o.length!==h.length)return!1;for(let g=0;g<o.length;g++)if(!c(o[g],h[g]))return!1;return!0}if(typeof o=="object"&&o!==null&&h!==null){if(typeof h!="object"||Object.keys(o).length!==Object.keys(h).length)return!1;for(const g in o)if(!c(o[g],h[g]))return!1;return!0}return o===h},u.aF=ve,u.aG=Re,u.aH=class extends En{constructor(c,o){super(c,o),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},u.aI=Jn,u.aJ=class extends En{constructor(c,o){super(c,o),this.current=mf}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let o=1;o<16;o++)if(c[o]!==this.current[o]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},u.aK=pf,u.aL=oh,u.aM=cr,u.aN=class extends En{constructor(c,o){super(c,o),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},u.aO=class extends En{constructor(c,o){super(c,o),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},u.aP=function(c,o,h,g,x,A,k){var C=1/(o-h),D=1/(g-x),N=1/(A-k);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*N,c[11]=0,c[12]=(o+h)*C,c[13]=(x+g)*D,c[14]=(k+A)*N,c[15]=1,c},u.aQ=Zd,u.aR=class extends Me{},u.aS=Cf,u.aT=class extends qe{},u.aU=bf,u.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},u.aW=ep,u.aX=In,u.aY=Ba,u.aZ=class extends Rt{},u.a_=function(c,o){return c[0]===o[0]&&c[1]===o[1]&&c[2]===o[2]&&c[3]===o[3]&&c[4]===o[4]&&c[5]===o[5]&&c[6]===o[6]&&c[7]===o[7]&&c[8]===o[8]&&c[9]===o[9]&&c[10]===o[10]&&c[11]===o[11]&&c[12]===o[12]&&c[13]===o[13]&&c[14]===o[14]&&c[15]===o[15]},u.aa=function(c){const o={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((h,g,x,A)=>{const k=x||A;return o[g]=!k||k.toLowerCase(),""})),o["max-age"]){const h=parseInt(o["max-age"],10);isNaN(h)?delete o["max-age"]:o["max-age"]=h}return o},u.ab=function(c,o){const h=[];for(const g in c)g in o||h.push(g);return h},u.ac=W,u.ad=function(c,o,h){var g=Math.sin(h),x=Math.cos(h),A=o[0],k=o[1],C=o[2],D=o[3],N=o[4],q=o[5],H=o[6],Y=o[7];return o!==c&&(c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[0]=A*x+N*g,c[1]=k*x+q*g,c[2]=C*x+H*g,c[3]=D*x+Y*g,c[4]=N*x-A*g,c[5]=q*x-k*g,c[6]=H*x-C*g,c[7]=Y*x-D*g,c},u.ae=function(c){var o=new lh(16);return o[0]=c[0],o[1]=c[1],o[2]=c[2],o[3]=c[3],o[4]=c[4],o[5]=c[5],o[6]=c[6],o[7]=c[7],o[8]=c[8],o[9]=c[9],o[10]=c[10],o[11]=c[11],o[12]=c[12],o[13]=c[13],o[14]=c[14],o[15]=c[15],o},u.af=Xd,u.ag=function(c,o){let h=0,g=0;if(c.kind==="constant")g=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:x,minZoom:A,maxZoom:k}=c,C=x?W(ai.interpolationFactor(x,o,A,k),0,1):0;c.kind==="camera"?g=jn.number(c.minSize,c.maxSize,C):h=C}return{uSizeT:h,uSize:g}},u.ai=function(c,{uSize:o,uSizeT:h},{lowerSize:g,upperSize:x}){return c.kind==="source"?g/jo:c.kind==="composite"?jn.number(g/jo,x/jo,h):o},u.aj=mh,u.ak=function(c,o,h,g){const x=o.y-c.y,A=o.x-c.x,k=g.y-h.y,C=g.x-h.x,D=k*A-C*x;if(D===0)return null;const N=(C*(c.y-h.y)-k*(c.x-h.x))/D;return new S(c.x+N*A,c.y+N*x)},u.al=sr,u.am=jm,u.an=Gd,u.ao=function(c){let o=1/0,h=1/0,g=-1/0,x=-1/0;for(const A of c)o=Math.min(o,A.x),h=Math.min(h,A.y),g=Math.max(g,A.x),x=Math.max(x,A.y);return[o,h,g,x]},u.ap=Sn,u.ar=Nf,u.as=function(c,o){var h=o[0],g=o[1],x=o[2],A=o[3],k=o[4],C=o[5],D=o[6],N=o[7],q=o[8],H=o[9],Y=o[10],te=o[11],oe=o[12],ue=o[13],ye=o[14],we=o[15],Be=h*C-g*k,ke=h*D-x*k,Fe=h*N-A*k,rt=g*D-x*C,ut=g*N-A*C,Ct=x*N-A*D,tr=q*ue-H*oe,Mt=q*ye-Y*oe,Pt=q*we-te*oe,Ut=H*ye-Y*ue,Lt=H*we-te*ue,zt=Y*we-te*ye,at=Be*zt-ke*Lt+Fe*Ut+rt*Pt-ut*Mt+Ct*tr;return at?(c[0]=(C*zt-D*Lt+N*Ut)*(at=1/at),c[1]=(x*Lt-g*zt-A*Ut)*at,c[2]=(ue*Ct-ye*ut+we*rt)*at,c[3]=(Y*ut-H*Ct-te*rt)*at,c[4]=(D*Pt-k*zt-N*Mt)*at,c[5]=(h*zt-x*Pt+A*Mt)*at,c[6]=(ye*Fe-oe*Ct-we*ke)*at,c[7]=(q*Ct-Y*Fe+te*ke)*at,c[8]=(k*Lt-C*Pt+N*tr)*at,c[9]=(g*Pt-h*Lt-A*tr)*at,c[10]=(oe*ut-ue*Fe+we*Be)*at,c[11]=(H*Fe-q*ut-te*Be)*at,c[12]=(C*Mt-k*Ut-D*tr)*at,c[13]=(h*Ut-g*Mt+x*tr)*at,c[14]=(ue*ke-oe*rt-ye*Be)*at,c[15]=(q*rt-H*ke+Y*Be)*at,c):null},u.at=Fx,u.au=jf,u.av=jx,u.aw=function(){const c={},o=Ve.$version;for(const h in Ve.$root){const g=Ve.$root[h];if(g.required){let x=null;x=h==="version"?o:g.type==="array"?[]:{},x!=null&&(c[h]=x)}}return c},u.ax=fo,u.ay=er,u.az=function(c){c=c.slice();const o=Object.create(null);for(let h=0;h<c.length;h++)o[c[h].id]=c[h];for(let h=0;h<c.length;h++)"ref"in c[h]&&(c[h]=Oi(c[h],o[c[h].ref]));return c},u.b=Qe,u.b0=function(c,o){return c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[4]=o[4],c[5]=o[5],c[6]=o[6],c[7]=o[7],c[8]=o[8],c[9]=o[9],c[10]=o[10],c[11]=o[11],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15],c},u.b1=function(c,o,h){return c[0]=o[0]*h[0],c[1]=o[1]*h[1],c[2]=o[2]*h[2],c[3]=o[3]*h[3],c},u.b2=function(c,o){return c[0]*o[0]+c[1]*o[1]+c[2]*o[2]+c[3]*o[3]},u.b3=J,u.b4=ht,u.b5=be,u.b6=function(c,o,h,g,x){var A,k=1/Math.tan(o/2);return c[0]=k/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=k,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,x!=null&&x!==1/0?(c[10]=(x+g)*(A=1/(g-x)),c[14]=2*x*g*A):(c[10]=-1,c[14]=-2*g),c},u.b7=function(c,o,h){var g=Math.sin(h),x=Math.cos(h),A=o[4],k=o[5],C=o[6],D=o[7],N=o[8],q=o[9],H=o[10],Y=o[11];return o!==c&&(c[0]=o[0],c[1]=o[1],c[2]=o[2],c[3]=o[3],c[12]=o[12],c[13]=o[13],c[14]=o[14],c[15]=o[15]),c[4]=A*x+N*g,c[5]=k*x+q*g,c[6]=C*x+H*g,c[7]=D*x+Y*g,c[8]=N*x-A*g,c[9]=q*x-k*g,c[10]=H*x-C*g,c[11]=Y*x-D*g,c},u.b8=K,u.b9=re,u.bA=js,u.bB=function(c){return c.message===De},u.bC=cl,u.bD=Kr,u.ba=function(c){return c*Math.PI/180},u.bb=function(c,o){const{x:h,y:g}=et.fromLngLat(o);return!(c<0||c>25||g<0||g>=1||h<0||h>=1)},u.bc=function(c,o){return c[0]=o[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=o[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=o[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},u.bd=class extends V{},u.be=p,u.bf=l5,u.bh=or,u.bi=function(c,o){At.REGISTERED_PROTOCOLS[c]=o},u.bj=function(c){delete At.REGISTERED_PROTOCOLS[c]},u.bk=function(c,o){const h={};for(let x=0;x<c.length;x++){const A=o&&o[c[x].id]||nf(c[x]);o&&(o[c[x].id]=A);let k=h[A];k||(k=h[A]=[]),k.push(c[x])}const g=[];for(const x in h)g.push(h[x]);return g},u.bl=Ot,u.bm=Un,u.bn=Ie,u.bo=ng,u.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Nn/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const o=c.bucket.layers[0],h=o.layout,g=o._unevaluatedLayout._values,x={layoutIconSize:g["icon-size"].possiblyEvaluate(new kr(c.bucket.zoom+1),c.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new kr(c.bucket.zoom+1),c.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new kr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:N,maxZoom:q}=c.bucket.textSizeData;x.compositeTextSizes=[g["text-size"].possiblyEvaluate(new kr(N),c.canonical),g["text-size"].possiblyEvaluate(new kr(q),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:N,maxZoom:q}=c.bucket.iconSizeData;x.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new kr(N),c.canonical),g["icon-size"].possiblyEvaluate(new kr(q),c.canonical)]}const A=h.get("text-line-height")*Sn,k=h.get("text-rotation-alignment")!=="viewport"&&h.get("symbol-placement")!=="point",C=h.get("text-keep-upright"),D=h.get("text-size");for(const N of c.bucket.features){const q=h.get("text-font").evaluate(N,{},c.canonical).join(","),H=D.evaluate(N,{},c.canonical),Y=x.layoutTextSize.evaluate(N,{},c.canonical),te=x.layoutIconSize.evaluate(N,{},c.canonical),oe={horizontal:{},vertical:void 0},ue=N.text;let ye,we=[0,0];if(ue){const Fe=ue.toString(),rt=h.get("text-letter-spacing").evaluate(N,{},c.canonical)*Sn,ut=zm(Fe)?rt:0,Ct=h.get("text-anchor").evaluate(N,{},c.canonical),tr=jA(o,N,c.canonical);if(!tr){const Lt=h.get("text-radial-offset").evaluate(N,{},c.canonical);we=Lt?FA(Ct,[Lt*Sn,Lx]):h.get("text-offset").evaluate(N,{},c.canonical).map((zt=>zt*Sn))}let Mt=k?"center":h.get("text-justify").evaluate(N,{},c.canonical);const Pt=h.get("symbol-placement")==="point"?h.get("text-max-width").evaluate(N,{},c.canonical)*Sn:1/0,Ut=()=>{c.bucket.allowVerticalPlacement&&cf(Fe)&&(oe.vertical=Ff(ue,c.glyphMap,c.glyphPositions,c.imagePositions,q,Pt,A,Ct,"left",ut,we,u.ah.vertical,!0,Y,H))};if(!k&&tr){const Lt=new Set;if(Mt==="auto")for(let at=0;at<tr.values.length;at+=2)Lt.add(Fx(tr.values[at]));else Lt.add(Mt);let zt=!1;for(const at of Lt)if(!oe.horizontal[at])if(zt)oe.horizontal[at]=oe.horizontal[0];else{const Gt=Ff(ue,c.glyphMap,c.glyphPositions,c.imagePositions,q,Pt,A,"center",at,ut,we,u.ah.horizontal,!1,Y,H);Gt&&(oe.horizontal[at]=Gt,zt=Gt.positionedLines.length===1)}Ut()}else{Mt==="auto"&&(Mt=Fx(Ct));const Lt=Ff(ue,c.glyphMap,c.glyphPositions,c.imagePositions,q,Pt,A,Ct,Mt,ut,we,u.ah.horizontal,!1,Y,H);Lt&&(oe.horizontal[Mt]=Lt),Ut(),cf(Fe)&&k&&C&&(oe.vertical=Ff(ue,c.glyphMap,c.glyphPositions,c.imagePositions,q,Pt,A,Ct,Mt,ut,we,u.ah.vertical,!1,Y,H))}}let Be=!1;if(N.icon&&N.icon.name){const Fe=c.imageMap[N.icon.name];Fe&&(ye=mu(c.imagePositions[N.icon.name],h.get("icon-offset").evaluate(N,{},c.canonical),h.get("icon-anchor").evaluate(N,{},c.canonical)),Be=!!Fe.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Be:c.bucket.sdfIcons!==Be&&Le("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Fe.pixelRatio!==c.bucket.pixelRatio||h.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ke=NA(oe.horizontal)||oe.vertical;c.bucket.iconsInText=!!ke&&ke.iconsInText,(ke||ye)&&o5(c.bucket,N,oe,ye,c.imageMap,x,Y,te,we,Be,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},u.bq=$a,u.br=ip,u.bs=So,u.bt=cu,u.bu=_l,u.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},u.bw=function(c,o,h,g,x){return s(this,void 0,void 0,(function*(){if(X())try{return yield Ye(c,o,h,g,x)}catch{}return(function(A,k,C,D,N){const q=A.width,H=A.height;nt&&Se||(nt=new OffscreenCanvas(q,H),Se=nt.getContext("2d",{willReadFrequently:!0})),nt.width=q,nt.height=H,Se.drawImage(A,0,0,q,H);const Y=Se.getImageData(k,C,D,N);return Se.clearRect(0,0,q,H),Y.data})(c,o,h,g,x)}))},u.bx=Kt,u.by=m,u.bz=y,u.c=ft,u.d=c=>s(void 0,void 0,void 0,(function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(o)}catch(h){throw new Error(`Could not load image because of ${h.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),u.e=ie,u.f=c=>new Promise(((o,h)=>{const g=new Image;g.onload=()=>{o(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame((()=>{g.src=$e}))},g.onerror=()=>h(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const x=new Blob([new Uint8Array(c)],{type:"image/png"});g.src=c.byteLength?URL.createObjectURL(x):$e})),u.g=jt,u.h=(c,o)=>ct(ie(c,{type:"json"}),o),u.i=Ne,u.j=Bt,u.k=rr,u.l=(c,o)=>ct(ie(c,{type:"arrayBuffer"}),o),u.m=ct,u.n=function(c){return new _l(c).readFields(uc,[])},u.o=nc,u.p=Rf,u.q=P,u.r=lf,u.s=Ht,u.t=nh,u.u=ns,u.v=Ve,u.w=Le,u.x=function([c,o,h]){return o+=90,o*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(o)*Math.sin(h),y:c*Math.sin(o)*Math.sin(h),z:c*Math.cos(h)}},u.y=jn,u.z=kr})),i("worker",["./shared"],(function(u){class s{constructor(ee){this.keyCache={},ee&&this.replace(ee)}replace(ee){this._layerConfigs={},this._layers={},this.update(ee,[])}update(ee,Q){for(const me of ee){this._layerConfigs[me.id]=me;const Ae=this._layers[me.id]=u.aA(me);Ae._featureFilter=u.a7(Ae.filter),this.keyCache[me.id]&&delete this.keyCache[me.id]}for(const me of Q)delete this.keyCache[me],delete this._layerConfigs[me],delete this._layers[me];this.familiesBySource={};const le=u.bk(Object.values(this._layerConfigs),this.keyCache);for(const me of le){const Ae=me.map((Xe=>this._layers[Xe.id])),Ce=Ae[0];if(Ce.visibility==="none")continue;const je=Ce.source||"";let Te=this.familiesBySource[je];Te||(Te=this.familiesBySource[je]={});const tt=Ce.sourceLayer||"_geojsonTileLayer";let lt=Te[tt];lt||(lt=Te[tt]=[]),lt.push(Ae)}}}class m{constructor(ee){const Q={},le=[];for(const je in ee){const Te=ee[je],tt=Q[je]={};for(const lt in Te){const Xe=Te[+lt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const vt={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};le.push(vt),tt[lt]={rect:vt,metrics:Xe.metrics}}}const{w:me,h:Ae}=u.p(le),Ce=new u.o({width:me||1,height:Ae||1});for(const je in ee){const Te=ee[je];for(const tt in Te){const lt=Te[+tt];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const Xe=Q[je][tt].rect;u.o.copy(lt.bitmap,Ce,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},lt.bitmap)}}this.image=Ce,this.positions=Q}}u.bl("GlyphAtlas",m);class y{constructor(ee){this.tileID=new u.S(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,Q,le,me){return u._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new u.a5;const Ae=new u.bm(Object.keys(ee.layers).sort()),Ce=new u.bn(this.tileID,this.promoteId);Ce.bucketLayerIDs=[];const je={},Te={featureIndex:Ce,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:le},tt=Q.familiesBySource[this.source];for(const br in tt){const Vr=ee.layers[br];if(!Vr)continue;Vr.version===1&&u.w(`Vector tile source "${this.source}" layer "${br}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const hn=Ae.encode(br),Kn=[];for(let ii=0;ii<Vr.length;ii++){const Di=Vr.feature(ii),Ll=Ce.getId(Di,br);Kn.push({feature:Di,id:Ll,index:ii,sourceLayerIndex:hn})}for(const ii of tt[br]){const Di=ii[0];Di.source!==this.source&&u.w(`layer.source = ${Di.source} does not equal this.source = ${this.source}`),Di.minzoom&&this.zoom<Math.floor(Di.minzoom)||Di.maxzoom&&this.zoom>=Di.maxzoom||Di.visibility!=="none"&&(w(ii,this.zoom,le),(je[Di.id]=Di.createBucket({index:Ce.bucketLayerIDs.length,layers:ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:hn,sourceID:this.source})).populate(Kn,Te,this.tileID.canonical),Ce.bucketLayerIDs.push(ii.map((Ll=>Ll.id))))}}const lt=u.aF(Te.glyphDependencies,(br=>Object.keys(br).map(Number)));this.inFlightDependencies.forEach((br=>br?.abort())),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(lt).length){const br=new AbortController;this.inFlightDependencies.push(br),Xe=me.sendAsync({type:"GG",data:{stacks:lt,source:this.source,tileID:this.tileID,type:"glyphs"}},br)}const vt=Object.keys(Te.iconDependencies);let $t=Promise.resolve({});if(vt.length){const br=new AbortController;this.inFlightDependencies.push(br),$t=me.sendAsync({type:"GI",data:{icons:vt,source:this.source,tileID:this.tileID,type:"icons"}},br)}const Xt=Object.keys(Te.patternDependencies);let Or=Promise.resolve({});if(Xt.length){const br=new AbortController;this.inFlightDependencies.push(br),Or=me.sendAsync({type:"GI",data:{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"}},br)}const[fr,Ir,gr]=yield Promise.all([Xe,$t,Or]),Ln=new m(fr),bn=new u.bo(Ir,gr);for(const br in je){const Vr=je[br];Vr instanceof u.a6?(w(Vr.layers,this.zoom,le),u.bp({bucket:Vr,glyphMap:fr,glyphPositions:Ln.positions,imageMap:Ir,imagePositions:bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Vr.hasPattern&&(Vr instanceof u.bq||Vr instanceof u.br||Vr instanceof u.bs)&&(w(Vr.layers,this.zoom,le),Vr.addFeatures(Te,this.tileID.canonical,bn.patternPositions))}return this.status="done",{buckets:Object.values(je).filter((br=>!br.isEmpty())),featureIndex:Ce,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ln.image,imageAtlas:bn,glyphMap:this.returnDependencies?fr:null,iconMap:this.returnDependencies?Ir:null,glyphPositions:this.returnDependencies?Ln.positions:null}}))}}function w(_e,ee,Q){const le=new u.z(ee);for(const me of _e)me.recalculate(le,Q)}class S{constructor(ee,Q,le){this.actor=ee,this.layerIndex=Q,this.availableImages=le,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(ee,Q){return u._(this,void 0,void 0,(function*(){const le=yield u.l(ee.request,Q);try{return{vectorTile:new u.bt.VectorTile(new u.bu(le.data)),rawData:le.data,cacheControl:le.cacheControl,expires:le.expires}}catch(me){const Ae=new Uint8Array(le.data);let Ce=`Unable to parse the tile at ${ee.request.url}, `;throw Ce+=Ae[0]===31&&Ae[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${me.message}`,new Error(Ce)}}))}loadTile(ee){return u._(this,void 0,void 0,(function*(){const Q=ee.uid,le=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new u.bv(ee.request),me=new y(ee);this.loading[Q]=me;const Ae=new AbortController;me.abort=Ae;try{const Ce=yield this.loadVectorTile(ee,Ae);if(delete this.loading[Q],!Ce)return null;const je=Ce.rawData,Te={};Ce.expires&&(Te.expires=Ce.expires),Ce.cacheControl&&(Te.cacheControl=Ce.cacheControl);const tt={};if(le){const Xe=le.finish();Xe&&(tt.resourceTiming=JSON.parse(JSON.stringify(Xe)))}me.vectorTile=Ce.vectorTile;const lt=me.parse(Ce.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[Q]=me,this.fetching[Q]={rawTileData:je,cacheControl:Te,resourceTiming:tt};try{const Xe=yield lt;return u.e({rawTileData:je.slice(0)},Xe,Te,tt)}finally{delete this.fetching[Q]}}catch(Ce){throw delete this.loading[Q],me.status="done",this.loaded[Q]=me,Ce}}))}reloadTile(ee){return u._(this,void 0,void 0,(function*(){const Q=ee.uid;if(!this.loaded||!this.loaded[Q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const le=this.loaded[Q];if(le.showCollisionBoxes=ee.showCollisionBoxes,le.status==="parsing"){const me=yield le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor);let Ae;if(this.fetching[Q]){const{rawTileData:Ce,cacheControl:je,resourceTiming:Te}=this.fetching[Q];delete this.fetching[Q],Ae=u.e({rawTileData:Ce.slice(0)},me,je,Te)}else Ae=me;return Ae}if(le.status==="done"&&le.vectorTile)return le.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(ee){return u._(this,void 0,void 0,(function*(){const Q=this.loading,le=ee.uid;Q&&Q[le]&&Q[le].abort&&(Q[le].abort.abort(),delete Q[le])}))}removeTile(ee){return u._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ee.uid]&&delete this.loaded[ee.uid]}))}}class E{constructor(){this.loaded={}}loadTile(ee){return u._(this,void 0,void 0,(function*(){const{uid:Q,encoding:le,rawImageData:me,redFactor:Ae,greenFactor:Ce,blueFactor:je,baseShift:Te}=ee,tt=me.width+2,lt=me.height+2,Xe=u.b(me)?new u.R({width:tt,height:lt},yield u.bw(me,-1,-1,tt,lt)):me,vt=new u.bx(Q,Xe,le,Ae,Ce,je,Te);return this.loaded=this.loaded||{},this.loaded[Q]=vt,vt}))}removeTile(ee){const Q=this.loaded,le=ee.uid;Q&&Q[le]&&delete Q[le]}}function I(_e,ee){if(_e.length!==0){F(_e[0],ee);for(var Q=1;Q<_e.length;Q++)F(_e[Q],!ee)}}function F(_e,ee){for(var Q=0,le=0,me=0,Ae=_e.length,Ce=Ae-1;me<Ae;Ce=me++){var je=(_e[me][0]-_e[Ce][0])*(_e[Ce][1]+_e[me][1]),Te=Q+je;le+=Math.abs(Q)>=Math.abs(je)?Q-Te+je:je-Te+Q,Q=Te}Q+le>=0!=!!ee&&_e.reverse()}var L=u.by((function _e(ee,Q){var le,me=ee&&ee.type;if(me==="FeatureCollection")for(le=0;le<ee.features.length;le++)_e(ee.features[le],Q);else if(me==="GeometryCollection")for(le=0;le<ee.geometries.length;le++)_e(ee.geometries[le],Q);else if(me==="Feature")_e(ee.geometry,Q);else if(me==="Polygon")I(ee.coordinates,Q);else if(me==="MultiPolygon")for(le=0;le<ee.coordinates.length;le++)I(ee.coordinates[le],Q);return ee}));const R=u.bt.VectorTileFeature.prototype.toGeoJSON;var U={exports:{}},X=u.bz,K=u.bt.VectorTileFeature,re=W;function W(_e,ee){this.options=ee||{},this.features=_e,this.length=_e.length}function J(_e,ee){this.id=typeof _e.id=="number"?_e.id:void 0,this.type=_e.type,this.rawGeometry=_e.type===1?[_e.geometry]:_e.geometry,this.properties=_e.tags,this.extent=ee||4096}W.prototype.feature=function(_e){return new J(this.features[_e],this.options.extent)},J.prototype.loadGeometry=function(){var _e=this.rawGeometry;this.geometry=[];for(var ee=0;ee<_e.length;ee++){for(var Q=_e[ee],le=[],me=0;me<Q.length;me++)le.push(new X(Q[me][0],Q[me][1]));this.geometry.push(le)}return this.geometry},J.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var _e=this.geometry,ee=1/0,Q=-1/0,le=1/0,me=-1/0,Ae=0;Ae<_e.length;Ae++)for(var Ce=_e[Ae],je=0;je<Ce.length;je++){var Te=Ce[je];ee=Math.min(ee,Te.x),Q=Math.max(Q,Te.x),le=Math.min(le,Te.y),me=Math.max(me,Te.y)}return[ee,le,Q,me]},J.prototype.toGeoJSON=K.prototype.toGeoJSON;var ie=u.bA,he=re;function ve(_e){var ee=new ie;return(function(Q,le){for(var me in Q.layers)le.writeMessage(3,Re,Q.layers[me])})(_e,ee),ee.finish()}function Re(_e,ee){var Q;ee.writeVarintField(15,_e.version||1),ee.writeStringField(1,_e.name||""),ee.writeVarintField(5,_e.extent||4096);var le={keys:[],values:[],keycache:{},valuecache:{}};for(Q=0;Q<_e.length;Q++)le.feature=_e.feature(Q),ee.writeMessage(2,de,le);var me=le.keys;for(Q=0;Q<me.length;Q++)ee.writeStringField(3,me[Q]);var Ae=le.values;for(Q=0;Q<Ae.length;Q++)ee.writeMessage(4,Ue,Ae[Q])}function de(_e,ee){var Q=_e.feature;Q.id!==void 0&&ee.writeVarintField(1,Q.id),ee.writeMessage(2,Oe,_e),ee.writeVarintField(3,Q.type),ee.writeMessage(4,Ne,Q)}function Oe(_e,ee){var Q=_e.feature,le=_e.keys,me=_e.values,Ae=_e.keycache,Ce=_e.valuecache;for(var je in Q.properties){var Te=Q.properties[je],tt=Ae[je];if(Te!==null){tt===void 0&&(le.push(je),Ae[je]=tt=le.length-1),ee.writeVarint(tt);var lt=typeof Te;lt!=="string"&&lt!=="boolean"&&lt!=="number"&&(Te=JSON.stringify(Te));var Xe=lt+":"+Te,vt=Ce[Xe];vt===void 0&&(me.push(Te),Ce[Xe]=vt=me.length-1),ee.writeVarint(vt)}}}function Le(_e,ee){return(ee<<3)+(7&_e)}function Ge(_e){return _e<<1^_e>>31}function Ne(_e,ee){for(var Q=_e.loadGeometry(),le=_e.type,me=0,Ae=0,Ce=Q.length,je=0;je<Ce;je++){var Te=Q[je],tt=1;le===1&&(tt=Te.length),ee.writeVarint(Le(1,tt));for(var lt=le===3?Te.length-1:Te.length,Xe=0;Xe<lt;Xe++){Xe===1&&le!==1&&ee.writeVarint(Le(2,lt-1));var vt=Te[Xe].x-me,$t=Te[Xe].y-Ae;ee.writeVarint(Ge(vt)),ee.writeVarint(Ge($t)),me+=vt,Ae+=$t}le===3&&ee.writeVarint(Le(7,1))}}function Ue(_e,ee){var Q=typeof _e;Q==="string"?ee.writeStringField(1,_e):Q==="boolean"?ee.writeBooleanField(7,_e):Q==="number"&&(_e%1!=0?ee.writeDoubleField(3,_e):_e<0?ee.writeSVarintField(6,_e):ee.writeVarintField(5,_e))}U.exports=ve,U.exports.fromVectorTileJs=ve,U.exports.fromGeojsonVt=function(_e,ee){ee=ee||{};var Q={};for(var le in _e)Q[le]=new he(_e[le].features,ee),Q[le].name=le,Q[le].version=ee.version,Q[le].extent=ee.extent;return ve({layers:Q})},U.exports.GeoJSONWrapper=he;var Qe=u.by(U.exports);const $e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},Ye=Math.fround||(nt=new Float32Array(1),_e=>(nt[0]=+_e,nt[0]));var nt;const Se=3,De=5,ft=6;class At{constructor(ee){this.options=Object.assign(Object.create($e),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:Q,minZoom:le,maxZoom:me}=this.options;Q&&console.time("total time");const Ae=`prepare ${ee.length} points`;Q&&console.time(Ae),this.points=ee;const Ce=[];for(let Te=0;Te<ee.length;Te++){const tt=ee[Te];if(!tt.geometry)continue;const[lt,Xe]=tt.geometry.coordinates,vt=Ye(or(lt)),$t=Ye(er(Xe));Ce.push(vt,$t,1/0,Te,-1,1),this.options.reduce&&Ce.push(0)}let je=this.trees[me+1]=this._createTree(Ce);Q&&console.timeEnd(Ae);for(let Te=me;Te>=le;Te--){const tt=+Date.now();je=this.trees[Te]=this._createTree(this._cluster(je,Te)),Q&&console.log("z%d: %d clusters in %dms",Te,je.numItems,+Date.now()-tt)}return Q&&console.timeEnd("total time"),this}getClusters(ee,Q){let le=((ee[0]+180)%360+360)%360-180;const me=Math.max(-90,Math.min(90,ee[1]));let Ae=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)le=-180,Ae=180;else if(le>Ae){const Xe=this.getClusters([le,me,180,Ce],Q),vt=this.getClusters([-180,me,Ae,Ce],Q);return Xe.concat(vt)}const je=this.trees[this._limitZoom(Q)],Te=je.range(or(le),er(Ce),or(Ae),er(me)),tt=je.data,lt=[];for(const Xe of Te){const vt=this.stride*Xe;lt.push(tt[vt+De]>1?jt(tt,vt,this.clusterProps):this.points[tt[vt+Se]])}return lt}getChildren(ee){const Q=this._getOriginId(ee),le=this._getOriginZoom(ee),me="No cluster with the specified id.",Ae=this.trees[le];if(!Ae)throw new Error(me);const Ce=Ae.data;if(Q*this.stride>=Ce.length)throw new Error(me);const je=this.options.radius/(this.options.extent*Math.pow(2,le-1)),Te=Ae.within(Ce[Q*this.stride],Ce[Q*this.stride+1],je),tt=[];for(const lt of Te){const Xe=lt*this.stride;Ce[Xe+4]===ee&&tt.push(Ce[Xe+De]>1?jt(Ce,Xe,this.clusterProps):this.points[Ce[Xe+Se]])}if(tt.length===0)throw new Error(me);return tt}getLeaves(ee,Q,le){const me=[];return this._appendLeaves(me,ee,Q=Q||10,le=le||0,0),me}getTile(ee,Q,le){const me=this.trees[this._limitZoom(ee)],Ae=Math.pow(2,ee),{extent:Ce,radius:je}=this.options,Te=je/Ce,tt=(le-Te)/Ae,lt=(le+1+Te)/Ae,Xe={features:[]};return this._addTileFeatures(me.range((Q-Te)/Ae,tt,(Q+1+Te)/Ae,lt),me.data,Q,le,Ae,Xe),Q===0&&this._addTileFeatures(me.range(1-Te/Ae,tt,1,lt),me.data,Ae,le,Ae,Xe),Q===Ae-1&&this._addTileFeatures(me.range(0,tt,Te/Ae,lt),me.data,-1,le,Ae,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom(ee){let Q=this._getOriginZoom(ee)-1;for(;Q<=this.options.maxZoom;){const le=this.getChildren(ee);if(Q++,le.length!==1)break;ee=le[0].properties.cluster_id}return Q}_appendLeaves(ee,Q,le,me,Ae){const Ce=this.getChildren(Q);for(const je of Ce){const Te=je.properties;if(Te&&Te.cluster?Ae+Te.point_count<=me?Ae+=Te.point_count:Ae=this._appendLeaves(ee,Te.cluster_id,le,me,Ae):Ae<me?Ae++:ee.push(je),ee.length===le)break}return Ae}_createTree(ee){const Q=new u.av(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let le=0;le<ee.length;le+=this.stride)Q.add(ee[le],ee[le+1]);return Q.finish(),Q.data=ee,Q}_addTileFeatures(ee,Q,le,me,Ae,Ce){for(const je of ee){const Te=je*this.stride,tt=Q[Te+De]>1;let lt,Xe,vt;if(tt)lt=Nt(Q,Te,this.clusterProps),Xe=Q[Te],vt=Q[Te+1];else{const Or=this.points[Q[Te+Se]];lt=Or.properties;const[fr,Ir]=Or.geometry.coordinates;Xe=or(fr),vt=er(Ir)}const $t={type:1,geometry:[[Math.round(this.options.extent*(Xe*Ae-le)),Math.round(this.options.extent*(vt*Ae-me))]],tags:lt};let Xt;Xt=tt||this.options.generateId?Q[Te+Se]:this.points[Q[Te+Se]].id,Xt!==void 0&&($t.id=Xt),Ce.features.push($t)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,Q){const{radius:le,extent:me,reduce:Ae,minPoints:Ce}=this.options,je=le/(me*Math.pow(2,Q)),Te=ee.data,tt=[],lt=this.stride;for(let Xe=0;Xe<Te.length;Xe+=lt){if(Te[Xe+2]<=Q)continue;Te[Xe+2]=Q;const vt=Te[Xe],$t=Te[Xe+1],Xt=ee.within(Te[Xe],Te[Xe+1],je),Or=Te[Xe+De];let fr=Or;for(const Ir of Xt){const gr=Ir*lt;Te[gr+2]>Q&&(fr+=Te[gr+De])}if(fr>Or&&fr>=Ce){let Ir,gr=vt*Or,Ln=$t*Or,bn=-1;const br=((Xe/lt|0)<<5)+(Q+1)+this.points.length;for(const Vr of Xt){const hn=Vr*lt;if(Te[hn+2]<=Q)continue;Te[hn+2]=Q;const Kn=Te[hn+De];gr+=Te[hn]*Kn,Ln+=Te[hn+1]*Kn,Te[hn+4]=br,Ae&&(Ir||(Ir=this._map(Te,Xe,!0),bn=this.clusterProps.length,this.clusterProps.push(Ir)),Ae(Ir,this._map(Te,hn)))}Te[Xe+4]=br,tt.push(gr/fr,Ln/fr,1/0,br,-1,fr),Ae&&tt.push(bn)}else{for(let Ir=0;Ir<lt;Ir++)tt.push(Te[Xe+Ir]);if(fr>1)for(const Ir of Xt){const gr=Ir*lt;if(!(Te[gr+2]<=Q)){Te[gr+2]=Q;for(let Ln=0;Ln<lt;Ln++)tt.push(Te[gr+Ln])}}}}return tt}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,Q,le){if(ee[Q+De]>1){const Ce=this.clusterProps[ee[Q+ft]];return le?Object.assign({},Ce):Ce}const me=this.points[ee[Q+Se]].properties,Ae=this.options.map(me);return le&&Ae===me?Object.assign({},Ae):Ae}}function jt(_e,ee,Q){return{type:"Feature",id:_e[ee+Se],properties:Nt(_e,ee,Q),geometry:{type:"Point",coordinates:[(le=_e[ee],360*(le-.5)),ct(_e[ee+1])]}};var le}function Nt(_e,ee,Q){const le=_e[ee+De],me=le>=1e4?`${Math.round(le/1e3)}k`:le>=1e3?Math.round(le/100)/10+"k":le,Ae=_e[ee+ft],Ce=Ae===-1?{}:Object.assign({},Q[Ae]);return Object.assign(Ce,{cluster:!0,cluster_id:_e[ee+Se],point_count:le,point_count_abbreviated:me})}function or(_e){return _e/360+.5}function er(_e){const ee=Math.sin(_e*Math.PI/180),Q=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return Q<0?0:Q>1?1:Q}function ct(_e){const ee=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Ht(_e,ee,Q,le){let me=le;const Ae=ee+(Q-ee>>1);let Ce,je=Q-ee;const Te=_e[ee],tt=_e[ee+1],lt=_e[Q],Xe=_e[Q+1];for(let vt=ee+3;vt<Q;vt+=3){const $t=lr(_e[vt],_e[vt+1],Te,tt,lt,Xe);if($t>me)Ce=vt,me=$t;else if($t===me){const Xt=Math.abs(vt-Ae);Xt<je&&(Ce=vt,je=Xt)}}me>le&&(Ce-ee>3&&Ht(_e,ee,Ce,le),_e[Ce+2]=me,Q-Ce>3&&Ht(_e,Ce,Q,le))}function lr(_e,ee,Q,le,me,Ae){let Ce=me-Q,je=Ae-le;if(Ce!==0||je!==0){const Te=((_e-Q)*Ce+(ee-le)*je)/(Ce*Ce+je*je);Te>1?(Q=me,le=Ae):Te>0&&(Q+=Ce*Te,le+=je*Te)}return Ce=_e-Q,je=ee-le,Ce*Ce+je*je}function Je(_e,ee,Q,le){const me={id:_e??null,type:ee,geometry:Q,tags:le,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ee==="Point"||ee==="MultiPoint"||ee==="LineString")rr(me,Q);else if(ee==="Polygon")rr(me,Q[0]);else if(ee==="MultiLineString")for(const Ae of Q)rr(me,Ae);else if(ee==="MultiPolygon")for(const Ae of Q)rr(me,Ae[0]);return me}function rr(_e,ee){for(let Q=0;Q<ee.length;Q+=3)_e.minX=Math.min(_e.minX,ee[Q]),_e.minY=Math.min(_e.minY,ee[Q+1]),_e.maxX=Math.max(_e.maxX,ee[Q]),_e.maxY=Math.max(_e.maxY,ee[Q+1])}function Bt(_e,ee,Q,le){if(!ee.geometry)return;const me=ee.geometry.coordinates;if(me&&me.length===0)return;const Ae=ee.geometry.type,Ce=Math.pow(Q.tolerance/((1<<Q.maxZoom)*Q.extent),2);let je=[],Te=ee.id;if(Q.promoteId?Te=ee.properties[Q.promoteId]:Q.generateId&&(Te=le||0),Ae==="Point")Er(me,je);else if(Ae==="MultiPoint")for(const tt of me)Er(tt,je);else if(Ae==="LineString")Ve(me,je,Ce,!1);else if(Ae==="MultiLineString"){if(Q.lineMetrics){for(const tt of me)je=[],Ve(tt,je,Ce,!1),_e.push(Je(Te,"LineString",je,ee.properties));return}Gr(me,je,Ce,!1)}else if(Ae==="Polygon")Gr(me,je,Ce,!0);else{if(Ae!=="MultiPolygon"){if(Ae==="GeometryCollection"){for(const tt of ee.geometry.geometries)Bt(_e,{id:Te,geometry:tt,properties:ee.properties},Q,le);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const tt of me){const lt=[];Gr(tt,lt,Ce,!0),je.push(lt)}}_e.push(Je(Te,Ae,je,ee.properties))}function Er(_e,ee){ee.push(Oi(_e[0]),xr(_e[1]),0)}function Ve(_e,ee,Q,le){let me,Ae,Ce=0;for(let Te=0;Te<_e.length;Te++){const tt=Oi(_e[Te][0]),lt=xr(_e[Te][1]);ee.push(tt,lt,0),Te>0&&(Ce+=le?(me*lt-tt*Ae)/2:Math.sqrt(Math.pow(tt-me,2)+Math.pow(lt-Ae,2))),me=tt,Ae=lt}const je=ee.length-3;ee[2]=1,Ht(ee,0,je,Q),ee[je+2]=1,ee.size=Math.abs(Ce),ee.start=0,ee.end=ee.size}function Gr(_e,ee,Q,le){for(let me=0;me<_e.length;me++){const Ae=[];Ve(_e[me],Ae,Q,le),ee.push(Ae)}}function Oi(_e){return _e/360+.5}function xr(_e){const ee=Math.sin(_e*Math.PI/180),Q=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return Q<0?0:Q>1?1:Q}function jr(_e,ee,Q,le,me,Ae,Ce,je){if(le/=ee,Ae>=(Q/=ee)&&Ce<le)return _e;if(Ce<Q||Ae>=le)return null;const Te=[];for(const tt of _e){const lt=tt.geometry;let Xe=tt.type;const vt=me===0?tt.minX:tt.minY,$t=me===0?tt.maxX:tt.maxY;if(vt>=Q&&$t<le){Te.push(tt);continue}if($t<Q||vt>=le)continue;let Xt=[];if(Xe==="Point"||Xe==="MultiPoint")ri(lt,Xt,Q,le,me);else if(Xe==="LineString")ni(lt,Xt,Q,le,me,!1,je.lineMetrics);else if(Xe==="MultiLineString")Eo(lt,Xt,Q,le,me,!1);else if(Xe==="Polygon")Eo(lt,Xt,Q,le,me,!0);else if(Xe==="MultiPolygon")for(const Or of lt){const fr=[];Eo(Or,fr,Q,le,me,!0),fr.length&&Xt.push(fr)}if(Xt.length){if(je.lineMetrics&&Xe==="LineString"){for(const Or of Xt)Te.push(Je(tt.id,Xe,Or,tt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(Xt.length===1?(Xe="LineString",Xt=Xt[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=Xt.length===3?"Point":"MultiPoint"),Te.push(Je(tt.id,Xe,Xt,tt.tags))}}return Te.length?Te:null}function ri(_e,ee,Q,le,me){for(let Ae=0;Ae<_e.length;Ae+=3){const Ce=_e[Ae+me];Ce>=Q&&Ce<=le&&xi(ee,_e[Ae],_e[Ae+1],_e[Ae+2])}}function ni(_e,ee,Q,le,me,Ae,Ce){let je=Hi(_e);const Te=me===0?Rl:Qs;let tt,lt,Xe=_e.start;for(let fr=0;fr<_e.length-3;fr+=3){const Ir=_e[fr],gr=_e[fr+1],Ln=_e[fr+2],bn=_e[fr+3],br=_e[fr+4],Vr=me===0?Ir:gr,hn=me===0?bn:br;let Kn=!1;Ce&&(tt=Math.sqrt(Math.pow(Ir-bn,2)+Math.pow(gr-br,2))),Vr<Q?hn>Q&&(lt=Te(je,Ir,gr,bn,br,Q),Ce&&(je.start=Xe+tt*lt)):Vr>le?hn<le&&(lt=Te(je,Ir,gr,bn,br,le),Ce&&(je.start=Xe+tt*lt)):xi(je,Ir,gr,Ln),hn<Q&&Vr>=Q&&(lt=Te(je,Ir,gr,bn,br,Q),Kn=!0),hn>le&&Vr<=le&&(lt=Te(je,Ir,gr,bn,br,le),Kn=!0),!Ae&&Kn&&(Ce&&(je.end=Xe+tt*lt),ee.push(je),je=Hi(_e)),Ce&&(Xe+=tt)}let vt=_e.length-3;const $t=_e[vt],Xt=_e[vt+1],Or=me===0?$t:Xt;Or>=Q&&Or<=le&&xi(je,$t,Xt,_e[vt+2]),vt=je.length-3,Ae&&vt>=3&&(je[vt]!==je[0]||je[vt+1]!==je[1])&&xi(je,je[0],je[1],je[2]),je.length&&ee.push(je)}function Hi(_e){const ee=[];return ee.size=_e.size,ee.start=_e.start,ee.end=_e.end,ee}function Eo(_e,ee,Q,le,me,Ae){for(const Ce of _e)ni(Ce,ee,Q,le,me,Ae,!1)}function xi(_e,ee,Q,le){_e.push(ee,Q,le)}function Rl(_e,ee,Q,le,me,Ae){const Ce=(Ae-ee)/(le-ee);return xi(_e,Ae,Q+(me-Q)*Ce,1),Ce}function Qs(_e,ee,Q,le,me,Ae){const Ce=(Ae-Q)/(me-Q);return xi(_e,ee+(le-ee)*Ce,Ae,1),Ce}function mt(_e,ee){const Q=[];for(let le=0;le<_e.length;le++){const me=_e[le],Ae=me.type;let Ce;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")Ce=io(me.geometry,ee);else if(Ae==="MultiLineString"||Ae==="Polygon"){Ce=[];for(const je of me.geometry)Ce.push(io(je,ee))}else if(Ae==="MultiPolygon"){Ce=[];for(const je of me.geometry){const Te=[];for(const tt of je)Te.push(io(tt,ee));Ce.push(Te)}}Q.push(Je(me.id,Ae,Ce,me.tags))}return Q}function io(_e,ee){const Q=[];Q.size=_e.size,_e.start!==void 0&&(Q.start=_e.start,Q.end=_e.end);for(let le=0;le<_e.length;le+=3)Q.push(_e[le]+ee,_e[le+1],_e[le+2]);return Q}function Xn(_e,ee){if(_e.transformed)return _e;const Q=1<<_e.z,le=_e.x,me=_e.y;for(const Ae of _e.features){const Ce=Ae.geometry,je=Ae.type;if(Ae.geometry=[],je===1)for(let Te=0;Te<Ce.length;Te+=2)Ae.geometry.push(Gi(Ce[Te],Ce[Te+1],ee,Q,le,me));else for(let Te=0;Te<Ce.length;Te++){const tt=[];for(let lt=0;lt<Ce[Te].length;lt+=2)tt.push(Gi(Ce[Te][lt],Ce[Te][lt+1],ee,Q,le,me));Ae.geometry.push(tt)}}return _e.transformed=!0,_e}function Gi(_e,ee,Q,le,me,Ae){return[Math.round(Q*(_e*le-me)),Math.round(Q*(ee*le-Ae))]}function bs(_e,ee,Q,le,me){const Ae=ee===me.maxZoom?0:me.tolerance/((1<<ee)*me.extent),Ce={features:[],numPoints:0,numSimplified:0,numFeatures:_e.length,source:null,x:Q,y:le,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const je of _e)bt(Ce,je,Ae,me);return Ce}function bt(_e,ee,Q,le){const me=ee.geometry,Ae=ee.type,Ce=[];if(_e.minX=Math.min(_e.minX,ee.minX),_e.minY=Math.min(_e.minY,ee.minY),_e.maxX=Math.max(_e.maxX,ee.maxX),_e.maxY=Math.max(_e.maxY,ee.maxY),Ae==="Point"||Ae==="MultiPoint")for(let je=0;je<me.length;je+=3)Ce.push(me[je],me[je+1]),_e.numPoints++,_e.numSimplified++;else if(Ae==="LineString")yr(Ce,me,_e,Q,!1,!1);else if(Ae==="MultiLineString"||Ae==="Polygon")for(let je=0;je<me.length;je++)yr(Ce,me[je],_e,Q,Ae==="Polygon",je===0);else if(Ae==="MultiPolygon")for(let je=0;je<me.length;je++){const Te=me[je];for(let tt=0;tt<Te.length;tt++)yr(Ce,Te[tt],_e,Q,!0,tt===0)}if(Ce.length){let je=ee.tags||null;if(Ae==="LineString"&&le.lineMetrics){je={};for(const tt in ee.tags)je[tt]=ee.tags[tt];je.mapbox_clip_start=me.start/me.size,je.mapbox_clip_end=me.end/me.size}const Te={geometry:Ce,type:Ae==="Polygon"||Ae==="MultiPolygon"?3:Ae==="LineString"||Ae==="MultiLineString"?2:1,tags:je};ee.id!==null&&(Te.id=ee.id),_e.features.push(Te)}}function yr(_e,ee,Q,le,me,Ae){const Ce=le*le;if(le>0&&ee.size<(me?Ce:le))return void(Q.numPoints+=ee.length/3);const je=[];for(let Te=0;Te<ee.length;Te+=3)(le===0||ee[Te+2]>Ce)&&(Q.numSimplified++,je.push(ee[Te],ee[Te+1])),Q.numPoints++;me&&(function(Te,tt){let lt=0;for(let Xe=0,vt=Te.length,$t=vt-2;Xe<vt;$t=Xe,Xe+=2)lt+=(Te[Xe]-Te[$t])*(Te[Xe+1]+Te[$t+1]);if(lt>0===tt)for(let Xe=0,vt=Te.length;Xe<vt/2;Xe+=2){const $t=Te[Xe],Xt=Te[Xe+1];Te[Xe]=Te[vt-2-Xe],Te[Xe+1]=Te[vt-1-Xe],Te[vt-2-Xe]=$t,Te[vt-1-Xe]=Xt}})(je,Ae),_e.push(je)}const nr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class bi{constructor(ee,Q){const le=(Q=this.options=(function(Ae,Ce){for(const je in Ce)Ae[je]=Ce[je];return Ae})(Object.create(nr),Q)).debug;if(le&&console.time("preprocess data"),Q.maxZoom<0||Q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Q.promoteId&&Q.generateId)throw new Error("promoteId and generateId cannot be used together.");let me=(function(Ae,Ce){const je=[];if(Ae.type==="FeatureCollection")for(let Te=0;Te<Ae.features.length;Te++)Bt(je,Ae.features[Te],Ce,Te);else Bt(je,Ae.type==="Feature"?Ae:{geometry:Ae},Ce);return je})(ee,Q);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Q.indexMaxZoom,Q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),me=(function(Ae,Ce){const je=Ce.buffer/Ce.extent;let Te=Ae;const tt=jr(Ae,1,-1-je,je,0,-1,2,Ce),lt=jr(Ae,1,1-je,2+je,0,-1,2,Ce);return(tt||lt)&&(Te=jr(Ae,1,-je,1+je,0,-1,2,Ce)||[],tt&&(Te=mt(tt,1).concat(Te)),lt&&(Te=Te.concat(mt(lt,-1)))),Te})(me,Q),me.length&&this.splitTile(me,0,0,0),le&&(me.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,Q,le,me,Ae,Ce,je){const Te=[ee,Q,le,me],tt=this.options,lt=tt.debug;for(;Te.length;){me=Te.pop(),le=Te.pop(),Q=Te.pop(),ee=Te.pop();const Xe=1<<Q,vt=pa(Q,le,me);let $t=this.tiles[vt];if(!$t&&(lt>1&&console.time("creation"),$t=this.tiles[vt]=bs(ee,Q,le,me,tt),this.tileCoords.push({z:Q,x:le,y:me}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Q,le,me,$t.numFeatures,$t.numPoints,$t.numSimplified),console.timeEnd("creation"));const Kn=`z${Q}`;this.stats[Kn]=(this.stats[Kn]||0)+1,this.total++}if($t.source=ee,Ae==null){if(Q===tt.indexMaxZoom||$t.numPoints<=tt.indexMaxPoints)continue}else{if(Q===tt.maxZoom||Q===Ae)continue;if(Ae!=null){const Kn=Ae-Q;if(le!==Ce>>Kn||me!==je>>Kn)continue}}if($t.source=null,ee.length===0)continue;lt>1&&console.time("clipping");const Xt=.5*tt.buffer/tt.extent,Or=.5-Xt,fr=.5+Xt,Ir=1+Xt;let gr=null,Ln=null,bn=null,br=null,Vr=jr(ee,Xe,le-Xt,le+fr,0,$t.minX,$t.maxX,tt),hn=jr(ee,Xe,le+Or,le+Ir,0,$t.minX,$t.maxX,tt);ee=null,Vr&&(gr=jr(Vr,Xe,me-Xt,me+fr,1,$t.minY,$t.maxY,tt),Ln=jr(Vr,Xe,me+Or,me+Ir,1,$t.minY,$t.maxY,tt),Vr=null),hn&&(bn=jr(hn,Xe,me-Xt,me+fr,1,$t.minY,$t.maxY,tt),br=jr(hn,Xe,me+Or,me+Ir,1,$t.minY,$t.maxY,tt),hn=null),lt>1&&console.timeEnd("clipping"),Te.push(gr||[],Q+1,2*le,2*me),Te.push(Ln||[],Q+1,2*le,2*me+1),Te.push(bn||[],Q+1,2*le+1,2*me),Te.push(br||[],Q+1,2*le+1,2*me+1)}}getTile(ee,Q,le){ee=+ee,Q=+Q,le=+le;const me=this.options,{extent:Ae,debug:Ce}=me;if(ee<0||ee>24)return null;const je=1<<ee,Te=pa(ee,Q=Q+je&je-1,le);if(this.tiles[Te])return Xn(this.tiles[Te],Ae);Ce>1&&console.log("drilling down to z%d-%d-%d",ee,Q,le);let tt,lt=ee,Xe=Q,vt=le;for(;!tt&&lt>0;)lt--,Xe>>=1,vt>>=1,tt=this.tiles[pa(lt,Xe,vt)];return tt&&tt.source?(Ce>1&&(console.log("found parent tile z%d-%d-%d",lt,Xe,vt),console.time("drilling down")),this.splitTile(tt.source,lt,Xe,vt,ee,Q,le),Ce>1&&console.timeEnd("drilling down"),this.tiles[Te]?Xn(this.tiles[Te],Ae):null):null}}function pa(_e,ee,Q){return 32*((1<<_e)*Q+ee)+_e}function ur(_e,ee){return ee?_e.properties[ee]:_e.id}function Oa(_e,ee){if(_e==null)return!0;if(_e.type==="Feature")return ur(_e,ee)!=null;if(_e.type==="FeatureCollection"){const Q=new Set;for(const le of _e.features){const me=ur(le,ee);if(me==null||Q.has(me))return!1;Q.add(me)}return!0}return!1}function ao(_e,ee){const Q=new Map;if(_e!=null)if(_e.type==="Feature")Q.set(ur(_e,ee),_e);else for(const le of _e.features)Q.set(ur(le,ee),le);return Q}class ma extends S{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(ee,Q){return u._(this,void 0,void 0,(function*(){const le=ee.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const me=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!me)return null;const Ae=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=u.X,this.length=je.length,this._features=je}feature(je){return new class{constructor(Te){this._feature=Te,this.extent=u.X,this.type=Te.type,this.properties=Te.tags,"id"in Te&&!isNaN(Te.id)&&(this.id=parseInt(Te.id,10))}loadGeometry(){if(this._feature.type===1){const Te=[];for(const tt of this._feature.geometry)Te.push([new u.P(tt[0],tt[1])]);return Te}{const Te=[];for(const tt of this._feature.geometry){const lt=[];for(const Xe of tt)lt.push(new u.P(Xe[0],Xe[1]));Te.push(lt)}return Te}}toGeoJSON(Te,tt,lt){return R.call(this,Te,tt,lt)}}(this._features[je])}}(me.features);let Ce=Qe(Ae);return Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),{vectorTile:Ae,rawData:Ce.buffer}}))}loadData(ee){return u._(this,void 0,void 0,(function*(){var Q;(Q=this._pendingRequest)===null||Q===void 0||Q.abort();const le=!!(ee&&ee.request&&ee.request.collectResourceTiming)&&new u.bv(ee.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest),this._geoJSONIndex=ee.cluster?new At((function({superclusterOptions:Ce,clusterProperties:je}){if(!je||!Ce)return Ce;const Te={},tt={},lt={accumulated:null,zoom:0},Xe={properties:null},vt=Object.keys(je);for(const $t of vt){const[Xt,Or]=je[$t],fr=u.bC(Or),Ir=u.bC(typeof Xt=="string"?[Xt,["accumulated"],["get",$t]]:Xt);Te[$t]=fr.value,tt[$t]=Ir.value}return Ce.map=$t=>{Xe.properties=$t;const Xt={};for(const Or of vt)Xt[Or]=Te[Or].evaluate(lt,Xe);return Xt},Ce.reduce=($t,Xt)=>{Xe.properties=Xt;for(const Or of vt)lt.accumulated=$t[Or],$t[Or]=tt[Or].evaluate(lt,Xe)},Ce})(ee)).load((yield this._pendingData).features):(me=yield this._pendingData,new bi(me,ee.geojsonVtOptions)),this.loaded={};const Ae={};if(le){const Ce=le.finish();Ce&&(Ae.resourceTiming={},Ae.resourceTiming[ee.source]=JSON.parse(JSON.stringify(Ce)))}return Ae}catch(Ae){if(delete this._pendingRequest,u.bB(Ae))return{abandoned:!0};throw Ae}var me}))}getData(){return u._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){const Q=this.loaded;return Q&&Q[ee.uid]?super.reloadTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,Q){return u._(this,void 0,void 0,(function*(){let le=yield this.loadGeoJSON(ee,Q);if(delete this._pendingRequest,typeof le!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(L(le,!0),ee.filter){const me=u.bC(ee.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(me.result==="error")throw new Error(me.value.map((Ce=>`${Ce.key}: ${Ce.message}`)).join(", "));le={type:"FeatureCollection",features:le.features.filter((Ce=>me.value.evaluate({zoom:0},Ce)))}}return le}))}loadGeoJSON(ee,Q){return u._(this,void 0,void 0,(function*(){const{promoteId:le}=ee;if(ee.request){const me=yield u.h(ee.request,Q);return this._dataUpdateable=Oa(me.data,le)?ao(me.data,le):void 0,me.data}if(typeof ee.data=="string")try{const me=JSON.parse(ee.data);return this._dataUpdateable=Oa(me,le)?ao(me,le):void 0,me}catch{throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`)}if(!ee.dataDiff)throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ee.source}`);return(function(me,Ae,Ce){var je,Te,tt,lt;if(Ae.removeAll&&me.clear(),Ae.remove)for(const Xe of Ae.remove)me.delete(Xe);if(Ae.add)for(const Xe of Ae.add){const vt=ur(Xe,Ce);vt!=null&&me.set(vt,Xe)}if(Ae.update)for(const Xe of Ae.update){let vt=me.get(Xe.id);if(vt==null)continue;const $t=!Xe.removeAllProperties&&(((je=Xe.removeProperties)===null||je===void 0?void 0:je.length)>0||((Te=Xe.addOrUpdateProperties)===null||Te===void 0?void 0:Te.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||$t)&&(vt=Object.assign({},vt),me.set(Xe.id,vt),$t&&(vt.properties=Object.assign({},vt.properties))),Xe.newGeometry&&(vt.geometry=Xe.newGeometry),Xe.removeAllProperties)vt.properties={};else if(((tt=Xe.removeProperties)===null||tt===void 0?void 0:tt.length)>0)for(const Xt of Xe.removeProperties)Object.prototype.hasOwnProperty.call(vt.properties,Xt)&&delete vt.properties[Xt];if(((lt=Xe.addOrUpdateProperties)===null||lt===void 0?void 0:lt.length)>0)for(const{key:Xt,value:Or}of Xe.addOrUpdateProperties)vt.properties[Xt]=Or}})(this._dataUpdateable,ee.dataDiff,le),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(ee){return u._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}class Ii{constructor(ee){this.self=ee,this.actor=new u.F(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Q,le)=>{if(this.externalWorkerSourceTypes[Q])throw new Error(`Worker source with name "${Q}" already registered.`);this.externalWorkerSourceTypes[Q]=le},this.self.addProtocol=u.bi,this.self.removeProtocol=u.bj,this.self.registerRTLTextPlugin=Q=>{if(u.bD.isParsed())throw new Error("RTL text plugin already registered.");u.bD.setMethods(Q)},this.actor.registerMessageHandler("LDT",((Q,le)=>this._getDEMWorkerSource(Q,le.source).loadTile(le))),this.actor.registerMessageHandler("RDT",((Q,le)=>u._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(Q,le.source).removeTile(le)})))),this.actor.registerMessageHandler("GCEZ",((Q,le)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(Q,le.type,le.source).getClusterExpansionZoom(le)})))),this.actor.registerMessageHandler("GCC",((Q,le)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(Q,le.type,le.source).getClusterChildren(le)})))),this.actor.registerMessageHandler("GCL",((Q,le)=>u._(this,void 0,void 0,(function*(){return this._getWorkerSource(Q,le.type,le.source).getClusterLeaves(le)})))),this.actor.registerMessageHandler("LD",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).loadData(le))),this.actor.registerMessageHandler("GD",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).getData())),this.actor.registerMessageHandler("LT",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).loadTile(le))),this.actor.registerMessageHandler("RT",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).reloadTile(le))),this.actor.registerMessageHandler("AT",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).abortTile(le))),this.actor.registerMessageHandler("RMT",((Q,le)=>this._getWorkerSource(Q,le.type,le.source).removeTile(le))),this.actor.registerMessageHandler("RS",((Q,le)=>u._(this,void 0,void 0,(function*(){if(!this.workerSources[Q]||!this.workerSources[Q][le.type]||!this.workerSources[Q][le.type][le.source])return;const me=this.workerSources[Q][le.type][le.source];delete this.workerSources[Q][le.type][le.source],me.removeSource!==void 0&&me.removeSource(le)})))),this.actor.registerMessageHandler("RM",(Q=>u._(this,void 0,void 0,(function*(){delete this.layerIndexes[Q],delete this.availableImages[Q],delete this.workerSources[Q],delete this.demWorkerSources[Q]})))),this.actor.registerMessageHandler("SR",((Q,le)=>u._(this,void 0,void 0,(function*(){this.referrer=le})))),this.actor.registerMessageHandler("SRPS",((Q,le)=>this._syncRTLPluginState(Q,le))),this.actor.registerMessageHandler("IS",((Q,le)=>u._(this,void 0,void 0,(function*(){this.self.importScripts(le)})))),this.actor.registerMessageHandler("SI",((Q,le)=>this._setImages(Q,le))),this.actor.registerMessageHandler("UL",((Q,le)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(Q).update(le.layers,le.removedIds)})))),this.actor.registerMessageHandler("SL",((Q,le)=>u._(this,void 0,void 0,(function*(){this._getLayerIndex(Q).replace(le)}))))}_setImages(ee,Q){return u._(this,void 0,void 0,(function*(){this.availableImages[ee]=Q;for(const le in this.workerSources[ee]){const me=this.workerSources[ee][le];for(const Ae in me)me[Ae].availableImages=Q}}))}_syncRTLPluginState(ee,Q){return u._(this,void 0,void 0,(function*(){if(u.bD.isParsed())return u.bD.getState();if(Q.pluginStatus!=="loading")return u.bD.setState(Q),Q;const le=Q.pluginURL;if(this.self.importScripts(le),u.bD.isParsed()){const me={pluginStatus:"loaded",pluginURL:le};return u.bD.setState(me),me}throw u.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${le}`)}))}_getAvailableImages(ee){let Q=this.availableImages[ee];return Q||(Q=[]),Q}_getLayerIndex(ee){let Q=this.layerIndexes[ee];return Q||(Q=this.layerIndexes[ee]=new s),Q}_getWorkerSource(ee,Q,le){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][Q]||(this.workerSources[ee][Q]={}),!this.workerSources[ee][Q][le]){const me={sendAsync:(Ae,Ce)=>(Ae.targetMapId=ee,this.actor.sendAsync(Ae,Ce))};switch(Q){case"vector":this.workerSources[ee][Q][le]=new S(me,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][Q][le]=new ma(me,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][Q][le]=new this.externalWorkerSourceTypes[Q](me,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][Q][le]}_getDEMWorkerSource(ee,Q){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][Q]||(this.demWorkerSources[ee][Q]=new E),this.demWorkerSources[ee][Q]}}return u.i(self)&&(self.worker=new Ii(self)),Ii})),i("index",["exports","./shared"],(function(u,s){var m="4.7.1";let y,w;const S={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:P=>new Promise(((a,d)=>{const v=requestAnimationFrame(a);P.signal.addEventListener("abort",(()=>{cancelAnimationFrame(v),d(s.c())}))})),getImageData(P,a=0){return this.getImageCanvasContext(P).getImageData(-a,-a,P.width+2*a,P.height+2*a)},getImageCanvasContext(P){const a=window.document.createElement("canvas"),d=a.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return a.width=P.width,a.height=P.height,d.drawImage(P,0,0,P.width,P.height),d},resolveURL:P=>(y||(y=document.createElement("a")),y.href=P,y.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(w==null&&(w=matchMedia("(prefers-reduced-motion: reduce)")),w.matches)}};class E{static testProp(a){if(!E.docStyle)return a[0];for(let d=0;d<a.length;d++)if(a[d]in E.docStyle)return a[d];return a[0]}static create(a,d,v){const _=window.document.createElement(a);return d!==void 0&&(_.className=d),v&&v.appendChild(_),_}static createNS(a,d){return window.document.createElementNS(a,d)}static disableDrag(){E.docStyle&&E.selectProp&&(E.userSelect=E.docStyle[E.selectProp],E.docStyle[E.selectProp]="none")}static enableDrag(){E.docStyle&&E.selectProp&&(E.docStyle[E.selectProp]=E.userSelect)}static setTransform(a,d){a.style[E.transformProp]=d}static addEventListener(a,d,v,_={}){a.addEventListener(d,v,"passive"in _?_:_.capture)}static removeEventListener(a,d,v,_={}){a.removeEventListener(d,v,"passive"in _?_:_.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",E.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",E.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",E.suppressClickInternal,!0)}),0)}static getScale(a){const d=a.getBoundingClientRect();return{x:d.width/a.offsetWidth||1,y:d.height/a.offsetHeight||1,boundingClientRect:d}}static getPoint(a,d,v){const _=d.boundingClientRect;return new s.P((v.clientX-_.left)/d.x-a.clientLeft,(v.clientY-_.top)/d.y-a.clientTop)}static mousePos(a,d){const v=E.getScale(a);return E.getPoint(a,v,d)}static touchPos(a,d){const v=[],_=E.getScale(a);for(let T=0;T<d.length;T++)v.push(E.getPoint(a,_,d[T]));return v}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}}E.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,E.selectProp=E.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),E.transformProp=E.testProp(["transform","WebkitTransform"]);const I={supported:!1,testSupport:function(P){!R&&L&&(U?X(P):F=P)}};let F,L,R=!1,U=!1;function X(P){const a=P.createTexture();P.bindTexture(P.TEXTURE_2D,a);try{if(P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,L),P.isContextLost())return;I.supported=!0}catch{}P.deleteTexture(a),R=!0}var K;typeof document<"u"&&(L=document.createElement("img"),L.onload=()=>{F&&X(F),F=null,U=!0},L.onerror=()=>{R=!0,F=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(P){let a,d,v,_;P.resetRequestQueue=()=>{a=[],d=0,v=0,_={}},P.addThrottleControl=B=>{const V=v++;return _[V]=B,V},P.removeThrottleControl=B=>{delete _[B],O()},P.getImage=(B,V,G=!0)=>new Promise(((Z,ne)=>{I.supported&&(B.headers||(B.headers={}),B.headers.accept="image/webp,*/*"),s.e(B,{type:"image"}),a.push({abortController:V,requestParameters:B,supportImageRefresh:G,state:"queued",onError:se=>{ne(se)},onSuccess:se=>{Z(se)}}),O()}));const T=B=>s._(this,void 0,void 0,(function*(){B.state="running";const{requestParameters:V,supportImageRefresh:G,onError:Z,onSuccess:ne,abortController:se}=B,ce=G===!1&&!s.i(self)&&!s.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce(((xe,Pe)=>xe&&Pe==="accept"),!0));d++;const fe=ce?z(V,se):s.m(V,se);try{const xe=yield fe;delete B.abortController,B.state="completed",xe.data instanceof HTMLImageElement||s.b(xe.data)?ne(xe):xe.data&&ne({data:yield(ge=xe.data,typeof createImageBitmap=="function"?s.d(ge):s.f(ge)),cacheControl:xe.cacheControl,expires:xe.expires})}catch(xe){delete B.abortController,Z(xe)}finally{d--,O()}var ge})),O=()=>{const B=(()=>{for(const V of Object.keys(_))if(_[V]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=d;V<B&&a.length>0;V++){const G=a.shift();G.abortController.signal.aborted?V--:T(G)}},z=(B,V)=>new Promise(((G,Z)=>{const ne=new Image,se=B.url,ce=B.credentials;ce&&ce==="include"?ne.crossOrigin="use-credentials":(ce&&ce==="same-origin"||!s.s(se))&&(ne.crossOrigin="anonymous"),V.signal.addEventListener("abort",(()=>{ne.src="",Z(s.c())})),ne.fetchPriority="high",ne.onload=()=>{ne.onerror=ne.onload=null,G({data:ne})},ne.onerror=()=>{ne.onerror=ne.onload=null,V.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ne.src=se}))})(K||(K={})),K.resetRequestQueue();class re{constructor(a){this._transformRequestFn=a}transformRequest(a,d){return this._transformRequestFn&&this._transformRequestFn(a,d)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function W(P){var a=new s.A(3);return a[0]=P[0],a[1]=P[1],a[2]=P[2],a}var J,ie=function(P,a,d){return P[0]=a[0]-d[0],P[1]=a[1]-d[1],P[2]=a[2]-d[2],P};J=new s.A(3),s.A!=Float32Array&&(J[0]=0,J[1]=0,J[2]=0);var he=function(P){var a=P[0],d=P[1];return a*a+d*d};function ve(P){const a=[];if(typeof P=="string")a.push({id:"default",url:P});else if(P&&P.length>0){const d=[];for(const{id:v,url:_}of P){const T=`${v}${_}`;d.indexOf(T)===-1&&(d.push(T),a.push({id:v,url:_}))}}return a}function Re(P,a,d){const v=P.split("?");return v[0]+=`${a}${d}`,v.join("?")}(function(){var P=new s.A(2);s.A!=Float32Array&&(P[0]=0,P[1]=0)})();class de{constructor(a,d,v,_){this.context=a,this.format=v,this.texture=a.gl.createTexture(),this.update(d,_)}update(a,d,v){const{width:_,height:T}=a,O=!(this.size&&this.size[0]===_&&this.size[1]===T||v),{context:z}=this,{gl:B}=z;if(this.useMipmap=!!(d&&d.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!d||d.premultiply!==!1)),O)this.size=[_,T],a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.b(a)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,a):B.texImage2D(B.TEXTURE_2D,0,this.format,_,T,0,this.format,B.UNSIGNED_BYTE,a.data);else{const{x:V,y:G}=v||{x:0,y:0};a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageData||s.b(a)?B.texSubImage2D(B.TEXTURE_2D,0,V,G,B.RGBA,B.UNSIGNED_BYTE,a):B.texSubImage2D(B.TEXTURE_2D,0,V,G,_,T,B.RGBA,B.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(a,d,v){const{context:_}=this,{gl:T}=_;T.bindTexture(T.TEXTURE_2D,this.texture),v!==T.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=T.LINEAR),a!==this.filter&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,a),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,v||a),this.filter=a),d!==this.wrap&&(T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,d),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:a}=this.context;a.deleteTexture(this.texture),this.texture=null}}function Oe(P){const{userImage:a}=P;return!!(a&&a.render&&a.render())&&(P.data.replace(new Uint8Array(a.data.buffer)),!0)}class Le extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(a){const d=this.images[a];if(d&&!d.data&&d.spriteData){const v=d.spriteData;d.data=new s.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(a,d){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,d)&&(this.images[a]=d)}_validate(a,d){let v=!0;const _=d.data||d.spriteData;return this._validateStretch(d.stretchX,_&&_.width)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,_&&_.height)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new s.j(new Error(`Image "${a}" has invalid "content" value`))),v=!1),v}_validateStretch(a,d){if(!a)return!0;let v=0;for(const _ of a){if(_[0]<v||_[1]<_[0]||d<_[1])return!1;v=_[1]}return!0}_validateContent(a,d){if(!a)return!0;if(a.length!==4)return!1;const v=d.spriteData,_=v&&v.width||d.data.width,T=v&&v.height||d.data.height;return!(a[0]<0||_<a[0]||a[1]<0||T<a[1]||a[2]<0||_<a[2]||a[3]<0||T<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,d,v=!0){const _=this.getImage(a);if(v&&(_.data.width!==d.data.width||_.data.height!==d.data.height))throw new Error(`size mismatch between old image (${_.data.width}x${_.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=_.version+1,this.images[a]=d,this.updatedImages[a]=!0}removeImage(a){const d=this.images[a];delete this.images[a],delete this.patterns[a],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise(((d,v)=>{let _=!0;if(!this.isLoaded())for(const T of a)this.images[T]||(_=!1);this.isLoaded()||_?d(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:d})}))}_getImagesForIds(a){const d={};for(const v of a){let _=this.getImage(v);_||(this.fire(new s.k("styleimagemissing",{id:v})),_=this.getImage(v)),_?d[v]={data:_.data.clone(),pixelRatio:_.pixelRatio,sdf:_.sdf,version:_.version,stretchX:_.stretchX,stretchY:_.stretchY,content:_.content,textFitWidth:_.textFitWidth,textFitHeight:_.textFitHeight,hasRenderCallback:!!(_.userImage&&_.userImage.render)}:s.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:a,height:d}=this.atlasImage;return{width:a,height:d}}getPattern(a){const d=this.patterns[a],v=this.getImage(a);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{const _={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new s.I(_,v);this.patterns[a]={bin:_,position:T}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const d=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new de(a,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const T in this.patterns)a.push(this.patterns[T].bin);const{w:d,h:v}=s.p(a),_=this.atlasImage;_.resize({width:d||1,height:v||1});for(const T in this.patterns){const{bin:O}=this.patterns[T],z=O.x+1,B=O.y+1,V=this.getImage(T).data,G=V.width,Z=V.height;s.R.copy(V,_,{x:0,y:0},{x:z,y:B},{width:G,height:Z}),s.R.copy(V,_,{x:0,y:Z-1},{x:z,y:B-1},{width:G,height:1}),s.R.copy(V,_,{x:0,y:0},{x:z,y:B+Z},{width:G,height:1}),s.R.copy(V,_,{x:G-1,y:0},{x:z-1,y:B},{width:1,height:Z}),s.R.copy(V,_,{x:0,y:0},{x:z+G,y:B},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const d of a){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const v=this.getImage(d);v||s.w(`Image with ID: "${d}" was not found`),Oe(v)&&this.updateImage(d,v)}}}const Ge=1e20;function Ne(P,a,d,v,_,T,O,z,B){for(let V=a;V<a+v;V++)Ue(P,d*T+V,T,_,O,z,B);for(let V=d;V<d+_;V++)Ue(P,V*T+a,1,v,O,z,B)}function Ue(P,a,d,v,_,T,O){T[0]=0,O[0]=-Ge,O[1]=Ge,_[0]=P[a];for(let z=1,B=0,V=0;z<v;z++){_[z]=P[a+z*d];const G=z*z;do{const Z=T[B];V=(_[z]-_[Z]+G-Z*Z)/(z-Z)/2}while(V<=O[B]&&--B>-1);B++,T[B]=z,O[B]=V,O[B+1]=Ge}for(let z=0,B=0;z<v;z++){for(;O[B+1]<z;)B++;const V=T[B],G=z-V;P[a+z*d]=_[V]+G*G}}class Qe{constructor(a,d){this.requestManager=a,this.localIdeographFontFamily=d,this.entries={}}setURL(a){this.url=a}getGlyphs(a){return s._(this,void 0,void 0,(function*(){const d=[];for(const T in a)for(const O of a[T])d.push(this._getAndCacheGlyphsPromise(T,O));const v=yield Promise.all(d),_={};for(const{stack:T,id:O,glyph:z}of v)_[T]||(_[T]={}),_[T][O]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};return _}))}_getAndCacheGlyphsPromise(a,d){return s._(this,void 0,void 0,(function*(){let v=this.entries[a];v||(v=this.entries[a]={glyphs:{},requests:{},ranges:{}});let _=v.glyphs[d];if(_!==void 0)return{stack:a,id:d,glyph:_};if(_=this._tinySDF(v,a,d),_)return v.glyphs[d]=_,{stack:a,id:d,glyph:_};const T=Math.floor(d/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[T])return{stack:a,id:d,glyph:_};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[T]){const z=Qe.loadGlyphRange(a,T,this.url,this.requestManager);v.requests[T]=z}const O=yield v.requests[T];for(const z in O)this._doesCharSupportLocalGlyph(+z)||(v.glyphs[+z]=O[+z]);return v.ranges[T]=!0,{stack:a,id:d,glyph:O[d]||null}}))}_doesCharSupportLocalGlyph(a){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(a))}_tinySDF(a,d,v){const _=this.localIdeographFontFamily;if(!_||!this._doesCharSupportLocalGlyph(v))return;let T=a.tinySDF;if(!T){let z="400";/bold/i.test(d)?z="900":/medium/i.test(d)?z="500":/light/i.test(d)&&(z="200"),T=a.tinySDF=new Qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:_,fontWeight:z})}const O=T.draw(String.fromCharCode(v));return{id:v,bitmap:new s.o({width:O.width||60,height:O.height||60},O.data),metrics:{width:O.glyphWidth/2||24,height:O.glyphHeight/2||24,left:O.glyphLeft/2+.5||0,top:O.glyphTop/2-27.5||-8,advance:O.glyphAdvance/2||24,isDoubleResolution:!0}}}}Qe.loadGlyphRange=function(P,a,d,v){return s._(this,void 0,void 0,(function*(){const _=256*a,T=_+255,O=v.transformRequest(d.replace("{fontstack}",P).replace("{range}",`${_}-${T}`),"Glyphs"),z=yield s.l(O,new AbortController);if(!z||!z.data)throw new Error(`Could not load glyph range. range: ${a}, ${_}-${T}`);const B={};for(const V of s.n(z.data))B[V.id]=V;return B}))},Qe.TinySDF=class{constructor({fontSize:P=24,buffer:a=3,radius:d=8,cutoff:v=.25,fontFamily:_="sans-serif",fontWeight:T="normal",fontStyle:O="normal"}={}){this.buffer=a,this.cutoff=v,this.radius=d;const z=this.size=P+4*a,B=this._createCanvas(z),V=this.ctx=B.getContext("2d",{willReadFrequently:!0});V.font=`${O} ${T} ${P}px ${_}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(P){const a=document.createElement("canvas");return a.width=a.height=P,a}draw(P){const{width:a,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:_,actualBoundingBoxRight:T}=this.ctx.measureText(P),O=Math.ceil(d),z=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-_))),B=Math.min(this.size-this.buffer,O+Math.ceil(v)),V=z+2*this.buffer,G=B+2*this.buffer,Z=Math.max(V*G,0),ne=new Uint8ClampedArray(Z),se={data:ne,width:V,height:G,glyphWidth:z,glyphHeight:B,glyphTop:O,glyphLeft:0,glyphAdvance:a};if(z===0||B===0)return se;const{ctx:ce,buffer:fe,gridInner:ge,gridOuter:xe}=this;ce.clearRect(fe,fe,z,B),ce.fillText(P,fe,fe+O);const Pe=ce.getImageData(fe,fe,z,B);xe.fill(Ge,0,Z),ge.fill(0,0,Z);for(let pe=0;pe<B;pe++)for(let Me=0;Me<z;Me++){const ze=Pe.data[4*(pe*z+Me)+3]/255;if(ze===0)continue;const qe=(pe+fe)*V+Me+fe;if(ze===1)xe[qe]=0,ge[qe]=Ge;else{const ot=.5-ze;xe[qe]=ot>0?ot*ot:0,ge[qe]=ot<0?ot*ot:0}}Ne(xe,0,0,V,G,V,this.f,this.v,this.z),Ne(ge,fe,fe,z,B,V,this.f,this.v,this.z);for(let pe=0;pe<Z;pe++){const Me=Math.sqrt(xe[pe])-Math.sqrt(ge[pe]);ne[pe]=Math.round(255-255*(Me/this.radius+this.cutoff))}return se}};class $e{constructor(){this.specification=s.v.light.position}possiblyEvaluate(a,d){return s.x(a.expression.evaluate(d))}interpolate(a,d,v){return{x:s.y.number(a.x,d.x,v),y:s.y.number(a.y,d.y,v),z:s.y.number(a.z,d.z,v)}}}let Ye;class nt extends s.E{constructor(a){super(),Ye=Ye||new s.q({anchor:new s.D(s.v.light.anchor),position:new $e,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Ye),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,d={}){if(!this._validate(s.r,a,d))for(const v in a){const _=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v){return(!v||v.validate!==!1)&&s.t(this,a.call(s.u,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}const Se=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class De extends s.E{constructor(a){super(),this._transitionable=new s.T(Se),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(a,d={}){if(!this._validate(s.B,a,d)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const v in a){const _=a[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),_):this._transitionable.setValue(v,_)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,d,v={}){return v?.validate!==!1&&s.t(this,a.call(s.u,s.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class ft{constructor(a,d){this.width=a,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,d){const v=a.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(a,d)),this.dashEntry[v]}getDashRanges(a,d,v){const _=[];let T=a.length%2==1?-a[a.length-1]*v:0,O=a[0]*v,z=!0;_.push({left:T,right:O,isDash:z,zeroLength:a[0]===0});let B=a[0];for(let V=1;V<a.length;V++){z=!z;const G=a[V];T=B*v,B+=G,O=B*v,_.push({left:T,right:O,isDash:z,zeroLength:G===0})}return _}addRoundDash(a,d,v){const _=d/2;for(let T=-v;T<=v;T++){const O=this.width*(this.nextRow+v+T);let z=0,B=a[z];for(let V=0;V<this.width;V++){V/B.right>1&&(B=a[++z]);const G=Math.abs(V-B.left),Z=Math.abs(V-B.right),ne=Math.min(G,Z);let se;const ce=T/v*(_+1);if(B.isDash){const fe=_-Math.abs(ce);se=Math.sqrt(ne*ne+fe*fe)}else se=_-Math.sqrt(ne*ne+ce*ce);this.data[O+V]=Math.max(0,Math.min(255,se+128))}}}addRegularDash(a){for(let z=a.length-1;z>=0;--z){const B=a[z],V=a[z+1];B.zeroLength?a.splice(z,1):V&&V.isDash===B.isDash&&(V.left=B.left,a.splice(z,1))}const d=a[0],v=a[a.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);const _=this.width*this.nextRow;let T=0,O=a[T];for(let z=0;z<this.width;z++){z/O.right>1&&(O=a[++T]);const B=Math.abs(z-O.left),V=Math.abs(z-O.right),G=Math.min(B,V);this.data[_+z]=Math.max(0,Math.min(255,(O.isDash?G:-G)+128))}}addDash(a,d){const v=d?7:0,_=2*v+1;if(this.nextRow+_>this.height)return s.w("LineAtlas out of space"),null;let T=0;for(let z=0;z<a.length;z++)T+=a[z];if(T!==0){const z=this.width/T,B=this.getDashRanges(a,this.width,z);d?this.addRoundDash(B,z,v):this.addRegularDash(B)}const O={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:T};return this.nextRow+=_,this.dirty=!0,O}bind(a){const d=a.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const At="maplibre_preloaded_worker_pool";class jt{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<jt.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach((d=>{d.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[At]}numActive(){return Object.keys(this.active).length}}const Nt=Math.floor(S.hardwareConcurrency/2);let or,er;function ct(){return or||(or=new jt),or}jt.workerCount=s.C(globalThis)?Math.max(Math.min(Nt,3),1):1;class Ht{constructor(a,d){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=d;const v=this.workerPool.acquire(d);for(let _=0;_<v.length;_++){const T=new s.F(v[_],d);T.name=`Worker ${_}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,d){const v=[];for(const _ of this.actors)v.push(_.sendAsync({type:a,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach((d=>{d.remove()})),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,d){for(const v of this.actors)v.registerMessageHandler(a,d)}}function lr(){return er||(er=new Ht(ct(),s.G),er.registerMessageHandler("GR",((P,a,d)=>s.m(a,d)))),er}function Je(P,a){const d=s.H();return s.J(d,d,[1,1,0]),s.K(d,d,[.5*P.width,.5*P.height,1]),s.L(d,d,P.calculatePosMatrix(a.toUnwrapped()))}function rr(P,a,d,v,_,T){const O=(function(Z,ne,se){if(Z)for(const ce of Z){const fe=ne[ce];if(fe&&fe.source===se&&fe.type==="fill-extrusion")return!0}else for(const ce in ne){const fe=ne[ce];if(fe.source===se&&fe.type==="fill-extrusion")return!0}return!1})(_&&_.layers,a,P.id),z=T.maxPitchScaleFactor(),B=P.tilesIn(v,z,O);B.sort(Bt);const V=[];for(const Z of B)V.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(a,d,P._state,Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,_,T,z,Je(P.transform,Z.tileID))});const G=(function(Z){const ne={},se={};for(const ce of Z){const fe=ce.queryResults,ge=ce.wrappedTileID,xe=se[ge]=se[ge]||{};for(const Pe in fe){const pe=fe[Pe],Me=xe[Pe]=xe[Pe]||{},ze=ne[Pe]=ne[Pe]||[];for(const qe of pe)Me[qe.featureIndex]||(Me[qe.featureIndex]=!0,ze.push(qe))}}return ne})(V);for(const Z in G)G[Z].forEach((ne=>{const se=ne.feature,ce=P.getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=ce}));return G}function Bt(P,a){const d=P.tileID,v=a.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Er(P,a,d){return s._(this,void 0,void 0,(function*(){let v=P;if(P.url?v=(yield s.h(a.transformRequest(P.url,"Source"),d)).data:yield S.frameAsync(d),!v)return null;const _=s.M(s.e(v,P),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(_.vectorLayerIds=v.vector_layers.map((T=>T.id))),_}))}class Ve{constructor(a,d){a&&(d?this.setSouthWest(a).setNorthEast(d):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof s.N?new s.N(a.lng,a.lat):s.N.convert(a),this}setSouthWest(a){return this._sw=a instanceof s.N?new s.N(a.lng,a.lat):s.N.convert(a),this}extend(a){const d=this._sw,v=this._ne;let _,T;if(a instanceof s.N)_=a,T=a;else{if(!(a instanceof Ve))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Ve.convert(a)):this.extend(s.N.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(s.N.convert(a)):this;if(_=a._sw,T=a._ne,!_||!T)return this}return d||v?(d.lng=Math.min(_.lng,d.lng),d.lat=Math.min(_.lat,d.lat),v.lng=Math.max(T.lng,v.lng),v.lat=Math.max(T.lat,v.lat)):(this._sw=new s.N(_.lng,_.lat),this._ne=new s.N(T.lng,T.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:d,lat:v}=s.N.convert(a);let _=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&_}static convert(a){return a instanceof Ve?a:a&&new Ve(a)}static fromLngLat(a,d=0){const v=360*d/40075017,_=v/Math.cos(Math.PI/180*a.lat);return new Ve(new s.N(a.lng-_,a.lat-v),new s.N(a.lng+_,a.lat+v))}adjustAntiMeridian(){const a=new s.N(this._sw.lng,this._sw.lat),d=new s.N(this._ne.lng,this._ne.lat);return new Ve(a,a.lng>d.lng?new s.N(d.lng+360,d.lat):d)}}class Gr{constructor(a,d,v){this.bounds=Ve.convert(this.validateBounds(a)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const d=Math.pow(2,a.z),v=Math.floor(s.O(this.bounds.getWest())*d),_=Math.floor(s.Q(this.bounds.getNorth())*d),T=Math.ceil(s.O(this.bounds.getEast())*d),O=Math.ceil(s.Q(this.bounds.getSouth())*d);return a.x>=v&&a.x<T&&a.y>=_&&a.y<O}}class Oi extends s.E{constructor(a,d,v,_){if(super(),this.id=a,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(d,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_)}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Er(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),a&&(s.e(this,a),a.bounds&&(this.tileBounds=new Gr(a.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new s.j(a))}}))}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(a){return s._(this,void 0,void 0,(function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let _="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise(((T,O)=>{a.reloadPromise={resolve:T,reject:O}}))}else a.actor=this.dispatcher.getActor(),_="LT";a.abortController=new AbortController;try{const T=yield a.actor.sendAsync({type:_,data:v},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,T)}catch(T){if(delete a.abortController,a.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(a,null)}}))}_afterTileLoadWorkerResponse(a,d){if(d&&d.resourceTiming&&(a.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&a.setExpiryData(d),a.loadVectorData(d,this.map.painter),a.reloadPromise){const v=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(v.resolve).catch(v.reject)}}abortTile(a){return s._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))}))}unloadTile(a){return s._(this,void 0,void 0,(function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class xr extends s.E{constructor(a,d,v,_){super(),this.id=a,this.dispatcher=v,this.setEventedParent(_),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},d),s.e(this,s.M(d,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Er(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,a&&(s.e(this,a),a.bounds&&(this.tileBounds=new Gr(a.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this.fire(new s.j(a))}}))}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load()}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}serialize(){return s.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return s._(this,void 0,void 0,(function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const v=yield K.getImage(this.map._requestManager.transformRequest(d,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&a.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const _=this.map.painter.context,T=_.gl,O=v.data;a.texture=this.map.painter.getTileTexture(O.width),a.texture?a.texture.update(O,{useMipmap:!0}):(a.texture=new de(_,O,T.RGBA,{useMipmap:!0}),a.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(v){if(delete a.abortController,a.aborted)a.state="unloaded";else if(v)throw a.state="errored",v}}))}abortTile(a){return s._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)}))}unloadTile(a){return s._(this,void 0,void 0,(function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)}))}hasTransition(){return!1}}class jr extends xr{constructor(a,d,v,_){super(a,d,v,_),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(a){return s._(this,void 0,void 0,(function*(){const d=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const _=yield K.getImage(v,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(_&&_.data){const T=_.data;this.map._refreshExpiredTiles&&_.cacheControl&&_.expires&&a.setExpiryData({cacheControl:_.cacheControl,expires:_.expires});const O=s.b(T)&&s.U()?T:yield this.readImageNow(T),z={type:this.type,uid:a.uid,source:this.id,rawImageData:O,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const B=yield a.actor.sendAsync({type:"LDT",data:z});a.dem=B,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(_){if(delete a.abortController,a.aborted)a.state="unloaded";else if(_)throw a.state="errored",_}}))}readImageNow(a){return s._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&s.V()){const d=a.width+2,v=a.height+2;try{return new s.R({width:d,height:v},yield s.W(a,-1,-1,d,v))}catch{}}return S.getImageData(a,1)}))}_getNeighboringTiles(a){const d=a.canonical,v=Math.pow(2,d.z),_=(d.x-1+v)%v,T=d.x===0?a.wrap-1:a.wrap,O=(d.x+1+v)%v,z=d.x+1===v?a.wrap+1:a.wrap,B={};return B[new s.S(a.overscaledZ,T,d.z,_,d.y).key]={backfilled:!1},B[new s.S(a.overscaledZ,z,d.z,O,d.y).key]={backfilled:!1},d.y>0&&(B[new s.S(a.overscaledZ,T,d.z,_,d.y-1).key]={backfilled:!1},B[new s.S(a.overscaledZ,a.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},B[new s.S(a.overscaledZ,z,d.z,O,d.y-1).key]={backfilled:!1}),d.y+1<v&&(B[new s.S(a.overscaledZ,T,d.z,_,d.y+1).key]={backfilled:!1},B[new s.S(a.overscaledZ,a.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},B[new s.S(a.overscaledZ,z,d.z,O,d.y+1).key]={backfilled:!1}),B}unloadTile(a){return s._(this,void 0,void 0,(function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))}))}}class ri extends s.E{constructor(a,d,v,_){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(_),this._data=d.data,this._options=s.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const T=s.X/this.tileSize;d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*T,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*T,extent:s.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:s.X,radius:(d.clusterRadius||50)*T,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(a){this.map=a,this.load()}setData(a){return this._data=a,this._updateWorkerData(),this}updateData(a){return this._updateWorkerData(a),this}getData(){return s._(this,void 0,void 0,(function*(){const a=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})}))}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a&&(a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=a.clusterRadius),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=a.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:d,offset:v}})}_updateWorkerData(a){return s._(this,void 0,void 0,(function*(){const d=s.e({type:this.type},this.workerOptions);a?d.dataDiff=a:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(S.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let _=null;v.resourceTiming&&v.resourceTiming[this.id]&&(_=v.resourceTiming[this.id].slice(0));const T={dataType:"source"};this._collectResourceTiming&&_&&_.length>0&&s.e(T,{resourceTiming:_}),this.fire(new s.k("data",Object.assign(Object.assign({},T),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},T),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(v))}}))}loaded(){return this._pendingLoads===0}loadTile(a){return s._(this,void 0,void 0,(function*(){const d=a.actor?"RT":"LT";a.actor=this.actor;const v={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};a.abortController=new AbortController;const _=yield this.actor.sendAsync({type:d,data:v},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(_,this.map.painter,d==="RT")}))}abortTile(a){return s._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0}))}unloadTile(a){return s._(this,void 0,void 0,(function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ni=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Hi extends s.E{constructor(a,d,v,_){super(),this.id=a,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(_),this.options=d}load(a){return s._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield K.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,a&&(this.coordinates=a),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new s.j(d))}}))}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const d=a.map(s.Z.fromLngLat);this.tileID=(function(_){let T=1/0,O=1/0,z=-1/0,B=-1/0;for(const ne of _)T=Math.min(T,ne.x),O=Math.min(O,ne.y),z=Math.max(z,ne.x),B=Math.max(B,ne.y);const V=Math.max(z-T,B-O),G=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),Z=Math.pow(2,G);return new s.a1(G,Math.floor((T+z)/2*Z),Math.floor((O+B)/2*Z))})(d),this.minzoom=this.maxzoom=this.tileID.z;const v=d.map((_=>this.tileID.getTilePoint(_)._round()));return this._boundsArray=new s.$,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,s.X,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,s.X),this._boundsArray.emplaceBack(v[2].x,v[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new de(a,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return s._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Eo extends Hi{constructor(a,d,v,_){super(a,d,v,_),this.roundZoom=!0,this.type="video",this.options=d}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const d of a.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield s.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new s.j(d))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const d=this.video.seekable;a<d.start(0)||a>d.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new de(a,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const _ in this.tiles){const T=this.tiles[_];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class xi extends Hi{constructor(a,d,v,_){super(a,d,v,_),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some((T=>!Array.isArray(T)||T.length!==2||T.some((O=>typeof O!="number"))))||this.fire(new s.j(new s.a2(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.j(new s.a2(`sources.${a}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.j(new s.a2(`sources.${a}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return s._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,v=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ni.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new de(d,this.canvas,v.RGBA,{premultiply:!0});let _=!1;for(const T in this.tiles){const O=this.tiles[T];O.state!=="loaded"&&(O.state="loaded",O.texture=this.texture,_=!0)}_&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Rl={},Qs=P=>{switch(P){case"geojson":return ri;case"image":return Hi;case"raster":return xr;case"raster-dem":return jr;case"vector":return Oi;case"video":return Eo;case"canvas":return xi}return Rl[P]},mt="RTLPluginLoaded";class io extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=lr()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch((d=>{throw this.status="error",d}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return s._(this,arguments,void 0,(function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=S.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return s._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(mt))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Xn=null;function Gi(){return Xn||(Xn=new io),Xn}class bs{constructor(a,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=a,this.uid=s.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(a){const d=a+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=(function(_,T){const O={};if(!T)return O;for(const z of _){const B=z.layerIds.map((V=>T.getLayer(V))).filter(Boolean);if(B.length!==0){z.layers=B,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map((V=>B.filter((G=>G.id===V))[0])));for(const V of B)O[V.id]=z}}return O})(a.buckets,d.style),this.hasSymbolBuckets=!1;for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof s.a6){if(this.hasSymbolBuckets=!0,!v)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const _ in this.buckets){const T=this.buckets[_];if(T instanceof s.a6&&T.hasRTLText){this.hasRTLText=!0,Gi().lazyLoad();break}}this.queryPadding=0;for(const _ in this.buckets){const T=this.buckets[_];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(_).queryRadius(T))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const v in this.buckets){const _=this.buckets[v];_.uploadPending()&&_.upload(a)}const d=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new de(a,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new de(a,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,d,v,_,T,O,z,B,V,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:T,scale:O,tileSize:this.tileSize,pixelPosMatrix:G,transform:B,params:z,queryPadding:this.queryPadding*V},a,d,v):{}}querySourceFeatures(a,d){const v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;const _=v.loadVTLayers(),T=d&&d.sourceLayer?d.sourceLayer:"",O=_._geojsonTileLayer||_[T];if(!O)return;const z=s.a7(d&&d.filter),{z:B,x:V,y:G}=this.tileID.canonical,Z={z:B,x:V,y:G};for(let ne=0;ne<O.length;ne++){const se=O.feature(ne);if(z.needGeometry){const ge=s.a8(se,!0);if(!z.filter(new s.z(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!z.filter(new s.z(this.tileID.overscaledZ),se))continue;const ce=v.getId(se,T),fe=new s.a9(se,B,V,G,ce);fe.tile=Z,a.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const d=this.expirationTime;if(a.cacheControl){const v=s.aa(a.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const v=Date.now();let _=!1;if(this.expirationTime>v)_=!1;else if(d)if(this.expirationTime<d)_=!0;else{const T=this.expirationTime-d;T?this.expirationTime=v+Math.max(T,3e4):_=!0}else _=!0;_?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const v=this.latestFeatureIndex.loadVTLayers();for(const _ in this.buckets){if(!d.style.hasLayer(_))continue;const T=this.buckets[_],O=T.layers[0].sourceLayer||"_geojsonTileLayer",z=v[O],B=a[O];if(!z||!B||Object.keys(B).length===0)continue;T.update(B,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=d&&d.style&&d.style.getLayer(_);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<S.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(a){this.symbolFadeHoldUntil=S.now()+a}setDependencies(a,d){const v={};for(const _ of d)v[_]=!0;this.dependencies[a]=v}hasDependency(a,d){for(const v of a){const _=this.dependencies[v];if(_){for(const T of d)if(_[T])return!0}}return!1}}class bt{constructor(a,d){this.max=a,this.onRemove=d,this.reset()}reset(){for(const a in this.data)for(const d of this.data[a])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(a,d,v){const _=a.wrapped().key;this.data[_]===void 0&&(this.data[_]=[]);const T={value:d,timeout:void 0};if(v!==void 0&&(T.timeout=setTimeout((()=>{this.remove(a,T)}),v)),this.data[_].push(T),this.order.push(_),this.order.length>this.max){const O=this._getAndRemoveByKey(this.order[0]);O&&this.onRemove(O)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const d=this.data[a].shift();return d.timeout&&clearTimeout(d.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),d.value}getByKey(a){const d=this.data[a];return d?d[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,d){if(!this.has(a))return this;const v=a.wrapped().key,_=d===void 0?0:this.data[v].indexOf(d),T=this.data[v][_];return this.data[v].splice(_,1),T.timeout&&clearTimeout(T.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(T.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(a){const d=[];for(const v in this.data)for(const _ of this.data[v])a(_.value)||d.push(_);for(const v of d)this.remove(v.value.tileID,v)}}class yr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(a,d,v){const _=String(d);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][_]=this.stateChanges[a][_]||{},s.e(this.stateChanges[a][_],v),this.deletedStates[a]===null){this.deletedStates[a]={};for(const T in this.state[a])T!==_&&(this.deletedStates[a][T]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][_]===null){this.deletedStates[a][_]={};for(const T in this.state[a][_])v[T]||(this.deletedStates[a][_][T]=null)}else for(const T in v)this.deletedStates[a]&&this.deletedStates[a][_]&&this.deletedStates[a][_][T]===null&&delete this.deletedStates[a][_][T]}removeFeatureState(a,d,v){if(this.deletedStates[a]===null)return;const _=String(d);if(this.deletedStates[a]=this.deletedStates[a]||{},v&&d!==void 0)this.deletedStates[a][_]!==null&&(this.deletedStates[a][_]=this.deletedStates[a][_]||{},this.deletedStates[a][_][v]=null);else if(d!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][_])for(v in this.deletedStates[a][_]={},this.stateChanges[a][_])this.deletedStates[a][_][v]=null;else this.deletedStates[a][_]=null;else this.deletedStates[a]=null}getState(a,d){const v=String(d),_=s.e({},(this.state[a]||{})[v],(this.stateChanges[a]||{})[v]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const T=this.deletedStates[a][d];if(T===null)return{};for(const O in T)delete _[O]}return _}initializeTileState(a,d){a.setFeatureState(this.state,d)}coalesceChanges(a,d){const v={};for(const _ in this.stateChanges){this.state[_]=this.state[_]||{};const T={};for(const O in this.stateChanges[_])this.state[_][O]||(this.state[_][O]={}),s.e(this.state[_][O],this.stateChanges[_][O]),T[O]=this.state[_][O];v[_]=T}for(const _ in this.deletedStates){this.state[_]=this.state[_]||{};const T={};if(this.deletedStates[_]===null)for(const O in this.state[_])T[O]={},this.state[_][O]={};else for(const O in this.deletedStates[_]){if(this.deletedStates[_][O]===null)this.state[_][O]={};else for(const z of Object.keys(this.deletedStates[_][O]))delete this.state[_][O][z];T[O]=this.state[_][O]}v[_]=v[_]||{},s.e(v[_],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(const _ in a)a[_].setFeatureState(v,d)}}class nr extends s.E{constructor(a,d,v){super(),this.id=a,this.dispatcher=v,this.on("data",(_=>this._dataHandler(_))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((_,T,O,z)=>{const B=new(Qs(T.type))(_,T,O,z);if(B.id!==_)throw new Error(`Expected Source id to be ${_} instead of ${B.id}`);return B})(a,d,v,this),this._tiles={},this._cache=new bt(0,(_=>this._unloadTile(_))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new yr,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a in this._tiles){const d=this._tiles[a];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,d,v){return s._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,d,v)}catch(_){a.state="errored",_.status!==404?this._source.fire(new s.j(_,{tile:a})):this.update(this.transform,this.terrain)}}))}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new s.k("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const v=this._tiles[d];v.upload(a),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((a=>a.tileID)).sort(bi).map((a=>a.key))}getRenderableIds(a){const d=[];for(const v in this._tiles)this._isIdRenderable(v,a)&&d.push(this._tiles[v]);return a?d.sort(((v,_)=>{const T=v.tileID,O=_.tileID,z=new s.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle),B=new s.P(O.canonical.x,O.canonical.y)._rotate(this.transform.angle);return T.overscaledZ-O.overscaledZ||B.y-z.y||B.x-z.x})).map((v=>v.tileID.key)):d.map((v=>v.tileID)).sort(bi).map((v=>v.key))}hasRenderableParent(a){const d=this.findLoadedParent(a,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(a,d){return this._tiles[a]&&this._tiles[a].hasData()&&!this._coveredTiles[a]&&(d||!this._tiles[a].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const a in this._tiles)this._tiles[a].state!=="errored"&&this._reloadTile(a,"reloading")}}_reloadTile(a,d){return s._(this,void 0,void 0,(function*(){const v=this._tiles[a];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,a,d))}))}_tileLoaded(a,d,v){a.timeAdded=S.now(),v==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(d,a),this.getSource().type==="raster-dem"&&a.dem&&this._backfillDEM(a),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:a,coord:a.tileID}))}_backfillDEM(a){const d=this.getRenderableIds();for(let _=0;_<d.length;_++){const T=d[_];if(a.neighboringTiles&&a.neighboringTiles[T]){const O=this.getTileByID(T);v(a,O),v(O,a)}}function v(_,T){_.needsHillshadePrepare=!0,_.needsTerrainPrepare=!0;let O=T.tileID.canonical.x-_.tileID.canonical.x;const z=T.tileID.canonical.y-_.tileID.canonical.y,B=Math.pow(2,_.tileID.canonical.z),V=T.tileID.key;O===0&&z===0||Math.abs(z)>1||(Math.abs(O)>1&&(Math.abs(O+B)===1?O+=B:Math.abs(O-B)===1&&(O-=B)),T.dem&&_.dem&&(_.dem.backfillBorder(T.dem,O,z),_.neighboringTiles&&_.neighboringTiles[V]&&(_.neighboringTiles[V].backfilled=!0)))}}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._tiles[a]}_retainLoadedChildren(a,d,v,_){for(const T in this._tiles){let O=this._tiles[T];if(_[T]||!O.hasData()||O.tileID.overscaledZ<=d||O.tileID.overscaledZ>v)continue;let z=O.tileID;for(;O&&O.tileID.overscaledZ>d+1;){const V=O.tileID.scaledTo(O.tileID.overscaledZ-1);O=this._tiles[V.key],O&&O.hasData()&&(z=V)}let B=z;for(;B.overscaledZ>d;)if(B=B.scaledTo(B.overscaledZ-1),a[B.key]){_[z.key]=z;break}}}findLoadedParent(a,d){if(a.key in this._loadedParentTiles){const v=this._loadedParentTiles[a.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=a.overscaledZ-1;v>=d;v--){const _=a.scaledTo(v),T=this._getLoadedTile(_);if(T)return T}}findLoadedSibling(a){return this._getLoadedTile(a)}_getLoadedTile(a){const d=this._tiles[a.key];return d&&d.hasData()?d:this._cache.getByKey(a.wrapped().key)}updateCacheSize(a){const d=Math.ceil(a.width/this._source.tileSize)+1,v=Math.ceil(a.height/this._source.tileSize)+1,_=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(T)}handleWrapJump(a){const d=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);if(this._prevLng=a,d){const v={};for(const _ in this._tiles){const T=this._tiles[_];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),v[T.tileID.key]=T}this._tiles=v;for(const _ in this._timers)clearTimeout(this._timers[_]),delete this._timers[_];for(const _ in this._tiles)this._setTileReloadTimer(_,this._tiles[_])}}_updateCoveredAndRetainedTiles(a,d,v,_,T,O){const z={},B={},V=Object.keys(a),G=S.now();for(const Z of V){const ne=a[Z],se=this._tiles[Z];if(!se||se.fadeEndTime!==0&&se.fadeEndTime<=G)continue;const ce=this.findLoadedParent(ne,d),fe=this.findLoadedSibling(ne),ge=ce||fe||null;ge&&(this._addTile(ge.tileID),z[ge.tileID.key]=ge.tileID),B[Z]=ne}this._retainLoadedChildren(B,_,v,a);for(const Z in z)a[Z]||(this._coveredTiles[Z]=!0,a[Z]=z[Z]);if(O){const Z={},ne={};for(const se of T)this._tiles[se.key].hasData()?Z[se.key]=se:ne[se.key]=se;for(const se in ne){const ce=ne[se].children(this._source.maxzoom);this._tiles[ce[0].key]&&this._tiles[ce[1].key]&&this._tiles[ce[2].key]&&this._tiles[ce[3].key]&&(Z[ce[0].key]=a[ce[0].key]=ce[0],Z[ce[1].key]=a[ce[1].key]=ce[1],Z[ce[2].key]=a[ce[2].key]=ce[2],Z[ce[3].key]=a[ce[3].key]=ce[3],delete ne[se])}for(const se in ne){const ce=ne[se],fe=this.findLoadedParent(ce,this._source.minzoom),ge=this.findLoadedSibling(ce),xe=fe||ge||null;if(xe){Z[xe.tileID.key]=a[xe.tileID.key]=xe.tileID;for(const Pe in Z)Z[Pe].isChildOf(xe.tileID)&&delete Z[Pe]}}for(const se in this._tiles)Z[se]||(this._coveredTiles[se]=!0)}}update(a,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=a,this.terrain=d,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=a.getVisibleUnwrappedCoordinates(this._source.tileID).map((G=>new s.S(G.canonical.z,G.wrap,G.canonical.z,G.canonical.x,G.canonical.y))):(v=a.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(v=v.filter((G=>this._source.hasTile(G))))):v=[];const _=a.coveringZoomLevel(this._source),T=Math.max(_-nr.maxOverzooming,this._source.minzoom),O=Math.max(_+nr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const G={};for(const Z of v)if(Z.canonical.z>this._source.minzoom){const ne=Z.scaledTo(Z.canonical.z-1);G[ne.key]=ne;const se=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));G[se.key]=se}v=v.concat(Object.values(G))}const z=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,z&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const B=this._updateRetainedTiles(v,_);pa(this._source.type)&&this._updateCoveredAndRetainedTiles(B,T,O,_,v,d);for(const G in B)this._tiles[G].clearFadeHold();const V=s.ab(this._tiles,B);for(const G of V){const Z=this._tiles[G];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(G)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const a in this._tiles)this._tiles[a].holdingForFade()&&this._removeTile(a)}_updateRetainedTiles(a,d){var v;const _={},T={},O=Math.max(d-nr.maxOverzooming,this._source.minzoom),z=Math.max(d+nr.maxUnderzooming,this._source.minzoom),B={};for(const V of a){const G=this._addTile(V);_[V.key]=V,G.hasData()||d<this._source.maxzoom&&(B[V.key]=V)}this._retainLoadedChildren(B,d,z,_);for(const V of a){let G=this._tiles[V.key];if(G.hasData())continue;if(d+1>this._source.maxzoom){const ne=V.children(this._source.maxzoom)[0],se=this.getTile(ne);if(se&&se.hasData()){_[ne.key]=ne;continue}}else{const ne=V.children(this._source.maxzoom);if(_[ne[0].key]&&_[ne[1].key]&&_[ne[2].key]&&_[ne[3].key])continue}let Z=G.wasRequested();for(let ne=V.overscaledZ-1;ne>=O;--ne){const se=V.scaledTo(ne);if(T[se.key])break;if(T[se.key]=!0,G=this.getTile(se),!G&&Z&&(G=this._addTile(se)),G){const ce=G.hasData();if((ce||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Z)&&(_[se.key]=se),Z=G.wasRequested(),ce)break}}}return _}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const a in this._tiles){const d=[];let v,_=this._tiles[a].tileID;for(;_.overscaledZ>0;){if(_.key in this._loadedParentTiles){v=this._loadedParentTiles[_.key];break}d.push(_.key);const T=_.scaledTo(_.overscaledZ-1);if(v=this._getLoadedTile(T),v)break;_=T}for(const T of d)this._loadedParentTiles[T]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const a in this._tiles){const d=this._tiles[a].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(a){let d=this._tiles[a.key];if(d)return d;d=this._cache.getAndRemove(a),d&&(this._setTileReloadTimer(a.key,d),d.tileID=a,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[a.key]&&(clearTimeout(this._cacheTimers[a.key]),delete this._cacheTimers[a.key],this._setTileReloadTimer(a.key,d)));const v=d;return d||(d=new bs(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(d,a.key,d.state)),d.uses++,this._tiles[a.key]=d,v||this._source.fire(new s.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(a,d){a in this._timers&&(clearTimeout(this._timers[a]),delete this._timers[a]);const v=d.getExpiryTimeout();v&&(this._timers[a]=setTimeout((()=>{this._reloadTile(a,"expired"),delete this._timers[a]}),v))}_removeTile(a){const d=this._tiles[a];d&&(d.uses--,delete this._tiles[a],this._timers[a]&&(clearTimeout(this._timers[a]),delete this._timers[a]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(a){const d=a.sourceDataType;a.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&a.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a in this._tiles)this._removeTile(a);this._cache.reset()}tilesIn(a,d,v){const _=[],T=this.transform;if(!T)return _;const O=v?T.getCameraQueryGeometry(a):a,z=a.map((ce=>T.pointCoordinate(ce,this.terrain))),B=O.map((ce=>T.pointCoordinate(ce,this.terrain))),V=this.getIds();let G=1/0,Z=1/0,ne=-1/0,se=-1/0;for(const ce of B)G=Math.min(G,ce.x),Z=Math.min(Z,ce.y),ne=Math.max(ne,ce.x),se=Math.max(se,ce.y);for(let ce=0;ce<V.length;ce++){const fe=this._tiles[V[ce]];if(fe.holdingForFade())continue;const ge=fe.tileID,xe=Math.pow(2,T.zoom-fe.tileID.overscaledZ),Pe=d*fe.queryPadding*s.X/fe.tileSize/xe,pe=[ge.getTilePoint(new s.Z(G,Z)),ge.getTilePoint(new s.Z(ne,se))];if(pe[0].x-Pe<s.X&&pe[0].y-Pe<s.X&&pe[1].x+Pe>=0&&pe[1].y+Pe>=0){const Me=z.map((qe=>ge.getTilePoint(qe))),ze=B.map((qe=>ge.getTilePoint(qe)));_.push({tile:fe,tileID:ge,queryGeometry:Me,cameraQueryGeometry:ze,scale:xe})}}return _}getVisibleCoordinates(a){const d=this.getRenderableIds(a).map((v=>this._tiles[v].tileID));for(const v of d)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(pa(this._source.type)){const a=S.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=a)return!0}return!1}setFeatureState(a,d,v){this._state.updateState(a=a||"_geojsonTileLayer",d,v)}removeFeatureState(a,d,v){this._state.removeFeatureState(a=a||"_geojsonTileLayer",d,v)}getFeatureState(a,d){return this._state.getState(a=a||"_geojsonTileLayer",d)}setDependencies(a,d,v){const _=this._tiles[a];_&&_.setDependencies(d,v)}reloadTilesForDependencies(a,d){for(const v in this._tiles)this._tiles[v].hasDependency(a,d)&&this._reloadTile(v,"reloading");this._cache.filter((v=>!v.hasDependency(a,d)))}}function bi(P,a){const d=Math.abs(2*P.wrap)-+(P.wrap<0),v=Math.abs(2*a.wrap)-+(a.wrap<0);return P.overscaledZ-a.overscaledZ||v-d||a.canonical.y-P.canonical.y||a.canonical.x-P.canonical.x}function pa(P){return P==="raster"||P==="image"||P==="video"}nr.maxOverzooming=10,nr.maxUnderzooming=3;class ur{constructor(a,d){this.reset(a,d)}reset(a,d){this.points=a||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=s.ac(a,0,1);let d=1,v=this._distances[d];const _=a*this.paddedLength+this.padding;for(;v<_&&d<this._distances.length;)v=this._distances[++d];const T=d-1,O=this._distances[T],z=v-O,B=z>0?(_-O)/z:0;return this.points[T].mult(1-B).add(this.points[d].mult(B))}}function Oa(P,a){let d=!0;return P==="always"||P!=="never"&&a!=="never"||(d=!1),d}class ao{constructor(a,d,v){const _=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(a/v),this.yCellCount=Math.ceil(d/v);for(let O=0;O<this.xCellCount*this.yCellCount;O++)_.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=d,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,d,v,_,T){this._forEachCell(d,v,_,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(_),this.bboxes.push(T)}insertCircle(a,d,v,_){this._forEachCell(d-_,v-_,d+_,v+_,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(d),this.circles.push(v),this.circles.push(_)}_insertBoxCell(a,d,v,_,T,O){this.boxCells[T].push(O)}_insertCircleCell(a,d,v,_,T,O){this.circleCells[T].push(O)}_query(a,d,v,_,T,O,z){if(v<0||a>this.width||_<0||d>this.height)return[];const B=[];if(a<=0&&d<=0&&this.width<=v&&this.height<=_){if(T)return[{key:null,x1:a,y1:d,x2:v,y2:_}];for(let V=0;V<this.boxKeys.length;V++)B.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const G=this.circles[3*V],Z=this.circles[3*V+1],ne=this.circles[3*V+2];B.push({key:this.circleKeys[V],x1:G-ne,y1:Z-ne,x2:G+ne,y2:Z+ne})}}else this._forEachCell(a,d,v,_,this._queryCell,B,{hitTest:T,overlapMode:O,seenUids:{box:{},circle:{}}},z);return B}query(a,d,v,_){return this._query(a,d,v,_,!1,null)}hitTest(a,d,v,_,T,O){return this._query(a,d,v,_,!0,T,O).length>0}hitTestCircle(a,d,v,_,T){const O=a-v,z=a+v,B=d-v,V=d+v;if(z<0||O>this.width||V<0||B>this.height)return!1;const G=[];return this._forEachCell(O,B,z,V,this._queryCellCircle,G,{hitTest:!0,overlapMode:_,circle:{x:a,y:d,radius:v},seenUids:{box:{},circle:{}}},T),G.length>0}_queryCell(a,d,v,_,T,O,z,B){const{seenUids:V,hitTest:G,overlapMode:Z}=z,ne=this.boxCells[T];if(ne!==null){const ce=this.bboxes;for(const fe of ne)if(!V.box[fe]){V.box[fe]=!0;const ge=4*fe,xe=this.boxKeys[fe];if(a<=ce[ge+2]&&d<=ce[ge+3]&&v>=ce[ge+0]&&_>=ce[ge+1]&&(!B||B(xe))&&(!G||!Oa(Z,xe.overlapMode))&&(O.push({key:xe,x1:ce[ge],y1:ce[ge+1],x2:ce[ge+2],y2:ce[ge+3]}),G))return!0}}const se=this.circleCells[T];if(se!==null){const ce=this.circles;for(const fe of se)if(!V.circle[fe]){V.circle[fe]=!0;const ge=3*fe,xe=this.circleKeys[fe];if(this._circleAndRectCollide(ce[ge],ce[ge+1],ce[ge+2],a,d,v,_)&&(!B||B(xe))&&(!G||!Oa(Z,xe.overlapMode))){const Pe=ce[ge],pe=ce[ge+1],Me=ce[ge+2];if(O.push({key:xe,x1:Pe-Me,y1:pe-Me,x2:Pe+Me,y2:pe+Me}),G)return!0}}}return!1}_queryCellCircle(a,d,v,_,T,O,z,B){const{circle:V,seenUids:G,overlapMode:Z}=z,ne=this.boxCells[T];if(ne!==null){const ce=this.bboxes;for(const fe of ne)if(!G.box[fe]){G.box[fe]=!0;const ge=4*fe,xe=this.boxKeys[fe];if(this._circleAndRectCollide(V.x,V.y,V.radius,ce[ge+0],ce[ge+1],ce[ge+2],ce[ge+3])&&(!B||B(xe))&&!Oa(Z,xe.overlapMode))return O.push(!0),!0}}const se=this.circleCells[T];if(se!==null){const ce=this.circles;for(const fe of se)if(!G.circle[fe]){G.circle[fe]=!0;const ge=3*fe,xe=this.circleKeys[fe];if(this._circlesCollide(ce[ge],ce[ge+1],ce[ge+2],V.x,V.y,V.radius)&&(!B||B(xe))&&!Oa(Z,xe.overlapMode))return O.push(!0),!0}}}_forEachCell(a,d,v,_,T,O,z,B){const V=this._convertToXCellCoord(a),G=this._convertToYCellCoord(d),Z=this._convertToXCellCoord(v),ne=this._convertToYCellCoord(_);for(let se=V;se<=Z;se++)for(let ce=G;ce<=ne;ce++)if(T.call(this,a,d,v,_,this.xCellCount*ce+se,O,z,B))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,d,v,_,T,O){const z=_-a,B=T-d,V=v+O;return V*V>z*z+B*B}_circleAndRectCollide(a,d,v,_,T,O,z){const B=(O-_)/2,V=Math.abs(a-(_+B));if(V>B+v)return!1;const G=(z-T)/2,Z=Math.abs(d-(T+G));if(Z>G+v)return!1;if(V<=B||Z<=G)return!0;const ne=V-B,se=Z-G;return ne*ne+se*se<=v*v}}function ma(P,a,d,v,_){const T=s.H();return a?(s.K(T,T,[1/_,1/_,1]),d||s.ad(T,T,v.angle)):s.L(T,v.labelPlaneMatrix,P),T}function Ii(P,a,d,v,_){if(a){const T=s.ae(P);return s.K(T,T,[_,_,1]),d||s.ad(T,T,-v.angle),T}return v.glCoordMatrix}function _e(P,a,d,v){let _;v?(_=[P,a,v(P,a),1],s.af(_,_,d)):(_=[P,a,0,1],Or(_,_,d));const T=_[3];return{point:new s.P(_[0]/T,_[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function ee(P,a){return .5+P/a*.5}function Q(P,a){return P.x>=-a[0]&&P.x<=a[0]&&P.y>=-a[1]&&P.y<=a[1]}function le(P,a,d,v,_,T,O,z,B,V,G,Z,ne,se,ce){const fe=v?P.textSizeData:P.iconSizeData,ge=s.ag(fe,d.transform.zoom),xe=[256/d.width*2+1,256/d.height*2+1],Pe=v?P.text.dynamicLayoutVertexArray:P.icon.dynamicLayoutVertexArray;Pe.clear();const pe=P.lineVertexArray,Me=v?P.text.placedSymbolArray:P.icon.placedSymbolArray,ze=d.transform.width/d.transform.height;let qe=!1;for(let ot=0;ot<Me.length;ot++){const pt=Me.get(ot);if(pt.hidden||pt.writingMode===s.ah.vertical&&!qe){Xt(pt.numGlyphs,Pe);continue}qe=!1;const _t=_e(pt.anchorX,pt.anchorY,a,ce);if(!Q(_t.point,xe)){Xt(pt.numGlyphs,Pe);continue}const kt=ee(d.transform.cameraToCenterDistance,_t.signedDistanceFromCamera),xt=s.ai(fe,ge,pt),yt=O?xt/kt:xt*kt,Rt={getElevation:ce,labelPlaneMatrix:_,lineVertexArray:pe,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:V,tileAnchorPoint:new s.P(pt.anchorX,pt.anchorY),unwrappedTileID:G,width:Z,height:ne,translation:se},ar=Ce(Rt,pt,yt,!1,z,a,T,P.glyphOffsetArray,Pe,ze,B);qe=ar.useVertical,(ar.notEnoughRoom||qe||ar.needsFlipping&&Ce(Rt,pt,yt,!0,z,a,T,P.glyphOffsetArray,Pe,ze,B).notEnoughRoom)&&Xt(pt.numGlyphs,Pe)}v?P.text.dynamicLayoutVertexBuffer.updateData(Pe):P.icon.dynamicLayoutVertexBuffer.updateData(Pe)}function me(P,a,d,v,_,T,O,z){const B=T.glyphStartIndex+T.numGlyphs,V=T.lineStartIndex,G=T.lineStartIndex+T.lineLength,Z=a.getoffsetX(T.glyphStartIndex),ne=a.getoffsetX(B-1),se=vt(P*Z,d,v,_,T.segment,V,G,z,O);if(!se)return null;const ce=vt(P*ne,d,v,_,T.segment,V,G,z,O);return ce?z.projectionCache.anyProjectionOccluded?null:{first:se,last:ce}:null}function Ae(P,a,d,v){return P===s.ah.horizontal&&Math.abs(d.y-a.y)>Math.abs(d.x-a.x)*v?{useVertical:!0}:(P===s.ah.vertical?a.y<d.y:a.x>d.x)?{needsFlipping:!0}:null}function Ce(P,a,d,v,_,T,O,z,B,V,G){const Z=d/24,ne=a.lineOffsetX*Z,se=a.lineOffsetY*Z;let ce;if(a.numGlyphs>1){const fe=a.glyphStartIndex+a.numGlyphs,ge=a.lineStartIndex,xe=a.lineStartIndex+a.lineLength,Pe=me(Z,z,ne,se,v,a,G,P);if(!Pe)return{notEnoughRoom:!0};const pe=_e(Pe.first.point.x,Pe.first.point.y,O,P.getElevation).point,Me=_e(Pe.last.point.x,Pe.last.point.y,O,P.getElevation).point;if(_&&!v){const ze=Ae(a.writingMode,pe,Me,V);if(ze)return ze}ce=[Pe.first];for(let ze=a.glyphStartIndex+1;ze<fe-1;ze++)ce.push(vt(Z*z.getoffsetX(ze),ne,se,v,a.segment,ge,xe,P,G));ce.push(Pe.last)}else{if(_&&!v){const ge=_e(P.tileAnchorPoint.x,P.tileAnchorPoint.y,T,P.getElevation).point,xe=a.lineStartIndex+a.segment+1,Pe=new s.P(P.lineVertexArray.getx(xe),P.lineVertexArray.gety(xe)),pe=_e(Pe.x,Pe.y,T,P.getElevation),Me=pe.signedDistanceFromCamera>0?pe.point:(function(qe,ot,pt,_t,kt,xt){return je(qe,ot,pt,1,kt,xt)})(P.tileAnchorPoint,Pe,ge,0,T,P),ze=Ae(a.writingMode,ge,Me,V);if(ze)return ze}const fe=vt(Z*z.getoffsetX(a.glyphStartIndex),ne,se,v,a.segment,a.lineStartIndex,a.lineStartIndex+a.lineLength,P,G);if(!fe||P.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ce=[fe]}for(const fe of ce)s.aj(B,fe.point,fe.angle);return{}}function je(P,a,d,v,_,T){const O=P.add(P.sub(a)._unit()),z=_!==void 0?_e(O.x,O.y,_,T.getElevation).point:tt(O.x,O.y,T).point,B=d.sub(z);return d.add(B._mult(v/B.mag()))}function Te(P,a,d){const v=a.projectionCache;if(v.projections[P])return v.projections[P];const _=new s.P(a.lineVertexArray.getx(P),a.lineVertexArray.gety(P)),T=tt(_.x,_.y,a);if(T.signedDistanceFromCamera>0)return v.projections[P]=T.point,v.anyProjectionOccluded=v.anyProjectionOccluded||T.isOccluded,T.point;const O=P-d.direction;return(function(z,B,V,G,Z){return je(z,B,V,G,void 0,Z)})(d.distanceFromAnchor===0?a.tileAnchorPoint:new s.P(a.lineVertexArray.getx(O),a.lineVertexArray.gety(O)),_,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,a)}function tt(P,a,d){const v=P+d.translation[0],_=a+d.translation[1];let T;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(T=d.projection.projectTileCoordinates(v,_,d.unwrappedTileID,d.getElevation),T.point.x=(.5*T.point.x+.5)*d.width,T.point.y=(.5*-T.point.y+.5)*d.height):(T=_e(v,_,d.labelPlaneMatrix,d.getElevation),T.isOccluded=!1),T}function lt(P,a,d){return P._unit()._perp()._mult(a*d)}function Xe(P,a,d,v,_,T,O,z,B){if(z.projectionCache.offsets[P])return z.projectionCache.offsets[P];const V=d.add(a);if(P+B.direction<v||P+B.direction>=_)return z.projectionCache.offsets[P]=V,V;const G=Te(P+B.direction,z,B),Z=lt(G.sub(d),O,B.direction),ne=d.add(Z),se=G.add(Z);return z.projectionCache.offsets[P]=s.ak(T,V,ne,se)||V,z.projectionCache.offsets[P]}function vt(P,a,d,v,_,T,O,z,B){const V=v?P-a:P+a;let G=V>0?1:-1,Z=0;v&&(G*=-1,Z=Math.PI),G<0&&(Z+=Math.PI);let ne,se=G>0?T+_:T+_+1;z.projectionCache.cachedAnchorPoint?ne=z.projectionCache.cachedAnchorPoint:(ne=tt(z.tileAnchorPoint.x,z.tileAnchorPoint.y,z).point,z.projectionCache.cachedAnchorPoint=ne);let ce,fe,ge=ne,xe=ne,Pe=0,pe=0;const Me=Math.abs(V),ze=[];let qe;for(;Pe+pe<=Me;){if(se+=G,se<T||se>=O)return null;Pe+=pe,xe=ge,fe=ce;const _t={absOffsetX:Me,direction:G,distanceFromAnchor:Pe,previousVertex:xe};if(ge=Te(se,z,_t),d===0)ze.push(xe),qe=ge.sub(xe);else{let kt;const xt=ge.sub(xe);kt=xt.mag()===0?lt(Te(se+G,z,_t).sub(ge),d,G):lt(xt,d,G),fe||(fe=xe.add(kt)),ce=Xe(se,kt,ge,T,O,fe,d,z,_t),ze.push(fe),qe=ce.sub(fe)}pe=qe.mag()}const ot=qe._mult((Me-Pe)/pe)._add(fe||xe),pt=Z+Math.atan2(ge.y-xe.y,ge.x-xe.x);return ze.push(ot),{point:ot,angle:B?pt:0,path:ze}}const $t=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xt(P,a){for(let d=0;d<P;d++){const v=a.length;a.resize(v+4),a.float32.set($t,3*v)}}function Or(P,a,d){const v=a[0],_=a[1];return P[0]=d[0]*v+d[4]*_+d[12],P[1]=d[1]*v+d[5]*_+d[13],P[3]=d[3]*v+d[7]*_+d[15],P}const fr=100;class Ir{constructor(a,d,v=new ao(a.width+200,a.height+200,25),_=new ao(a.width+200,a.height+200,25)){this.transform=a,this.mapProjection=d,this.grid=v,this.ignoredGrid=_,this.pitchFactor=Math.cos(a._pitch)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+fr,this.screenBottomBoundary=a.height+fr,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,d,v,_,T,O,z,B,V,G,Z){const ne=a.anchorPointX+B[0],se=a.anchorPointY+B[1],ce=this.projectAndGetPerspectiveRatio(_,ne,se,T,G),fe=v*ce.perspectiveRatio;let ge;if(O||z)ge=this._projectCollisionBox(a,fe,_,T,O,z,B,ce,G,Z);else{const ze=ce.point.x+(Z?Z.x*fe:0),qe=ce.point.y+(Z?Z.y*fe:0);ge={allPointsOccluded:!1,box:[ze+a.x1*fe,qe+a.y1*fe,ze+a.x2*fe,qe+a.y2*fe]}}const[xe,Pe,pe,Me]=ge.box;return this.mapProjection.useSpecialProjectionForSymbols&&(O?ge.allPointsOccluded:this.mapProjection.isOccluded(ne,se,T))||ce.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(xe,Pe,pe,Me)||d!=="always"&&this.grid.hitTest(xe,Pe,pe,Me,d,V)?{box:[xe,Pe,pe,Me],placeable:!1,offscreen:!1}:{box:[xe,Pe,pe,Me],placeable:!0,offscreen:this.isOffscreen(xe,Pe,pe,Me)}}placeCollisionCircles(a,d,v,_,T,O,z,B,V,G,Z,ne,se,ce,fe,ge){const xe=[],Pe=new s.P(d.anchorX,d.anchorY),pe=this.getPerspectiveRatio(O,Pe.x,Pe.y,z,ge),Me=(Z?T/pe:T*pe)/s.ap,ze={getElevation:ge,labelPlaneMatrix:B,lineVertexArray:v,pitchWithMap:Z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Pe,unwrappedTileID:z,width:this.transform.width,height:this.transform.height,translation:fe},qe=me(Me,_,d.lineOffsetX*Me,d.lineOffsetY*Me,!1,d,!1,ze);let ot=!1,pt=!1,_t=!0;if(qe){const kt=.5*se*pe+ce,xt=new s.P(-100,-100),yt=new s.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new ur,ar=qe.first,wt=qe.last;let Tt=[];for(let dr=ar.path.length-1;dr>=1;dr--)Tt.push(ar.path[dr]);for(let dr=1;dr<wt.path.length;dr++)Tt.push(wt.path[dr]);const ir=2.5*kt;if(V){const dr=this.projectPathToScreenSpace(Tt,ze,V);Tt=dr.some((vr=>vr.signedDistanceFromCamera<=0))?[]:dr.map((vr=>vr.point))}let Zr=[];if(Tt.length>0){const dr=Tt[0].clone(),vr=Tt[0].clone();for(let Yr=1;Yr<Tt.length;Yr++)dr.x=Math.min(dr.x,Tt[Yr].x),dr.y=Math.min(dr.y,Tt[Yr].y),vr.x=Math.max(vr.x,Tt[Yr].x),vr.y=Math.max(vr.y,Tt[Yr].y);Zr=dr.x>=xt.x&&vr.x<=yt.x&&dr.y>=xt.y&&vr.y<=yt.y?[Tt]:vr.x<xt.x||dr.x>yt.x||vr.y<xt.y||dr.y>yt.y?[]:s.al([Tt],xt.x,xt.y,yt.x,yt.y)}for(const dr of Zr){Rt.reset(dr,.25*kt);let vr=0;vr=Rt.length<=.5*kt?1:Math.ceil(Rt.paddedLength/ir)+1;for(let Yr=0;Yr<vr;Yr++){const oi=Yr/Math.max(vr-1,1),xa=Rt.lerp(oi),Jr=xa.x+fr,Yn=xa.y+fr;xe.push(Jr,Yn,kt,0);const dn=Jr-kt,In=Yn-kt,mi=Jr+kt,mo=Yn+kt;if(_t=_t&&this.isOffscreen(dn,In,mi,mo),pt=pt||this.isInsideGrid(dn,In,mi,mo),a!=="always"&&this.grid.hitTestCircle(Jr,Yn,kt,a,ne)&&(ot=!0,!G))return{circles:[],offscreen:!1,collisionDetected:ot}}}}return{circles:!G&&ot||!pt||pe<this.perspectiveRatioCutoff?[]:xe,offscreen:_t,collisionDetected:ot}}projectPathToScreenSpace(a,d,v){return a.map((_=>_e(_.x,_.y,v,d.getElevation)))}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let v=1/0,_=1/0,T=-1/0,O=-1/0;for(const G of a){const Z=new s.P(G.x+fr,G.y+fr);v=Math.min(v,Z.x),_=Math.min(_,Z.y),T=Math.max(T,Z.x),O=Math.max(O,Z.y),d.push(Z)}const z=this.grid.query(v,_,T,O).concat(this.ignoredGrid.query(v,_,T,O)),B={},V={};for(const G of z){const Z=G.key;if(B[Z.bucketInstanceId]===void 0&&(B[Z.bucketInstanceId]={}),B[Z.bucketInstanceId][Z.featureIndex])continue;const ne=[new s.P(G.x1,G.y1),new s.P(G.x2,G.y1),new s.P(G.x2,G.y2),new s.P(G.x1,G.y2)];s.am(d,ne)&&(B[Z.bucketInstanceId][Z.featureIndex]=!0,V[Z.bucketInstanceId]===void 0&&(V[Z.bucketInstanceId]=[]),V[Z.bucketInstanceId].push(Z.featureIndex))}return V}insertCollisionBox(a,d,v,_,T,O){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:T,collisionGroupID:O,overlapMode:d},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,d,v,_,T,O){const z=v?this.ignoredGrid:this.grid,B={bucketInstanceId:_,featureIndex:T,collisionGroupID:O,overlapMode:d};for(let V=0;V<a.length;V+=4)z.insertCircle(B,a[V],a[V+1],a[V+2])}projectAndGetPerspectiveRatio(a,d,v,_,T){let O;T?(O=[d,v,T(d,v),1],s.af(O,O,a)):(O=[d,v,0,1],Or(O,O,a));const z=O[3];return{point:new s.P((O[0]/z+1)/2*this.transform.width+fr,(-O[1]/z+1)/2*this.transform.height+fr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/z*.5,isOccluded:!1,signedDistanceFromCamera:z}}getPerspectiveRatio(a,d,v,_,T){const O=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,v,_,T):_e(d,v,a,T);return .5+this.transform.cameraToCenterDistance/O.signedDistanceFromCamera*.5}isOffscreen(a,d,v,_){return v<fr||a>=this.screenRightBoundary||_<fr||d>this.screenBottomBoundary}isInsideGrid(a,d,v,_){return v>=0&&a<this.gridRightBoundary&&_>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const a=s.an([]);return s.J(a,a,[-100,-100,0]),a}_projectCollisionBox(a,d,v,_,T,O,z,B,V,G){let Z=new s.P(1,0),ne=new s.P(0,1);const se=new s.P(a.anchorPointX+z[0],a.anchorPointY+z[1]);if(O&&!T){const _t=this.projectAndGetPerspectiveRatio(v,se.x+1,se.y,_,V).point.sub(B.point).unit(),kt=Math.atan(_t.y/_t.x)+(_t.x<0?Math.PI:0),xt=Math.sin(kt),yt=Math.cos(kt);Z=new s.P(yt,xt),ne=new s.P(-xt,yt)}else if(!O&&T){const _t=-this.transform.angle,kt=Math.sin(_t),xt=Math.cos(_t);Z=new s.P(xt,kt),ne=new s.P(-kt,xt)}let ce=B.point,fe=d;if(T){ce=se;const _t=this.transform.zoom-Math.floor(this.transform.zoom);fe=Math.pow(2,-_t),fe*=this.mapProjection.getPitchedTextCorrection(this.transform,se,_),G||(fe*=s.ac(.5+B.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}G&&(ce=ce.add(Z.mult(G.x*fe)).add(ne.mult(G.y*fe)));const ge=a.x1*fe,xe=a.x2*fe,Pe=(ge+xe)/2,pe=a.y1*fe,Me=a.y2*fe,ze=(pe+Me)/2,qe=[{offsetX:ge,offsetY:pe},{offsetX:Pe,offsetY:pe},{offsetX:xe,offsetY:pe},{offsetX:xe,offsetY:ze},{offsetX:xe,offsetY:Me},{offsetX:Pe,offsetY:Me},{offsetX:ge,offsetY:Me},{offsetX:ge,offsetY:ze}];let ot=[];for(const{offsetX:_t,offsetY:kt}of qe)ot.push(new s.P(ce.x+Z.x*_t+ne.x*kt,ce.y+Z.y*_t+ne.y*kt));let pt=!1;if(T){const _t=ot.map((kt=>this.projectAndGetPerspectiveRatio(v,kt.x,kt.y,_,V)));pt=_t.some((kt=>!kt.isOccluded)),ot=_t.map((kt=>kt.point))}else pt=!0;return{box:s.ao(ot),allPointsOccluded:!pt}}}function gr(P,a,d){return a*(s.X/(P.tileSize*Math.pow(2,d-P.tileID.overscaledZ)))}class Ln{constructor(a,d,v,_){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?d:-d))):_&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class bn{constructor(a,d,v,_,T){this.text=new Ln(a?a.text:null,d,v,T),this.icon=new Ln(a?a.icon:null,d,_,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class br{constructor(a,d,v){this.text=a,this.icon=d,this.skipFade=v}}class Vr{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class hn{constructor(a,d,v,_,T){this.bucketInstanceId=a,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=_,this.tileID=T}}class Kn{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const d=++this.maxGroupID;this.collisionGroups[a]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[a]}}function ii(P,a,d,v,_){const{horizontalAlign:T,verticalAlign:O}=s.au(P);return new s.P(-(T-.5)*a+v[0]*_,-(O-.5)*d+v[1]*_)}class Di{constructor(a,d,v,_,T,O){this.transform=a.clone(),this.terrain=v,this.collisionIndex=new Ir(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=_,this.retainedQueryData={},this.collisionGroups=new Kn(T),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=O,O&&(O.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const d=this.terrain;return d?(v,_)=>d.getElevation(a,v,_):null}getBucketParts(a,d,v,_){const T=v.getBucket(d),O=v.latestFeatureIndex;if(!T||!O||d.id!==T.layerIds[0])return;const z=v.collisionBoxArray,B=T.layers[0].layout,V=T.layers[0].paint,G=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Z=v.tileSize/s.X,ne=v.tileID.toUnwrapped(),se=this.transform.calculatePosMatrix(ne),ce=B.get("text-pitch-alignment")==="map",fe=B.get("text-rotation-alignment")==="map",ge=gr(v,1,this.transform.zoom),xe=this.collisionIndex.mapProjection.translatePosition(this.transform,v,V.get("text-translate"),V.get("text-translate-anchor")),Pe=this.collisionIndex.mapProjection.translatePosition(this.transform,v,V.get("icon-translate"),V.get("icon-translate-anchor")),pe=ma(se,ce,fe,this.transform,ge);let Me=null;if(ce){const qe=Ii(se,ce,fe,this.transform,ge);Me=s.L([],this.transform.labelPlaneMatrix,qe)}this.retainedQueryData[T.bucketInstanceId]=new hn(T.bucketInstanceId,O,T.sourceLayerIndex,T.index,v.tileID);const ze={bucket:T,layout:B,translationText:xe,translationIcon:Pe,posMatrix:se,unwrappedTileID:ne,textLabelPlaneMatrix:pe,labelToScreenMatrix:Me,scale:G,textPixelRatio:Z,holdingForFade:v.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:s.ag(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(_)for(const qe of T.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:pt,symbolInstanceEnd:_t}=qe;a.push({sortKey:ot,symbolInstanceStart:pt,symbolInstanceEnd:_t,parameters:ze})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(a,d,v,_,T,O,z,B,V,G,Z,ne,se,ce,fe,ge,xe,Pe,pe){const Me=s.aq[a.textAnchor],ze=[a.textOffset0,a.textOffset1],qe=ii(Me,v,_,ze,T),ot=this.collisionIndex.placeCollisionBox(d,ne,B,V,G,z,O,ge,Z.predicate,pe,qe);if((!Pe||this.collisionIndex.placeCollisionBox(Pe,ne,B,V,G,z,O,xe,Z.predicate,pe,qe).placeable)&&ot.placeable){let pt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID]&&this.prevPlacement.placements[se.crossTileID].text&&(pt=this.prevPlacement.variableOffsets[se.crossTileID].anchor),se.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[se.crossTileID]={textOffset:ze,width:v,height:_,anchor:Me,textBoxScale:T,prevAnchor:pt},this.markUsedJustification(ce,Me,se,fe),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,fe,se),this.placedOrientations[se.crossTileID]=fe),{shift:qe,placedGlyphBoxes:ot}}}placeLayerBucketPart(a,d,v){const{bucket:_,layout:T,translationText:O,translationIcon:z,posMatrix:B,unwrappedTileID:V,textLabelPlaneMatrix:G,labelToScreenMatrix:Z,textPixelRatio:ne,holdingForFade:se,collisionBoxArray:ce,partiallyEvaluatedTextSize:fe,collisionGroup:ge}=a.parameters,xe=T.get("text-optional"),Pe=T.get("icon-optional"),pe=s.ar(T,"text-overlap","text-allow-overlap"),Me=pe==="always",ze=s.ar(T,"icon-overlap","icon-allow-overlap"),qe=ze==="always",ot=T.get("text-rotation-alignment")==="map",pt=T.get("text-pitch-alignment")==="map",_t=T.get("icon-text-fit")!=="none",kt=T.get("symbol-z-order")==="viewport-y",xt=Me&&(qe||!_.hasIconData()||Pe),yt=qe&&(Me||!_.hasTextData()||xe);!_.collisionArrays&&ce&&_.deserializeCollisionBoxes(ce);const Rt=this._getTerrainElevationFunc(this.retainedQueryData[_.bucketInstanceId].tileID),ar=(wt,Tt,ir)=>{var Zr,dr;if(d[wt.crossTileID])return;if(se)return void(this.placements[wt.crossTileID]=new br(!1,!1,!1));let vr=!1,Yr=!1,oi=!0,xa=null,Jr={box:null,placeable:!1,offscreen:null},Yn={placeable:!1},dn=null,In=null,mi=null,mo=0,ta=0,go=0;Tt.textFeatureIndex?mo=Tt.textFeatureIndex:wt.useRuntimeCollisionCircles&&(mo=wt.featureIndex),Tt.verticalTextFeatureIndex&&(ta=Tt.verticalTextFeatureIndex);const Rs=Tt.textBox;if(Rs){const Fi=Bn=>{let vn=s.ah.horizontal;if(_.allowVerticalPlacement&&!Bn&&this.prevPlacement){const gi=this.prevPlacement.placedOrientations[wt.crossTileID];gi&&(this.placedOrientations[wt.crossTileID]=gi,vn=gi,this.markUsedOrientation(_,vn,wt))}return vn},wa=(Bn,vn)=>{if(_.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&Tt.verticalTextBox){for(const gi of _.writingModes)if(gi===s.ah.vertical?(Jr=vn(),Yn=Jr):Jr=Bn(),Jr&&Jr.placeable)break}else Jr=Bn()},yo=wt.textAnchorOffsetStartIndex,Ba=wt.textAnchorOffsetEndIndex;if(Ba===yo){const Bn=(vn,gi)=>{const wr=this.collisionIndex.placeCollisionBox(vn,pe,ne,B,V,pt,ot,O,ge.predicate,Rt);return wr&&wr.placeable&&(this.markUsedOrientation(_,gi,wt),this.placedOrientations[wt.crossTileID]=gi),wr};wa((()=>Bn(Rs,s.ah.horizontal)),(()=>{const vn=Tt.verticalTextBox;return _.allowVerticalPlacement&&wt.numVerticalGlyphVertices>0&&vn?Bn(vn,s.ah.vertical):{box:null,offscreen:null}})),Fi(Jr&&Jr.placeable)}else{let Bn=s.aq[(dr=(Zr=this.prevPlacement)===null||Zr===void 0?void 0:Zr.variableOffsets[wt.crossTileID])===null||dr===void 0?void 0:dr.anchor];const vn=(wr,Sa,Ls)=>{const vo=wr.x2-wr.x1,ff=wr.y2-wr.y1,df=wt.textBoxScale,wn=_t&&ze==="never"?Sa:null;let _o=null,ah=pe==="never"?1:2,iu="never";Bn&&ah++;for(let Fs=0;Fs<ah;Fs++){for(let au=yo;au<Ba;au++){const Lo=_.textAnchorOffsets.get(au);if(Bn&&Lo.textAnchor!==Bn)continue;const Qr=this.attemptAnchorPlacement(Lo,wr,vo,ff,df,ot,pt,ne,B,V,ge,iu,wt,_,Ls,O,z,wn,Rt);if(Qr&&(_o=Qr.placedGlyphBoxes,_o&&_o.placeable))return vr=!0,xa=Qr.shift,_o}Bn?Bn=null:iu=pe}return v&&!_o&&(_o={box:this.collisionIndex.placeCollisionBox(Rs,"always",ne,B,V,pt,ot,O,ge.predicate,Rt,new s.P(0,0)).box,offscreen:!1,placeable:!1}),_o};wa((()=>vn(Rs,Tt.iconBox,s.ah.horizontal)),(()=>{const wr=Tt.verticalTextBox;return _.allowVerticalPlacement&&(!Jr||!Jr.placeable)&&wt.numVerticalGlyphVertices>0&&wr?vn(wr,Tt.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Jr&&(vr=Jr.placeable,oi=Jr.offscreen);const gi=Fi(Jr&&Jr.placeable);if(!vr&&this.prevPlacement){const wr=this.prevPlacement.variableOffsets[wt.crossTileID];wr&&(this.variableOffsets[wt.crossTileID]=wr,this.markUsedJustification(_,wr.anchor,wt,gi))}}}if(dn=Jr,vr=dn&&dn.placeable,oi=dn&&dn.offscreen,wt.useRuntimeCollisionCircles){const Fi=_.text.placedSymbolArray.get(wt.centerJustifiedTextSymbolIndex),wa=s.ai(_.textSizeData,fe,Fi),yo=T.get("text-padding");In=this.collisionIndex.placeCollisionCircles(pe,Fi,_.lineVertexArray,_.glyphOffsetArray,wa,B,V,G,Z,v,pt,ge.predicate,wt.collisionCircleDiameter,yo,O,Rt),In.circles.length&&In.collisionDetected&&!v&&s.w("Collisions detected, but collision boxes are not shown"),vr=Me||In.circles.length>0&&!In.collisionDetected,oi=oi&&In.offscreen}if(Tt.iconFeatureIndex&&(go=Tt.iconFeatureIndex),Tt.iconBox){const Fi=wa=>this.collisionIndex.placeCollisionBox(wa,ze,ne,B,V,pt,ot,z,ge.predicate,Rt,_t&&xa?xa:void 0);Yn&&Yn.placeable&&Tt.verticalIconBox?(mi=Fi(Tt.verticalIconBox),Yr=mi.placeable):(mi=Fi(Tt.iconBox),Yr=mi.placeable),oi=oi&&mi.offscreen}const ba=xe||wt.numHorizontalGlyphVertices===0&&wt.numVerticalGlyphVertices===0,ja=Pe||wt.numIconVertices===0;ba||ja?ja?ba||(Yr=Yr&&vr):vr=Yr&&vr:Yr=vr=Yr&&vr;const Ro=Yr&&mi.placeable;if(vr&&dn.placeable&&this.collisionIndex.insertCollisionBox(dn.box,pe,T.get("text-ignore-placement"),_.bucketInstanceId,Yn&&Yn.placeable&&ta?ta:mo,ge.ID),Ro&&this.collisionIndex.insertCollisionBox(mi.box,ze,T.get("icon-ignore-placement"),_.bucketInstanceId,go,ge.ID),In&&vr&&this.collisionIndex.insertCollisionCircles(In.circles,pe,T.get("text-ignore-placement"),_.bucketInstanceId,mo,ge.ID),v&&this.storeCollisionData(_.bucketInstanceId,ir,Tt,dn,mi,In),wt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(_.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[wt.crossTileID]=new br(vr||xt,Yr||yt,oi||_.justReloaded),d[wt.crossTileID]=!0};if(kt){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const wt=_.getSortedSymbolIndexes(this.transform.angle);for(let Tt=wt.length-1;Tt>=0;--Tt){const ir=wt[Tt];ar(_.symbolInstances.get(ir),_.collisionArrays[ir],ir)}}else for(let wt=a.symbolInstanceStart;wt<a.symbolInstanceEnd;wt++)ar(_.symbolInstances.get(wt),_.collisionArrays[wt],wt);if(v&&_.bucketInstanceId in this.collisionCircleArrays){const wt=this.collisionCircleArrays[_.bucketInstanceId];s.as(wt.invProjMatrix,B),wt.viewportMatrix=this.collisionIndex.getViewportMatrix()}_.justReloaded=!1}storeCollisionData(a,d,v,_,T,O){if(v.textBox||v.iconBox){let z,B;this.collisionBoxArrays.has(a)?z=this.collisionBoxArrays.get(a):(z=new Map,this.collisionBoxArrays.set(a,z)),z.has(d)?B=z.get(d):(B={text:null,icon:null},z.set(d,B)),v.textBox&&(B.text=_.box),v.iconBox&&(B.icon=T.box)}if(O){let z=this.collisionCircleArrays[a];z===void 0&&(z=this.collisionCircleArrays[a]=new Vr);for(let B=0;B<O.circles.length;B+=4)z.circles.push(O.circles[B+0]),z.circles.push(O.circles[B+1]),z.circles.push(O.circles[B+2]),z.circles.push(O.collisionDetected?1:0)}}markUsedJustification(a,d,v,_){let T;T=_===s.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[s.at(d)];const O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(const z of O)z>=0&&(a.text.placedSymbolArray.get(z).crossTileID=T>=0&&z!==T?0:v.crossTileID)}markUsedOrientation(a,d,v){const _=d===s.ah.horizontal||d===s.ah.horizontalOnly?d:0,T=d===s.ah.vertical?d:0,O=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(const z of O)a.text.placedSymbolArray.get(z).placedOrientation=_;v.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const _=d?d.symbolFadeChange(a):1,T=d?d.opacities:{},O=d?d.variableOffsets:{},z=d?d.placedOrientations:{};for(const B in this.placements){const V=this.placements[B],G=T[B];G?(this.opacities[B]=new bn(G,_,V.text,V.icon),v=v||V.text!==G.text.placed||V.icon!==G.icon.placed):(this.opacities[B]=new bn(null,_,V.text,V.icon,V.skipFade),v=v||V.text||V.icon)}for(const B in T){const V=T[B];if(!this.opacities[B]){const G=new bn(V,_,!1,!1);G.isHidden()||(this.opacities[B]=G,v=v||V.text.placed||V.icon.placed)}}for(const B in O)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=O[B]);for(const B in z)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=z[B]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:a)}updateLayerOpacities(a,d){const v={};for(const _ of d){const T=_.getBucket(a);T&&_.latestFeatureIndex&&a.id===T.layerIds[0]&&this.updateBucketOpacities(T,_.tileID,v,_.collisionBoxArray)}}updateBucketOpacities(a,d,v,_){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const T=a.layers[0],O=T.layout,z=new bn(null,0,!1,!1,!0),B=O.get("text-allow-overlap"),V=O.get("icon-allow-overlap"),G=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Z=O.get("text-rotation-alignment")==="map",ne=O.get("text-pitch-alignment")==="map",se=O.get("icon-text-fit")!=="none",ce=new bn(null,0,B&&(V||!a.hasIconData()||O.get("icon-optional")),V&&(B||!a.hasTextData()||O.get("text-optional")),!0);!a.collisionArrays&&_&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(_);const fe=(xe,Pe,pe)=>{for(let Me=0;Me<Pe/4;Me++)xe.opacityVertexArray.emplaceBack(pe);xe.hasVisibleVertices=xe.hasVisibleVertices||pe!==zi},ge=this.collisionBoxArrays.get(a.bucketInstanceId);for(let xe=0;xe<a.symbolInstances.length;xe++){const Pe=a.symbolInstances.get(xe),{numHorizontalGlyphVertices:pe,numVerticalGlyphVertices:Me,crossTileID:ze}=Pe;let qe=this.opacities[ze];v[ze]?qe=z:qe||(qe=ce,this.opacities[ze]=qe),v[ze]=!0;const ot=Pe.numIconVertices>0,pt=this.placedOrientations[Pe.crossTileID],_t=pt===s.ah.vertical,kt=pt===s.ah.horizontal||pt===s.ah.horizontalOnly;if(pe>0||Me>0){const yt=Si(qe.text);fe(a.text,pe,_t?zi:yt),fe(a.text,Me,kt?zi:yt);const Rt=qe.text.isHidden();[Pe.rightJustifiedTextSymbolIndex,Pe.centerJustifiedTextSymbolIndex,Pe.leftJustifiedTextSymbolIndex].forEach((Tt=>{Tt>=0&&(a.text.placedSymbolArray.get(Tt).hidden=Rt||_t?1:0)})),Pe.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(Pe.verticalPlacedTextSymbolIndex).hidden=Rt||kt?1:0);const ar=this.variableOffsets[Pe.crossTileID];ar&&this.markUsedJustification(a,ar.anchor,Pe,pt);const wt=this.placedOrientations[Pe.crossTileID];wt&&(this.markUsedJustification(a,"left",Pe,wt),this.markUsedOrientation(a,wt,Pe))}if(ot){const yt=Si(qe.icon),Rt=!(se&&Pe.verticalPlacedIconSymbolIndex&&_t);Pe.placedIconSymbolIndex>=0&&(fe(a.icon,Pe.numIconVertices,Rt?yt:zi),a.icon.placedSymbolArray.get(Pe.placedIconSymbolIndex).hidden=qe.icon.isHidden()),Pe.verticalPlacedIconSymbolIndex>=0&&(fe(a.icon,Pe.numVerticalIconVertices,Rt?zi:yt),a.icon.placedSymbolArray.get(Pe.verticalPlacedIconSymbolIndex).hidden=qe.icon.isHidden())}const xt=ge&&ge.has(xe)?ge.get(xe):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const yt=a.collisionArrays[xe];if(yt){let Rt=new s.P(0,0);if(yt.textBox||yt.verticalTextBox){let ar=!0;if(G){const wt=this.variableOffsets[ze];wt?(Rt=ii(wt.anchor,wt.width,wt.height,wt.textOffset,wt.textBoxScale),Z&&Rt._rotate(ne?this.transform.angle:-this.transform.angle)):ar=!1}if(yt.textBox||yt.verticalTextBox){let wt;yt.textBox&&(wt=_t),yt.verticalTextBox&&(wt=kt),Ll(a.textCollisionBox.collisionVertexArray,qe.text.placed,!ar||wt,xt.text,Rt.x,Rt.y)}}if(yt.iconBox||yt.verticalIconBox){const ar=!!(!kt&&yt.verticalIconBox);let wt;yt.iconBox&&(wt=ar),yt.verticalIconBox&&(wt=!ar),Ll(a.iconCollisionBox.collisionVertexArray,qe.icon.placed,wt,xt.icon,se?Rt.x:0,se?Rt.y:0)}}}}if(a.sortFeatures(this.transform.angle),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);if(a.bucketInstanceId in this.collisionCircleArrays){const xe=this.collisionCircleArrays[a.bucketInstanceId];a.placementInvProjMatrix=xe.invProjMatrix,a.placementViewportMatrix=xe.viewportMatrix,a.collisionCircleArray=xe.circles,delete this.collisionCircleArrays[a.bucketInstanceId]}}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,d){const v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>a}setStale(){this.stale=!0}}function Ll(P,a,d,v,_,T){v&&v.length!==0||(v=[0,0,0,0]);const O=v[0]-fr,z=v[1]-fr,B=v[2]-fr,V=v[3]-fr;P.emplaceBack(a?1:0,d?1:0,_||0,T||0,O,z),P.emplaceBack(a?1:0,d?1:0,_||0,T||0,B,z),P.emplaceBack(a?1:0,d?1:0,_||0,T||0,B,V),P.emplaceBack(a?1:0,d?1:0,_||0,T||0,O,V)}const cr=Math.pow(2,25),$h=Math.pow(2,24),Iu=Math.pow(2,17),Zi=Math.pow(2,16),wi=Math.pow(2,9),Pm=Math.pow(2,8),ga=Math.pow(2,1);function Si(P){if(P.opacity===0&&!P.placed)return 0;if(P.opacity===1&&P.placed)return 4294967295;const a=P.placed?1:0,d=Math.floor(127*P.opacity);return d*cr+a*$h+d*Iu+a*Zi+d*wi+a*Pm+d*ga+a}const zi=0;function el(){return{isOccluded:(P,a,d)=>!1,getPitchedTextCorrection:(P,a,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(P,a,d,v){throw new Error("Not implemented.")},translatePosition:(P,a,d,v)=>(function(_,T,O,z,B=!1){if(!O[0]&&!O[1])return[0,0];const V=B?z==="map"?_.angle:0:z==="viewport"?-_.angle:0;if(V){const G=Math.sin(V),Z=Math.cos(V);O=[O[0]*Z-O[1]*G,O[0]*G+O[1]*Z]}return[B?O[0]:gr(T,O[0],_.zoom),B?O[1]:gr(T,O[1],_.zoom)]})(P,a,d,v),getCircleRadiusCorrection:P=>1}}class Hr{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,d,v,_,T){const O=this._bucketParts;for(;this._currentTileIndex<a.length;)if(d.getBucketParts(O,_,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,O.sort(((z,B)=>z.sortKey-B.sortKey)));this._currentPartIndex<O.length;)if(d.placeLayerBucketPart(O[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,T())return!0;return!1}}class Du{constructor(a,d,v,_,T,O,z,B){this.placement=new Di(a,el(),d,O,z,B),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(a,d,v){const _=S.now(),T=()=>!this._forceFullPlacement&&S.now()-_>2;for(;this._currentPlacementIndex>=0;){const O=d[a[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(O.type==="symbol"&&(!O.minzoom||O.minzoom<=z)&&(!O.maxzoom||O.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Hr(O)),this._inProgressLayer.continuePlacement(v[O.source],this.placement,this._showCollisionBoxes,O,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const oo=512/s.X/2;class Fn{constructor(a,d,v){this.tileID=a,this.bucketInstanceId=v,this._symbolsByKey={};const _=new Map;for(let T=0;T<d.length;T++){const O=d.get(T),z=O.key,B=_.get(z);B?B.push(O):_.set(z,[O])}for(const[T,O]of _){const z={positions:O.map((B=>({x:Math.floor(B.anchorX*oo),y:Math.floor(B.anchorY*oo)}))),crossTileIDs:O.map((B=>B.crossTileID))};if(z.positions.length>128){const B=new s.av(z.positions.length,16,Uint16Array);for(const{x:V,y:G}of z.positions)B.add(V,G);B.finish(),delete z.positions,z.index=B}this._symbolsByKey[T]=z}}getScaledCoordinates(a,d){const{x:v,y:_,z:T}=this.tileID.canonical,{x:O,y:z,z:B}=d.canonical,V=oo/Math.pow(2,B-T),G=(z*s.X+a.anchorY)*V,Z=_*s.X*oo;return{x:Math.floor((O*s.X+a.anchorX)*V-v*s.X*oo),y:Math.floor(G-Z)}}findMatches(a,d,v){const _=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let T=0;T<a.length;T++){const O=a.get(T);if(O.crossTileID)continue;const z=this._symbolsByKey[O.key];if(!z)continue;const B=this.getScaledCoordinates(O,d);if(z.index){const V=z.index.range(B.x-_,B.y-_,B.x+_,B.y+_).sort();for(const G of V){const Z=z.crossTileIDs[G];if(!v[Z]){v[Z]=!0,O.crossTileID=Z;break}}}else if(z.positions)for(let V=0;V<z.positions.length;V++){const G=z.positions[V],Z=z.crossTileIDs[V];if(Math.abs(G.x-B.x)<=_&&Math.abs(G.y-B.y)<=_&&!v[Z]){v[Z]=!0,O.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:a})=>a))}}class tl{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Xi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const d=Math.round((a-this.lng)/360);if(d!==0)for(const v in this.indexes){const _=this.indexes[v],T={};for(const O in _){const z=_[O];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+d),T[z.tileID.key]=z}this.indexes[v]=T}this.lng=a}addBucket(a,d,v){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const _=this.usedCrossTileIDs[a.overscaledZ];for(const T in this.indexes){const O=this.indexes[T];if(Number(T)>a.overscaledZ)for(const z in O){const B=O[z];B.tileID.isChildOf(a)&&B.findMatches(d.symbolInstances,a,_)}else{const z=O[a.scaledTo(Number(T)).key];z&&z.findMatches(d.symbolInstances,a,_)}}for(let T=0;T<d.symbolInstances.length;T++){const O=d.symbolInstances.get(T);O.crossTileID||(O.crossTileID=v.generate(),_[O.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Fn(a,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(a,d){for(const v of d.getCrossTileIDsLists())for(const _ of v)delete this.usedCrossTileIDs[a][_]}removeStaleBuckets(a){let d=!1;for(const v in this.indexes){const _=this.indexes[v];for(const T in _)a[_[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,_[T]),delete _[T],d=!0)}return d}}class rl{constructor(){this.layerIndexes={},this.crossTileIDs=new tl,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,d,v){let _=this.layerIndexes[a.id];_===void 0&&(_=this.layerIndexes[a.id]=new Xi);let T=!1;const O={};_.handleWrapJump(v);for(const z of d){const B=z.getBucket(a);B&&a.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),_.addBucket(z.tileID,B,this.crossTileIDs)&&(T=!0),O[B.bucketInstanceId]=!0)}return _.removeStaleBuckets(O)&&(T=!0),T}pruneUnusedLayers(a){const d={};a.forEach((v=>{d[v]=!0}));for(const v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}const Ki=(P,a)=>s.t(P,a&&a.filter((d=>d.identifier!=="source.canvas"))),Am=s.aw();class Lc extends s.E{constructor(a,d={}){super(),this._rtlPluginLoaded=()=>{for(const v in this.sourceCaches){const _=this.sourceCaches[v].getSource().type;_!=="vector"&&_!=="geojson"||this.sourceCaches[v].reload()}},this.map=a,this.dispatcher=new Ht(ct(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",((v,_)=>this.getGlyphs(v,_))),this.dispatcher.registerMessageHandler("GI",((v,_)=>this.getImages(v,_))),this.imageManager=new Le,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(a._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new rl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),Gi().on(mt,this._rtlPluginLoaded),this.on("data",(v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const _=this.sourceCaches[v.sourceId];if(!_)return;const T=_.getSource();if(T&&T.vectorLayerIds)for(const O in this._layers){const z=this._layers[O];z.source===T.id&&this._validateLayer(z)}}))}loadURL(a,d={},v){this.fire(new s.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const _=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const T=this._loadStyleRequest;s.h(_,this._loadStyleRequest).then((O=>{this._loadStyleRequest=null,this._load(O.data,d,v)})).catch((O=>{this._loadStyleRequest=null,O&&!T.signal.aborted&&this.fire(new s.j(O))}))}loadJSON(a,d={},v){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(a,d,v)})).catch((()=>{}))}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(Am,{validate:!1})}_load(a,d,v){var _;const T=d.transformStyle?d.transformStyle(v,a):a;if(!d.validate||!Ki(this,s.u(T))){this._loaded=!0,this.stylesheet=T;for(const O in T.sources)this.addSource(O,T.sources[O],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new nt(this.stylesheet.light),this.sky=new De(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){const a=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",a),this._order=a.map((d=>d.id)),this._layers={},this._serializedLayers=null;for(const d of a){const v=s.aA(d);v.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=v}}_loadSprite(a,d=!1,v=void 0){let _;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(T,O,z,B){return s._(this,void 0,void 0,(function*(){const V=ve(T),G=z>1?"@2x":"",Z={},ne={};for(const{id:se,url:ce}of V){const fe=O.transformRequest(Re(ce,G,".json"),"SpriteJSON");Z[se]=s.h(fe,B);const ge=O.transformRequest(Re(ce,G,".png"),"SpriteImage");ne[se]=K.getImage(ge,B)}return yield Promise.all([...Object.values(Z),...Object.values(ne)]),(function(se,ce){return s._(this,void 0,void 0,(function*(){const fe={};for(const ge in se){fe[ge]={};const xe=S.getImageCanvasContext((yield ce[ge]).data),Pe=(yield se[ge]).data;for(const pe in Pe){const{width:Me,height:ze,x:qe,y:ot,sdf:pt,pixelRatio:_t,stretchX:kt,stretchY:xt,content:yt,textFitWidth:Rt,textFitHeight:ar}=Pe[pe];fe[ge][pe]={data:null,pixelRatio:_t,sdf:pt,stretchX:kt,stretchY:xt,content:yt,textFitWidth:Rt,textFitHeight:ar,spriteData:{width:Me,height:ze,x:qe,y:ot,context:xe}}}}return fe}))})(Z,ne)}))})(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((T=>{if(this._spriteRequest=null,T)for(const O in T){this._spritesImagesIds[O]=[];const z=this._spritesImagesIds[O]?this._spritesImagesIds[O].filter((B=>!(B in T))):[];for(const B of z)this.imageManager.removeImage(B),this._changedImages[B]=!0;for(const B in T[O]){const V=O==="default"?B:`${O}:${B}`;this._spritesImagesIds[O].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,T[O][B],!1):this.imageManager.addImage(V,T[O][B]),d&&(this._changedImages[V]=!0)}}})).catch((T=>{this._spriteRequest=null,_=T,this.fire(new s.j(_))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),v&&v(_)}))}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(a){const d=this.sourceCaches[a.source];if(!d)return;const v=a.sourceLayer;if(!v)return;const _=d.getSource();(_.type==="geojson"||_.vectorLayerIds&&_.vectorLayerIds.indexOf(v)===-1)&&this.fire(new s.j(new Error(`Source layer "${v}" does not exist on source "${_.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.sourceCaches)if(!this.sourceCaches[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,d=!1){const v=this._serializedAllLayers();if(!a||a.length===0)return Object.values(d?s.aB(v):v);const _=[];for(const T of a)if(v[T]){const O=d?s.aB(v[T]):v[T];_.push(O)}return _}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const d=Object.keys(this._layers);for(const v of d){const _=this._layers[v];_.type!=="custom"&&(a[v]=_.serialize())}return a}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const a in this.sourceCaches)if(this.sourceCaches[a].hasTransition())return!0;for(const a in this._layers)if(this._layers[a].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const d=this._changed;if(d){const _=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(_.length||T.length)&&this._updateWorkerLayers(_,T);for(const O in this._updatedSources){const z=this._updatedSources[O];if(z==="reload")this._reloadSource(O);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(O)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const O in this._updatedPaintProps)this._layers[O].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const v={};for(const _ in this.sourceCaches){const T=this.sourceCaches[_];v[_]=T.used,T.used=!1}for(const _ of this._order){const T=this._layers[_];T.recalculate(a,this._availableImages),!T.isHidden(a.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(const _ in v){const T=this.sourceCaches[_];!!v[_]!=!!T.used&&T.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:_}))}this.light.recalculate(a),this.sky.recalculate(a),this.z=a.zoom,d&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,d={}){var v;this._checkLoaded();const _=this.serialize();if(a=d.transformStyle?d.transformStyle(_,a):a,((v=d.validate)===null||v===void 0||v)&&Ki(this,s.u(a)))return!1;(a=s.aB(a)).layers=s.az(a.layers);const T=s.aC(_,a),O=this._getOperationsToPerform(T);if(O.unimplemented.length>0)throw new Error(`Unimplemented: ${O.unimplemented.join(", ")}.`);if(O.operations.length===0)return!1;for(const z of O.operations)z();return this.stylesheet=a,this._serializedLayers=null,!0}_getOperationsToPerform(a){const d=[],v=[];for(const _ of a)switch(_.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push((()=>this.addLayer.apply(this,_.args)));break;case"removeLayer":d.push((()=>this.removeLayer.apply(this,_.args)));break;case"setPaintProperty":d.push((()=>this.setPaintProperty.apply(this,_.args)));break;case"setLayoutProperty":d.push((()=>this.setLayoutProperty.apply(this,_.args)));break;case"setFilter":d.push((()=>this.setFilter.apply(this,_.args)));break;case"addSource":d.push((()=>this.addSource.apply(this,_.args)));break;case"removeSource":d.push((()=>this.removeSource.apply(this,_.args)));break;case"setLayerZoomRange":d.push((()=>this.setLayerZoomRange.apply(this,_.args)));break;case"setLight":d.push((()=>this.setLight.apply(this,_.args)));break;case"setGeoJSONSourceData":d.push((()=>this.setGeoJSONSourceData.apply(this,_.args)));break;case"setGlyphs":d.push((()=>this.setGlyphs.apply(this,_.args)));break;case"setSprite":d.push((()=>this.setSprite.apply(this,_.args)));break;case"setSky":d.push((()=>this.setSky.apply(this,_.args)));break;case"setTerrain":d.push((()=>this.map.setTerrain.apply(this,_.args)));break;case"setTransition":d.push((()=>{}));break;default:v.push(_.command)}return{operations:d,unimplemented:v}}addImage(a,d){if(this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,d),this._afterImageUpdated(a)}updateImage(a,d){this.imageManager.updateImage(a,d)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new s.j(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,d,v={}){if(this._checkLoaded(),this.sourceCaches[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(s.u.source,`sources.${a}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const _=this.sourceCaches[a]=new nr(a,d,this.dispatcher);_.style=this,_.setEventedParent(this,(()=>({isSourceLoaded:_.loaded(),source:_.serialize(),sourceId:a}))),_.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error("There is no source with this ID");for(const v in this._layers)if(this._layers[v].source===a)return this.fire(new s.j(new Error(`Source "${a}" cannot be removed while layer "${v}" is using it.`)));const d=this.sourceCaches[a];delete this.sourceCaches[a],delete this._updatedSources[a],d.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,d){if(this._checkLoaded(),this.sourceCaches[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const v=this.sourceCaches[a].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(a){return this.sourceCaches[a]&&this.sourceCaches[a].getSource()}addLayer(a,d,v={}){this._checkLoaded();const _=a.id;if(this.getLayer(_))return void this.fire(new s.j(new Error(`Layer "${_}" already exists on this map.`)));let T;if(a.type==="custom"){if(Ki(this,s.aD(a)))return;T=s.aA(a)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(_,a.source),a=s.aB(a),a=s.e(a,{source:_})),this._validate(s.u.layer,`layers.${_}`,a,{arrayIndex:-1},v))return;T=s.aA(a),this._validateLayer(T),T.setEventedParent(this,{layer:{id:_}})}const O=d?this._order.indexOf(d):this._order.length;if(d&&O===-1)this.fire(new s.j(new Error(`Cannot add layer "${_}" before non-existing layer "${d}".`)));else{if(this._order.splice(O,0,_),this._layerOrderChanged=!0,this._layers[_]=T,this._removedLayers[_]&&T.source&&T.type!=="custom"){const z=this._removedLayers[_];delete this._removedLayers[_],z.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(a,d){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new s.j(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===d)return;const v=this._order.indexOf(a);this._order.splice(v,1);const _=d?this._order.indexOf(d):this._order.length;d&&_===-1?this.fire(new s.j(new Error(`Cannot move layer "${a}" before non-existing layer "${d}".`))):(this._order.splice(_,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const d=this._layers[a];if(!d)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${a}".`)));d.setEventedParent(null);const v=this._order.indexOf(a);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=d,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],d.onRemove&&d.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,d,v){this._checkLoaded();const _=this.getLayer(a);_?_.minzoom===d&&_.maxzoom===v||(d!=null&&(_.minzoom=d),v!=null&&(_.maxzoom=v),this._updateLayer(_)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,d,v={}){this._checkLoaded();const _=this.getLayer(a);if(_){if(!s.aE(_.filter,d))return d==null?(_.filter=void 0,void this._updateLayer(_)):void(this._validate(s.u.filter,`layers.${_.id}.filter`,d,null,v)||(_.filter=s.aB(d),this._updateLayer(_)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return s.aB(this.getLayer(a).filter)}setLayoutProperty(a,d,v,_={}){this._checkLoaded();const T=this.getLayer(a);T?s.aE(T.getLayoutProperty(d),v)||(T.setLayoutProperty(d,v,_),this._updateLayer(T)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,d){const v=this.getLayer(a);if(v)return v.getLayoutProperty(d);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,d,v,_={}){this._checkLoaded();const T=this.getLayer(a);T?s.aE(T.getPaintProperty(d),v)||(T.setPaintProperty(d,v,_)&&this._updateLayer(T),this._changed=!0,this._updatedPaintProps[a]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${a}".`)))}getPaintProperty(a,d){return this.getLayer(a).getPaintProperty(d)}setFeatureState(a,d){this._checkLoaded();const v=a.source,_=a.sourceLayer,T=this.sourceCaches[v];if(T===void 0)return void this.fire(new s.j(new Error(`The source '${v}' does not exist in the map's style.`)));const O=T.getSource().type;O==="geojson"&&_?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):O!=="vector"||_?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),T.setFeatureState(_,a.id,d)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,d){this._checkLoaded();const v=a.source,_=this.sourceCaches[v];if(_===void 0)return void this.fire(new s.j(new Error(`The source '${v}' does not exist in the map's style.`)));const T=_.getSource().type,O=T==="vector"?a.sourceLayer:void 0;T!=="vector"||O?d&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):_.removeFeatureState(O,a.id,d):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const d=a.source,v=a.sourceLayer,_=this.sourceCaches[d];if(_!==void 0)return _.getSource().type!=="vector"||v?(a.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),_.getFeatureState(v,a.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=s.aF(this.sourceCaches,(T=>T.serialize())),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,_=this.stylesheet;return s.aG({version:_.version,name:_.name,metadata:_.metadata,light:_.light,sky:_.sky,center:_.center,zoom:_.zoom,bearing:_.bearing,pitch:_.pitch,sprite:_.sprite,glyphs:_.glyphs,transition:_.transition,sources:a,layers:d,terrain:v},(T=>T!==void 0))}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.sourceCaches[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const d=O=>this._layers[O].type==="fill-extrusion",v={},_=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(d(z)){v[z]=O;for(const B of a){const V=B[z];if(V)for(const G of V)_.push(G)}}}_.sort(((O,z)=>z.intersectionZ-O.intersectionZ));const T=[];for(let O=this._order.length-1;O>=0;O--){const z=this._order[O];if(d(z))for(let B=_.length-1;B>=0;B--){const V=_[B].feature;if(v[V.layer.id]<O)break;T.push(V),_.pop()}else for(const B of a){const V=B[z];if(V)for(const G of V)T.push(G.feature)}}return T}queryRenderedFeatures(a,d,v){d&&d.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",d.filter,null,d);const _={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(const z of d.layers){const B=this._layers[z];if(!B)return this.fire(new s.j(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];_[B.source]=!0}}const T=[];d.availableImages=this._availableImages;const O=this._serializedAllLayers();for(const z in this.sourceCaches)d.layers&&!_[z]||T.push(rr(this.sourceCaches[z],this._layers,O,a,d,v));return this.placement&&T.push((function(z,B,V,G,Z,ne,se){const ce={},fe=ne.queryRenderedSymbols(G),ge=[];for(const xe of Object.keys(fe).map(Number))ge.push(se[xe]);ge.sort(Bt);for(const xe of ge){const Pe=xe.featureIndex.lookupSymbolFeatures(fe[xe.bucketInstanceId],B,xe.bucketIndex,xe.sourceLayerIndex,Z.filter,Z.layers,Z.availableImages,z);for(const pe in Pe){const Me=ce[pe]=ce[pe]||[],ze=Pe[pe];ze.sort(((qe,ot)=>{const pt=xe.featureSortOrder;if(pt){const _t=pt.indexOf(qe.featureIndex);return pt.indexOf(ot.featureIndex)-_t}return ot.featureIndex-qe.featureIndex}));for(const qe of ze)Me.push(qe)}}for(const xe in ce)ce[xe].forEach((Pe=>{const pe=Pe.feature,Me=V[z[xe].source].getFeatureState(pe.layer["source-layer"],pe.id);pe.source=pe.layer.source,pe.layer["source-layer"]&&(pe.sourceLayer=pe.layer["source-layer"]),pe.state=Me}));return ce})(this._layers,O,this.sourceCaches,a,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(a,d){d&&d.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",d.filter,null,d);const v=this.sourceCaches[a];return v?(function(_,T){const O=_.getRenderableIds().map((V=>_.getTileByID(V))),z=[],B={};for(let V=0;V<O.length;V++){const G=O[V],Z=G.tileID.canonical.key;B[Z]||(B[Z]=!0,G.querySourceFeatures(z,T))}return z})(v,d):[]}getLight(){return this.light.getLight()}setLight(a,d={}){this._checkLoaded();const v=this.light.getLight();let _=!1;for(const O in a)if(!s.aE(a[O],v[O])){_=!0;break}if(!_)return;const T={now:S.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,d),this.light.updateTransitions(T)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,d={}){const v=this.getSky();let _=!1;if(!a&&!v)return;if(a&&!v)_=!0;else if(!a&&v)_=!0;else for(const O in a)if(!s.aE(a[O],v[O])){_=!0;break}if(!_)return;const T={now:S.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,d),this.sky.updateTransitions(T)}_validate(a,d,v,_,T={}){return(!T||T.validate!==!1)&&Ki(this,a.call(s.u,s.e({key:d,style:this.serialize(),value:v,styleSpec:s.v},_)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Gi().off(mt,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.sourceCaches[a].clearTiles()}_reloadSource(a){this.sourceCaches[a].resume(),this.sourceCaches[a].reload()}_updateSources(a){for(const d in this.sourceCaches)this.sourceCaches[d].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.sourceCaches)this._reloadSource(a)}_updatePlacement(a,d,v,_,T=!1){let O=!1,z=!1;const B={};for(const V of this._order){const G=this._layers[V];if(G.type!=="symbol")continue;if(!B[G.source]){const ne=this.sourceCaches[G.source];B[G.source]=ne.getRenderableIds(!0).map((se=>ne.getTileByID(se))).sort(((se,ce)=>ce.tileID.overscaledZ-se.tileID.overscaledZ||(se.tileID.isLessThan(ce.tileID)?-1:1)))}const Z=this.crossTileSymbolIndex.addLayer(G,B[G.source],a.center.lng);O=O||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(S.now(),a.zoom))&&(this.pauseablePlacement=new Du(a,this.map.terrain,this._order,T,d,v,_,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(S.now()),z=!0),O&&this.pauseablePlacement.placement.setStale()),z||O)for(const V of this._order){const G=this._layers[V];G.type==="symbol"&&this.placement.updateLayerOpacities(G,B[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(S.now())}_releaseSymbolFadeTiles(){for(const a in this.sourceCaches)this.sourceCaches[a].releaseSymbolFadeTiles()}getImages(a,d){return s._(this,void 0,void 0,(function*(){const v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const _=this.sourceCaches[d.source];return _&&_.setDependencies(d.tileID.key,d.type,d.icons),v}))}getGlyphs(a,d){return s._(this,void 0,void 0,(function*(){const v=yield this.glyphManager.getGlyphs(d.stacks),_=this.sourceCaches[d.source];return _&&_.setDependencies(d.tileID.key,d.type,[""]),v}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,d={}){this._checkLoaded(),a&&this._validate(s.u.glyphs,"glyphs",a,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}addSprite(a,d,v={},_){this._checkLoaded();const T=[{id:a,url:d}],O=[...ve(this.stylesheet.sprite),...T];this._validate(s.u.sprite,"sprite",O,null,v)||(this.stylesheet.sprite=O,this._loadSprite(T,!0,_))}removeSprite(a){this._checkLoaded();const d=ve(this.stylesheet.sprite);if(d.find((v=>v.id===a))){if(this._spritesImagesIds[a])for(const v of this._spritesImagesIds[a])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex((v=>v.id===a)),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return ve(this.stylesheet.sprite)}setSprite(a,d={},v){this._checkLoaded(),a&&this._validate(s.u.sprite,"sprite",a,null,d)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,v):(this._unloadSprite(),v&&v(null)))}}var Wo=s.Y([{name:"a_pos",type:"Int16",components:2}]);const Ho={prelude:Dr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Dr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Dr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Dr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Dr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Dr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Dr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Dr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Dr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Dr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Dr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Dr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Dr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Dr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Dr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Dr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Dr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Dr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Dr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Dr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Dr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Dr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Dr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Dr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Dr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Dr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Dr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Dr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Dr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Dr(P,a){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=a.match(/attribute ([\w]+) ([\w]+)/g),_=P.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),O=T?T.concat(_):_,z={};return{fragmentSource:P=P.replace(d,((B,V,G,Z,ne)=>(z[ne]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
varying ${G} ${Z} ${ne};
#else
uniform ${G} ${Z} u_${ne};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ne}
    ${G} ${Z} ${ne} = u_${ne};
#endif
`))),vertexSource:a=a.replace(d,((B,V,G,Z,ne)=>{const se=Z==="float"?"vec2":"vec4",ce=ne.match(/color/)?"color":se;return z[ne]?V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${se} a_${ne};
varying ${G} ${Z} ${ne};
#else
uniform ${G} ${Z} u_${ne};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = a_${ne};
#else
    ${G} ${Z} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${ne} = unpack_mix_${ce}(a_${ne}, u_${ne}_t);
#else
    ${G} ${Z} ${ne} = u_${ne};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${ne}
uniform lowp float u_${ne}_t;
attribute ${G} ${se} a_${ne};
#else
uniform ${G} ${Z} u_${ne};
#endif
`:ce==="vec4"?`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${Z} ${ne} = a_${ne};
#else
    ${G} ${Z} ${ne} = u_${ne};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ne}
    ${G} ${Z} ${ne} = unpack_mix_${ce}(a_${ne}, u_${ne}_t);
#else
    ${G} ${Z} ${ne} = u_${ne};
#endif
`})),staticAttributes:v,staticUniforms:O}}class nl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,d,v,_,T,O,z,B,V){this.context=a;let G=this.boundPaintVertexBuffers.length!==_.length;for(let Z=0;!G&&Z<_.length;Z++)this.boundPaintVertexBuffers[Z]!==_[Z]&&(G=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||G||this.boundIndexBuffer!==T||this.boundVertexOffset!==O||this.boundDynamicVertexBuffer!==z||this.boundDynamicVertexBuffer2!==B||this.boundDynamicVertexBuffer3!==V?this.freshBind(d,v,_,T,O,z,B,V):(a.bindVertexArray.set(this.vao),z&&z.bind(),T&&T.dynamicDraw&&T.bind(),B&&B.bind(),V&&V.bind())}freshBind(a,d,v,_,T,O,z,B){const V=a.numAttributes,G=this.context,Z=G.gl;this.vao&&this.destroy(),this.vao=G.createVertexArray(),G.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=_,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=O,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=B,d.enableAttributes(Z,a);for(const ne of v)ne.enableAttributes(Z,a);O&&O.enableAttributes(Z,a),z&&z.enableAttributes(Z,a),B&&B.enableAttributes(Z,a),d.bind(),d.setVertexAttribPointers(Z,a,T);for(const ne of v)ne.bind(),ne.setVertexAttribPointers(Z,a,T);O&&(O.bind(),O.setVertexAttribPointers(Z,a,T)),_&&_.bind(),z&&(z.bind(),z.setVertexAttribPointers(Z,a,T)),B&&(B.bind(),B.setVertexAttribPointers(Z,a,T)),G.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Vh=(P,a,d,v,_)=>({u_matrix:P,u_texture:0,u_ele_delta:a,u_fog_matrix:d,u_fog_color:v?v.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:v?v.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?v.calculateFogBlendOpacity(_):0,u_horizon_color:v?v.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:v?v.properties.get("horizon-fog-blend"):1});function ws(P){const a=[];for(let d=0;d<P.length;d++){if(P[d]===null)continue;const v=P[d].split(" ");a.push(v.pop())}return a}class qr{constructor(a,d,v,_,T,O){const z=a.gl;this.program=z.createProgram();const B=ws(d.staticAttributes),V=v?v.getBinderAttributes():[],G=B.concat(V),Z=Ho.prelude.staticUniforms?ws(Ho.prelude.staticUniforms):[],ne=d.staticUniforms?ws(d.staticUniforms):[],se=v?v.getBinderUniforms():[],ce=Z.concat(ne).concat(se),fe=[];for(const qe of ce)fe.indexOf(qe)<0&&fe.push(qe);const ge=v?v.defines():[];T&&ge.push("#define OVERDRAW_INSPECTOR;"),O&&ge.push("#define TERRAIN3D;");const xe=ge.concat(Ho.prelude.fragmentSource,d.fragmentSource).join(`
`),Pe=ge.concat(Ho.prelude.vertexSource,d.vertexSource).join(`
`),pe=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(pe,xe),z.compileShader(pe),!z.getShaderParameter(pe,z.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${z.getShaderInfoLog(pe)}`);z.attachShader(this.program,pe);const Me=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);if(z.shaderSource(Me,Pe),z.compileShader(Me),!z.getShaderParameter(Me,z.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${z.getShaderInfoLog(Me)}`);z.attachShader(this.program,Me),this.attributes={};const ze={};this.numAttributes=G.length;for(let qe=0;qe<this.numAttributes;qe++)G[qe]&&(z.bindAttribLocation(this.program,qe,G[qe]),this.attributes[G[qe]]=qe);if(z.linkProgram(this.program),!z.getProgramParameter(this.program,z.LINK_STATUS))throw new Error(`Program failed to link: ${z.getProgramInfoLog(this.program)}`);z.deleteShader(Me),z.deleteShader(pe);for(let qe=0;qe<fe.length;qe++){const ot=fe[qe];if(ot&&!ze[ot]){const pt=z.getUniformLocation(this.program,ot);pt&&(ze[ot]=pt)}}this.fixedUniforms=_(a,ze),this.terrainUniforms=((qe,ot)=>({u_depth:new s.aH(qe,ot.u_depth),u_terrain:new s.aH(qe,ot.u_terrain),u_terrain_dim:new s.aI(qe,ot.u_terrain_dim),u_terrain_matrix:new s.aJ(qe,ot.u_terrain_matrix),u_terrain_unpack:new s.aK(qe,ot.u_terrain_unpack),u_terrain_exaggeration:new s.aI(qe,ot.u_terrain_exaggeration)}))(a,ze),this.binderUniforms=v?v.getUniforms(a,ze):[]}draw(a,d,v,_,T,O,z,B,V,G,Z,ne,se,ce,fe,ge,xe,Pe){const pe=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(v),a.setStencilMode(_),a.setColorMode(T),a.setCullFace(O),B){a.activeTexture.set(pe.TEXTURE2),pe.bindTexture(pe.TEXTURE_2D,B.depthTexture),a.activeTexture.set(pe.TEXTURE3),pe.bindTexture(pe.TEXTURE_2D,B.texture);for(const ze in this.terrainUniforms)this.terrainUniforms[ze].set(B[ze])}for(const ze in this.fixedUniforms)this.fixedUniforms[ze].set(z[ze]);fe&&fe.setUniforms(a,this.binderUniforms,se,{zoom:ce});let Me=0;switch(d){case pe.LINES:Me=2;break;case pe.TRIANGLES:Me=3;break;case pe.LINE_STRIP:Me=1}for(const ze of ne.get()){const qe=ze.vaos||(ze.vaos={});(qe[V]||(qe[V]=new nl)).bind(a,this,G,fe?fe.getPaintVertexBuffers():[],Z,ze.vertexOffset,ge,xe,Pe),pe.drawElements(d,ze.primitiveLength*Me,pe.UNSIGNED_SHORT,ze.primitiveOffset*Me*2)}}}function zu(P,a,d){const v=1/gr(d,1,a.transform.tileZoom),_=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,a.transform.tileZoom)/_,O=T*(d.tileID.canonical.x+d.tileID.wrap*_),z=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,P.fromScale,P.toScale],u_fade:P.t,u_pixel_coord_upper:[O>>16,z>>16],u_pixel_coord_lower:[65535&O,65535&z]}}const Fl=(P,a,d,v)=>{const _=a.style.light,T=_.properties.get("position"),O=[T.x,T.y,T.z],z=(function(){var V=new s.A(9);return s.A!=Float32Array&&(V[1]=0,V[2]=0,V[3]=0,V[5]=0,V[6]=0,V[7]=0),V[0]=1,V[4]=1,V[8]=1,V})();_.properties.get("anchor")==="viewport"&&(function(V,G){var Z=Math.sin(G),ne=Math.cos(G);V[0]=ne,V[1]=Z,V[2]=0,V[3]=-Z,V[4]=ne,V[5]=0,V[6]=0,V[7]=0,V[8]=1})(z,-a.transform.angle),(function(V,G,Z){var ne=G[0],se=G[1],ce=G[2];V[0]=ne*Z[0]+se*Z[3]+ce*Z[6],V[1]=ne*Z[1]+se*Z[4]+ce*Z[7],V[2]=ne*Z[2]+se*Z[5]+ce*Z[8]})(O,O,z);const B=_.properties.get("color");return{u_matrix:P,u_lightpos:O,u_lightintensity:_.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+d,u_opacity:v}},jl=(P,a,d,v,_,T,O)=>s.e(Fl(P,a,d,v),zu(T,a,O),{u_height_factor:-Math.pow(2,_.overscaledZ)/O.tileSize/8}),il=P=>({u_matrix:P}),qh=(P,a,d,v)=>s.e(il(P),zu(d,a,v)),kd=(P,a)=>({u_matrix:P,u_world:a}),Fc=(P,a,d,v,_)=>s.e(qh(P,a,d,v),{u_world:_}),jc=(P,a,d,v)=>{const _=P.transform;let T,O;if(v.paint.get("circle-pitch-alignment")==="map"){const z=gr(d,1,_.zoom);T=!0,O=[z,z]}else T=!1,O=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:P.translatePosMatrix(a.posMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+T,u_device_pixel_ratio:P.pixelRatio,u_extrude_scale:O}},Yi=(P,a,d)=>({u_matrix:P,u_inv_matrix:a,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),Ia=(P,a,d=1)=>({u_matrix:P,u_color:a,u_overlay:0,u_overlay_scale:d}),jn=P=>({u_matrix:P}),ai=(P,a,d,v)=>({u_matrix:P,u_extrude_scale:gr(a,1,d),u_intensity:v}),Ss=(P,a,d,v)=>{const _=s.H();s.aP(_,0,P.width,P.height,0,0,1);const T=P.context.gl;return{u_matrix:_,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:a.paint.get("heatmap-opacity")}};function so(P,a){const d=Math.pow(2,a.canonical.z),v=a.canonical.y;return[new s.Z(0,v/d).toLngLat().lat,new s.Z(0,(v+1)/d).toLngLat().lat]}const Bc=(P,a,d,v)=>{const _=P.transform;return{u_matrix:Ru(P,a,d,v),u_ratio:1/gr(a,1,_.zoom),u_device_pixel_ratio:P.pixelRatio,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},Uh=(P,a,d,v,_)=>s.e(Bc(P,a,d,_),{u_image:0,u_image_height:v}),Mo=(P,a,d,v,_)=>{const T=P.transform,O=Wh(a,T);return{u_matrix:Ru(P,a,d,_),u_texsize:a.imageAtlasTexture.size,u_ratio:1/gr(a,1,T.zoom),u_device_pixel_ratio:P.pixelRatio,u_image:0,u_scale:[O,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},km=(P,a,d,v,_,T)=>{const O=P.lineAtlas,z=Wh(a,P.transform),B=d.layout.get("line-cap")==="round",V=O.getDash(v.from,B),G=O.getDash(v.to,B),Z=V.width*_.fromScale,ne=G.width*_.toScale;return s.e(Bc(P,a,d,T),{u_patternscale_a:[z/Z,-V.height/2],u_patternscale_b:[z/ne,-G.height/2],u_sdfgamma:O.width/(256*Math.min(Z,ne)*P.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:G.y,u_mix:_.t})};function Wh(P,a){return 1/gr(P,1,a.tileZoom)}function Ru(P,a,d,v){return P.translatePosMatrix(v?v.posMatrix:a.tileID.posMatrix,a,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const Ed=(P,a,d,v,_)=>{return{u_matrix:P,u_tl_parent:a,u_scale_parent:d,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*_.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:_.paint.get("raster-brightness-min"),u_brightness_high:_.paint.get("raster-brightness-max"),u_saturation_factor:(O=_.paint.get("raster-saturation"),O>0?1-1/(1.001-O):-O),u_contrast_factor:(T=_.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:Em(_.paint.get("raster-hue-rotate"))};var T,O};function Em(P){P*=Math.PI/180;const a=Math.sin(P),d=Math.cos(P);return[(2*d+1)/3,(-Math.sqrt(3)*a-d+1)/3,(Math.sqrt(3)*a-d+1)/3]}const Bl=(P,a,d,v,_,T,O,z,B,V,G,Z,ne,se)=>{const ce=O.transform;return{u_is_size_zoom_constant:+(P==="constant"||P==="source"),u_is_size_feature_constant:+(P==="constant"||P==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ce.cameraToCenterDistance,u_pitch:ce.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ce.width/ce.height,u_fade_change:O.options.fadeDuration?O.symbolFadeChange:1,u_matrix:z,u_label_plane_matrix:B,u_coord_matrix:V,u_is_text:+Z,u_pitch_with_map:+v,u_is_along_line:_,u_is_variable_anchor:T,u_texsize:ne,u_texture:0,u_translation:G,u_pitched_scale:se}},Go=(P,a,d,v,_,T,O,z,B,V,G,Z,ne,se,ce)=>{const fe=O.transform;return s.e(Bl(P,a,d,v,_,T,O,z,B,V,G,Z,ne,ce),{u_gamma_scale:v?Math.cos(fe._pitch)*fe.cameraToCenterDistance:1,u_device_pixel_ratio:O.pixelRatio,u_is_halo:1})},Ts=(P,a,d,v,_,T,O,z,B,V,G,Z,ne,se)=>s.e(Go(P,a,d,v,_,T,O,z,B,V,G,!0,Z,!0,se),{u_texsize_icon:ne,u_texture_icon:1}),al=(P,a,d)=>({u_matrix:P,u_opacity:a,u_color:d}),Hh=(P,a,d,v,_,T)=>s.e((function(O,z,B,V){const G=B.imageManager.getPattern(O.from.toString()),Z=B.imageManager.getPattern(O.to.toString()),{width:ne,height:se}=B.imageManager.getPixelSize(),ce=Math.pow(2,V.tileID.overscaledZ),fe=V.tileSize*Math.pow(2,B.transform.tileZoom)/ce,ge=fe*(V.tileID.canonical.x+V.tileID.wrap*ce),xe=fe*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:Z.tl,u_pattern_br_b:Z.br,u_texsize:[ne,se],u_mix:z.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:Z.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/gr(V,1,B.transform.tileZoom),u_pixel_coord_upper:[ge>>16,xe>>16],u_pixel_coord_lower:[65535&ge,65535&xe]}})(v,T,d,_),{u_matrix:P,u_opacity:a}),Gh={fillExtrusion:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_lightpos:new s.aN(P,a.u_lightpos),u_lightintensity:new s.aI(P,a.u_lightintensity),u_lightcolor:new s.aN(P,a.u_lightcolor),u_vertical_gradient:new s.aI(P,a.u_vertical_gradient),u_opacity:new s.aI(P,a.u_opacity)}),fillExtrusionPattern:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_lightpos:new s.aN(P,a.u_lightpos),u_lightintensity:new s.aI(P,a.u_lightintensity),u_lightcolor:new s.aN(P,a.u_lightcolor),u_vertical_gradient:new s.aI(P,a.u_vertical_gradient),u_height_factor:new s.aI(P,a.u_height_factor),u_image:new s.aH(P,a.u_image),u_texsize:new s.aO(P,a.u_texsize),u_pixel_coord_upper:new s.aO(P,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(P,a.u_pixel_coord_lower),u_scale:new s.aN(P,a.u_scale),u_fade:new s.aI(P,a.u_fade),u_opacity:new s.aI(P,a.u_opacity)}),fill:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix)}),fillPattern:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_image:new s.aH(P,a.u_image),u_texsize:new s.aO(P,a.u_texsize),u_pixel_coord_upper:new s.aO(P,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(P,a.u_pixel_coord_lower),u_scale:new s.aN(P,a.u_scale),u_fade:new s.aI(P,a.u_fade)}),fillOutline:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_world:new s.aO(P,a.u_world)}),fillOutlinePattern:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_world:new s.aO(P,a.u_world),u_image:new s.aH(P,a.u_image),u_texsize:new s.aO(P,a.u_texsize),u_pixel_coord_upper:new s.aO(P,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(P,a.u_pixel_coord_lower),u_scale:new s.aN(P,a.u_scale),u_fade:new s.aI(P,a.u_fade)}),circle:(P,a)=>({u_camera_to_center_distance:new s.aI(P,a.u_camera_to_center_distance),u_scale_with_map:new s.aH(P,a.u_scale_with_map),u_pitch_with_map:new s.aH(P,a.u_pitch_with_map),u_extrude_scale:new s.aO(P,a.u_extrude_scale),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_matrix:new s.aJ(P,a.u_matrix)}),collisionBox:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_pixel_extrude_scale:new s.aO(P,a.u_pixel_extrude_scale)}),collisionCircle:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_inv_matrix:new s.aJ(P,a.u_inv_matrix),u_camera_to_center_distance:new s.aI(P,a.u_camera_to_center_distance),u_viewport_size:new s.aO(P,a.u_viewport_size)}),debug:(P,a)=>({u_color:new s.aL(P,a.u_color),u_matrix:new s.aJ(P,a.u_matrix),u_overlay:new s.aH(P,a.u_overlay),u_overlay_scale:new s.aI(P,a.u_overlay_scale)}),clippingMask:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix)}),heatmap:(P,a)=>({u_extrude_scale:new s.aI(P,a.u_extrude_scale),u_intensity:new s.aI(P,a.u_intensity),u_matrix:new s.aJ(P,a.u_matrix)}),heatmapTexture:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_world:new s.aO(P,a.u_world),u_image:new s.aH(P,a.u_image),u_color_ramp:new s.aH(P,a.u_color_ramp),u_opacity:new s.aI(P,a.u_opacity)}),hillshade:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_image:new s.aH(P,a.u_image),u_latrange:new s.aO(P,a.u_latrange),u_light:new s.aO(P,a.u_light),u_shadow:new s.aL(P,a.u_shadow),u_highlight:new s.aL(P,a.u_highlight),u_accent:new s.aL(P,a.u_accent)}),hillshadePrepare:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_image:new s.aH(P,a.u_image),u_dimension:new s.aO(P,a.u_dimension),u_zoom:new s.aI(P,a.u_zoom),u_unpack:new s.aK(P,a.u_unpack)}),line:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_ratio:new s.aI(P,a.u_ratio),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(P,a.u_units_to_pixels)}),lineGradient:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_ratio:new s.aI(P,a.u_ratio),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(P,a.u_units_to_pixels),u_image:new s.aH(P,a.u_image),u_image_height:new s.aI(P,a.u_image_height)}),linePattern:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_texsize:new s.aO(P,a.u_texsize),u_ratio:new s.aI(P,a.u_ratio),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_image:new s.aH(P,a.u_image),u_units_to_pixels:new s.aO(P,a.u_units_to_pixels),u_scale:new s.aN(P,a.u_scale),u_fade:new s.aI(P,a.u_fade)}),lineSDF:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_ratio:new s.aI(P,a.u_ratio),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_units_to_pixels:new s.aO(P,a.u_units_to_pixels),u_patternscale_a:new s.aO(P,a.u_patternscale_a),u_patternscale_b:new s.aO(P,a.u_patternscale_b),u_sdfgamma:new s.aI(P,a.u_sdfgamma),u_image:new s.aH(P,a.u_image),u_tex_y_a:new s.aI(P,a.u_tex_y_a),u_tex_y_b:new s.aI(P,a.u_tex_y_b),u_mix:new s.aI(P,a.u_mix)}),raster:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_tl_parent:new s.aO(P,a.u_tl_parent),u_scale_parent:new s.aI(P,a.u_scale_parent),u_buffer_scale:new s.aI(P,a.u_buffer_scale),u_fade_t:new s.aI(P,a.u_fade_t),u_opacity:new s.aI(P,a.u_opacity),u_image0:new s.aH(P,a.u_image0),u_image1:new s.aH(P,a.u_image1),u_brightness_low:new s.aI(P,a.u_brightness_low),u_brightness_high:new s.aI(P,a.u_brightness_high),u_saturation_factor:new s.aI(P,a.u_saturation_factor),u_contrast_factor:new s.aI(P,a.u_contrast_factor),u_spin_weights:new s.aN(P,a.u_spin_weights)}),symbolIcon:(P,a)=>({u_is_size_zoom_constant:new s.aH(P,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(P,a.u_is_size_feature_constant),u_size_t:new s.aI(P,a.u_size_t),u_size:new s.aI(P,a.u_size),u_camera_to_center_distance:new s.aI(P,a.u_camera_to_center_distance),u_pitch:new s.aI(P,a.u_pitch),u_rotate_symbol:new s.aH(P,a.u_rotate_symbol),u_aspect_ratio:new s.aI(P,a.u_aspect_ratio),u_fade_change:new s.aI(P,a.u_fade_change),u_matrix:new s.aJ(P,a.u_matrix),u_label_plane_matrix:new s.aJ(P,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(P,a.u_coord_matrix),u_is_text:new s.aH(P,a.u_is_text),u_pitch_with_map:new s.aH(P,a.u_pitch_with_map),u_is_along_line:new s.aH(P,a.u_is_along_line),u_is_variable_anchor:new s.aH(P,a.u_is_variable_anchor),u_texsize:new s.aO(P,a.u_texsize),u_texture:new s.aH(P,a.u_texture),u_translation:new s.aO(P,a.u_translation),u_pitched_scale:new s.aI(P,a.u_pitched_scale)}),symbolSDF:(P,a)=>({u_is_size_zoom_constant:new s.aH(P,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(P,a.u_is_size_feature_constant),u_size_t:new s.aI(P,a.u_size_t),u_size:new s.aI(P,a.u_size),u_camera_to_center_distance:new s.aI(P,a.u_camera_to_center_distance),u_pitch:new s.aI(P,a.u_pitch),u_rotate_symbol:new s.aH(P,a.u_rotate_symbol),u_aspect_ratio:new s.aI(P,a.u_aspect_ratio),u_fade_change:new s.aI(P,a.u_fade_change),u_matrix:new s.aJ(P,a.u_matrix),u_label_plane_matrix:new s.aJ(P,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(P,a.u_coord_matrix),u_is_text:new s.aH(P,a.u_is_text),u_pitch_with_map:new s.aH(P,a.u_pitch_with_map),u_is_along_line:new s.aH(P,a.u_is_along_line),u_is_variable_anchor:new s.aH(P,a.u_is_variable_anchor),u_texsize:new s.aO(P,a.u_texsize),u_texture:new s.aH(P,a.u_texture),u_gamma_scale:new s.aI(P,a.u_gamma_scale),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_is_halo:new s.aH(P,a.u_is_halo),u_translation:new s.aO(P,a.u_translation),u_pitched_scale:new s.aI(P,a.u_pitched_scale)}),symbolTextAndIcon:(P,a)=>({u_is_size_zoom_constant:new s.aH(P,a.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(P,a.u_is_size_feature_constant),u_size_t:new s.aI(P,a.u_size_t),u_size:new s.aI(P,a.u_size),u_camera_to_center_distance:new s.aI(P,a.u_camera_to_center_distance),u_pitch:new s.aI(P,a.u_pitch),u_rotate_symbol:new s.aH(P,a.u_rotate_symbol),u_aspect_ratio:new s.aI(P,a.u_aspect_ratio),u_fade_change:new s.aI(P,a.u_fade_change),u_matrix:new s.aJ(P,a.u_matrix),u_label_plane_matrix:new s.aJ(P,a.u_label_plane_matrix),u_coord_matrix:new s.aJ(P,a.u_coord_matrix),u_is_text:new s.aH(P,a.u_is_text),u_pitch_with_map:new s.aH(P,a.u_pitch_with_map),u_is_along_line:new s.aH(P,a.u_is_along_line),u_is_variable_anchor:new s.aH(P,a.u_is_variable_anchor),u_texsize:new s.aO(P,a.u_texsize),u_texsize_icon:new s.aO(P,a.u_texsize_icon),u_texture:new s.aH(P,a.u_texture),u_texture_icon:new s.aH(P,a.u_texture_icon),u_gamma_scale:new s.aI(P,a.u_gamma_scale),u_device_pixel_ratio:new s.aI(P,a.u_device_pixel_ratio),u_is_halo:new s.aH(P,a.u_is_halo),u_translation:new s.aO(P,a.u_translation),u_pitched_scale:new s.aI(P,a.u_pitched_scale)}),background:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_opacity:new s.aI(P,a.u_opacity),u_color:new s.aL(P,a.u_color)}),backgroundPattern:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_opacity:new s.aI(P,a.u_opacity),u_image:new s.aH(P,a.u_image),u_pattern_tl_a:new s.aO(P,a.u_pattern_tl_a),u_pattern_br_a:new s.aO(P,a.u_pattern_br_a),u_pattern_tl_b:new s.aO(P,a.u_pattern_tl_b),u_pattern_br_b:new s.aO(P,a.u_pattern_br_b),u_texsize:new s.aO(P,a.u_texsize),u_mix:new s.aI(P,a.u_mix),u_pattern_size_a:new s.aO(P,a.u_pattern_size_a),u_pattern_size_b:new s.aO(P,a.u_pattern_size_b),u_scale_a:new s.aI(P,a.u_scale_a),u_scale_b:new s.aI(P,a.u_scale_b),u_pixel_coord_upper:new s.aO(P,a.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(P,a.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(P,a.u_tile_units_to_pixels)}),terrain:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_texture:new s.aH(P,a.u_texture),u_ele_delta:new s.aI(P,a.u_ele_delta),u_fog_matrix:new s.aJ(P,a.u_fog_matrix),u_fog_color:new s.aL(P,a.u_fog_color),u_fog_ground_blend:new s.aI(P,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(P,a.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(P,a.u_horizon_color),u_horizon_fog_blend:new s.aI(P,a.u_horizon_fog_blend)}),terrainDepth:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_ele_delta:new s.aI(P,a.u_ele_delta)}),terrainCoords:(P,a)=>({u_matrix:new s.aJ(P,a.u_matrix),u_texture:new s.aH(P,a.u_texture),u_terrain_coords_id:new s.aI(P,a.u_terrain_coords_id),u_ele_delta:new s.aI(P,a.u_ele_delta)}),sky:(P,a)=>({u_sky_color:new s.aL(P,a.u_sky_color),u_horizon_color:new s.aL(P,a.u_horizon_color),u_horizon:new s.aI(P,a.u_horizon),u_sky_horizon_blend:new s.aI(P,a.u_sky_horizon_blend)})};class Da{constructor(a,d,v){this.context=a;const _=a.gl;this.buffer=_.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),_.bufferData(_.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Nc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lu{constructor(a,d,v,_){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=_,this.context=a;const T=a.gl;this.buffer=T.createBuffer(),a.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,d){for(let v=0;v<this.attributes.length;v++){const _=d.attributes[this.attributes[v].name];_!==void 0&&a.enableVertexAttribArray(_)}}setVertexAttribPointers(a,d,v){for(let _=0;_<this.attributes.length;_++){const T=this.attributes[_],O=d.attributes[T.name];O!==void 0&&a.vertexAttribPointer(O,T.components,a[Nc[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ps=new WeakMap;function Ri(P){var a;if(Ps.has(P))return Ps.get(P);{const d=(a=P.getParameter(P.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Ps.set(P,d),d}}class zr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ol extends zr{getDefault(){return s.aM.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Md extends zr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Zo extends zr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class $c extends zr{getDefault(){return[!0,!0,!0,!0]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Zh extends zr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class ya extends zr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class sl extends zr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const d=this.current;(a.func!==d.func||a.ref!==d.ref||a.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Fu extends zr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class Nl extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=a,this.dirty=!1}}class Cd extends zr{getDefault(){return[0,1]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class Vc extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=a,this.dirty=!1}}class qc extends zr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class lo extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.BLEND):d.disable(d.BLEND),this.current=a,this.dirty=!1}}class ju extends zr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class Od extends zr{getDefault(){return s.aM.transparent}set(a){const d=this.current;(a.r!==d.r||a.g!==d.g||a.b!==d.b||a.a!==d.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Id extends zr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class Bu extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;a?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=a,this.dirty=!1}}class Mm extends zr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class $l extends zr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class Cm extends zr{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Om extends zr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Dd extends zr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const d=this.current;(a[0]!==d[0]||a[1]!==d[1]||a[2]!==d[2]||a[3]!==d[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class zd extends zr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Rd extends zr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Uc extends zr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class Ld extends zr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Wc extends zr{getDefault(){return null}set(a){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Xo extends zr{getDefault(){return null}set(a){var d;if(a===this.current&&!this.dirty)return;const v=this.gl;Ri(v)?v.bindVertexArray(a):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class Xh extends zr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Nu extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Kh extends zr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class Hc extends zr{constructor(a,d){super(a),this.context=a,this.parent=d}getDefault(){return null}}class Yh extends Hc{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class As extends Hc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Jh extends Hc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Im{constructor(a,d,v,_,T){this.context=a,this.width=d,this.height=v;const O=a.gl,z=this.framebuffer=O.createFramebuffer();if(this.colorAttachment=new Yh(a,z),_)this.depthAttachment=T?new Jh(a,z):new As(a,z);else if(T)throw new Error("Stencil cannot be set without depth");if(O.checkFramebufferStatus(O.FRAMEBUFFER)!==O.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const a=this.context.gl,d=this.colorAttachment.get();if(d&&a.deleteTexture(d),this.depthAttachment){const v=this.depthAttachment.get();v&&a.deleteRenderbuffer(v)}a.deleteFramebuffer(this.framebuffer)}}class On{constructor(a,d,v){this.blendFunction=a,this.blendColor=d,this.mask=v}}On.Replace=[1,0],On.disabled=new On(On.Replace,s.aM.transparent,[!1,!1,!1,!1]),On.unblended=new On(On.Replace,s.aM.transparent,[!0,!0,!0,!0]),On.alphaBlended=new On([1,771],s.aM.transparent,[!0,!0,!0,!0]);class Dm{constructor(a){var d,v;if(this.gl=a,this.clearColor=new ol(this),this.clearDepth=new Md(this),this.clearStencil=new Zo(this),this.colorMask=new $c(this),this.depthMask=new Zh(this),this.stencilMask=new ya(this),this.stencilFunc=new sl(this),this.stencilOp=new Fu(this),this.stencilTest=new Nl(this),this.depthRange=new Cd(this),this.depthTest=new Vc(this),this.depthFunc=new qc(this),this.blend=new lo(this),this.blendFunc=new ju(this),this.blendColor=new Od(this),this.blendEquation=new Id(this),this.cullFace=new Bu(this),this.cullFaceSide=new Mm(this),this.frontFace=new $l(this),this.program=new Cm(this),this.activeTexture=new Om(this),this.viewport=new Dd(this),this.bindFramebuffer=new zd(this),this.bindRenderbuffer=new Rd(this),this.bindTexture=new Uc(this),this.bindVertexBuffer=new Ld(this),this.bindElementBuffer=new Wc(this),this.bindVertexArray=new Xo(this),this.pixelStoreUnpack=new Xh(this),this.pixelStoreUnpackPremultiplyAlpha=new Nu(this),this.pixelStoreUnpackFlipY=new Kh(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Ri(a)){this.HALF_FLOAT=a.HALF_FLOAT;const _=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=a.RGBA16F)!==null&&d!==void 0?d:_?.RGBA16F_EXT,this.RGB16F=(v=a.RGB16F)!==null&&v!==void 0?v:_?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const _=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=_?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,d){return new Da(this,a,d)}createVertexBuffer(a,d,v){return new Lu(this,a,d,v)}createRenderbuffer(a,d,v){const _=this.gl,T=_.createRenderbuffer();return this.bindRenderbuffer.set(T),_.renderbufferStorage(_.RENDERBUFFER,a,d,v),this.bindRenderbuffer.set(null),T}createFramebuffer(a,d,v,_){return new Im(this,a,d,v,_)}clear({color:a,depth:d,stencil:v}){const _=this.gl;let T=0;a&&(T|=_.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=_.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(T|=_.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),_.clear(T)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){s.aE(a.blendFunction,On.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Ri(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var d;return Ri(this.gl)?this.gl.deleteVertexArray(a):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}class Tr{constructor(a,d,v){this.func=a,this.mask=d,this.range=v}}Tr.ReadOnly=!1,Tr.ReadWrite=!0,Tr.disabled=new Tr(519,Tr.ReadOnly,[0,1]);const Gc=7680;class rn{constructor(a,d,v,_,T,O){this.test=a,this.ref=d,this.mask=v,this.fail=_,this.depthFail=T,this.pass=O}}rn.disabled=new rn({func:519,mask:0},0,0,Gc,Gc,Gc);class Ur{constructor(a,d,v){this.enable=a,this.mode=d,this.frontFace=v}}let uo;function $u(P,a,d,v,_){const T=P.context,O=T.gl,z=P.useProgram("collisionBox"),B=[];let V=0,G=0;for(let xe=0;xe<v.length;xe++){const Pe=v[xe],pe=a.getTile(Pe).getBucket(d);if(!pe)continue;const Me=_?pe.textCollisionBox:pe.iconCollisionBox,ze=pe.collisionCircleArray;if(ze.length>0){const qe=s.H();s.aQ(qe,pe.placementInvProjMatrix,P.transform.glCoordMatrix),s.aQ(qe,qe,pe.placementViewportMatrix),B.push({circleArray:ze,circleOffset:G,transform:Pe.posMatrix,invTransform:qe,coord:Pe}),V+=ze.length/4,G=V}Me&&z.draw(T,O.LINES,Tr.disabled,rn.disabled,P.colorModeForRenderPass(),Ur.disabled,{u_matrix:Pe.posMatrix,u_pixel_extrude_scale:[1/(Z=P.transform).width,1/Z.height]},P.style.map.terrain&&P.style.map.terrain.getTerrainData(Pe),d.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,null,P.transform.zoom,null,null,Me.collisionVertexBuffer)}var Z;if(!_||!B.length)return;const ne=P.useProgram("collisionCircle"),se=new s.aR;se.resize(4*V),se._trim();let ce=0;for(const xe of B)for(let Pe=0;Pe<xe.circleArray.length/4;Pe++){const pe=4*Pe,Me=xe.circleArray[pe+0],ze=xe.circleArray[pe+1],qe=xe.circleArray[pe+2],ot=xe.circleArray[pe+3];se.emplace(ce++,Me,ze,qe,ot,0),se.emplace(ce++,Me,ze,qe,ot,1),se.emplace(ce++,Me,ze,qe,ot,2),se.emplace(ce++,Me,ze,qe,ot,3)}(!uo||uo.length<2*V)&&(uo=(function(xe){const Pe=2*xe,pe=new s.aT;pe.resize(Pe),pe._trim();for(let Me=0;Me<Pe;Me++){const ze=6*Me;pe.uint16[ze+0]=4*Me+0,pe.uint16[ze+1]=4*Me+1,pe.uint16[ze+2]=4*Me+2,pe.uint16[ze+3]=4*Me+2,pe.uint16[ze+4]=4*Me+3,pe.uint16[ze+5]=4*Me+0}return pe})(V));const fe=T.createIndexBuffer(uo,!0),ge=T.createVertexBuffer(se,s.aS.members,!0);for(const xe of B){const Pe=Yi(xe.transform,xe.invTransform,P.transform);ne.draw(T,O.TRIANGLES,Tr.disabled,rn.disabled,P.colorModeForRenderPass(),Ur.disabled,Pe,P.style.map.terrain&&P.style.map.terrain.getTerrainData(xe.coord),d.id,ge,fe,s.a0.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,P.transform.zoom,null,null,null)}ge.destroy(),fe.destroy()}Ur.disabled=new Ur(!1,1029,2305),Ur.backCCW=new Ur(!0,1029,2305);const Vl=s.an(new Float32Array(16));function Zc(P,a,d,v,_,T){const{horizontalAlign:O,verticalAlign:z}=s.au(P);return new s.P((-(O-.5)*a/_+v[0])*T,(-(z-.5)*d/_+v[1])*T)}function ks(P,a,d,v,_,T){const O=a.tileAnchorPoint.add(new s.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let z=v.mult(T);d||(z=z.rotate(-_));const B=O.add(z);return _e(B.x,B.y,a.labelPlaneMatrix,a.getElevation).point}if(d){const z=tt(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(P),B=Math.atan(z.y/z.x)+(z.x<0?Math.PI:0);return P.add(v.rotate(B))}return P.add(v)}function ll(P,a,d,v,_,T,O,z,B,V,G,Z,ne,se){const ce=P.text.placedSymbolArray,fe=P.text.dynamicLayoutVertexArray,ge=P.icon.dynamicLayoutVertexArray,xe={};fe.clear();for(let Pe=0;Pe<ce.length;Pe++){const pe=ce.get(Pe),Me=pe.hidden||!pe.crossTileID||P.allowVerticalPlacement&&!pe.placedOrientation?null:v[pe.crossTileID];if(Me){const ze=new s.P(pe.anchorX,pe.anchorY),qe={getElevation:se,width:_.width,height:_.height,labelPlaneMatrix:T,pitchWithMap:d,projection:G,tileAnchorPoint:ze,translation:Z,unwrappedTileID:ne},ot=d?_e(ze.x,ze.y,O,se):tt(ze.x,ze.y,qe),pt=ee(_.cameraToCenterDistance,ot.signedDistanceFromCamera);let _t=s.ai(P.textSizeData,B,pe)*pt/s.ap;d&&(_t*=P.tilePixelRatio/z);const{width:kt,height:xt,anchor:yt,textOffset:Rt,textBoxScale:ar}=Me,wt=Zc(yt,kt,xt,Rt,ar,_t),Tt=G.getPitchedTextCorrection(_,ze.add(new s.P(Z[0],Z[1])),ne),ir=ks(ot.point,qe,a,wt,_.angle,Tt),Zr=P.allowVerticalPlacement&&pe.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let dr=0;dr<pe.numGlyphs;dr++)s.aj(fe,ir,Zr);V&&pe.associatedIconIndex>=0&&(xe[pe.associatedIconIndex]={shiftedAnchor:ir,angle:Zr})}else Xt(pe.numGlyphs,fe)}if(V){ge.clear();const Pe=P.icon.placedSymbolArray;for(let pe=0;pe<Pe.length;pe++){const Me=Pe.get(pe);if(Me.hidden)Xt(Me.numGlyphs,ge);else{const ze=xe[pe];if(ze)for(let qe=0;qe<Me.numGlyphs;qe++)s.aj(ge,ze.shiftedAnchor,ze.angle);else Xt(Me.numGlyphs,ge)}}P.icon.dynamicLayoutVertexBuffer.updateData(ge)}P.text.dynamicLayoutVertexBuffer.updateData(fe)}function va(P,a,d){return d.iconsInText&&a?"symbolTextAndIcon":P?"symbolSDF":"symbolIcon"}function Es(P,a,d,v,_,T,O,z,B,V,G,Z){const ne=P.context,se=ne.gl,ce=P.transform,fe=el(),ge=z==="map",xe=B==="map",Pe=z!=="viewport"&&d.layout.get("symbol-placement")!=="point",pe=ge&&!xe&&!Pe,Me=!xe&&Pe,ze=!d.layout.get("symbol-sort-key").isConstant();let qe=!1;const ot=P.depthModeForSublayer(0,Tr.ReadOnly),pt=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),_t=[],kt=fe.getCircleRadiusCorrection(ce);for(const xt of v){const yt=a.getTile(xt),Rt=yt.getBucket(d);if(!Rt)continue;const ar=_?Rt.text:Rt.icon;if(!ar||!ar.segments.get().length||!ar.hasVisibleVertices)continue;const wt=ar.programConfigurations.get(d.id),Tt=_||Rt.sdfIcons,ir=_?Rt.textSizeData:Rt.iconSizeData,Zr=xe||ce.pitch!==0,dr=P.useProgram(va(Tt,_,Rt),wt),vr=s.ag(ir,ce.zoom),Yr=P.style.map.terrain&&P.style.map.terrain.getTerrainData(xt);let oi,xa,Jr,Yn,dn=[0,0],In=null;if(_)xa=yt.glyphAtlasTexture,Jr=se.LINEAR,oi=yt.glyphAtlasTexture.size,Rt.iconsInText&&(dn=yt.imageAtlasTexture.size,In=yt.imageAtlasTexture,Yn=Zr||P.options.rotating||P.options.zooming||ir.kind==="composite"||ir.kind==="camera"?se.LINEAR:se.NEAREST);else{const wr=d.layout.get("icon-size").constantOr(0)!==1||Rt.iconsNeedLinear;xa=yt.imageAtlasTexture,Jr=Tt||P.options.rotating||P.options.zooming||wr||Zr?se.LINEAR:se.NEAREST,oi=yt.imageAtlasTexture.size}const mi=gr(yt,1,P.transform.zoom),mo=Me?xt.posMatrix:Vl,ta=ma(mo,xe,ge,P.transform,mi),go=Ii(mo,xe,ge,P.transform,mi),Rs=Ii(xt.posMatrix,xe,ge,P.transform,mi),ba=fe.translatePosition(P.transform,yt,T,O),ja=pt&&Rt.hasTextData(),Ro=d.layout.get("icon-text-fit")!=="none"&&ja&&Rt.hasIconData();if(Pe){const wr=P.style.map.terrain?(Ls,vo)=>P.style.map.terrain.getElevation(xt,Ls,vo):null,Sa=d.layout.get("text-rotation-alignment")==="map";le(Rt,xt.posMatrix,P,_,ta,Rs,xe,V,Sa,fe,xt.toUnwrapped(),ce.width,ce.height,ba,wr)}const Fi=xt.posMatrix,wa=_&&pt||Ro,yo=Pe||wa?Vl:ta,Ba=go,Bn=Tt&&d.paint.get(_?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vn;vn=Tt?Rt.iconsInText?Ts(ir.kind,vr,pe,xe,Pe,wa,P,Fi,yo,Ba,ba,oi,dn,kt):Go(ir.kind,vr,pe,xe,Pe,wa,P,Fi,yo,Ba,ba,_,oi,!0,kt):Bl(ir.kind,vr,pe,xe,Pe,wa,P,Fi,yo,Ba,ba,_,oi,kt);const gi={program:dr,buffers:ar,uniformValues:vn,atlasTexture:xa,atlasTextureIcon:In,atlasInterpolation:Jr,atlasInterpolationIcon:Yn,isSDF:Tt,hasHalo:Bn};if(ze&&Rt.canOverlap){qe=!0;const wr=ar.segments.get();for(const Sa of wr)_t.push({segments:new s.a0([Sa]),sortKey:Sa.sortKey,state:gi,terrainData:Yr})}else _t.push({segments:ar.segments,sortKey:0,state:gi,terrainData:Yr})}qe&&_t.sort(((xt,yt)=>xt.sortKey-yt.sortKey));for(const xt of _t){const yt=xt.state;if(ne.activeTexture.set(se.TEXTURE0),yt.atlasTexture.bind(yt.atlasInterpolation,se.CLAMP_TO_EDGE),yt.atlasTextureIcon&&(ne.activeTexture.set(se.TEXTURE1),yt.atlasTextureIcon&&yt.atlasTextureIcon.bind(yt.atlasInterpolationIcon,se.CLAMP_TO_EDGE)),yt.isSDF){const Rt=yt.uniformValues;yt.hasHalo&&(Rt.u_is_halo=1,Qh(yt.buffers,xt.segments,d,P,yt.program,ot,G,Z,Rt,xt.terrainData)),Rt.u_is_halo=0}Qh(yt.buffers,xt.segments,d,P,yt.program,ot,G,Z,yt.uniformValues,xt.terrainData)}}function Qh(P,a,d,v,_,T,O,z,B,V){const G=v.context;_.draw(G,G.gl.TRIANGLES,T,O,z,Ur.disabled,B,V,d.id,P.layoutVertexBuffer,P.indexBuffer,a,d.paint,v.transform.zoom,P.programConfigurations.get(d.id),P.dynamicLayoutVertexBuffer,P.opacityVertexBuffer)}function ef(P,a,d,v){const _=P.context,T=_.gl,O=rn.disabled,z=new On([T.ONE,T.ONE],s.aM.transparent,[!0,!0,!0,!0]),B=a.getBucket(d);if(!B)return;const V=v.key;let G=d.heatmapFbos.get(V);G||(G=ql(_,a.tileSize,a.tileSize),d.heatmapFbos.set(V,G)),_.bindFramebuffer.set(G.framebuffer),_.viewport.set([0,0,a.tileSize,a.tileSize]),_.clear({color:s.aM.transparent});const Z=B.programConfigurations.get(d.id),ne=P.useProgram("heatmap",Z),se=P.style.map.terrain.getTerrainData(v);ne.draw(_,T.TRIANGLES,Tr.disabled,O,z,Ur.disabled,ai(v.posMatrix,a,P.transform.zoom,d.paint.get("heatmap-intensity")),se,d.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,d.paint,P.transform.zoom,Z)}function ul(P,a,d){const v=P.context,_=v.gl;v.setColorMode(P.colorModeForRenderPass());const T=Ul(v,a),O=d.key,z=a.heatmapFbos.get(O);z&&(v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,z.colorAttachment.get()),v.activeTexture.set(_.TEXTURE1),T.bind(_.LINEAR,_.CLAMP_TO_EDGE),P.useProgram("heatmapTexture").draw(v,_.TRIANGLES,Tr.disabled,rn.disabled,P.colorModeForRenderPass(),Ur.disabled,Ss(P,a,0,1),null,a.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments,a.paint,P.transform.zoom),z.destroy(),a.heatmapFbos.delete(O))}function ql(P,a,d){var v,_;const T=P.gl,O=T.createTexture();T.bindTexture(T.TEXTURE_2D,O),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);const z=(v=P.HALF_FLOAT)!==null&&v!==void 0?v:T.UNSIGNED_BYTE,B=(_=P.RGBA16F)!==null&&_!==void 0?_:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,B,a,d,0,T.RGBA,z,null);const V=P.createFramebuffer(a,d,!1,!1);return V.colorAttachment.set(O),V}function Ul(P,a){return a.colorRampTexture||(a.colorRampTexture=new de(P,a.colorRamp,P.gl.RGBA)),a.colorRampTexture}function Co(P,a,d,v,_){if(!d||!v||!v.imageAtlas)return;const T=v.imageAtlas.patternPositions;let O=T[d.to.toString()],z=T[d.from.toString()];if(!O&&z&&(O=z),!z&&O&&(z=O),!O||!z){const B=_.getPaintProperty(a);O=T[B],z=T[B]}O&&z&&P.setConstantPatternPositions(O,z)}function Ko(P,a,d,v,_,T,O){const z=P.context.gl,B="fill-pattern",V=d.paint.get(B),G=V&&V.constantOr(1),Z=d.getCrossfadeParameters();let ne,se,ce,fe,ge;O?(se=G&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ne=z.LINES):(se=G?"fillPattern":"fill",ne=z.TRIANGLES);const xe=V.constantOr(null);for(const Pe of v){const pe=a.getTile(Pe);if(G&&!pe.patternsLoaded())continue;const Me=pe.getBucket(d);if(!Me)continue;const ze=Me.programConfigurations.get(d.id),qe=P.useProgram(se,ze),ot=P.style.map.terrain&&P.style.map.terrain.getTerrainData(Pe);G&&(P.context.activeTexture.set(z.TEXTURE0),pe.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),ze.updatePaintBuffers(Z)),Co(ze,B,xe,pe,d);const pt=ot?Pe:null,_t=P.translatePosMatrix(pt?pt.posMatrix:Pe.posMatrix,pe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(O){fe=Me.indexBuffer2,ge=Me.segments2;const kt=[z.drawingBufferWidth,z.drawingBufferHeight];ce=se==="fillOutlinePattern"&&G?Fc(_t,P,Z,pe,kt):kd(_t,kt)}else fe=Me.indexBuffer,ge=Me.segments,ce=G?qh(_t,P,Z,pe):il(_t);qe.draw(P.context,ne,_,P.stencilModeForClipping(Pe),T,Ur.disabled,ce,ot,d.id,Me.layoutVertexBuffer,fe,ge,d.paint,P.transform.zoom,ze)}}function Xc(P,a,d,v,_,T,O){const z=P.context,B=z.gl,V="fill-extrusion-pattern",G=d.paint.get(V),Z=G.constantOr(1),ne=d.getCrossfadeParameters(),se=d.paint.get("fill-extrusion-opacity"),ce=G.constantOr(null);for(const fe of v){const ge=a.getTile(fe),xe=ge.getBucket(d);if(!xe)continue;const Pe=P.style.map.terrain&&P.style.map.terrain.getTerrainData(fe),pe=xe.programConfigurations.get(d.id),Me=P.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",pe);Z&&(P.context.activeTexture.set(B.TEXTURE0),ge.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),pe.updatePaintBuffers(ne)),Co(pe,V,ce,ge,d);const ze=P.translatePosMatrix(fe.posMatrix,ge,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),qe=d.paint.get("fill-extrusion-vertical-gradient"),ot=Z?jl(ze,P,qe,se,fe,ne,ge):Fl(ze,P,qe,se);Me.draw(z,z.gl.TRIANGLES,_,T,O,Ur.backCCW,ot,Pe,d.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,d.paint,P.transform.zoom,pe,P.style.map.terrain&&xe.centroidVertexBuffer)}}function Yo(P,a,d,v,_,T,O){const z=P.context,B=z.gl,V=d.fbo;if(!V)return;const G=P.useProgram("hillshade"),Z=P.style.map.terrain&&P.style.map.terrain.getTerrainData(a);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),G.draw(z,B.TRIANGLES,_,T,O,Ur.disabled,((ne,se,ce,fe)=>{const ge=ce.paint.get("hillshade-shadow-color"),xe=ce.paint.get("hillshade-highlight-color"),Pe=ce.paint.get("hillshade-accent-color");let pe=ce.paint.get("hillshade-illumination-direction")*(Math.PI/180);ce.paint.get("hillshade-illumination-anchor")==="viewport"&&(pe-=ne.transform.angle);const Me=!ne.options.moving;return{u_matrix:fe?fe.posMatrix:ne.transform.calculatePosMatrix(se.tileID.toUnwrapped(),Me),u_image:0,u_latrange:so(0,se.tileID),u_light:[ce.paint.get("hillshade-exaggeration"),pe],u_shadow:ge,u_highlight:xe,u_accent:Pe}})(P,d,v,Z?a:null),Z,v.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments)}function Wl(P,a,d,v,_,T){const O=P.context,z=O.gl,B=a.dem;if(B&&B.data){const V=B.dim,G=B.stride,Z=B.getPixels();if(O.activeTexture.set(z.TEXTURE1),O.pixelStoreUnpackPremultiplyAlpha.set(!1),a.demTexture=a.demTexture||P.getTileTexture(G),a.demTexture){const se=a.demTexture;se.update(Z,{premultiply:!1}),se.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else a.demTexture=new de(O,Z,z.RGBA,{premultiply:!1}),a.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);O.activeTexture.set(z.TEXTURE0);let ne=a.fbo;if(!ne){const se=new de(O,{width:V,height:V,data:null},z.RGBA);se.bind(z.LINEAR,z.CLAMP_TO_EDGE),ne=a.fbo=O.createFramebuffer(V,V,!0,!1),ne.colorAttachment.set(se.texture)}O.bindFramebuffer.set(ne.framebuffer),O.viewport.set([0,0,V,V]),P.useProgram("hillshadePrepare").draw(O,z.TRIANGLES,v,_,T,Ur.disabled,((se,ce)=>{const fe=ce.stride,ge=s.H();return s.aP(ge,0,s.X,-s.X,0,0,1),s.J(ge,ge,[0,-s.X,0]),{u_matrix:ge,u_image:1,u_dimension:[fe,fe],u_zoom:se.overscaledZ,u_unpack:ce.getUnpackVector()}})(a.tileID,B),null,d.id,P.rasterBoundsBuffer,P.quadTriangleIndexBuffer,P.rasterBoundsSegments),a.needsHillshadePrepare=!1}}function tf(P,a,d,v,_,T){const O=v.paint.get("raster-fade-duration");if(!T&&O>0){const z=S.now(),B=(z-P.timeAdded)/O,V=a?(z-a.timeAdded)/O:-1,G=d.getSource(),Z=_.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),ne=!a||Math.abs(a.tileID.overscaledZ-Z)>Math.abs(P.tileID.overscaledZ-Z),se=ne&&P.refreshedUponExpiration?1:s.ac(ne?B:1-V,0,1);return P.refreshedUponExpiration&&B>=1&&(P.refreshedUponExpiration=!1),a?{opacity:1,mix:1-se}:{opacity:se,mix:0}}return{opacity:1,mix:0}}const Vu=new s.aM(1,0,0,1),Mr=new s.aM(0,1,0,1),qu=new s.aM(0,0,1,1),Fd=new s.aM(1,0,1,1),rf=new s.aM(0,1,1,1);function Hl(P,a,d,v){Kc(P,0,a+d/2,P.transform.width,d,v)}function jd(P,a,d,v){Kc(P,a-d/2,0,d,P.transform.height,v)}function Kc(P,a,d,v,_,T){const O=P.context,z=O.gl;z.enable(z.SCISSOR_TEST),z.scissor(a*P.pixelRatio,d*P.pixelRatio,v*P.pixelRatio,_*P.pixelRatio),O.clear({color:T}),z.disable(z.SCISSOR_TEST)}function Bd(P,a,d){const v=P.context,_=v.gl,T=d.posMatrix,O=P.useProgram("debug"),z=Tr.disabled,B=rn.disabled,V=P.colorModeForRenderPass(),G="$debug",Z=P.style.map.terrain&&P.style.map.terrain.getTerrainData(d);v.activeTexture.set(_.TEXTURE0);const ne=a.getTileByID(d.key).latestRawTileData,se=Math.floor((ne&&ne.byteLength||0)/1024),ce=a.getTile(d).tileSize,fe=512/Math.min(ce,512)*(d.overscaledZ/P.transform.zoom)*.5;let ge=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ge+=` => ${d.overscaledZ}`),(function(xe,Pe){xe.initDebugOverlayCanvas();const pe=xe.debugOverlayCanvas,Me=xe.context.gl,ze=xe.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,pe.width,pe.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Pe,5,5),ze.strokeText(Pe,5,5),xe.debugOverlayTexture.update(pe),xe.debugOverlayTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE)})(P,`${ge} ${se}kB`),O.draw(v,_.TRIANGLES,z,B,On.alphaBlended,Ur.disabled,Ia(T,s.aM.transparent,fe),null,G,P.debugBuffer,P.quadTriangleIndexBuffer,P.debugSegments),O.draw(v,_.LINE_STRIP,z,B,V,Ur.disabled,Ia(T,s.aM.red),Z,G,P.debugBuffer,P.tileBorderIndexBuffer,P.debugSegments)}function Nd(P,a,d){const v=P.context,_=v.gl,T=P.colorModeForRenderPass(),O=new Tr(_.LEQUAL,Tr.ReadWrite,P.depthRangeFor3D),z=P.useProgram("terrain"),B=a.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,P.width,P.height]);for(const V of d){const G=P.renderToTexture.getTexture(V),Z=a.getTerrainData(V.tileID);v.activeTexture.set(_.TEXTURE0),_.bindTexture(_.TEXTURE_2D,G.texture);const ne=P.transform.calculatePosMatrix(V.tileID.toUnwrapped()),se=a.getMeshFrameDelta(P.transform.zoom),ce=P.transform.calculateFogMatrix(V.tileID.toUnwrapped()),fe=Vh(ne,se,ce,P.style.sky,P.transform.pitch);z.draw(v,_.TRIANGLES,O,rn.disabled,T,Ur.backCCW,fe,Z,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}}class Ji{constructor(a,d,v){this.vertexBuffer=a,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ms{constructor(a,d){this.context=new Dm(a),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nr.maxUnderzooming+nr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new rl}resize(a,d,v){if(this.width=Math.floor(a*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style._order)this.style._layers[_].resize()}setup(){const a=this.context,d=new s.aX;d.emplaceBack(0,0),d.emplaceBack(s.X,0),d.emplaceBack(0,s.X),d.emplaceBack(s.X,s.X),this.tileExtentBuffer=a.createVertexBuffer(d,Wo.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);const v=new s.aX;v.emplaceBack(0,0),v.emplaceBack(s.X,0),v.emplaceBack(0,s.X),v.emplaceBack(s.X,s.X),this.debugBuffer=a.createVertexBuffer(v,Wo.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);const _=new s.$;_.emplaceBack(0,0,0,0),_.emplaceBack(s.X,0,s.X,0),_.emplaceBack(0,s.X,0,s.X),_.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=a.createVertexBuffer(_,ni.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);const T=new s.aX;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(T,Wo.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);const O=new s.aZ;O.emplaceBack(0),O.emplaceBack(1),O.emplaceBack(3),O.emplaceBack(2),O.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(O);const z=new s.aY;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(z);const B=this.context.gl;this.stencilClearMode=new rn({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const a=this.context,d=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const v=s.H();s.aP(v,0,this.width,this.height,0,0,1),s.K(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(a,d.TRIANGLES,Tr.disabled,this.stencilClearMode,On.disabled,Ur.disabled,jn(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,d){if(this.currentStencilSource===a.source||!a.isTileClipped()||!d||!d.length)return;this.currentStencilSource=a.source;const v=this.context,_=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(On.disabled),v.setDepthMode(Tr.disabled);const T=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const O of d){const z=this._tileClippingMaskIDs[O.key]=this.nextStencilID++,B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O);T.draw(v,_.TRIANGLES,Tr.disabled,new rn({func:_.ALWAYS,mask:0},z,255,_.KEEP,_.KEEP,_.REPLACE),On.disabled,Ur.disabled,jn(O.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,d=this.context.gl;return new rn({func:d.NOTEQUAL,mask:255},a,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(a){const d=this.context.gl;return new rn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(a){const d=this.context.gl,v=a.sort(((O,z)=>z.overscaledZ-O.overscaledZ)),_=v[v.length-1].overscaledZ,T=v[0].overscaledZ-_+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();const O={};for(let z=0;z<T;z++)O[z+_]=new rn({func:d.GEQUAL,mask:255},z+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[O,v]}return[{[_]:rn.disabled},v]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new On([a.CONSTANT_COLOR,a.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?On.unblended:On.alphaBlended}depthModeForSublayer(a,d,v){if(!this.opaquePassEnabledForLayer())return Tr.disabled;const _=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Tr(v||this.context.gl.LEQUAL,d,[_,_])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,d){this.style=a,this.options=d,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange(S.now()),this.imageManager.beginFrame();const v=this.style._order,_=this.style.sourceCaches,T={},O={},z={};for(const B in _){const V=_[B];V.used&&V.prepare(this.context),T[B]=V.getVisibleCoordinates(),O[B]=T[B].slice().reverse(),z[B]=V.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let B=0;B<v.length;B++)if(this.style._layers[v[B]].is3D()){this.opaquePassCutoff=B;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const B of v){const V=this.style._layers[B];if(!V.hasOffscreenPass()||V.isHidden(this.transform.zoom))continue;const G=O[V.source];(V.type==="custom"||G.length)&&this.renderLayer(this,_[V.source],V,G)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(B,V){const G=B.context,Z=G.gl,ne=((xe,Pe,pe)=>({u_sky_color:xe.properties.get("sky-color"),u_horizon_color:xe.properties.get("horizon-color"),u_horizon:(Pe.height/2+Pe.getHorizon())*pe,u_sky_horizon_blend:xe.properties.get("sky-horizon-blend")*Pe.height/2*pe}))(V,B.style.map.transform,B.pixelRatio),se=new Tr(Z.LEQUAL,Tr.ReadWrite,[0,1]),ce=rn.disabled,fe=B.colorModeForRenderPass(),ge=B.useProgram("sky");if(!V.mesh){const xe=new s.aX;xe.emplaceBack(-1,-1),xe.emplaceBack(1,-1),xe.emplaceBack(1,1),xe.emplaceBack(-1,1);const Pe=new s.aY;Pe.emplaceBack(0,1,2),Pe.emplaceBack(0,2,3),V.mesh=new Ji(G.createVertexBuffer(xe,Wo.members),G.createIndexBuffer(Pe),s.a0.simpleSegment(0,0,xe.length,Pe.length))}ge.draw(G,Z.TRIANGLES,se,ce,fe,Ur.disabled,ne,void 0,"sky",V.mesh.vertexBuffer,V.mesh.indexBuffer,V.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){const B=this.style._layers[v[this.currentLayer]],V=_[B.source],G=T[B.source];this._renderTileClippingMasks(B,G),this.renderLayer(this,V,B,G)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){const B=this.style._layers[v[this.currentLayer]],V=_[B.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(B))continue;const G=(B.type==="symbol"?z:O)[B.source];this._renderTileClippingMasks(B,T[B.source]),this.renderLayer(this,V,B,G)}if(this.options.showTileBoundaries){const B=(function(V,G){let Z=null;const ne=Object.values(V._layers).flatMap((ge=>ge.source&&!ge.isHidden(G)?[V.sourceCaches[ge.source]]:[])),se=ne.filter((ge=>ge.getSource().type==="vector")),ce=ne.filter((ge=>ge.getSource().type!=="vector")),fe=ge=>{(!Z||Z.getSource().maxzoom<ge.getSource().maxzoom)&&(Z=ge)};return se.forEach((ge=>fe(ge))),Z||ce.forEach((ge=>fe(ge))),Z})(this.style,this.transform.zoom);B&&(function(V,G,Z){for(let ne=0;ne<Z.length;ne++)Bd(V,G,Z[ne])})(this,B,B.getVisibleCoordinates())}this.options.showPadding&&(function(B){const V=B.transform.padding;Hl(B,B.transform.height-(V.top||0),3,Vu),Hl(B,V.bottom||0,3,Mr),jd(B,V.left||0,3,qu),jd(B,B.transform.width-(V.right||0),3,Fd);const G=B.transform.centerPoint;(function(Z,ne,se,ce){Kc(Z,ne-1,se-10,2,20,ce),Kc(Z,ne-10,se-1,20,2,ce)})(B,G.x,B.transform.height-G.y,rf)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix;let _=this.terrainFacilitator.dirty;_||(_=a?!s.a_(d,v):!s.a$(d,v)),_||(_=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),_&&(s.b0(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(T,O){const z=T.context,B=z.gl,V=On.unblended,G=new Tr(B.LEQUAL,Tr.ReadWrite,[0,1]),Z=O.getTerrainMesh(),ne=O.sourceCache.getRenderableTiles(),se=T.useProgram("terrainDepth");z.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),z.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),z.clear({color:s.aM.transparent,depth:1});for(const ce of ne){const fe=O.getTerrainData(ce.tileID),ge={u_matrix:T.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_ele_delta:O.getMeshFrameDelta(T.transform.zoom)};se.draw(z,B.TRIANGLES,G,rn.disabled,V,Ur.backCCW,ge,fe,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}z.bindFramebuffer.set(null),z.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain),(function(T,O){const z=T.context,B=z.gl,V=On.unblended,G=new Tr(B.LEQUAL,Tr.ReadWrite,[0,1]),Z=O.getTerrainMesh(),ne=O.getCoordsTexture(),se=O.sourceCache.getRenderableTiles(),ce=T.useProgram("terrainCoords");z.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),z.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),z.clear({color:s.aM.transparent,depth:1}),O.coordsIndex=[];for(const fe of se){const ge=O.getTerrainData(fe.tileID);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,ne.texture);const xe={u_matrix:T.transform.calculatePosMatrix(fe.tileID.toUnwrapped()),u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0,u_ele_delta:O.getMeshFrameDelta(T.transform.zoom)};ce.draw(z,B.TRIANGLES,G,rn.disabled,V,Ur.backCCW,xe,ge,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments),O.coordsIndex.push(fe.tileID.key)}z.bindFramebuffer.set(null),z.viewport.set([0,0,T.width,T.height])})(this,this.style.map.terrain))}renderLayer(a,d,v,_){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(_||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(T,O,z,B,V){if(T.renderPass!=="translucent")return;const G=rn.disabled,Z=T.colorModeForRenderPass();(z._unevaluatedLayout.hasValue("text-variable-anchor")||z._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ne,se,ce,fe,ge,xe,Pe,pe,Me){const ze=se.transform,qe=el(),ot=ge==="map",pt=xe==="map";for(const _t of ne){const kt=fe.getTile(_t),xt=kt.getBucket(ce);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const yt=s.ag(xt.textSizeData,ze.zoom),Rt=gr(kt,1,se.transform.zoom),ar=ma(_t.posMatrix,pt,ot,se.transform,Rt),wt=ce.layout.get("icon-text-fit")!=="none"&&xt.hasIconData();if(yt){const Tt=Math.pow(2,ze.zoom-kt.tileID.overscaledZ),ir=se.style.map.terrain?(dr,vr)=>se.style.map.terrain.getElevation(_t,dr,vr):null,Zr=qe.translatePosition(ze,kt,Pe,pe);ll(xt,ot,pt,Me,ze,ar,_t.posMatrix,Tt,yt,wt,qe,Zr,_t.toUnwrapped(),ir)}}})(B,T,z,O,z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),V),z.paint.get("icon-opacity").constantOr(1)!==0&&Es(T,O,z,B,!1,z.paint.get("icon-translate"),z.paint.get("icon-translate-anchor"),z.layout.get("icon-rotation-alignment"),z.layout.get("icon-pitch-alignment"),z.layout.get("icon-keep-upright"),G,Z),z.paint.get("text-opacity").constantOr(1)!==0&&Es(T,O,z,B,!0,z.paint.get("text-translate"),z.paint.get("text-translate-anchor"),z.layout.get("text-rotation-alignment"),z.layout.get("text-pitch-alignment"),z.layout.get("text-keep-upright"),G,Z),O.map.showCollisionBoxes&&($u(T,O,z,B,!0),$u(T,O,z,B,!1))})(a,d,v,_,this.style.placement.variableOffsets);break;case"circle":(function(T,O,z,B){if(T.renderPass!=="translucent")return;const V=z.paint.get("circle-opacity"),G=z.paint.get("circle-stroke-width"),Z=z.paint.get("circle-stroke-opacity"),ne=!z.layout.get("circle-sort-key").isConstant();if(V.constantOr(1)===0&&(G.constantOr(1)===0||Z.constantOr(1)===0))return;const se=T.context,ce=se.gl,fe=T.depthModeForSublayer(0,Tr.ReadOnly),ge=rn.disabled,xe=T.colorModeForRenderPass(),Pe=[];for(let pe=0;pe<B.length;pe++){const Me=B[pe],ze=O.getTile(Me),qe=ze.getBucket(z);if(!qe)continue;const ot=qe.programConfigurations.get(z.id),pt=T.useProgram("circle",ot),_t=qe.layoutVertexBuffer,kt=qe.indexBuffer,xt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Me),yt={programConfiguration:ot,program:pt,layoutVertexBuffer:_t,indexBuffer:kt,uniformValues:jc(T,Me,ze,z),terrainData:xt};if(ne){const Rt=qe.segments.get();for(const ar of Rt)Pe.push({segments:new s.a0([ar]),sortKey:ar.sortKey,state:yt})}else Pe.push({segments:qe.segments,sortKey:0,state:yt})}ne&&Pe.sort(((pe,Me)=>pe.sortKey-Me.sortKey));for(const pe of Pe){const{programConfiguration:Me,program:ze,layoutVertexBuffer:qe,indexBuffer:ot,uniformValues:pt,terrainData:_t}=pe.state;ze.draw(se,ce.TRIANGLES,fe,ge,xe,Ur.disabled,pt,_t,z.id,qe,ot,pe.segments,z.paint,T.transform.zoom,Me)}})(a,d,v,_);break;case"heatmap":(function(T,O,z,B){if(z.paint.get("heatmap-opacity")===0)return;const V=T.context;if(T.style.map.terrain){for(const G of B){const Z=O.getTile(G);O.hasRenderableParent(G)||(T.renderPass==="offscreen"?ef(T,Z,z,G):T.renderPass==="translucent"&&ul(T,z,G))}V.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?(function(G,Z,ne,se){const ce=G.context,fe=ce.gl,ge=rn.disabled,xe=new On([fe.ONE,fe.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(Pe,pe,Me){const ze=Pe.gl;Pe.activeTexture.set(ze.TEXTURE1),Pe.viewport.set([0,0,pe.width/4,pe.height/4]);let qe=Me.heatmapFbos.get(s.aU);qe?(ze.bindTexture(ze.TEXTURE_2D,qe.colorAttachment.get()),Pe.bindFramebuffer.set(qe.framebuffer)):(qe=ql(Pe,pe.width/4,pe.height/4),Me.heatmapFbos.set(s.aU,qe))})(ce,G,ne),ce.clear({color:s.aM.transparent});for(let Pe=0;Pe<se.length;Pe++){const pe=se[Pe];if(Z.hasRenderableParent(pe))continue;const Me=Z.getTile(pe),ze=Me.getBucket(ne);if(!ze)continue;const qe=ze.programConfigurations.get(ne.id),ot=G.useProgram("heatmap",qe),{zoom:pt}=G.transform;ot.draw(ce,fe.TRIANGLES,Tr.disabled,ge,xe,Ur.disabled,ai(pe.posMatrix,Me,pt,ne.paint.get("heatmap-intensity")),null,ne.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,ne.paint,G.transform.zoom,qe)}ce.viewport.set([0,0,G.width,G.height])})(T,O,z,B):T.renderPass==="translucent"&&(function(G,Z){const ne=G.context,se=ne.gl;ne.setColorMode(G.colorModeForRenderPass());const ce=Z.heatmapFbos.get(s.aU);ce&&(ne.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,ce.colorAttachment.get()),ne.activeTexture.set(se.TEXTURE1),Ul(ne,Z).bind(se.LINEAR,se.CLAMP_TO_EDGE),G.useProgram("heatmapTexture").draw(ne,se.TRIANGLES,Tr.disabled,rn.disabled,G.colorModeForRenderPass(),Ur.disabled,Ss(G,Z,0,1),null,Z.id,G.viewportBuffer,G.quadTriangleIndexBuffer,G.viewportSegments,Z.paint,G.transform.zoom))})(T,z)})(a,d,v,_);break;case"line":(function(T,O,z,B){if(T.renderPass!=="translucent")return;const V=z.paint.get("line-opacity"),G=z.paint.get("line-width");if(V.constantOr(1)===0||G.constantOr(1)===0)return;const Z=T.depthModeForSublayer(0,Tr.ReadOnly),ne=T.colorModeForRenderPass(),se=z.paint.get("line-dasharray"),ce=z.paint.get("line-pattern"),fe=ce.constantOr(1),ge=z.paint.get("line-gradient"),xe=z.getCrossfadeParameters(),Pe=fe?"linePattern":se?"lineSDF":ge?"lineGradient":"line",pe=T.context,Me=pe.gl;let ze=!0;for(const qe of B){const ot=O.getTile(qe);if(fe&&!ot.patternsLoaded())continue;const pt=ot.getBucket(z);if(!pt)continue;const _t=pt.programConfigurations.get(z.id),kt=T.context.program.get(),xt=T.useProgram(Pe,_t),yt=ze||xt.program!==kt,Rt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(qe),ar=ce.constantOr(null);if(ar&&ot.imageAtlas){const ir=ot.imageAtlas,Zr=ir.patternPositions[ar.to.toString()],dr=ir.patternPositions[ar.from.toString()];Zr&&dr&&_t.setConstantPatternPositions(Zr,dr)}const wt=Rt?qe:null,Tt=fe?Mo(T,ot,z,xe,wt):se?km(T,ot,z,se,xe,wt):ge?Uh(T,ot,z,pt.lineClipsArray.length,wt):Bc(T,ot,z,wt);if(fe)pe.activeTexture.set(Me.TEXTURE0),ot.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),_t.updatePaintBuffers(xe);else if(se&&(yt||T.lineAtlas.dirty))pe.activeTexture.set(Me.TEXTURE0),T.lineAtlas.bind(pe);else if(ge){const ir=pt.gradients[z.id];let Zr=ir.texture;if(z.gradientVersion!==ir.version){let dr=256;if(z.stepInterpolant){const vr=O.getSource().maxzoom,Yr=qe.canonical.z===vr?Math.ceil(1<<T.transform.maxZoom-qe.canonical.z):1;dr=s.ac(s.aV(pt.maxLineLength/s.X*1024*Yr),256,pe.maxTextureSize)}ir.gradient=s.aW({expression:z.gradientExpression(),evaluationKey:"lineProgress",resolution:dr,image:ir.gradient||void 0,clips:pt.lineClipsArray}),ir.texture?ir.texture.update(ir.gradient):ir.texture=new de(pe,ir.gradient,Me.RGBA),ir.version=z.gradientVersion,Zr=ir.texture}pe.activeTexture.set(Me.TEXTURE0),Zr.bind(z.stepInterpolant?Me.NEAREST:Me.LINEAR,Me.CLAMP_TO_EDGE)}xt.draw(pe,Me.TRIANGLES,Z,T.stencilModeForClipping(qe),ne,Ur.disabled,Tt,Rt,z.id,pt.layoutVertexBuffer,pt.indexBuffer,pt.segments,z.paint,T.transform.zoom,_t,pt.layoutVertexBuffer2),ze=!1}})(a,d,v,_);break;case"fill":(function(T,O,z,B){const V=z.paint.get("fill-color"),G=z.paint.get("fill-opacity");if(G.constantOr(1)===0)return;const Z=T.colorModeForRenderPass(),ne=z.paint.get("fill-pattern"),se=T.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&V.constantOr(s.aM.transparent).a===1&&G.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===se){const ce=T.depthModeForSublayer(1,T.renderPass==="opaque"?Tr.ReadWrite:Tr.ReadOnly);Ko(T,O,z,B,ce,Z,!1)}if(T.renderPass==="translucent"&&z.paint.get("fill-antialias")){const ce=T.depthModeForSublayer(z.getPaintProperty("fill-outline-color")?2:0,Tr.ReadOnly);Ko(T,O,z,B,ce,Z,!0)}})(a,d,v,_);break;case"fill-extrusion":(function(T,O,z,B){const V=z.paint.get("fill-extrusion-opacity");if(V!==0&&T.renderPass==="translucent"){const G=new Tr(T.context.gl.LEQUAL,Tr.ReadWrite,T.depthRangeFor3D);if(V!==1||z.paint.get("fill-extrusion-pattern").constantOr(1))Xc(T,O,z,B,G,rn.disabled,On.disabled),Xc(T,O,z,B,G,T.stencilModeFor3D(),T.colorModeForRenderPass());else{const Z=T.colorModeForRenderPass();Xc(T,O,z,B,G,rn.disabled,Z)}}})(a,d,v,_);break;case"hillshade":(function(T,O,z,B){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const V=T.context,G=T.depthModeForSublayer(0,Tr.ReadOnly),Z=T.colorModeForRenderPass(),[ne,se]=T.renderPass==="translucent"?T.stencilConfigForOverlap(B):[{},B];for(const ce of se){const fe=O.getTile(ce);fe.needsHillshadePrepare!==void 0&&fe.needsHillshadePrepare&&T.renderPass==="offscreen"?Wl(T,fe,z,G,rn.disabled,Z):T.renderPass==="translucent"&&Yo(T,ce,fe,z,G,ne[ce.overscaledZ],Z)}V.viewport.set([0,0,T.width,T.height])})(a,d,v,_);break;case"raster":(function(T,O,z,B){if(T.renderPass!=="translucent"||z.paint.get("raster-opacity")===0||!B.length)return;const V=T.context,G=V.gl,Z=O.getSource(),ne=T.useProgram("raster"),se=T.colorModeForRenderPass(),[ce,fe]=Z instanceof Hi?[{},B]:T.stencilConfigForOverlap(B),ge=fe[fe.length-1].overscaledZ,xe=!T.options.moving;for(const Pe of fe){const pe=T.depthModeForSublayer(Pe.overscaledZ-ge,z.paint.get("raster-opacity")===1?Tr.ReadWrite:Tr.ReadOnly,G.LESS),Me=O.getTile(Pe);Me.registerFadeDuration(z.paint.get("raster-fade-duration"));const ze=O.findLoadedParent(Pe,0),qe=O.findLoadedSibling(Pe),ot=tf(Me,ze||qe||null,O,z,T.transform,T.style.map.terrain);let pt,_t;const kt=z.paint.get("raster-resampling")==="nearest"?G.NEAREST:G.LINEAR;V.activeTexture.set(G.TEXTURE0),Me.texture.bind(kt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),V.activeTexture.set(G.TEXTURE1),ze?(ze.texture.bind(kt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),pt=Math.pow(2,ze.tileID.overscaledZ-Me.tileID.overscaledZ),_t=[Me.tileID.canonical.x*pt%1,Me.tileID.canonical.y*pt%1]):Me.texture.bind(kt,G.CLAMP_TO_EDGE,G.LINEAR_MIPMAP_NEAREST),Me.texture.useMipmap&&V.extTextureFilterAnisotropic&&T.transform.pitch>20&&G.texParameterf(G.TEXTURE_2D,V.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,V.extTextureFilterAnisotropicMax);const xt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Pe),yt=xt?Pe:null,Rt=yt?yt.posMatrix:T.transform.calculatePosMatrix(Pe.toUnwrapped(),xe),ar=Ed(Rt,_t||[0,0],pt||1,ot,z);Z instanceof Hi?ne.draw(V,G.TRIANGLES,pe,rn.disabled,se,Ur.disabled,ar,xt,z.id,Z.boundsBuffer,T.quadTriangleIndexBuffer,Z.boundsSegments):ne.draw(V,G.TRIANGLES,pe,ce[Pe.overscaledZ],se,Ur.disabled,ar,xt,z.id,T.rasterBoundsBuffer,T.quadTriangleIndexBuffer,T.rasterBoundsSegments)}})(a,d,v,_);break;case"background":(function(T,O,z,B){const V=z.paint.get("background-color"),G=z.paint.get("background-opacity");if(G===0)return;const Z=T.context,ne=Z.gl,se=T.transform,ce=se.tileSize,fe=z.paint.get("background-pattern");if(T.isPatternMissing(fe))return;const ge=!fe&&V.a===1&&G===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ge)return;const xe=rn.disabled,Pe=T.depthModeForSublayer(0,ge==="opaque"?Tr.ReadWrite:Tr.ReadOnly),pe=T.colorModeForRenderPass(),Me=T.useProgram(fe?"backgroundPattern":"background"),ze=B||se.coveringTiles({tileSize:ce,terrain:T.style.map.terrain});fe&&(Z.activeTexture.set(ne.TEXTURE0),T.imageManager.bind(T.context));const qe=z.getCrossfadeParameters();for(const ot of ze){const pt=B?ot.posMatrix:T.transform.calculatePosMatrix(ot.toUnwrapped()),_t=fe?Hh(pt,G,T,fe,{tileID:ot,tileSize:ce},qe):al(pt,G,V),kt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(ot);Me.draw(Z,ne.TRIANGLES,Pe,xe,pe,Ur.disabled,_t,kt,z.id,T.tileExtentBuffer,T.quadTriangleIndexBuffer,T.tileExtentSegments)}})(a,0,v,_);break;case"custom":(function(T,O,z){const B=T.context,V=z.implementation;if(T.renderPass==="offscreen"){const G=V.prerender;G&&(T.setCustomLayerDefaults(),B.setColorMode(T.colorModeForRenderPass()),G.call(V,B.gl,T.transform.customLayerMatrix()),B.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),B.setColorMode(T.colorModeForRenderPass()),B.setStencilMode(rn.disabled);const G=V.renderingMode==="3d"?new Tr(T.context.gl.LEQUAL,Tr.ReadWrite,T.depthRangeFor3D):T.depthModeForSublayer(0,Tr.ReadOnly);B.setDepthMode(G),V.render(B.gl,T.transform.customLayerMatrix(),{farZ:T.transform.farZ,nearZ:T.transform.nearZ,fov:T.transform._fov,modelViewProjectionMatrix:T.transform.modelViewProjectionMatrix,projectionMatrix:T.transform.projectionMatrix}),B.setDirty(),T.setBaseState(),B.bindFramebuffer.set(null)}})(a,0,v)}}translatePosMatrix(a,d,v,_,T){if(!v[0]&&!v[1])return a;const O=T?_==="map"?this.transform.angle:0:_==="viewport"?-this.transform.angle:0;if(O){const V=Math.sin(O),G=Math.cos(O);v=[v[0]*G-v[1]*V,v[0]*V+v[1]*G]}const z=[T?v[0]:gr(d,v[0],this.transform.zoom),T?v[1]:gr(d,v[1],this.transform.zoom),0],B=new Float32Array(16);return s.J(B,a,z),B}saveTileTexture(a){const d=this._tileTextures[a.size[0]];d?d.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const d=this._tileTextures[a];return d&&d.length>0?d.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const d=this.imageManager.getPattern(a.from.toString()),v=this.imageManager.getPattern(a.to.toString());return!d||!v}useProgram(a,d){this.cache=this.cache||{};const v=a+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new qr(this.context,Ho[a],d,Gh[a],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new de(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:d}=this.context.gl;return this.width!==a||this.height!==d}}class cl{constructor(a,d){this.points=a,this.planes=d}static fromInvProjectionMatrix(a,d,v){const _=Math.pow(2,v),T=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((z=>{const B=1/(z=s.af([],z,a))[3]/d*_;return s.b1(z,z,[B,B,1/z[3],B])})),O=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((z=>{const B=(function(ne,se){var ce=se[0],fe=se[1],ge=se[2],xe=ce*ce+fe*fe+ge*ge;return xe>0&&(xe=1/Math.sqrt(xe)),ne[0]=se[0]*xe,ne[1]=se[1]*xe,ne[2]=se[2]*xe,ne})([],(function(ne,se,ce){var fe=se[0],ge=se[1],xe=se[2],Pe=ce[0],pe=ce[1],Me=ce[2];return ne[0]=ge*Me-xe*pe,ne[1]=xe*Pe-fe*Me,ne[2]=fe*pe-ge*Pe,ne})([],ie([],T[z[0]],T[z[1]]),ie([],T[z[2]],T[z[1]]))),V=-((G=B)[0]*(Z=T[z[1]])[0]+G[1]*Z[1]+G[2]*Z[2]);var G,Z;return B.concat(V)}));return new cl(T,O)}}class hl{constructor(a,d){this.min=a,this.max=d,this.center=(function(v,_,T){return v[0]=.5*_[0],v[1]=.5*_[1],v[2]=.5*_[2],v})([],(function(v,_,T){return v[0]=_[0]+T[0],v[1]=_[1]+T[1],v[2]=_[2]+T[2],v})([],this.min,this.max))}quadrant(a){const d=[a%2==0,a<2],v=W(this.min),_=W(this.max);for(let T=0;T<d.length;T++)v[T]=d[T]?this.min[T]:this.center[T],_[T]=d[T]?this.center[T]:this.max[T];return _[2]=this.max[2],new hl(v,_)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersects(a){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let v=!0;for(let _=0;_<a.planes.length;_++){const T=a.planes[_];let O=0;for(let z=0;z<d.length;z++)s.b2(T,d[z])>=0&&O++;if(O===0)return 0;O!==d.length&&(v=!1)}if(v)return 2;for(let _=0;_<3;_++){let T=Number.MAX_VALUE,O=-Number.MAX_VALUE;for(let z=0;z<a.points.length;z++){const B=a.points[z][_]-this.min[_];T=Math.min(T,B),O=Math.max(O,B)}if(O<0||T>this.max[_]-this.min[_])return 0}return 1}}class fl{constructor(a=0,d=0,v=0,_=0){if(isNaN(a)||a<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(_)||_<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=d,this.left=v,this.right=_}interpolate(a,d,v){return d.top!=null&&a.top!=null&&(this.top=s.y.number(a.top,d.top,v)),d.bottom!=null&&a.bottom!=null&&(this.bottom=s.y.number(a.bottom,d.bottom,v)),d.left!=null&&a.left!=null&&(this.left=s.y.number(a.left,d.left,v)),d.right!=null&&a.right!=null&&(this.right=s.y.number(a.right,d.right,v)),this}getCenter(a,d){const v=s.ac((this.left+a-this.right)/2,0,a),_=s.ac((this.top+d-this.bottom)/2,0,d);return new s.P(v,_)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new fl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Yc=85.051129;class Cs{constructor(a,d,v,_,T){this.tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=a||0,this._maxZoom=d||22,this._minPitch=v??0,this._maxPitch=_??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new fl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const a=new Cs(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return a.apply(this),a}apply(a){this.tileSize=a.tileSize,this.latRange=a.latRange,this.lngRange=a.lngRange,this.width=a.width,this.height=a.height,this._center=a._center,this._elevation=a._elevation,this.minElevationForCurrentTile=a.minElevationForCurrentTile,this.zoom=a.zoom,this.angle=a.angle,this._fov=a._fov,this._pitch=a._pitch,this._unmodified=a._unmodified,this._edgeInsets=a._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(a){this._minZoom!==a&&(this._minZoom=a,this.zoom=Math.max(this.zoom,a))}get maxZoom(){return this._maxZoom}set maxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.zoom=Math.min(this.zoom,a))}get minPitch(){return this._minPitch}set minPitch(a){this._minPitch!==a&&(this._minPitch=a,this.pitch=Math.max(this.pitch,a))}get maxPitch(){return this._maxPitch}set maxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.pitch=Math.min(this.pitch,a))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(a){const d=-s.b3(a,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(function(){var v=new s.A(4);return s.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v})(),(function(v,_,T){var O=_[0],z=_[1],B=_[2],V=_[3],G=Math.sin(T),Z=Math.cos(T);v[0]=O*Z+B*G,v[1]=z*Z+V*G,v[2]=O*-G+B*Z,v[3]=z*-G+V*Z})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(a){const d=s.ac(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(a){a=Math.max(.01,Math.min(60,a)),this._fov!==a&&(this._unmodified=!1,this._fov=a/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(a){const d=Math.min(Math.max(a,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(a){a!==this._elevation&&(this._elevation=a,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,d,v){this._unmodified=!1,this._edgeInsets.interpolate(a,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(a){const d=(a.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/a.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(a){const d=[new s.b4(0,a)];if(this._renderWorldCopies){const v=this.pointCoordinate(new s.P(0,0)),_=this.pointCoordinate(new s.P(this.width,0)),T=this.pointCoordinate(new s.P(this.width,this.height)),O=this.pointCoordinate(new s.P(0,this.height)),z=Math.floor(Math.min(v.x,_.x,T.x,O.x)),B=Math.floor(Math.max(v.x,_.x,T.x,O.x)),V=1;for(let G=z-V;G<=B+V;G++)G!==0&&d.push(new s.b4(G,a))}return d}coveringTiles(a){var d,v;let _=this.coveringZoomLevel(a);const T=_;if(a.minzoom!==void 0&&_<a.minzoom)return[];a.maxzoom!==void 0&&_>a.maxzoom&&(_=a.maxzoom);const O=this.pointCoordinate(this.getCameraPoint()),z=s.Z.fromLngLat(this.center),B=Math.pow(2,_),V=[B*O.x,B*O.y,0],G=[B*z.x,B*z.y,0],Z=cl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,_);let ne=a.minzoom||0;!a.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(ne=_);const se=a.terrain?2/Math.min(this.tileSize,a.tileSize)*this.tileSize:3,ce=pe=>({aabb:new hl([pe*B,0,0],[(pe+1)*B,B,0]),zoom:0,x:0,y:0,wrap:pe,fullyVisible:!1}),fe=[],ge=[],xe=_,Pe=a.reparseOverscaled?T:_;if(this._renderWorldCopies)for(let pe=1;pe<=3;pe++)fe.push(ce(-pe)),fe.push(ce(pe));for(fe.push(ce(0));fe.length>0;){const pe=fe.pop(),Me=pe.x,ze=pe.y;let qe=pe.fullyVisible;if(!qe){const xt=pe.aabb.intersects(Z);if(xt===0)continue;qe=xt===2}const ot=a.terrain?V:G,pt=pe.aabb.distanceX(ot),_t=pe.aabb.distanceY(ot),kt=Math.max(Math.abs(pt),Math.abs(_t));if(pe.zoom===xe||kt>se+(1<<xe-pe.zoom)-2&&pe.zoom>=ne){const xt=xe-pe.zoom,yt=V[0]-.5-(Me<<xt),Rt=V[1]-.5-(ze<<xt);ge.push({tileID:new s.S(pe.zoom===xe?Pe:pe.zoom,pe.wrap,pe.zoom,Me,ze),distanceSq:he([G[0]-.5-Me,G[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(yt*yt+Rt*Rt)})}else for(let xt=0;xt<4;xt++){const yt=(Me<<1)+xt%2,Rt=(ze<<1)+(xt>>1),ar=pe.zoom+1;let wt=pe.aabb.quadrant(xt);if(a.terrain){const Tt=new s.S(ar,pe.wrap,ar,yt,Rt),ir=a.terrain.getMinMaxElevation(Tt),Zr=(d=ir.minElevation)!==null&&d!==void 0?d:this.elevation,dr=(v=ir.maxElevation)!==null&&v!==void 0?v:this.elevation;wt=new hl([wt.min[0],wt.min[1],Zr],[wt.max[0],wt.max[1],dr])}fe.push({aabb:wt,zoom:ar,x:yt,y:Rt,wrap:pe.wrap,fullyVisible:qe})}}return ge.sort(((pe,Me)=>pe.distanceSq-Me.distanceSq)).map((pe=>pe.tileID))}resize(a,d){this.width=a,this.height=d,this.pixelsToGLUnits=[2/a,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(a){return Math.pow(2,a)}scaleZoom(a){return Math.log(a)/Math.LN2}project(a){const d=s.ac(a.lat,-85.051129,Yc);return new s.P(s.O(a.lng)*this.worldSize,s.Q(d)*this.worldSize)}unproject(a){return new s.Z(a.x/this.worldSize,a.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(a){const d=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,_=this.pointLocation(this.centerPoint,a),T=a.getElevationForLngLatZoom(_,this.tileZoom);if(!(this.elevation-T))return;const O=v+d-T,z=Math.cos(this._pitch)*this.cameraToCenterDistance/O/s.b5(1,_.lat),B=this.scaleZoom(z/this.tileSize);this._elevation=T,this._center=_,this.zoom=B}setLocationAtPoint(a,d){const v=this.pointCoordinate(d),_=this.pointCoordinate(this.centerPoint),T=this.locationCoordinate(a),O=new s.Z(T.x-(v.x-_.x),T.y-(v.y-_.y));this.center=this.coordinateLocation(O),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(a,d){return d?this.coordinatePoint(this.locationCoordinate(a),d.getElevationForLngLatZoom(a,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(a))}pointLocation(a,d){return this.coordinateLocation(this.pointCoordinate(a,d))}locationCoordinate(a){return s.Z.fromLngLat(a)}coordinateLocation(a){return a&&a.toLngLat()}pointCoordinate(a,d){if(d){const ne=d.pointCoordinate(a);if(ne!=null)return ne}const v=[a.x,a.y,0,1],_=[a.x,a.y,1,1];s.af(v,v,this.pixelMatrixInverse),s.af(_,_,this.pixelMatrixInverse);const T=v[3],O=_[3],z=v[1]/T,B=_[1]/O,V=v[2]/T,G=_[2]/O,Z=V===G?0:(0-V)/(G-V);return new s.Z(s.y.number(v[0]/T,_[0]/O,Z)/this.worldSize,s.y.number(z,B,Z)/this.worldSize)}coordinatePoint(a,d=0,v=this.pixelMatrix){const _=[a.x*this.worldSize,a.y*this.worldSize,d,1];return s.af(_,_,v),new s.P(_[0]/_[3],_[1]/_[3])}getBounds(){const a=Math.max(0,this.height/2-this.getHorizon());return new Ve().extend(this.pointLocation(new s.P(0,a))).extend(this.pointLocation(new s.P(this.width,a))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ve([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(a){a?(this.lngRange=[a.getWest(),a.getEast()],this.latRange=[a.getSouth(),a.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Yc])}calculateTileMatrix(a){const d=a.canonical,v=this.worldSize/this.zoomScale(d.z),_=d.x+Math.pow(2,d.z)*a.wrap,T=s.an(new Float64Array(16));return s.J(T,T,[_*v,d.y*v,0]),s.K(T,T,[v/s.X,v/s.X,1]),T}calculatePosMatrix(a,d=!1){const v=a.key,_=d?this._alignedPosMatrixCache:this._posMatrixCache;if(_[v])return _[v];const T=this.calculateTileMatrix(a);return s.L(T,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,T),_[v]=new Float32Array(T),_[v]}calculateFogMatrix(a){const d=a.key,v=this._fogMatrixCache;if(v[d])return v[d];const _=this.calculateTileMatrix(a);return s.L(_,this.fogMatrix,_),v[d]=new Float32Array(_),v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(a,d){d=s.ac(+d,this.minZoom,this.maxZoom);const v={center:new s.N(a.lng,a.lat),zoom:d};let _=this.lngRange;if(!this._renderWorldCopies&&_===null){const pe=179.9999999999;_=[-pe,pe]}const T=this.tileSize*this.zoomScale(v.zoom);let O=0,z=T,B=0,V=T,G=0,Z=0;const{x:ne,y:se}=this.size;if(this.latRange){const pe=this.latRange;O=s.Q(pe[1])*T,z=s.Q(pe[0])*T,z-O<se&&(G=se/(z-O))}_&&(B=s.b3(s.O(_[0])*T,0,T),V=s.b3(s.O(_[1])*T,0,T),V<B&&(V+=T),V-B<ne&&(Z=ne/(V-B)));const{x:ce,y:fe}=this.project.call({worldSize:T},a);let ge,xe;const Pe=Math.max(Z||0,G||0);if(Pe){const pe=new s.P(Z?(V+B)/2:ce,G?(z+O)/2:fe);return v.center=this.unproject.call({worldSize:T},pe).wrap(),v.zoom+=this.scaleZoom(Pe),v}if(this.latRange){const pe=se/2;fe-pe<O&&(xe=O+pe),fe+pe>z&&(xe=z-pe)}if(_){const pe=(B+V)/2;let Me=ce;this._renderWorldCopies&&(Me=s.b3(ce,pe-T/2,pe+T/2));const ze=ne/2;Me-ze<B&&(ge=B+ze),Me+ze>V&&(ge=V-ze)}if(ge!==void 0||xe!==void 0){const pe=new s.P(ge??ce,xe??fe);v.center=this.unproject.call({worldSize:T},pe).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=v,this._unmodified=a,this._constraining=!1}_calcMatrices(){if(!this.height)return;const a=this.centerOffset,d=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let _=s.an(new Float64Array(16));s.K(_,_,[this.width/2,-this.height/2,1]),s.J(_,_,[1,-1,0]),this.labelPlaneMatrix=_,_=s.an(new Float64Array(16)),s.K(_,_,[1,-1,1]),s.J(_,_,[-1,-1,0]),s.K(_,_,[2/this.width,2/this.height,1]),this.glCoordMatrix=_;const T=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),O=Math.min(this.elevation,this.minElevationForCurrentTile),z=T-O*this._pixelPerMeter/Math.cos(this._pitch),B=O<0?z:T,V=Math.PI/2+this._pitch,G=this._fov*(.5+a.y/this.height),Z=Math.sin(G)*B/Math.sin(s.ac(Math.PI-V-G,.01,Math.PI-.01)),ne=this.getHorizon(),se=2*Math.atan(ne/this.cameraToCenterDistance)*(.5+a.y/(2*ne)),ce=Math.sin(se)*B/Math.sin(s.ac(Math.PI-V-se,.01,Math.PI-.01)),fe=Math.min(Z,ce);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+B),this.nearZ=this.height/50,_=new Float64Array(16),s.b6(_,this._fov,this.width/this.height,this.nearZ,this.farZ),_[8]=2*-a.x/this.width,_[9]=2*a.y/this.height,this.projectionMatrix=s.ae(_),s.K(_,_,[1,-1,1]),s.J(_,_,[0,0,-this.cameraToCenterDistance]),s.b7(_,_,this._pitch),s.ad(_,_,this.angle),s.J(_,_,[-d,-v,0]),this.mercatorMatrix=s.K([],_,[this.worldSize,this.worldSize,this.worldSize]),s.K(_,_,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,_),s.J(_,_,[0,0,-this.elevation]),this.modelViewProjectionMatrix=_,this.invModelViewProjectionMatrix=s.as([],_),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,T,this.farZ),this.fogMatrix[8]=2*-a.x/this.width,this.fogMatrix[9]=2*a.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-d,-v,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,_);const ge=this.width%2/2,xe=this.height%2/2,Pe=Math.cos(this.angle),pe=Math.sin(this.angle),Me=d-Math.round(d)+Pe*ge+pe*xe,ze=v-Math.round(v)+Pe*xe+pe*ge,qe=new Float64Array(_);if(s.J(qe,qe,[Me>.5?Me-1:Me,ze>.5?ze-1:ze,0]),this.alignedModelViewProjectionMatrix=qe,_=s.as(new Float64Array(16),this.pixelMatrix),!_)throw new Error("failed to invert matrix");this.pixelMatrixInverse=_,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const a=this.pointCoordinate(new s.P(0,0)),d=[a.x*this.worldSize,a.y*this.worldSize,0,1];return s.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const a=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,a))}getCameraQueryGeometry(a){const d=this.getCameraPoint();if(a.length===1)return[a[0],d];{let v=d.x,_=d.y,T=d.x,O=d.y;for(const z of a)v=Math.min(v,z.x),_=Math.min(_,z.y),T=Math.max(T,z.x),O=Math.max(O,z.y);return[new s.P(v,_),new s.P(T,_),new s.P(T,O),new s.P(v,O),new s.P(v,_)]}}lngLatToCameraDepth(a,d){const v=this.locationCoordinate(a),_=[v.x*this.worldSize,v.y*this.worldSize,d,1];return s.af(_,_,this.modelViewProjectionMatrix),_[2]/_[3]}}function Uu(P,a){let d,v=!1,_=null,T=null;const O=()=>{_=null,v&&(P.apply(T,d),_=setTimeout(O,a),v=!1)};return(...z)=>(v=!0,T=this,d=z,_||O(),_)}class Jc{constructor(a){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map((_=>_.split("="))).forEach((_=>{_[0]===this._hashName&&(v=_)})),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some((v=>isNaN(v)))){const v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const v=d.join("/");let _=v;_.split("&").length>0&&(_=_.split("&")[0]),this._hashName&&(_=`${this._hashName}=${v}`);let T=window.location.hash.replace(_,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let O=window.location.href.replace(/(#.+)?$/,T);O=O.replace("&&","&"),window.history.replaceState(window.history.state,null,O)},this._updateHash=Uu(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,_=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,_),O=Math.round(d.lng*T)/T,z=Math.round(d.lat*T)/T,B=this._map.getBearing(),V=this._map.getPitch();let G="";if(G+=a?`/${O}/${z}/${v}`:`${v}/${z}/${O}`,(B||V)&&(G+="/"+Math.round(10*B)/10),V&&(G+=`/${Math.round(V)}`),this._hashName){const Z=this._hashName;let ne=!1;const se=window.location.hash.slice(1).split("&").map((ce=>{const fe=ce.split("=")[0];return fe===Z?(ne=!0,`${fe}=${G}`):ce})).filter((ce=>ce));return ne||se.push(`${Z}=${G}`),`#${se.join("&")}`}return`#${G}`}}const Jo={linearity:.3,easing:s.b8(0,0,.3,1)},Wu=s.e({deceleration:2500,maxSpeed:1400},Jo),Hu=s.e({deceleration:20,maxSpeed:1400},Jo),Qc=s.e({deceleration:1e3,maxSpeed:360},Jo),Gu=s.e({deceleration:1e3,maxSpeed:90},Jo);class Gl{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:S.now(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,d=S.now();for(;a.length>0&&d-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);const v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_={};if(d.pan.mag()){const T=dl(d.pan.mag(),v,s.e({},Wu,a||{}));_.offset=d.pan.mult(T.amount/d.pan.mag()),_.center=this._map.transform.center,Oo(_,T)}if(d.zoom){const T=dl(d.zoom,v,Hu);_.zoom=this._map.transform.zoom+T.amount,Oo(_,T)}if(d.bearing){const T=dl(d.bearing,v,Qc);_.bearing=this._map.transform.bearing+s.ac(T.amount,-179,179),Oo(_,T)}if(d.pitch){const T=dl(d.pitch,v,Gu);_.pitch=this._map.transform.pitch+T.amount,Oo(_,T)}if(_.zoom||_.bearing){const T=d.pinchAround===void 0?d.around:d.pinchAround;_.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),s.e(_,{noMoveStart:!0})}}function Oo(P,a){(!P.duration||P.duration<a.duration)&&(P.duration=a.duration,P.easing=a.easing)}function dl(P,a,d){const{maxSpeed:v,linearity:_,deceleration:T}=d,O=s.ac(P*_/(a/1e3),-v,v),z=Math.abs(O)/(T*_);return{easing:d.easing,duration:1e3*z,amount:O*(z/2)}}class di extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v,_={}){const T=E.mousePos(d.getCanvas(),v),O=d.unproject(T);super(a,s.e({point:T,lngLat:O,originalEvent:v},_)),this._defaultPrevented=!1,this.target=d}}class Io extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){const _=a==="touchend"?v.changedTouches:v.touches,T=E.touchPos(d.getCanvasContainer(),_),O=T.map((B=>d.unproject(B))),z=T.reduce(((B,V,G,Z)=>B.add(V.div(Z.length))),new s.P(0,0));super(a,{points:T,point:z,lngLats:O,lngLat:d.unproject(z),originalEvent:v}),this._defaultPrevented=!1}}class nf extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,d,v){super(a,{originalEvent:v}),this._defaultPrevented=!1}}class af{constructor(a,d){this._map=a,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new nf(a.type,this._map,a))}mousedown(a,d){return this._mousedownPos=d,this._firePreventable(new di(a.type,this._map,a))}mouseup(a){this._map.fire(new di(a.type,this._map,a))}click(a,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new di(a.type,this._map,a))}dblclick(a){return this._firePreventable(new di(a.type,this._map,a))}mouseover(a){this._map.fire(new di(a.type,this._map,a))}mouseout(a){this._map.fire(new di(a.type,this._map,a))}touchstart(a){return this._firePreventable(new Io(a.type,this._map,a))}touchmove(a){this._map.fire(new Io(a.type,this._map,a))}touchend(a){this._map.fire(new Io(a.type,this._map,a))}touchcancel(a){this._map.fire(new Io(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class kn{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new di(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new di(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class za{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.pointLocation(s.P.convert(a),this._map.terrain)}}class Qi{constructor(a,d){this._map=a,this._tr=new za(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,d){this.isEnabled()&&a.shiftKey&&a.button===0&&(E.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(a,d){if(!this._active)return;const v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;const _=this._startPos;this._lastPos=v,this._box||(this._box=E.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const T=Math.min(_.x,v.x),O=Math.max(_.x,v.x),z=Math.min(_.y,v.y),B=Math.max(_.y,v.y);E.setTransform(this._box,`translate(${T}px,${z}px)`),this._box.style.width=O-T+"px",this._box.style.height=B-z+"px"}mouseupWindow(a,d){if(!this._active||a.button!==0)return;const v=this._startPos,_=d;if(this.reset(),E.suppressClick(),v.x!==_.x||v.y!==_.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:a})),{cameraAnimation:T=>T.fitScreenCoordinates(v,_,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(E.remove(this._box),this._box=null),E.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,d){return this._map.fire(new s.k(a,{originalEvent:d}))}}function Zl(P,a){if(P.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${P.length}, points ${a.length}`);const d={};for(let v=0;v<P.length;v++)d[P[v].identifier]=a[v];return d}class Do{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),v.length===this.numTouches&&(this.centroid=(function(_){const T=new s.P(0,0);for(const O of _)T._add(O);return T.div(_.length)})(d),this.touches=Zl(v,d)))}touchmove(a,d,v){if(this.aborted||!this.centroid)return;const _=Zl(v,d);for(const T in this.touches){const O=_[T];(!O||O.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(a,d,v){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){const _=!this.aborted&&this.centroid;if(this.reset(),_)return _}}}class Xl{constructor(a){this.singleTap=new Do(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,d,v){this.singleTap.touchstart(a,d,v)}touchmove(a,d,v){this.singleTap.touchmove(a,d,v)}touchend(a,d,v){const _=this.singleTap.touchend(a,d,v);if(_){const T=a.timeStamp-this.lastTime<500,O=!this.lastTap||this.lastTap.dist(_)<30;if(T&&O||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=_,this.count===this.numTaps)return this.reset(),_}}}class Os{constructor(a){this._tr=new za(a),this._zoomIn=new Xl({numTouches:1,numTaps:2}),this._zoomOut=new Xl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,d,v){this._zoomIn.touchstart(a,d,v),this._zoomOut.touchstart(a,d,v)}touchmove(a,d,v){this._zoomIn.touchmove(a,d,v),this._zoomOut.touchmove(a,d,v)}touchend(a,d,v){const _=this._zoomIn.touchend(a,d,v),T=this._zoomOut.touchend(a,d,v),O=this._tr;return _?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:O.zoom+1,around:O.unproject(_)},{originalEvent:a})}):T?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:z=>z.easeTo({duration:300,zoom:O.zoom-1,around:O.unproject(T)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qo{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const d=this._moveFunction(...a);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(a,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,d){if(!this.isEnabled())return;const v=this._lastPoint;if(!v)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const _=d.length?d[0]:d;return!this._moved&&_.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=_,this._move(v,_))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&E.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const of={0:1,2:2};class Is{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const d=E.mouseButton(a);this._eventButton=d}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!(function(d,v){const _=of[v];return d.buttons===void 0||(d.buttons&_)!==_})(a,this._eventButton)}isValidEndEvent(a){return E.mouseButton(a)===this._eventButton}}class sf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}const Zu=P=>{P.mousedown=P.dragStart,P.mousemoveWindow=P.dragMove,P.mouseup=P.dragEnd,P.contextmenu=a=>{a.preventDefault()}},eh=({enable:P,clickTolerance:a,bearingDegreesPerPixelMoved:d=.8})=>{const v=new Is({checkCorrectEvent:_=>E.mouseButton(_)===0&&_.ctrlKey||E.mouseButton(_)===2});return new Qo({clickTolerance:a,move:(_,T)=>({bearingDelta:(T.x-_.x)*d}),moveStateManager:v,enable:P,assignEvents:Zu})},nn=({enable:P,clickTolerance:a,pitchDegreesPerPixelMoved:d=-.5})=>{const v=new Is({checkCorrectEvent:_=>E.mouseButton(_)===0&&_.ctrlKey||E.mouseButton(_)===2});return new Qo({clickTolerance:a,move:(_,T)=>({pitchDelta:(T.y-_.y)*d}),moveStateManager:v,enable:P,assignEvents:Zu})};class es{constructor(a,d){this._clickTolerance=a.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,d,v){return this._calculateTransform(a,d,v)}touchmove(a,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return a.preventDefault(),this._calculateTransform(a,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,d,v){this._calculateTransform(a,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,d,v){v.length>0&&(this._active=!0);const _=Zl(v,d),T=new s.P(0,0),O=new s.P(0,0);let z=0;for(const V in _){const G=_[V],Z=this._touches[V];Z&&(T._add(G),O._add(G.sub(Z)),z++,_[V]=G)}if(this._touches=_,this._shouldBePrevented(z)||!O.mag())return;const B=O.div(z);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(z),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class pl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(a,d,v){if(!this._firstTwoTouches)return;a.preventDefault();const[_,T]=this._firstTwoTouches,O=ts(v,d,_),z=ts(v,d,T);if(!O||!z)return;const B=this._aroundCenter?null:O.add(z).div(2);return this._move([O,z],B,a)}touchend(a,d,v){if(!this._firstTwoTouches)return;const[_,T]=this._firstTwoTouches,O=ts(v,d,_),z=ts(v,d,T);O&&z||(this._active&&E.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ts(P,a,d){for(let v=0;v<P.length;v++)if(P[v].identifier===d)return a[v]}function th(P,a){return Math.log(P/a)/Math.LN2}class Xu extends pl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,d){const v=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(th(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:th(this._distance,v),pinchAround:d}}}function ml(P,a){return 180*P.angleWith(a)/Math.PI}class Kl extends pl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,d,v){const _=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ml(this._vector,_),pinchAround:d}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const d=25/(Math.PI*this._minDiameter)*360,v=ml(a,this._startVector);return Math.abs(v)<d}}function rs(P){return Math.abs(P.y)>Math.abs(P.x)}class Yl extends pl{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,d,v){super.touchstart(a,d,v),this._currentTouchCount=v.length}_start(a){this._lastPoints=a,rs(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const _=a[0].sub(this._lastPoints[0]),T=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(_,T,v.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(_.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(a,d,v){if(this._valid!==void 0)return this._valid;const _=a.mag()>=2,T=d.mag()>=2;if(!_&&!T)return;if(!_||!T)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;const O=a.y>0==d.y>0;return rs(a)&&rs(d)&&O}}const $d={panStep:100,bearingStep:15,pitchStep:10};class Ra{constructor(a){this._tr=new za(a);const d=$d;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let d=0,v=0,_=0,T=0,O=0;switch(a.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:a.shiftKey?v=-1:(a.preventDefault(),T=-1);break;case 39:a.shiftKey?v=1:(a.preventDefault(),T=1);break;case 38:a.shiftKey?_=1:(a.preventDefault(),O=-1);break;case 40:a.shiftKey?_=-1:(a.preventDefault(),O=1);break;default:return}return this._rotationDisabled&&(v=0,_=0),{cameraAnimation:z=>{const B=this._tr;z.easeTo({duration:300,easeId:"keyboardHandler",easing:co,zoom:d?Math.round(B.zoom)+d*(a.shiftKey?2:1):B.zoom,bearing:B.bearing+v*this._bearingStep,pitch:B.pitch+_*this._pitchStep,offset:[-T*this._panStep,-O*this._panStep],center:B.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function co(P){return P*(2-P)}const Jl=4.000244140625;class ea{constructor(a,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=a,this._tr=new za(a),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let d=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const v=S.now(),_=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Jl==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":_>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(_*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),a.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=a,this._delta-=d,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=E.mousePos(this._map.getCanvas(),a),v=this._tr;this._around=d.y>v.transform.height/2-v.transform.getHorizon()?s.N.convert(this._aroundCenter?v.center:v.unproject(d)):s.N.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(this._delta!==0){const B=this._type==="wheel"&&Math.abs(this._delta)>Jl?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*B)));this._delta<0&&V!==0&&(V=1/V);const G=typeof this._targetZoom=="number"?a.zoomScale(this._targetZoom):a.scale;this._targetZoom=Math.min(a.maxZoom,Math.max(a.minZoom,a.scaleZoom(G*V))),this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:a.zoom,v=this._startZoom,_=this._easing;let T,O=!1;const z=S.now()-this._lastWheelEventTime;if(this._type==="wheel"&&v&&_&&z){const B=Math.min(z/200,1),V=_(B);T=s.y.number(v,d,V),B<1?this._frameId||(this._frameId=!0):O=!0}else T=d,O=!0;return this._active=!0,O&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!O,zoomDelta:T-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let d=s.b9;if(this._prevEase){const v=this._prevEase,_=(S.now()-v.start)/v.duration,T=v.easing(_+.01)-v.easing(_),O=.27/Math.sqrt(T*T+1e-4)*.01,z=Math.sqrt(.0729-O*O);d=s.b8(O,z,.25,1)}return this._prevEase={start:S.now(),duration:a,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ns{constructor(a,d){this._clickZoom=a,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class lf{constructor(a){this._tr=new za(a),this.reset()}reset(){this._active=!1}dblclick(a,d){return a.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(a.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class uf{constructor(){this._tap=new Xl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,d,v){if(!this._swipePoint)if(this._tapTime){const _=d[0],T=a.timeStamp-this._tapTime<500,O=this._tapPoint.dist(_)<30;T&&O?v.length>0&&(this._swipePoint=_,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(a,d,v)}touchmove(a,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;const _=d[0],T=_.y-this._swipePoint.y;return this._swipePoint=_,a.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(a,d,v)}touchend(a,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{const _=this._tap.touchend(a,d,v);_&&(this._tapTime=a.timeStamp,this._tapPoint=_)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rh{constructor(a,d,v){this._el=a,this._mousePan=d,this._touchPan=v}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Vd{constructor(a,d,v){this._pitchWithRotate=a.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class nh{constructor(a,d,v,_){this._el=a,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=_,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ql{constructor(a,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=E.create("div","maplibregl-cooperative-gesture-screen",a);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),_=document.createElement("div");_.className="maplibregl-desktop-message",_.textContent=d,this._container.appendChild(_);const T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=v,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(E.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,d){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:a,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const La=P=>P.zoom||P.drag||P.pitch||P.rotate;class Ot extends s.k{}function ho(P){return P.panDelta&&P.panDelta.mag()||P.zoomDelta||P.bearingDelta||P.pitchDelta}class ih{constructor(a,d){this.handleWindowEvent=_=>{this.handleEvent(_,`${_.type}Window`)},this.handleEvent=(_,T)=>{if(_.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const O=_.type==="renderFrame"?void 0:_,z={needsRenderFrame:!1},B={},V={},G=_.touches,Z=G?this._getMapTouches(G):void 0,ne=Z?E.touchPos(this._map.getCanvas(),Z):E.mousePos(this._map.getCanvas(),_);for(const{handlerName:fe,handler:ge,allowed:xe}of this._handlers){if(!ge.isEnabled())continue;let Pe;this._blockedByActive(V,xe,fe)?ge.reset():ge[T||_.type]&&(Pe=ge[T||_.type](_,ne,Z),this.mergeHandlerResult(z,B,Pe,fe,O),Pe&&Pe.needsRenderFrame&&this._triggerRenderFrame()),(Pe||ge.isActive())&&(V[fe]=ge)}const se={};for(const fe in this._previousActiveHandlers)V[fe]||(se[fe]=O);this._previousActiveHandlers=V,(Object.keys(se).length||ho(z))&&(this._changes.push([z,B,se]),this._triggerRenderFrame()),(Object.keys(V).length||ho(z))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=z;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Gl(a),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(const[_,T,O]of this._listeners)E.addEventListener(_,T,_===document?this.handleWindowEvent:this.handleEvent,O)}destroy(){for(const[a,d,v]of this._listeners)E.removeEventListener(a,d,a===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(a){const d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new af(d,a));const _=d.boxZoom=new Qi(d,a);this._add("boxZoom",_),a.interactive&&a.boxZoom&&_.enable();const T=d.cooperativeGestures=new Ql(d,a.cooperativeGestures);this._add("cooperativeGestures",T),a.cooperativeGestures&&T.enable();const O=new Os(d),z=new lf(d);d.doubleClickZoom=new ns(z,O),this._add("tapZoom",O),this._add("clickZoom",z),a.interactive&&a.doubleClickZoom&&d.doubleClickZoom.enable();const B=new uf;this._add("tapDragZoom",B);const V=d.touchPitch=new Yl(d);this._add("touchPitch",V),a.interactive&&a.touchPitch&&d.touchPitch.enable(a.touchPitch);const G=eh(a),Z=nn(a);d.dragRotate=new Vd(a,G,Z),this._add("mouseRotate",G,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate"]),a.interactive&&a.dragRotate&&d.dragRotate.enable();const ne=(({enable:Pe,clickTolerance:pe})=>{const Me=new Is({checkCorrectEvent:ze=>E.mouseButton(ze)===0&&!ze.ctrlKey});return new Qo({clickTolerance:pe,move:(ze,qe)=>({around:qe,panDelta:qe.sub(ze)}),activateOnStart:!0,moveStateManager:Me,enable:Pe,assignEvents:Zu})})(a),se=new es(a,d);d.dragPan=new rh(v,ne,se),this._add("mousePan",ne),this._add("touchPan",se,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&d.dragPan.enable(a.dragPan);const ce=new Kl,fe=new Xu;d.touchZoomRotate=new nh(v,fe,ce,B),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",fe,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&d.touchZoomRotate.enable(a.touchZoomRotate);const ge=d.scrollZoom=new ea(d,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ge,["mousePan"]),a.interactive&&a.scrollZoom&&d.scrollZoom.enable(a.scrollZoom);const xe=d.keyboard=new Ra(d);this._add("keyboard",xe),a.interactive&&a.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new kn(d))}_add(a,d,v){this._handlers.push({handlerName:a,handler:d,allowed:v}),this._handlersById[a]=d}stop(a){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!La(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,d,v){for(const _ in a)if(_!==v&&(!d||d.indexOf(_)<0))return!0;return!1}_getMapTouches(a){const d=[];for(const v of a)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(a,d,v,_,T){if(!v)return;s.e(a,v);const O={handlerName:_,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(d.zoom=O),v.panDelta!==void 0&&(d.drag=O),v.pitchDelta!==void 0&&(d.pitch=O),v.bearingDelta!==void 0&&(d.rotate=O)}_applyChanges(){const a={},d={},v={};for(const[_,T,O]of this._changes)_.panDelta&&(a.panDelta=(a.panDelta||new s.P(0,0))._add(_.panDelta)),_.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+_.zoomDelta),_.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+_.bearingDelta),_.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+_.pitchDelta),_.around!==void 0&&(a.around=_.around),_.pinchAround!==void 0&&(a.pinchAround=_.pinchAround),_.noInertia&&(a.noInertia=_.noInertia),s.e(d,T),s.e(v,O);this._updateMapTransform(a,d,v),this._changes=[]}_updateMapTransform(a,d,v){const _=this._map,T=_._getTransformForUpdate(),O=_.terrain;if(!(ho(a)||O&&this._terrainMovement))return this._fireEvents(d,v,!0);let{panDelta:z,zoomDelta:B,bearingDelta:V,pitchDelta:G,around:Z,pinchAround:ne}=a;ne!==void 0&&(Z=ne),_._stop(!0),Z=Z||_.transform.centerPoint;const se=T.pointLocation(z?Z.sub(z):Z);V&&(T.bearing+=V),G&&(T.pitch+=G),B&&(T.zoom+=B),O?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?T.center=T.pointLocation(T.centerPoint.sub(z)):T.setLocationAtPoint(se,Z):(this._terrainMovement=!0,this._map._elevationFreeze=!0,T.setLocationAtPoint(se,Z)):T.setLocationAtPoint(se,Z),_._applyUpdatedTransform(T),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(d,v,!0)}_fireEvents(a,d,v){const _=La(this._eventsInProgress),T=La(a),O={};for(const Z in a){const{originalEvent:ne}=a[Z];this._eventsInProgress[Z]||(O[`${Z}start`]=ne),this._eventsInProgress[Z]=a[Z]}!_&&T&&this._fireEvent("movestart",T.originalEvent);for(const Z in O)this._fireEvent(Z,O[Z]);T&&this._fireEvent("move",T.originalEvent);for(const Z in a){const{originalEvent:ne}=a[Z];this._fireEvent(Z,ne)}const z={};let B;for(const Z in this._eventsInProgress){const{handlerName:ne,originalEvent:se}=this._eventsInProgress[Z];this._handlersById[ne].isActive()||(delete this._eventsInProgress[Z],B=d[ne]||se,z[`${Z}end`]=B)}for(const Z in z)this._fireEvent(Z,z[Z]);const V=La(this._eventsInProgress),G=(_||T)&&!V;if(G&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Z=this._map._getTransformForUpdate();Z.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(Z)}if(v&&G){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ne=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;!Z||!Z.essential&&S.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:B})),ne(this._map.getBearing())&&this._map.resetNorth()):(ne(Z.bearing||this._map.getBearing())&&(Z.bearing=0),Z.freezeElevation=!0,this._map.easeTo(Z,{originalEvent:B})),this._updatingCamera=!1}}_fireEvent(a,d){this._map.fire(new s.k(a,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((a=>{delete this._frameId,this.handleEvent(new Ot("renderFrame",{timeStamp:a})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class gl extends s.E{constructor(a,d){super(),this._renderFrameCallback=()=>{const v=Math.min((S.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=d.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(a,d){return this.jumpTo({center:a},d)}panBy(a,d,v){return a=s.P.convert(a).mult(-1),this.panTo(this.transform.center,s.e({offset:a},d),v)}panTo(a,d,v){return this.easeTo(s.e({center:a},d),v)}getZoom(){return this.transform.zoom}setZoom(a,d){return this.jumpTo({zoom:a},d),this}zoomTo(a,d,v){return this.easeTo(s.e({zoom:a},d),v)}zoomIn(a,d){return this.zoomTo(this.getZoom()+1,a,d),this}zoomOut(a,d){return this.zoomTo(this.getZoom()-1,a,d),this}getBearing(){return this.transform.bearing}setBearing(a,d){return this.jumpTo({bearing:a},d),this}getPadding(){return this.transform.padding}setPadding(a,d){return this.jumpTo({padding:a},d),this}rotateTo(a,d,v){return this.easeTo(s.e({bearing:a},d),v)}resetNorth(a,d){return this.rotateTo(0,s.e({duration:1e3},a),d),this}resetNorthPitch(a,d){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},a),d),this}snapToNorth(a,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,d):this}getPitch(){return this.transform.pitch}setPitch(a,d){return this.jumpTo({pitch:a},d),this}cameraForBounds(a,d){a=Ve.convert(a).adjustAntiMeridian();const v=d&&d.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),v,d)}_cameraForBoxAndBearing(a,d,v,_){const T={top:0,bottom:0,right:0,left:0};if(typeof(_=s.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},_)).padding=="number"){const xt=_.padding;_.padding={top:xt,bottom:xt,right:xt,left:xt}}_.padding=s.e(T,_.padding);const O=this.transform,z=O.padding,B=new Ve(a,d),V=O.project(B.getNorthWest()),G=O.project(B.getNorthEast()),Z=O.project(B.getSouthEast()),ne=O.project(B.getSouthWest()),se=s.ba(-v),ce=V.rotate(se),fe=G.rotate(se),ge=Z.rotate(se),xe=ne.rotate(se),Pe=new s.P(Math.max(ce.x,fe.x,xe.x,ge.x),Math.max(ce.y,fe.y,xe.y,ge.y)),pe=new s.P(Math.min(ce.x,fe.x,xe.x,ge.x),Math.min(ce.y,fe.y,xe.y,ge.y)),Me=Pe.sub(pe),ze=(O.width-(z.left+z.right+_.padding.left+_.padding.right))/Me.x,qe=(O.height-(z.top+z.bottom+_.padding.top+_.padding.bottom))/Me.y;if(qe<0||ze<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ot=Math.min(O.scaleZoom(O.scale*Math.min(ze,qe)),_.maxZoom),pt=s.P.convert(_.offset),_t=new s.P((_.padding.left-_.padding.right)/2,(_.padding.top-_.padding.bottom)/2).rotate(s.ba(v)),kt=pt.add(_t).mult(O.scale/O.zoomScale(ot));return{center:O.unproject(V.add(Z).div(2).sub(kt)),zoom:ot,bearing:v}}fitBounds(a,d,v){return this._fitInternal(this.cameraForBounds(a,d),d,v)}fitScreenCoordinates(a,d,v,_,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(a)),this.transform.pointLocation(s.P.convert(d)),v,_),_,T)}_fitInternal(a,d,v){return a?(delete(d=s.e(a,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(a,d){this.stop();const v=this._getTransformForUpdate();let _=!1,T=!1,O=!1;return"zoom"in a&&v.zoom!==+a.zoom&&(_=!0,v.zoom=+a.zoom),a.center!==void 0&&(v.center=s.N.convert(a.center)),"bearing"in a&&v.bearing!==+a.bearing&&(T=!0,v.bearing=+a.bearing),"pitch"in a&&v.pitch!==+a.pitch&&(O=!0,v.pitch=+a.pitch),a.padding==null||v.isPaddingEqual(a.padding)||(v.padding=a.padding),this._applyUpdatedTransform(v),this.fire(new s.k("movestart",d)).fire(new s.k("move",d)),_&&this.fire(new s.k("zoomstart",d)).fire(new s.k("zoom",d)).fire(new s.k("zoomend",d)),T&&this.fire(new s.k("rotatestart",d)).fire(new s.k("rotate",d)).fire(new s.k("rotateend",d)),O&&this.fire(new s.k("pitchstart",d)).fire(new s.k("pitch",d)).fire(new s.k("pitchend",d)),this.fire(new s.k("moveend",d))}calculateCameraOptionsFromTo(a,d,v,_=0){const T=s.Z.fromLngLat(a,d),O=s.Z.fromLngLat(v,_),z=O.x-T.x,B=O.y-T.y,V=O.z-T.z,G=Math.hypot(z,B,V);if(G===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(z,B),ne=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),se=180*Math.atan2(z,-B)/Math.PI;let ce=180*Math.acos(Z/G)/Math.PI;return ce=V<0?90-ce:90+ce,{center:O.toLngLat(),zoom:ne,pitch:ce,bearing:se}}easeTo(a,d){var v;this._stop(!1,a.easeId),((a=s.e({offset:[0,0],duration:500,easing:s.b9},a)).animate===!1||!a.essential&&S.prefersReducedMotion)&&(a.duration=0);const _=this._getTransformForUpdate(),T=_.zoom,O=_.bearing,z=_.pitch,B=_.padding,V="bearing"in a?this._normalizeBearing(a.bearing,O):O,G="pitch"in a?+a.pitch:z,Z="padding"in a?a.padding:_.padding,ne=s.P.convert(a.offset);let se=_.centerPoint.add(ne);const ce=_.pointLocation(se),{center:fe,zoom:ge}=_.getConstrained(s.N.convert(a.center||ce),(v=a.zoom)!==null&&v!==void 0?v:T);this._normalizeCenter(fe,_);const xe=_.project(ce),Pe=_.project(fe).sub(xe),pe=_.zoomScale(ge-T);let Me,ze;a.around&&(Me=s.N.convert(a.around),ze=_.locationPoint(Me));const qe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==T,this._rotating=this._rotating||O!==V,this._pitching=this._pitching||G!==z,this._padding=!_.isPaddingEqual(Z),this._easeId=a.easeId,this._prepareEase(d,a.noMoveStart,qe),this.terrain&&this._prepareElevation(fe),this._ease((ot=>{if(this._zooming&&(_.zoom=s.y.number(T,ge,ot)),this._rotating&&(_.bearing=s.y.number(O,V,ot)),this._pitching&&(_.pitch=s.y.number(z,G,ot)),this._padding&&(_.interpolatePadding(B,Z,ot),se=_.centerPoint.add(ne)),this.terrain&&!a.freezeElevation&&this._updateElevation(ot),Me)_.setLocationAtPoint(Me,ze);else{const pt=_.zoomScale(_.zoom-T),_t=ge>T?Math.min(2,pe):Math.max(.5,pe),kt=Math.pow(_t,1-ot),xt=_.unproject(xe.add(Pe.mult(ot*kt)).mult(pt));_.setLocationAtPoint(_.renderWorldCopies?xt.wrap():xt,se)}this._applyUpdatedTransform(_),this._fireMoveEvents(d)}),(ot=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ot)}),a),this}_prepareEase(a,d,v={}){this._moving=!0,d||v.moving||this.fire(new s.k("movestart",a)),this._zooming&&!v.zooming&&this.fire(new s.k("zoomstart",a)),this._rotating&&!v.rotating&&this.fire(new s.k("rotatestart",a)),this._pitching&&!v.pitching&&this.fire(new s.k("pitchstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&d!==this._elevationTarget){const v=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(v-(d-(v*a+this._elevationStart))/(1-a)),this._elevationTarget=d}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,a)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){const d=a.getCameraPosition(),v=this.terrain.getElevationForLngLatZoom(d.lngLat,a.zoom);if(d.altitude<v){const _=this.calculateCameraOptionsFromTo(d.lngLat,v,a.center,a.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(a){const d=[];if(this.terrain&&d.push((_=>this._elevateCameraIfInsideTerrain(_))),this.transformCameraUpdate&&d.push((_=>this.transformCameraUpdate(_))),!d.length)return;const v=a.clone();for(const _ of d){const T=v.clone(),{center:O,zoom:z,pitch:B,bearing:V,elevation:G}=_(T);O&&(T.center=O),z!==void 0&&(T.zoom=z),B!==void 0&&(T.pitch=B),V!==void 0&&(T.bearing=V),G!==void 0&&(T.elevation=G),v.apply(T)}this.transform.apply(v)}_fireMoveEvents(a){this.fire(new s.k("move",a)),this._zooming&&this.fire(new s.k("zoom",a)),this._rotating&&this.fire(new s.k("rotate",a)),this._pitching&&this.fire(new s.k("pitch",a))}_afterEase(a,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const v=this._zooming,_=this._rotating,T=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new s.k("zoomend",a)),_&&this.fire(new s.k("rotateend",a)),T&&this.fire(new s.k("pitchend",a)),this.fire(new s.k("moveend",a))}flyTo(a,d){var v;if(!a.essential&&S.prefersReducedMotion){const Tt=s.M(a,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Tt,d)}this.stop(),a=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},a);const _=this._getTransformForUpdate(),T=_.zoom,O=_.bearing,z=_.pitch,B=_.padding,V="bearing"in a?this._normalizeBearing(a.bearing,O):O,G="pitch"in a?+a.pitch:z,Z="padding"in a?a.padding:_.padding,ne=s.P.convert(a.offset);let se=_.centerPoint.add(ne);const ce=_.pointLocation(se),{center:fe,zoom:ge}=_.getConstrained(s.N.convert(a.center||ce),(v=a.zoom)!==null&&v!==void 0?v:T);this._normalizeCenter(fe,_);const xe=_.zoomScale(ge-T),Pe=_.project(ce),pe=_.project(fe).sub(Pe);let Me=a.curve;const ze=Math.max(_.width,_.height),qe=ze/xe,ot=pe.mag();if("minZoom"in a){const Tt=s.ac(Math.min(a.minZoom,T,ge),_.minZoom,_.maxZoom),ir=ze/_.zoomScale(Tt-T);Me=Math.sqrt(ir/ot*2)}const pt=Me*Me;function _t(Tt){const ir=(qe*qe-ze*ze+(Tt?-1:1)*pt*pt*ot*ot)/(2*(Tt?qe:ze)*pt*ot);return Math.log(Math.sqrt(ir*ir+1)-ir)}function kt(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function xt(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}const yt=_t(!1);let Rt=function(Tt){return xt(yt)/xt(yt+Me*Tt)},ar=function(Tt){return ze*((xt(yt)*(kt(ir=yt+Me*Tt)/xt(ir))-kt(yt))/pt)/ot;var ir},wt=(_t(!0)-yt)/Me;if(Math.abs(ot)<1e-6||!isFinite(wt)){if(Math.abs(ze-qe)<1e-6)return this.easeTo(a,d);const Tt=qe<ze?-1:1;wt=Math.abs(Math.log(qe/ze))/Me,ar=()=>0,Rt=ir=>Math.exp(Tt*Me*ir)}return a.duration="duration"in a?+a.duration:1e3*wt/("screenSpeed"in a?+a.screenSpeed/Me:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=O!==V,this._pitching=G!==z,this._padding=!_.isPaddingEqual(Z),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(fe),this._ease((Tt=>{const ir=Tt*wt,Zr=1/Rt(ir);_.zoom=Tt===1?ge:T+_.scaleZoom(Zr),this._rotating&&(_.bearing=s.y.number(O,V,Tt)),this._pitching&&(_.pitch=s.y.number(z,G,Tt)),this._padding&&(_.interpolatePadding(B,Z,Tt),se=_.centerPoint.add(ne)),this.terrain&&!a.freezeElevation&&this._updateElevation(Tt);const dr=Tt===1?fe:_.unproject(Pe.add(pe.mult(ar(ir))).mult(Zr));_.setLocationAtPoint(_.renderWorldCopies?dr.wrap():dr,se),this._applyUpdatedTransform(_),this._fireMoveEvents(d)}),(()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(d)}),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const _=this._onEaseEnd;delete this._onEaseEnd,_.call(this,d)}return a||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(a,d,v){v.animate===!1||v.duration===0?(a(1),d()):(this._easeStart=S.now(),this._easeOptions=v,this._onEaseFrame=a,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,d){a=s.b3(a,-180,180);const v=Math.abs(a-d);return Math.abs(a-360-d)<v&&(a-=360),Math.abs(a+360-d)<v&&(a+=360),a}_normalizeCenter(a,d){if(!d.renderWorldCopies||d.lngRange)return;const v=a.lng-d.center.lng;a.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(a),this.transform.tileZoom)-this.transform.elevation:null}}const Li={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class zo{constructor(a=Li){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=E.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=E.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=E.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){E.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,d){const v=this._map._getUIString(`AttributionControl.${d}`);a.title=v,a.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map((_=>typeof _!="string"?"":_))):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const _=this._map.style.stylesheet;this.styleOwner=_.owner,this.styleId=_.id}const d=this._map.style.sourceCaches;for(const _ in d){const T=d[_];if(T.used||T.usedForTerrain){const O=T.getSource();O.attribution&&a.indexOf(O.attribution)<0&&a.push(O.attribution)}}a=a.filter((_=>String(_).trim())),a.sort(((_,T)=>_.length-T.length)),a=a.filter(((_,T)=>{for(let O=T+1;O<a.length;O++)if(a[O].indexOf(_)>=0)return!1;return!0}));const v=a.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,a.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class fo{constructor(a={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=E.create("div","maplibregl-ctrl");const d=E.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){E.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Pr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const d=++this._id;return this._queue.push({callback:a,id:d,cancelled:!1}),d}remove(a){const d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(const _ of v)if(_.id===a)return void(_.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const v of d)if(!v.cancelled&&(v.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cf=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class zm extends s.E{constructor(a){super(),this.sourceCache=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,a.usedForTerrain=!0,a.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(a,d){this.sourceCache.update(a,d),this._renderableTilesKeys=[];const v={};for(const _ of a.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))v[_.key]=!0,this._renderableTilesKeys.push(_.key),this._tiles[_.key]||(_.posMatrix=new Float64Array(16),s.aP(_.posMatrix,0,s.X,0,s.X,0,1),this._tiles[_.key]=new bs(_,this.tileSize));for(const _ in this._tiles)v[_]||delete this._tiles[_]}freeRtt(a){for(const d in this._tiles){const v=this._tiles[d];(!a||v.tileID.equals(a)||v.tileID.isChildOf(a)||a.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((a=>this.getTileByID(a)))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a){const d={};for(const v of this._renderableTilesKeys){const _=this._tiles[v].tileID;if(_.canonical.equals(a.canonical)){const T=a.clone();T.posMatrix=new Float64Array(16),s.aP(T.posMatrix,0,s.X,0,s.X,0,1),d[v]=T}else if(_.canonical.isChildOf(a.canonical)){const T=a.clone();T.posMatrix=new Float64Array(16);const O=_.canonical.z-a.canonical.z,z=_.canonical.x-(_.canonical.x>>O<<O),B=_.canonical.y-(_.canonical.y>>O<<O),V=s.X>>O;s.aP(T.posMatrix,0,V,0,V,0,1),s.J(T.posMatrix,T.posMatrix,[-z*V,-B*V,0]),d[v]=T}else if(a.canonical.isChildOf(_.canonical)){const T=a.clone();T.posMatrix=new Float64Array(16);const O=a.canonical.z-_.canonical.z,z=a.canonical.x-(a.canonical.x>>O<<O),B=a.canonical.y-(a.canonical.y>>O<<O),V=s.X>>O;s.aP(T.posMatrix,0,s.X,0,s.X,0,1),s.J(T.posMatrix,T.posMatrix,[z*V,B*V,0]),s.K(T.posMatrix,T.posMatrix,[1/2**O,1/2**O,0]),d[v]=T}}return d}getSourceTile(a,d){const v=this.sourceCache._source;let _=a.overscaledZ-this.deltaZoom;if(_>v.maxzoom&&(_=v.maxzoom),_<v.minzoom)return null;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(_).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[a.key]);if((!T||!T.dem)&&d)for(;_>=v.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(a.scaledTo(_--).key);return T}tilesAfterTime(a=Date.now()){return Object.values(this._tiles).filter((d=>d.timeAdded>=a))}}class is{constructor(a,d,v){this.painter=a,this.sourceCache=new zm(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,d,v,_=s.X){var T;if(!(d>=0&&d<_&&v>=0&&v<_))return 0;const O=this.getTerrainData(a),z=(T=O.tile)===null||T===void 0?void 0:T.dem;if(!z)return 0;const B=(function(ce,fe,ge){var xe=fe[0],Pe=fe[1];return ce[0]=ge[0]*xe+ge[4]*Pe+ge[12],ce[1]=ge[1]*xe+ge[5]*Pe+ge[13],ce})([],[d/_*s.X,v/_*s.X],O.u_terrain_matrix),V=[B[0]*z.dim,B[1]*z.dim],G=Math.floor(V[0]),Z=Math.floor(V[1]),ne=V[0]-G,se=V[1]-Z;return z.get(G,Z)*(1-ne)*(1-se)+z.get(G+1,Z)*ne*(1-se)+z.get(G,Z+1)*(1-ne)*se+z.get(G+1,Z+1)*ne*se}getElevationForLngLatZoom(a,d){if(!s.bb(d,a.wrap()))return 0;const{tileID:v,mercatorX:_,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(a,d);return this.getElevation(v,_%s.X,T%s.X,s.X)}getElevation(a,d,v,_=s.X){return this.getDEMElevation(a,d,v,_)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const _=this.painter.context,T=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new de(_,T,_.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new de(_,new s.R({width:1,height:1}),_.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}const d=this.sourceCache.getSourceTile(a,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const _=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new de(_,d.dem.getPixels(),_.gl.RGBA,{premultiply:!1}),d.demTexture.bind(_.gl.NEAREST,_.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const v=d&&d+d.tileID.key+a.key;if(v&&!this._demMatrixCache[v]){const _=this.sourceCache.sourceCache._source.maxzoom;let T=a.canonical.z-d.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=_?T=a.canonical.z-_:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const O=a.canonical.x-(a.canonical.x>>T<<T),z=a.canonical.y-(a.canonical.y>>T<<T),B=s.bc(new Float64Array(16),[1/(s.X<<T),1/(s.X<<T),0]);s.J(B,B,[O*s.X,z*s.X,0]),this._demMatrixCache[a.key]={matrix:B,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(a){const d=this.painter,v=d.width/devicePixelRatio,_=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===_||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new de(d.context,{width:v,height:_,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new de(d.context,{width:v,height:_,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,_,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,_))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,O=0;T<this._coordsTextureSize;T++)for(let z=0;z<this._coordsTextureSize;z++,O+=4)d[O+0]=255&z,d[O+1]=255&T,d[O+2]=z>>8<<4|T>>8,d[O+3]=0;const v=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),_=new de(a,v,a.gl.RGBA,{premultiply:!1});return _.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=_,_}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),v=this.painter.context,_=v.gl,T=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),O=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),z=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),_.readPixels(T,z-O-1,1,1,_.RGBA,_.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);const B=d[0]+(d[2]>>4<<8),V=d[1]+((15&d[2])<<8),G=this.coordsIndex[255-d[3]],Z=G&&this.sourceCache.getTileByID(G);if(!Z)return null;const ne=this._coordsTextureSize,se=(1<<Z.tileID.canonical.z)*ne;return new s.Z((Z.tileID.canonical.x*ne+B)/se+Z.tileID.wrap,(Z.tileID.canonical.y*ne+V)/se,this.getElevation(Z.tileID,B,V,ne))}depthAtPoint(a){const d=new Uint8Array(4),v=this.painter.context,_=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),_.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,_.RGBA,_.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const a=this.painter.context,d=new s.bd,v=new s.aY,_=this.meshSize,T=s.X/_,O=_*_;for(let Z=0;Z<=_;Z++)for(let ne=0;ne<=_;ne++)d.emplaceBack(ne*T,Z*T,0);for(let Z=0;Z<O;Z+=_+1)for(let ne=0;ne<_;ne++)v.emplaceBack(ne+Z,_+ne+Z+1,_+ne+Z+2),v.emplaceBack(ne+Z,_+ne+Z+2,ne+Z+1);const z=d.length,B=z+2*(_+1);for(const Z of[0,1])for(let ne=0;ne<=_;ne++)for(const se of[0,1])d.emplaceBack(ne*T,Z*s.X,se);for(let Z=0;Z<2*_;Z+=2)v.emplaceBack(B+Z,B+Z+1,B+Z+3),v.emplaceBack(B+Z,B+Z+3,B+Z+2),v.emplaceBack(z+Z,z+Z+3,z+Z+1),v.emplaceBack(z+Z,z+Z+2,z+Z+3);const V=d.length,G=V+2*(_+1);for(const Z of[0,1])for(let ne=0;ne<=_;ne++)for(const se of[0,1])d.emplaceBack(Z*s.X,ne*T,se);for(let Z=0;Z<2*_;Z+=2)v.emplaceBack(V+Z,V+Z+1,V+Z+3),v.emplaceBack(V+Z,V+Z+3,V+Z+2),v.emplaceBack(G+Z,G+Z+3,G+Z+1),v.emplaceBack(G+Z,G+Z+2,G+Z+3);return this._mesh=new Ji(a.createVertexBuffer(d,cf.members),a.createIndexBuffer(v),s.a0.simpleSegment(0,0,d.length,v.length)),this._mesh}getMeshFrameDelta(a){return 2*Math.PI*s.be/Math.pow(2,a)/5}getMinTileElevationForLngLatZoom(a,d){var v;const{tileID:_}=this._getOverscaledTileIDFromLngLatZoom(a,d);return(v=this.getMinMaxElevation(_).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(a){const d=this.getTerrainData(a).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(a,d){const v=s.Z.fromLngLat(a.wrap()),_=(1<<d)*s.X,T=v.x*_,O=v.y*_,z=Math.floor(T/s.X),B=Math.floor(O/s.X);return{tileID:new s.S(d,0,d,z,B),mercatorX:T,mercatorY:O}}}class Ku{constructor(a,d,v){this._context=a,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new de(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:a,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((d=>a.id!==d)),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((a=>!a.inUse))===!1}}const po={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yu{constructor(a,d){this.painter=a,this.terrain=d,this.pool=new Ku(a.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=a._order.filter((v=>!a._layers[v].isHidden(d))),this._coordsDescendingInv={};for(const v in a.sourceCaches){this._coordsDescendingInv[v]={};const _=a.sourceCaches[v].getVisibleCoordinates();for(const T of _){const O=this.terrain.sourceCache.getTerrainCoords(T);for(const z in O)this._coordsDescendingInv[v][z]||(this._coordsDescendingInv[v][z]=[]),this._coordsDescendingInv[v][z].push(O[z])}}this._coordsDescendingInvStr={};for(const v of a._order){const _=a._layers[v],T=_.source;if(po[_.type]&&!this._coordsDescendingInvStr[T]){this._coordsDescendingInvStr[T]={};for(const O in this._coordsDescendingInv[T])this._coordsDescendingInvStr[T][O]=this._coordsDescendingInv[T][O].map((z=>z.key)).sort().join()}}for(const v of this._renderableTiles)for(const _ in this._coordsDescendingInvStr){const T=this._coordsDescendingInvStr[_][v.tileID.key];T&&T!==v.rttCoords[_]&&(v.rtt=[])}}renderLayer(a){if(a.isHidden(this.painter.transform.zoom))return!1;const d=a.type,v=this.painter,_=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(po[d]&&(this._prevType&&po[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(a.id),!_))return!0;if(po[this._prevType]||po[d]&&_){this._prevType=d;const T=this._stacks.length-1,O=this._stacks[T]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(Nd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[T]){const V=this.pool.getObjectForId(z.rtt[T].id);if(V.stamp===z.rtt[T].stamp){this.pool.useObject(V);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),z.rtt[T]={id:B.id,stamp:B.stamp},v.context.bindFramebuffer.set(B.fbo.framebuffer),v.context.clear({color:s.aM.transparent,stencil:0}),v.currentStencilSource=void 0;for(let V=0;V<O.length;V++){const G=v.style._layers[O[V]],Z=G.source?this._coordsDescendingInv[G.source][z.tileID.key]:[z.tileID];v.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),v._renderTileClippingMasks(G,Z),v.renderLayer(v,v.style.sourceCaches[G.source],G,Z),G.source&&(z.rttCoords[G.source]=this._coordsDescendingInvStr[G.source][z.tileID.key])}}return Nd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),po[d]}return!1}}const Ju={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},yl=m,Ds={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Li,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},an=P=>{P.touchstart=P.dragStart,P.touchmoveWindow=P.dragMove,P.touchend=P.dragEnd},fn={showCompass:!0,showZoom:!0,visualizePitch:!1};class zs{constructor(a,d,v=!1){this.mousedown=O=>{this.startMouse(s.e({},O,{ctrlKey:!0,preventDefault:()=>O.preventDefault()}),E.mousePos(this.element,O)),E.addEventListener(window,"mousemove",this.mousemove),E.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=O=>{this.moveMouse(O,E.mousePos(this.element,O))},this.mouseup=O=>{this.mouseRotate.dragEnd(O),this.mousePitch&&this.mousePitch.dragEnd(O),this.offTemp()},this.touchstart=O=>{O.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=E.touchPos(this.element,O.targetTouches)[0],this.startTouch(O,this._startPos),E.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.addEventListener(window,"touchend",this.touchend))},this.touchmove=O=>{O.targetTouches.length!==1?this.reset():(this._lastPos=E.touchPos(this.element,O.targetTouches)[0],this.moveTouch(O,this._lastPos))},this.touchend=O=>{O.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const _=a.dragRotate._mouseRotate.getClickTolerance(),T=a.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=eh({clickTolerance:_,enable:!0}),this.touchRotate=(({enable:O,clickTolerance:z,bearingDegreesPerPixelMoved:B=.8})=>{const V=new sf;return new Qo({clickTolerance:z,move:(G,Z)=>({bearingDelta:(Z.x-G.x)*B}),moveStateManager:V,enable:O,assignEvents:an})})({clickTolerance:_,enable:!0}),this.map=a,v&&(this.mousePitch=nn({clickTolerance:T,enable:!0}),this.touchPitch=(({enable:O,clickTolerance:z,pitchDegreesPerPixelMoved:B=-.5})=>{const V=new sf;return new Qo({clickTolerance:z,move:(G,Z)=>({pitchDelta:(Z.y-G.y)*B}),moveStateManager:V,enable:O,assignEvents:an})})({clickTolerance:T,enable:!0})),E.addEventListener(d,"mousedown",this.mousedown),E.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),E.addEventListener(d,"touchcancel",this.reset)}startMouse(a,d){this.mouseRotate.dragStart(a,d),this.mousePitch&&this.mousePitch.dragStart(a,d),E.disableDrag()}startTouch(a,d){this.touchRotate.dragStart(a,d),this.touchPitch&&this.touchPitch.dragStart(a,d),E.disableDrag()}moveMouse(a,d){const v=this.map,{bearingDelta:_}=this.mouseRotate.dragMove(a,d)||{};if(_&&v.setBearing(v.getBearing()+_),this.mousePitch){const{pitchDelta:T}=this.mousePitch.dragMove(a,d)||{};T&&v.setPitch(v.getPitch()+T)}}moveTouch(a,d){const v=this.map,{bearingDelta:_}=this.touchRotate.dragMove(a,d)||{};if(_&&v.setBearing(v.getBearing()+_),this.touchPitch){const{pitchDelta:T}=this.touchPitch.dragMove(a,d)||{};T&&v.setPitch(v.getPitch()+T)}}off(){const a=this.element;E.removeEventListener(a,"mousedown",this.mousedown),E.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend),E.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){E.enableDrag(),E.removeEventListener(window,"mousemove",this.mousemove),E.removeEventListener(window,"mouseup",this.mouseup),E.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),E.removeEventListener(window,"touchend",this.touchend)}}let Kr;function kr(P,a,d){const v=new s.N(P.lng,P.lat);if(P=new s.N(P.lng,P.lat),a){const _=new s.N(P.lng-360,P.lat),T=new s.N(P.lng+360,P.lat),O=d.locationPoint(P).distSqr(a);d.locationPoint(_).distSqr(a)<O?P=_:d.locationPoint(T).distSqr(a)<O&&(P=T)}for(;Math.abs(P.lng-d.center.lng)>180;){const _=d.locationPoint(P);if(_.x>=0&&_.y>=0&&_.x<=d.width&&_.y<=d.height)break;P.lng>d.center.lng?P.lng-=360:P.lng+=360}return P.lng!==v.lng&&d.locationPoint(P).y>d.height/2-d.getHorizon()?P:v}const Fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function as(P,a,d){const v=P.classList;for(const _ in Fa)v.remove(`maplibregl-${d}-anchor-${_}`);v.add(`maplibregl-${d}-anchor-${a}`)}class pi extends s.E{constructor(a){if(super(),this._onKeyPress=d=>{const v=d.code,_=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&_!==32&&_!==13||this.togglePopup()},this._onMapClick=d=>{const v=d.originalEvent.target,_=this._element;this._popup&&(v===_||_.contains(v))&&this.togglePopup()},this._update=d=>{var v;if(!this._map)return;const _=this._map.loaded()&&!this._map.isMoving();(d?.type==="terrain"||d?.type==="render"&&!_)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?kr(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let T="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?T=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(T=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),E.setTransform(this._element,`${Fa[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${O} ${T}`),S.frameAsync(new AbortController).then((()=>{this._updateOpacity(d&&d.type==="moveend")})).catch((()=>{}))},this._onMove=d=>{if(!this._isDragging){const v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=s.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=E.create("div");const d=E.createNS("http://www.w3.org/2000/svg","svg"),v=41,_=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${_}px`),d.setAttributeNS(null,"viewBox",`0 0 ${_} ${v}`);const T=E.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");const O=E.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill-rule","nonzero");const z=E.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"transform","translate(3.0, 29.0)"),z.setAttributeNS(null,"fill","#000000");const B=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xe of B){const Pe=E.createNS("http://www.w3.org/2000/svg","ellipse");Pe.setAttributeNS(null,"opacity","0.04"),Pe.setAttributeNS(null,"cx","10.5"),Pe.setAttributeNS(null,"cy","5.80029008"),Pe.setAttributeNS(null,"rx",xe.rx),Pe.setAttributeNS(null,"ry",xe.ry),z.appendChild(Pe)}const V=E.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);const G=E.createNS("http://www.w3.org/2000/svg","path");G.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(G);const Z=E.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const ne=E.createNS("http://www.w3.org/2000/svg","path");ne.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild(ne);const se=E.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");const ce=E.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=E.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const ge=E.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ce.appendChild(fe),ce.appendChild(ge),O.appendChild(z),O.appendChild(V),O.appendChild(Z),O.appendChild(se),O.appendChild(ce),d.appendChild(O),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",_*this._scale+"px"),this._element.appendChild(d),this._offset=s.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(d=>{d.preventDefault()})),this._element.addEventListener("mousedown",(d=>{d.preventDefault()})),as(this._element,this._anchor,"marker"),a&&a.className)for(const d of a.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),E.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=s.N.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const _=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[_,-1*(38.1-13.5+_)],"bottom-right":[-_,-1*(38.1-13.5+_)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var d,v;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const _=this._map,T=_.terrain.depthAtPoint(this._pos),O=_.terrain.getElevationForLngLatZoom(this._lngLat,_.transform.tileZoom);if(_.transform.lngLatToCameraDepth(this._lngLat,O)-T<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/_.transform._pixelPerMeter,B=Math.sin(_.getPitch()*Math.PI/180)*z,V=_.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),G=_.transform.lngLatToCameraDepth(this._lngLat,O+B)-V>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&G&&this._popup.remove(),this._element.style.opacity=G?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=s.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,d){return a===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Qu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let eu=0,tu=!1;const _a={maxWidth:100,unit:"metric"};function ru(P,a,d){const v=d&&d.maxWidth||100,_=P._container.clientHeight/2,T=P.unproject([0,_]),O=P.unproject([v,_]),z=T.distanceTo(O);if(d&&d.unit==="imperial"){const B=3.2808*z;B>5280?It(a,v,B/5280,P._getUIString("ScaleControl.Miles")):It(a,v,B,P._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?It(a,v,z/1852,P._getUIString("ScaleControl.NauticalMiles")):z>=1e3?It(a,v,z/1e3,P._getUIString("ScaleControl.Kilometers")):It(a,v,z,P._getUIString("ScaleControl.Meters"))}function It(P,a,d,v){const _=(function(T){const O=Math.pow(10,`${Math.floor(T)}`.length-1);let z=T/O;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:(function(B){const V=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*V)/V})(z),O*z})(d);P.style.width=a*(_/d)+"px",P.innerHTML=`${_}&nbsp;${v}`}const Yt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},nu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ec(P){if(P){if(typeof P=="number"){const a=Math.round(Math.abs(P)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,P),"top-left":new s.P(a,a),"top-right":new s.P(-a,a),bottom:new s.P(0,-P),"bottom-left":new s.P(a,-a),"bottom-right":new s.P(-a,-a),left:new s.P(P,0),right:new s.P(-P,0)}}if(P instanceof s.P||Array.isArray(P)){const a=s.P.convert(P);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:s.P.convert(P.center||[0,0]),top:s.P.convert(P.top||[0,0]),"top-left":s.P.convert(P["top-left"]||[0,0]),"top-right":s.P.convert(P["top-right"]||[0,0]),bottom:s.P.convert(P.bottom||[0,0]),"bottom-left":s.P.convert(P["bottom-left"]||[0,0]),"bottom-right":s.P.convert(P["bottom-right"]||[0,0]),left:s.P.convert(P.left||[0,0]),right:s.P.convert(P.right||[0,0])}}return ec(new s.P(0,0))}const hf=m;u.AJAXError=s.bh,u.Evented=s.E,u.LngLat=s.N,u.MercatorCoordinate=s.Z,u.Point=s.P,u.addProtocol=s.bi,u.config=s.a,u.removeProtocol=s.bj,u.AttributionControl=zo,u.BoxZoomHandler=Qi,u.CanvasSource=xi,u.CooperativeGesturesHandler=Ql,u.DoubleClickZoomHandler=ns,u.DragPanHandler=rh,u.DragRotateHandler=Vd,u.EdgeInsets=fl,u.FullscreenControl=class extends s.E{constructor(P={}){super(),this._onFullscreenChange=()=>{var a;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((a=d?.shadowRoot)===null||a===void 0)&&a.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,P&&P.container&&(P.container instanceof HTMLElement?this._container=P.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(P){return this._map=P,this._container||(this._container=this._map.getContainer()),this._controlContainer=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){E.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const P=this._fullscreenButton=E.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);E.create("span","maplibregl-ctrl-icon",P).setAttribute("aria-hidden","true"),P.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const P=this._getTitle();this._fullscreenButton.setAttribute("aria-label",P),this._fullscreenButton.title=P}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},u.GeoJSONSource=ri,u.GeolocateControl=class extends s.E{constructor(P){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",a)),this._finish()}},this._updateCamera=a=>{const d=new s.N(a.coords.longitude,a.coords.latitude),v=a.coords.accuracy,_=this._map.getBearing(),T=s.e({bearing:_},this.options.fitBoundsOptions),O=Ve.fromLngLat(d,v);this._map.fitBounds(O,T,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const d=new s.N(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=a.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=a=>{if(this._map){if(this.options.trackUserLocation)if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&tu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(a=>a.preventDefault())),this._geolocateButton=E.create("button","maplibregl-ctrl-geolocate",this._container),E.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=E.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pi({element:this._dotElement}),this._circleElement=E.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))}))}},this.options=s.e({},Qu,P)}onAdd(P){return this._map=P,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return s._(this,arguments,void 0,(function*(a=!1){if(Kr!==void 0&&!a)return Kr;if(window.navigator.permissions===void 0)return Kr=!!window.navigator.geolocation,Kr;try{Kr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Kr=!!window.navigator.geolocation}return Kr}))})().then((a=>this._finishSetupUI(a))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),E.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,eu=0,tu=!1}_isOutOfMapMaxBounds(P){const a=this._map.getMaxBounds(),d=P.coords;return a&&(d.longitude<a.getWest()||d.longitude>a.getEast()||d.latitude<a.getSouth()||d.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const P=this._map.getBounds(),a=P.getSouthEast(),d=P.getNorthEast(),v=a.distanceTo(d),_=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${_}px`,this._circleElement.style.height=`${_}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eu--,tu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let P;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eu++,eu>1?(P={maximumAge:6e5,timeout:0},tu=!0):(P=this.options.positionOptions,tu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,P)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},u.Hash=Jc,u.ImageSource=Hi,u.KeyboardHandler=Ra,u.LngLatBounds=Ve,u.LogoControl=fo,u.Map=class extends gl{constructor(P){s.bf.mark(s.bg.create);const a=Object.assign(Object.assign({},Ds),P);if(a.minZoom!=null&&a.maxZoom!=null&&a.minZoom>a.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(a.minPitch!=null&&a.maxPitch!=null&&a.minPitch>a.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(a.minPitch!=null&&a.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(a.maxPitch!=null&&a.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Cs(a.minZoom,a.maxZoom,a.minPitch,a.maxPitch,a.renderWorldCopies),{bearingSnap:a.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Pr,this._controls=[],this._mapId=s.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=a.interactive,this._maxTileCacheSize=a.maxTileCacheSize,this._maxTileCacheZoomLevels=a.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=a.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=a.preserveDrawingBuffer===!0,this._antialias=a.antialias===!0,this._trackResize=a.trackResize===!0,this._bearingSnap=a.bearingSnap,this._refreshExpiredTiles=a.refreshExpiredTiles===!0,this._fadeDuration=a.fadeDuration,this._crossSourceCollisions=a.crossSourceCollisions===!0,this._collectResourceTiming=a.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ju),a.locale),this._clickTolerance=a.clickTolerance,this._overridePixelRatio=a.pixelRatio,this._maxCanvasSize=a.maxCanvasSize,this.transformCameraUpdate=a.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=a.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=K.addThrottleControl((()=>this.isMoving())),this._requestManager=new re(a.transformRequest),typeof a.container=="string"){if(this._container=document.getElementById(a.container),!this._container)throw new Error(`Container '${a.container}' not found.`)}else{if(!(a.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=a.container}if(a.maxBounds&&this.setMaxBounds(a.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;const v=Uu((_=>{this._trackResize&&!this._removed&&(this.resize(_),this.redraw())}),50);this._resizeObserver=new ResizeObserver((_=>{d?v(_):d=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ih(this,a),this._hash=a.hash&&new Jc(typeof a.hash=="string"&&a.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:a.center,zoom:a.zoom,bearing:a.bearing,pitch:a.pitch}),a.bounds&&(this.resize(),this.fitBounds(a.bounds,s.e({},a.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=a.localIdeographFontFamily,this._validateStyle=a.validateStyle,a.style&&this.setStyle(a.style,{localIdeographFontFamily:a.localIdeographFontFamily}),a.attributionControl&&this.addControl(new zo(typeof a.attributionControl=="boolean"?void 0:a.attributionControl)),a.maplibreLogo&&this.addControl(new fo,a.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(d=>{this._update(d.dataType==="style"),this.fire(new s.k(`${d.dataType}data`,d))})),this.on("dataloading",(d=>{this.fire(new s.k(`${d.dataType}dataloading`,d))})),this.on("dataabort",(d=>{this.fire(new s.k("sourcedataabort",d))}))}_getMapId(){return this._mapId}addControl(P,a){if(a===void 0&&(a=P.getDefaultPosition?P.getDefaultPosition():"top-right"),!P||!P.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=P.onAdd(this);this._controls.push(P);const v=this._controlPositions[a];return a.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(P){if(!P||!P.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(P);return a>-1&&this._controls.splice(a,1),P.onRemove(this),this}hasControl(P){return this._controls.indexOf(P)>-1}calculateCameraOptionsFromTo(P,a,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(P,a,d,v)}resize(P){var a;const d=this._containerDimensions(),v=d[0],_=d[1],T=this._getClampedPixelRatio(v,_);if(this._resizeCanvas(v,_,T),this.painter.resize(v,_,T),this.painter.overLimit()){const z=this.painter.context.gl;this._maxCanvasSize=[z.drawingBufferWidth,z.drawingBufferHeight];const B=this._getClampedPixelRatio(v,_);this._resizeCanvas(v,_,B),this.painter.resize(v,_,B)}this.transform.resize(v,_),(a=this._requestedCameraState)===null||a===void 0||a.resize(v,_);const O=!this._moving;return O&&(this.stop(),this.fire(new s.k("movestart",P)).fire(new s.k("move",P))),this.fire(new s.k("resize",P)),O&&this.fire(new s.k("moveend",P)),this}_getClampedPixelRatio(P,a){const{0:d,1:v}=this._maxCanvasSize,_=this.getPixelRatio(),T=P*_,O=a*_;return Math.min(T>d?d/T:1,O>v?v/O:1)*_}getPixelRatio(){var P;return(P=this._overridePixelRatio)!==null&&P!==void 0?P:devicePixelRatio}setPixelRatio(P){this._overridePixelRatio=P,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(P){return this.transform.setMaxBounds(Ve.convert(P)),this._update()}setMinZoom(P){if((P=P??-2)>=-2&&P<=this.transform.maxZoom)return this.transform.minZoom=P,this._update(),this.getZoom()<P&&this.setZoom(P),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(P){if((P=P??22)>=this.transform.minZoom)return this.transform.maxZoom=P,this._update(),this.getZoom()>P&&this.setZoom(P),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(P){if((P=P??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(P>=0&&P<=this.transform.maxPitch)return this.transform.minPitch=P,this._update(),this.getPitch()<P&&this.setPitch(P),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(P){if((P=P??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(P>=this.transform.minPitch)return this.transform.maxPitch=P,this._update(),this.getPitch()>P&&this.setPitch(P),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(P){return this.transform.renderWorldCopies=P,this._update()}project(P){return this.transform.locationPoint(s.N.convert(P),this.style&&this.terrain)}unproject(P){return this.transform.pointLocation(s.P.convert(P),this.terrain)}isMoving(){var P;return this._moving||((P=this.handlers)===null||P===void 0?void 0:P.isMoving())}isZooming(){var P;return this._zooming||((P=this.handlers)===null||P===void 0?void 0:P.isZooming())}isRotating(){var P;return this._rotating||((P=this.handlers)===null||P===void 0?void 0:P.isRotating())}_createDelegatedListener(P,a,d){if(P==="mouseenter"||P==="mouseover"){let v=!1;return{layers:a,listener:d,delegates:{mousemove:T=>{const O=a.filter((B=>this.getLayer(B))),z=O.length!==0?this.queryRenderedFeatures(T.point,{layers:O}):[];z.length?v||(v=!0,d.call(this,new di(P,this,T.originalEvent,{features:z}))):v=!1},mouseout:()=>{v=!1}}}}if(P==="mouseleave"||P==="mouseout"){let v=!1;return{layers:a,listener:d,delegates:{mousemove:O=>{const z=a.filter((B=>this.getLayer(B)));(z.length!==0?this.queryRenderedFeatures(O.point,{layers:z}):[]).length?v=!0:v&&(v=!1,d.call(this,new di(P,this,O.originalEvent)))},mouseout:O=>{v&&(v=!1,d.call(this,new di(P,this,O.originalEvent)))}}}}{const v=_=>{const T=a.filter((z=>this.getLayer(z))),O=T.length!==0?this.queryRenderedFeatures(_.point,{layers:T}):[];O.length&&(_.features=O,d.call(this,_),delete _.features)};return{layers:a,listener:d,delegates:{[P]:v}}}}_saveDelegatedListener(P,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[P]=this._delegatedListeners[P]||[],this._delegatedListeners[P].push(a)}_removeDelegatedListener(P,a,d){if(!this._delegatedListeners||!this._delegatedListeners[P])return;const v=this._delegatedListeners[P];for(let _=0;_<v.length;_++){const T=v[_];if(T.listener===d&&T.layers.length===a.length&&T.layers.every((O=>a.includes(O)))){for(const O in T.delegates)this.off(O,T.delegates[O]);return void v.splice(_,1)}}}on(P,a,d){if(d===void 0)return super.on(P,a);const v=this._createDelegatedListener(P,typeof a=="string"?[a]:a,d);this._saveDelegatedListener(P,v);for(const _ in v.delegates)this.on(_,v.delegates[_]);return this}once(P,a,d){if(d===void 0)return super.once(P,a);const v=typeof a=="string"?[a]:a,_=this._createDelegatedListener(P,v,d);for(const T in _.delegates){const O=_.delegates[T];_.delegates[T]=(...z)=>{this._removeDelegatedListener(P,v,d),O(...z)}}this._saveDelegatedListener(P,_);for(const T in _.delegates)this.once(T,_.delegates[T]);return this}off(P,a,d){return d===void 0?super.off(P,a):(this._removeDelegatedListener(P,typeof a=="string"?[a]:a,d),this)}queryRenderedFeatures(P,a){if(!this.style)return[];let d;const v=P instanceof s.P||Array.isArray(P),_=v?P:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(v?{}:P)||{},_ instanceof s.P||typeof _[0]=="number")d=[s.P.convert(_)];else{const T=s.P.convert(_[0]),O=s.P.convert(_[1]);d=[T,new s.P(O.x,T.y),O,new s.P(T.x,O.y),T]}return this.style.queryRenderedFeatures(d,a,this.transform)}querySourceFeatures(P,a){return this.style.querySourceFeatures(P,a)}setStyle(P,a){return(a=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&P?(this._diffStyle(P,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(P,a))}setTransformRequest(P){return this._requestManager.setTransformRequest(P),this}_getUIString(P){const a=this._locale[P];if(a==null)throw new Error(`Missing UI string '${P}'`);return a}_updateStyle(P,a){if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(P,a)));const d=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!P)),P?(this.style=new Lc(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof P=="string"?this.style.loadURL(P,a,d):this.style.loadJSON(P,a,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Lc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(P,a){if(typeof P=="string"){const d=this._requestManager.transformRequest(P,"Style");s.h(d,new AbortController).then((v=>{this._updateDiff(v.data,a)})).catch((v=>{v&&this.fire(new s.j(v))}))}else typeof P=="object"&&this._updateDiff(P,a)}_updateDiff(P,a){try{this.style.setState(P,a)&&this._update(!0)}catch(d){s.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(P,a)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(P,a){return this._lazyInitEmptyStyle(),this.style.addSource(P,a),this._update(!0)}isSourceLoaded(P){const a=this.style&&this.style.sourceCaches[P];if(a!==void 0)return a.loaded();this.fire(new s.j(new Error(`There is no source with ID '${P}'`)))}setTerrain(P){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),P){const a=this.style.sourceCaches[P.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${P.source}`);this.terrain===null&&a.reload();for(const d in this.style._layers){const v=this.style._layers[d];v.type==="hillshade"&&v.source===P.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new is(this.painter,a,P),this.painter.renderToTexture=new Yu(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==P.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:P})),this}getTerrain(){var P,a;return(a=(P=this.terrain)===null||P===void 0?void 0:P.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const P=this.style&&this.style.sourceCaches;for(const a in P){const d=P[a]._tiles;for(const v in d){const _=d[v];if(_.state!=="loaded"&&_.state!=="errored")return!1}}return!0}removeSource(P){return this.style.removeSource(P),this._update(!0)}getSource(P){return this.style.getSource(P)}addImage(P,a,d={}){const{pixelRatio:v=1,sdf:_=!1,stretchX:T,stretchY:O,content:z,textFitWidth:B,textFitHeight:V}=d;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||s.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:G,height:Z,data:ne}=a,se=a;return this.style.addImage(P,{data:new s.R({width:G,height:Z},new Uint8Array(ne)),pixelRatio:v,stretchX:T,stretchY:O,content:z,textFitWidth:B,textFitHeight:V,sdf:_,version:0,userImage:se}),se.onAdd&&se.onAdd(this,P),this}}{const{width:G,height:Z,data:ne}=S.getImageData(a);this.style.addImage(P,{data:new s.R({width:G,height:Z},ne),pixelRatio:v,stretchX:T,stretchY:O,content:z,textFitWidth:B,textFitHeight:V,sdf:_,version:0})}}updateImage(P,a){const d=this.style.getImage(P);if(!d)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const v=a instanceof HTMLImageElement||s.b(a)?S.getImageData(a):a,{width:_,height:T,data:O}=v;if(_===void 0||T===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(_!==d.data.width||T!==d.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(a instanceof HTMLImageElement||s.b(a));return d.data.replace(O,z),this.style.updateImage(P,d),this}getImage(P){return this.style.getImage(P)}hasImage(P){return P?!!this.style.getImage(P):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(P){this.style.removeImage(P)}loadImage(P){return K.getImage(this._requestManager.transformRequest(P,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(P,a){return this._lazyInitEmptyStyle(),this.style.addLayer(P,a),this._update(!0)}moveLayer(P,a){return this.style.moveLayer(P,a),this._update(!0)}removeLayer(P){return this.style.removeLayer(P),this._update(!0)}getLayer(P){return this.style.getLayer(P)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(P,a,d){return this.style.setLayerZoomRange(P,a,d),this._update(!0)}setFilter(P,a,d={}){return this.style.setFilter(P,a,d),this._update(!0)}getFilter(P){return this.style.getFilter(P)}setPaintProperty(P,a,d,v={}){return this.style.setPaintProperty(P,a,d,v),this._update(!0)}getPaintProperty(P,a){return this.style.getPaintProperty(P,a)}setLayoutProperty(P,a,d,v={}){return this.style.setLayoutProperty(P,a,d,v),this._update(!0)}getLayoutProperty(P,a){return this.style.getLayoutProperty(P,a)}setGlyphs(P,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(P,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(P,a,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(P,a,d,(v=>{v||this._update(!0)})),this}removeSprite(P){return this._lazyInitEmptyStyle(),this.style.removeSprite(P),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(P,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(P,a,(d=>{d||this._update(!0)})),this}setLight(P,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(P,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(P){return this._lazyInitEmptyStyle(),this.style.setSky(P),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(P,a){return this.style.setFeatureState(P,a),this._update()}removeFeatureState(P,a){return this.style.removeFeatureState(P,a),this._update()}getFeatureState(P){return this.style.getFeatureState(P)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let P=0,a=0;return this._container&&(P=this._container.clientWidth||400,a=this._container.clientHeight||300),[P,a]}_setupContainer(){const P=this._container;P.classList.add("maplibregl-map");const a=this._canvasContainer=E.create("div","maplibregl-canvas-container",P);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=E.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);const _=this._controlContainer=E.create("div","maplibregl-control-container",P),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((O=>{T[O]=E.create("div",`maplibregl-ctrl-${O} `,_)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(P,a,d){this._canvas.width=Math.floor(d*P),this._canvas.height=Math.floor(d*a),this._canvas.style.width=`${P}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const P={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let a=null;this._canvas.addEventListener("webglcontextcreationerror",(v=>{a={requestedAttributes:P},v&&(a.statusMessage=v.statusMessage,a.type=v.type)}),{once:!0});const d=this._canvas.getContext("webgl2",P)||this._canvas.getContext("webgl",P);if(!d){const v="Failed to initialize WebGL";throw a?(a.message=v,new Error(JSON.stringify(a))):new Error(v)}this.painter=new Ms(d,this.transform),I.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(P){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||P,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(P){return this._update(),this._renderTaskQueue.add(P)}_cancelRenderFrame(P){this._renderTaskQueue.remove(P)}_render(P){const a=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(P),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const _=this.transform.zoom,T=S.now();this.style.zoomHistory.update(_,T);const O=new s.z(_,{now:T,fadeDuration:a,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=O.crossFadingFactor();z===1&&z===this._crossFadingFactor||(d=!0,this._crossFadingFactor=z),this.style.update(O)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var P;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(P=this._resizeObserver)===null||P===void 0||P.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),E.remove(this._canvasContainer),E.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,S.frameAsync(this._frameRequest).then((P=>{s.bf.frame(P),this._frameRequest=null,this._render(P)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(P){this._showTileBoundaries!==P&&(this._showTileBoundaries=P,this._update())}get showPadding(){return!!this._showPadding}set showPadding(P){this._showPadding!==P&&(this._showPadding=P,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(P){this._showCollisionBoxes!==P&&(this._showCollisionBoxes=P,P?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(P){this._showOverdrawInspector!==P&&(this._showOverdrawInspector=P,this._update())}get repaint(){return!!this._repaint}set repaint(P){this._repaint!==P&&(this._repaint=P,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(P){this._vertices=P,this._update()}get version(){return yl}getCameraTargetElevation(){return this.transform.elevation}},u.MapMouseEvent=di,u.MapTouchEvent=Io,u.MapWheelEvent=nf,u.Marker=pi,u.NavigationControl=class{constructor(P){this._updateZoomButtons=()=>{const a=this._map.getZoom(),d=a===this._map.getMaxZoom(),v=a===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{const a=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=a},this._setButtonTitle=(a,d)=>{const v=this._map._getUIString(`NavigationControl.${d}`);a.title=v,a.setAttribute("aria-label",v)},this.options=s.e({},fn,P),this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(a=>a.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(a=>this._map.zoomIn({},{originalEvent:a}))),E.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(a=>this._map.zoomOut({},{originalEvent:a}))),E.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})})),this._compassIcon=E.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(P){return this._map=P,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new zs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){E.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(P,a){const d=E.create("button",P,this._container);return d.type="button",d.addEventListener("click",a),d}},u.Popup=class extends s.E{constructor(P){super(),this.remove=()=>(this._content&&E.remove(this._content),this._container&&(E.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=E.create("div","maplibregl-popup",this._map.getContainer()),this._tip=E.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const z of this.options.className.split(" "))this._container.classList.add(z);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?kr(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!a)return;const v=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationPoint(this._lngLat));let _=this.options.anchor;const T=ec(this.options.offset);if(!_){const z=this._container.offsetWidth,B=this._container.offsetHeight;let V;V=v.y+T.bottom.y<B?["top"]:v.y>this._map.transform.height-B?["bottom"]:[],v.x<z/2?V.push("left"):v.x>this._map.transform.width-z/2&&V.push("right"),_=V.length===0?"bottom":V.join("-")}let O=v.add(T[_]);this.options.subpixelPositioning||(O=O.round()),E.setTransform(this._container,`${Fa[_]} translate(${O.x}px,${O.y}px)`),as(this._container,_,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(Yt),P)}addTo(P){return this._map&&this.remove(),this._map=P,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(P){return this._lngLat=s.N.convert(P),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(P){return this.setDOMContent(document.createTextNode(P))}setHTML(P){const a=document.createDocumentFragment(),d=document.createElement("body");let v;for(d.innerHTML=P;v=d.firstChild,v;)a.appendChild(v);return this.setDOMContent(a)}getMaxWidth(){var P;return(P=this._container)===null||P===void 0?void 0:P.style.maxWidth}setMaxWidth(P){return this.options.maxWidth=P,this._update(),this}setDOMContent(P){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=E.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(P),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(P){return this._container&&this._container.classList.add(P),this}removeClassName(P){return this._container&&this._container.classList.remove(P),this}setOffset(P){return this.options.offset=P,this._update(),this}toggleClassName(P){if(this._container)return this._container.classList.toggle(P)}setSubpixelPositioning(P){this.options.subpixelPositioning=P}_createCloseButton(){this.options.closeButton&&(this._closeButton=E.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const P=this._container.querySelector(nu);P&&P.focus()}},u.RasterDEMTileSource=jr,u.RasterTileSource=xr,u.ScaleControl=class{constructor(P){this._onMove=()=>{ru(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ru(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},_a),P)}getDefaultPosition(){return"bottom-left"}onAdd(P){return this._map=P,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-scale",P.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){E.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},u.ScrollZoomHandler=ea,u.Style=Lc,u.TerrainControl=class{constructor(P){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=P}onAdd(P){return this._map=P,this._container=E.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=E.create("button","maplibregl-ctrl-terrain",this._container),E.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){E.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},u.TwoFingersTouchPitchHandler=Yl,u.TwoFingersTouchRotateHandler=Kl,u.TwoFingersTouchZoomHandler=Xu,u.TwoFingersTouchZoomRotateHandler=nh,u.VectorTileSource=Oi,u.VideoSource=Eo,u.addSourceType=(P,a)=>s._(void 0,void 0,void 0,(function*(){if(Qs(P))throw new Error(`A source type called "${P}" already exists.`);((d,v)=>{Rl[d]=v})(P,a)})),u.clearPrewarmedResources=function(){const P=or;P&&(P.isPreloaded()&&P.numActive()===1?(P.release(At),or=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},u.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},u.getRTLTextPluginStatus=function(){return Gi().getRTLTextPluginStatus()},u.getVersion=function(){return hf},u.getWorkerCount=function(){return jt.workerCount},u.getWorkerUrl=function(){return s.a.WORKER_URL},u.importScriptInWorkers=function(P){return lr().broadcast("IS",P)},u.prewarm=function(){ct().acquire(At)},u.setMaxParallelImageRequests=function(P){s.a.MAX_PARALLEL_IMAGE_REQUESTS=P},u.setRTLTextPlugin=function(P,a){return Gi().setRTLTextPlugin(P,a)},u.setWorkerCount=function(P){jt.workerCount=P},u.setWorkerUrl=function(P){s.a.WORKER_URL=P}}));var l=r;return l}))})(w_)),w_.exports}fU();function XF(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=XF(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function un(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=XF(t))&&(n&&(n+=" "),n+=e);return n}var bb,oM;function Uo(){if(oM)return bb;oM=1;var t=Array.isArray;return bb=t,bb}var wb,sM;function KF(){if(sM)return wb;sM=1;var t=typeof Fv=="object"&&Fv&&Fv.Object===Object&&Fv;return wb=t,wb}var Sb,lM;function Ou(){if(lM)return Sb;lM=1;var t=KF(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Sb=r,Sb}var Tb,uM;function By(){if(uM)return Tb;uM=1;var t=Ou(),e=t.Symbol;return Tb=e,Tb}var Pb,cM;function dU(){if(cM)return Pb;cM=1;var t=By(),e=Object.prototype,r=e.hasOwnProperty,n=e.toString,i=t?t.toStringTag:void 0;function l(u){var s=r.call(u,i),m=u[i];try{u[i]=void 0;var y=!0}catch{}var w=n.call(u);return y&&(s?u[i]=m:delete u[i]),w}return Pb=l,Pb}var Ab,hM;function pU(){if(hM)return Ab;hM=1;var t=Object.prototype,e=t.toString;function r(n){return e.call(n)}return Ab=r,Ab}var kb,fM;function Dc(){if(fM)return kb;fM=1;var t=By(),e=dU(),r=pU(),n="[object Null]",i="[object Undefined]",l=t?t.toStringTag:void 0;function u(s){return s==null?s===void 0?i:n:l&&l in Object(s)?e(s):r(s)}return kb=u,kb}var Eb,dM;function zc(){if(dM)return Eb;dM=1;function t(e){return e!=null&&typeof e=="object"}return Eb=t,Eb}var Mb,pM;function vm(){if(pM)return Mb;pM=1;var t=Dc(),e=zc(),r="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&t(i)==r}return Mb=n,Mb}var Cb,mM;function CP(){if(mM)return Cb;mM=1;var t=Uo(),e=vm(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(l,u){if(t(l))return!1;var s=typeof l;return s=="number"||s=="symbol"||s=="boolean"||l==null||e(l)?!0:n.test(l)||!r.test(l)||u!=null&&l in Object(u)}return Cb=i,Cb}var Ob,gM;function Lh(){if(gM)return Ob;gM=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Ob=t,Ob}var Ib,yM;function OP(){if(yM)return Ib;yM=1;var t=Dc(),e=Lh(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",l="[object Proxy]";function u(s){if(!e(s))return!1;var m=t(s);return m==n||m==i||m==r||m==l}return Ib=u,Ib}var Db,vM;function mU(){if(vM)return Db;vM=1;var t=Ou(),e=t["__core-js_shared__"];return Db=e,Db}var zb,_M;function gU(){if(_M)return zb;_M=1;var t=mU(),e=(function(){var n=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!e&&e in n}return zb=r,zb}var Rb,xM;function YF(){if(xM)return Rb;xM=1;var t=Function.prototype,e=t.toString;function r(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Rb=r,Rb}var Lb,bM;function yU(){if(bM)return Lb;bM=1;var t=OP(),e=gU(),r=Lh(),n=YF(),i=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,u=Function.prototype,s=Object.prototype,m=u.toString,y=s.hasOwnProperty,w=RegExp("^"+m.call(y).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function S(E){if(!r(E)||e(E))return!1;var I=t(E)?w:l;return I.test(n(E))}return Lb=S,Lb}var Fb,wM;function vU(){if(wM)return Fb;wM=1;function t(e,r){return e?.[r]}return Fb=t,Fb}var jb,SM;function Sd(){if(SM)return jb;SM=1;var t=yU(),e=vU();function r(n,i){var l=e(n,i);return t(l)?l:void 0}return jb=r,jb}var Bb,TM;function q0(){if(TM)return Bb;TM=1;var t=Sd(),e=t(Object,"create");return Bb=e,Bb}var Nb,PM;function _U(){if(PM)return Nb;PM=1;var t=q0();function e(){this.__data__=t?t(null):{},this.size=0}return Nb=e,Nb}var $b,AM;function xU(){if(AM)return $b;AM=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return $b=t,$b}var Vb,kM;function bU(){if(kM)return Vb;kM=1;var t=q0(),e="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(l){var u=this.__data__;if(t){var s=u[l];return s===e?void 0:s}return n.call(u,l)?u[l]:void 0}return Vb=i,Vb}var qb,EM;function wU(){if(EM)return qb;EM=1;var t=q0(),e=Object.prototype,r=e.hasOwnProperty;function n(i){var l=this.__data__;return t?l[i]!==void 0:r.call(l,i)}return qb=n,qb}var Ub,MM;function SU(){if(MM)return Ub;MM=1;var t=q0(),e="__lodash_hash_undefined__";function r(n,i){var l=this.__data__;return this.size+=this.has(n)?0:1,l[n]=t&&i===void 0?e:i,this}return Ub=r,Ub}var Wb,CM;function TU(){if(CM)return Wb;CM=1;var t=_U(),e=xU(),r=bU(),n=wU(),i=SU();function l(u){var s=-1,m=u==null?0:u.length;for(this.clear();++s<m;){var y=u[s];this.set(y[0],y[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=r,l.prototype.has=n,l.prototype.set=i,Wb=l,Wb}var Hb,OM;function PU(){if(OM)return Hb;OM=1;function t(){this.__data__=[],this.size=0}return Hb=t,Hb}var Gb,IM;function IP(){if(IM)return Gb;IM=1;function t(e,r){return e===r||e!==e&&r!==r}return Gb=t,Gb}var Zb,DM;function U0(){if(DM)return Zb;DM=1;var t=IP();function e(r,n){for(var i=r.length;i--;)if(t(r[i][0],n))return i;return-1}return Zb=e,Zb}var Xb,zM;function AU(){if(zM)return Xb;zM=1;var t=U0(),e=Array.prototype,r=e.splice;function n(i){var l=this.__data__,u=t(l,i);if(u<0)return!1;var s=l.length-1;return u==s?l.pop():r.call(l,u,1),--this.size,!0}return Xb=n,Xb}var Kb,RM;function kU(){if(RM)return Kb;RM=1;var t=U0();function e(r){var n=this.__data__,i=t(n,r);return i<0?void 0:n[i][1]}return Kb=e,Kb}var Yb,LM;function EU(){if(LM)return Yb;LM=1;var t=U0();function e(r){return t(this.__data__,r)>-1}return Yb=e,Yb}var Jb,FM;function MU(){if(FM)return Jb;FM=1;var t=U0();function e(r,n){var i=this.__data__,l=t(i,r);return l<0?(++this.size,i.push([r,n])):i[l][1]=n,this}return Jb=e,Jb}var Qb,jM;function W0(){if(jM)return Qb;jM=1;var t=PU(),e=AU(),r=kU(),n=EU(),i=MU();function l(u){var s=-1,m=u==null?0:u.length;for(this.clear();++s<m;){var y=u[s];this.set(y[0],y[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=r,l.prototype.has=n,l.prototype.set=i,Qb=l,Qb}var e1,BM;function DP(){if(BM)return e1;BM=1;var t=Sd(),e=Ou(),r=t(e,"Map");return e1=r,e1}var t1,NM;function CU(){if(NM)return t1;NM=1;var t=TU(),e=W0(),r=DP();function n(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return t1=n,t1}var r1,$M;function OU(){if($M)return r1;$M=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return r1=t,r1}var n1,VM;function H0(){if(VM)return n1;VM=1;var t=OU();function e(r,n){var i=r.__data__;return t(n)?i[typeof n=="string"?"string":"hash"]:i.map}return n1=e,n1}var i1,qM;function IU(){if(qM)return i1;qM=1;var t=H0();function e(r){var n=t(this,r).delete(r);return this.size-=n?1:0,n}return i1=e,i1}var a1,UM;function DU(){if(UM)return a1;UM=1;var t=H0();function e(r){return t(this,r).get(r)}return a1=e,a1}var o1,WM;function zU(){if(WM)return o1;WM=1;var t=H0();function e(r){return t(this,r).has(r)}return o1=e,o1}var s1,HM;function RU(){if(HM)return s1;HM=1;var t=H0();function e(r,n){var i=t(this,r),l=i.size;return i.set(r,n),this.size+=i.size==l?0:1,this}return s1=e,s1}var l1,GM;function zP(){if(GM)return l1;GM=1;var t=CU(),e=IU(),r=DU(),n=zU(),i=RU();function l(u){var s=-1,m=u==null?0:u.length;for(this.clear();++s<m;){var y=u[s];this.set(y[0],y[1])}}return l.prototype.clear=t,l.prototype.delete=e,l.prototype.get=r,l.prototype.has=n,l.prototype.set=i,l1=l,l1}var u1,ZM;function JF(){if(ZM)return u1;ZM=1;var t=zP(),e="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var l=function(){var u=arguments,s=i?i.apply(this,u):u[0],m=l.cache;if(m.has(s))return m.get(s);var y=n.apply(this,u);return l.cache=m.set(s,y)||m,y};return l.cache=new(r.Cache||t),l}return r.Cache=t,u1=r,u1}var c1,XM;function LU(){if(XM)return c1;XM=1;var t=JF(),e=500;function r(n){var i=t(n,function(u){return l.size===e&&l.clear(),u}),l=i.cache;return i}return c1=r,c1}var h1,KM;function FU(){if(KM)return h1;KM=1;var t=LU(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=t(function(i){var l=[];return i.charCodeAt(0)===46&&l.push(""),i.replace(e,function(u,s,m,y){l.push(m?y.replace(r,"$1"):s||u)}),l});return h1=n,h1}var f1,YM;function RP(){if(YM)return f1;YM=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,l=Array(i);++n<i;)l[n]=r(e[n],n,e);return l}return f1=t,f1}var d1,JM;function jU(){if(JM)return d1;JM=1;var t=By(),e=RP(),r=Uo(),n=vm(),i=t?t.prototype:void 0,l=i?i.toString:void 0;function u(s){if(typeof s=="string")return s;if(r(s))return e(s,u)+"";if(n(s))return l?l.call(s):"";var m=s+"";return m=="0"&&1/s==-1/0?"-0":m}return d1=u,d1}var p1,QM;function QF(){if(QM)return p1;QM=1;var t=jU();function e(r){return r==null?"":t(r)}return p1=e,p1}var m1,eC;function ej(){if(eC)return m1;eC=1;var t=Uo(),e=CP(),r=FU(),n=QF();function i(l,u){return t(l)?l:e(l,u)?[l]:r(n(l))}return m1=i,m1}var g1,tC;function G0(){if(tC)return g1;tC=1;var t=vm();function e(r){if(typeof r=="string"||t(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return g1=e,g1}var y1,rC;function LP(){if(rC)return y1;rC=1;var t=ej(),e=G0();function r(n,i){i=t(i,n);for(var l=0,u=i.length;n!=null&&l<u;)n=n[e(i[l++])];return l&&l==u?n:void 0}return y1=r,y1}var v1,nC;function tj(){if(nC)return v1;nC=1;var t=LP();function e(r,n,i){var l=r==null?void 0:t(r,n);return l===void 0?i:l}return v1=e,v1}var BU=tj();const Ks=An(BU);var _1,iC;function NU(){if(iC)return _1;iC=1;function t(e){return e==null}return _1=t,_1}var $U=NU();const cn=An($U);var x1,aC;function VU(){if(aC)return x1;aC=1;var t=Dc(),e=Uo(),r=zc(),n="[object String]";function i(l){return typeof l=="string"||!e(l)&&r(l)&&t(l)==n}return x1=i,x1}var qU=VU();const gd=An(qU);var UU=OP();const Lr=An(UU);var WU=Lh();const _m=An(WU);var b1={exports:{}},mn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oC;function HU(){if(oC)return mn;oC=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),s=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),F;F=Symbol.for("react.module.reference");function L(R){if(typeof R=="object"&&R!==null){var U=R.$$typeof;switch(U){case t:switch(R=R.type,R){case r:case i:case n:case y:case w:return R;default:switch(R=R&&R.$$typeof,R){case s:case u:case m:case E:case S:case l:return R;default:return U}}case e:return U}}}return mn.ContextConsumer=u,mn.ContextProvider=l,mn.Element=t,mn.ForwardRef=m,mn.Fragment=r,mn.Lazy=E,mn.Memo=S,mn.Portal=e,mn.Profiler=i,mn.StrictMode=n,mn.Suspense=y,mn.SuspenseList=w,mn.isAsyncMode=function(){return!1},mn.isConcurrentMode=function(){return!1},mn.isContextConsumer=function(R){return L(R)===u},mn.isContextProvider=function(R){return L(R)===l},mn.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===t},mn.isForwardRef=function(R){return L(R)===m},mn.isFragment=function(R){return L(R)===r},mn.isLazy=function(R){return L(R)===E},mn.isMemo=function(R){return L(R)===S},mn.isPortal=function(R){return L(R)===e},mn.isProfiler=function(R){return L(R)===i},mn.isStrictMode=function(R){return L(R)===n},mn.isSuspense=function(R){return L(R)===y},mn.isSuspenseList=function(R){return L(R)===w},mn.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===r||R===i||R===n||R===y||R===w||R===I||typeof R=="object"&&R!==null&&(R.$$typeof===E||R.$$typeof===S||R.$$typeof===l||R.$$typeof===u||R.$$typeof===m||R.$$typeof===F||R.getModuleId!==void 0)},mn.typeOf=L,mn}var sC;function GU(){return sC||(sC=1,b1.exports=HU()),b1.exports}var ZU=GU(),w1,lC;function rj(){if(lC)return w1;lC=1;var t=Dc(),e=zc(),r="[object Number]";function n(i){return typeof i=="number"||e(i)&&t(i)==r}return w1=n,w1}var S1,uC;function XU(){if(uC)return S1;uC=1;var t=rj();function e(r){return t(r)&&r!=+r}return S1=e,S1}var KU=XU();const Ny=An(KU);var YU=rj();const JU=An(YU);var Ol=function(e){return e===0?0:e>0?1:-1},id=function(e){return gd(e)&&e.indexOf("%")===e.length-1},Dt=function(e){return JU(e)&&!Ny(e)},QU=function(e){return cn(e)},Ui=function(e){return Dt(e)||gd(e)},eW=0,Z0=function(e){var r=++eW;return"".concat(e||"").concat(r)},yd=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Dt(e)&&!gd(e))return n;var l;if(id(e)){var u=e.indexOf("%");l=r*parseFloat(e.slice(0,u))/100}else l=+e;return Ny(l)&&(l=n),i&&l>r&&(l=r),l},Sh=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},tW=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},i=0;i<r;i++)if(!n[e[i]])n[e[i]]=!0;else return!0;return!1},Mp=function(e,r){return Dt(e)&&Dt(r)?function(n){return e+n*(r-e)}:function(){return r}};function q2(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):Ks(n,e))===r})}var rW=function(e,r){return Dt(e)&&Dt(r)?e-r:gd(e)&&gd(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function Np(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function U2(t){"@babel/helpers - typeof";return U2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U2(t)}var nW=["viewBox","children"],iW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cC=["points","pathLength"],T1={svg:nW,polygon:cC,polyline:cC},FP=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],R_=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(it.isValidElement(e)&&(n=e.props),!_m(n))return null;var i={};return Object.keys(n).forEach(function(l){FP.includes(l)&&(i[l]=r||function(u){return n[l](n,u)})}),i},aW=function(e,r,n){return function(i){return e(r,n,i),null}},L_=function(e,r,n){if(!_m(e)||U2(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(l){var u=e[l];FP.includes(l)&&typeof u=="function"&&(i||(i={}),i[l]=aW(u,r,n))}),i},oW=["children"],sW=["children"];function hC(t,e){if(t==null)return{};var r=lW(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var fC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Pc=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},dC=null,P1=null,jP=function t(e){if(e===dC&&Array.isArray(P1))return P1;var r=[];return it.Children.forEach(e,function(n){cn(n)||(ZU.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),P1=r,dC=e,r};function Il(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(i){return Pc(i)}):n=[Pc(e)],jP(t).forEach(function(i){var l=Ks(i,"type.displayName")||Ks(i,"type.name");n.indexOf(l)!==-1&&r.push(i)}),r}function vs(t,e){var r=Il(t,e);return r&&r[0]}var pC=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,i=r.height;return!(!Dt(n)||n<=0||!Dt(i)||i<=0)},uW=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],cW=function(e){return e&&e.type&&gd(e.type)&&uW.indexOf(e.type)>=0},hW=function(e,r,n,i){var l,u=(l=T1?.[i])!==null&&l!==void 0?l:[];return r.startsWith("data-")||!Lr(e)&&(i&&u.includes(r)||iW.includes(r))||n&&FP.includes(r)},ln=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(it.isValidElement(e)&&(i=e.props),!_m(i))return null;var l={};return Object.keys(i).forEach(function(u){var s;hW((s=i)===null||s===void 0?void 0:s[u],u,r,n)&&(l[u]=i[u])}),l},W2=function t(e,r){if(e===r)return!0;var n=it.Children.count(e);if(n!==it.Children.count(r))return!1;if(n===0)return!0;if(n===1)return mC(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var l=e[i],u=r[i];if(Array.isArray(l)||Array.isArray(u)){if(!t(l,u))return!1}else if(!mC(l,u))return!1}return!0},mC=function(e,r){if(cn(e)&&cn(r))return!0;if(!cn(e)&&!cn(r)){var n=e.props||{},i=n.children,l=hC(n,oW),u=r.props||{},s=u.children,m=hC(u,sW);return i&&s?Np(l,m)&&W2(i,s):!i&&!s?Np(l,m):!1}return!1},gC=function(e,r){var n=[],i={};return jP(e).forEach(function(l,u){if(cW(l))n.push(l);else if(l){var s=Pc(l.type),m=r[s]||{},y=m.handler,w=m.once;if(y&&(!w||!i[s])){var S=y(l,s,u);n.push(S),i[s]=!0}}}),n},fW=function(e){var r=e&&e.type;return r&&fC[r]?fC[r]:null},dW=function(e,r){return jP(r).indexOf(e)},pW=["children","width","height","viewBox","className","style","title","desc"];function H2(){return H2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},H2.apply(this,arguments)}function mW(t,e){if(t==null)return{};var r=gW(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function gW(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function G2(t){var e=t.children,r=t.width,n=t.height,i=t.viewBox,l=t.className,u=t.style,s=t.title,m=t.desc,y=mW(t,pW),w=i||{width:r,height:n,x:0,y:0},S=un("recharts-surface",l);return He.createElement("svg",H2({},ln(y,!0,"svg"),{className:S,width:r,height:n,style:u,viewBox:"".concat(w.x," ").concat(w.y," ").concat(w.width," ").concat(w.height)}),He.createElement("title",null,s),He.createElement("desc",null,m),e)}var yW=["children","className"];function Z2(){return Z2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Z2.apply(this,arguments)}function vW(t,e){if(t==null)return{};var r=_W(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _W(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var ha=He.forwardRef(function(t,e){var r=t.children,n=t.className,i=vW(t,yW),l=un("recharts-layer",n);return He.createElement("g",Z2({className:l},ln(i,!0),{ref:e}),r)}),Ac=function(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),l=2;l<n;l++)i[l-2]=arguments[l]},A1,yC;function xW(){if(yC)return A1;yC=1;function t(e,r,n){var i=-1,l=e.length;r<0&&(r=-r>l?0:l+r),n=n>l?l:n,n<0&&(n+=l),l=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(l);++i<l;)u[i]=e[i+r];return u}return A1=t,A1}var k1,vC;function bW(){if(vC)return k1;vC=1;var t=xW();function e(r,n,i){var l=r.length;return i=i===void 0?l:i,!n&&i>=l?r:t(r,n,i)}return k1=e,k1}var E1,_C;function nj(){if(_C)return E1;_C=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,l="\\ufe0e\\ufe0f",u="\\u200d",s=RegExp("["+u+t+i+l+"]");function m(y){return s.test(y)}return E1=m,E1}var M1,xC;function wW(){if(xC)return M1;xC=1;function t(e){return e.split("")}return M1=t,M1}var C1,bC;function SW(){if(bC)return C1;bC=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+r+n,l="\\ufe0e\\ufe0f",u="["+t+"]",s="["+i+"]",m="\\ud83c[\\udffb-\\udfff]",y="(?:"+s+"|"+m+")",w="[^"+t+"]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",I="\\u200d",F=y+"?",L="["+l+"]?",R="(?:"+I+"(?:"+[w,S,E].join("|")+")"+L+F+")*",U=L+F+R,X="(?:"+[w+s+"?",s,S,E,u].join("|")+")",K=RegExp(m+"(?="+m+")|"+X+U,"g");function re(W){return W.match(K)||[]}return C1=re,C1}var O1,wC;function TW(){if(wC)return O1;wC=1;var t=wW(),e=nj(),r=SW();function n(i){return e(i)?r(i):t(i)}return O1=n,O1}var I1,SC;function PW(){if(SC)return I1;SC=1;var t=bW(),e=nj(),r=TW(),n=QF();function i(l){return function(u){u=n(u);var s=e(u)?r(u):void 0,m=s?s[0]:u.charAt(0),y=s?t(s,1).join(""):u.slice(1);return m[l]()+y}}return I1=i,I1}var D1,TC;function AW(){if(TC)return D1;TC=1;var t=PW(),e=t("toUpperCase");return D1=e,D1}var kW=AW();const X0=An(kW);function Rn(t){return function(){return t}}const ij=Math.cos,F_=Math.sin,zl=Math.sqrt,j_=Math.PI,K0=2*j_,X2=Math.PI,K2=2*X2,td=1e-6,EW=K2-td;function aj(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function MW(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return aj;const r=10**e;return function(n){this._+=n[0];for(let i=1,l=n.length;i<l;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class CW{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?aj:MW(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,i){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(e,r,n,i,l,u){this._append`C${+e},${+r},${+n},${+i},${this._x1=+l},${this._y1=+u}`}arcTo(e,r,n,i,l){if(e=+e,r=+r,n=+n,i=+i,l=+l,l<0)throw new Error(`negative radius: ${l}`);let u=this._x1,s=this._y1,m=n-e,y=i-r,w=u-e,S=s-r,E=w*w+S*S;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(E>td)if(!(Math.abs(S*m-y*w)>td)||!l)this._append`L${this._x1=e},${this._y1=r}`;else{let I=n-u,F=i-s,L=m*m+y*y,R=I*I+F*F,U=Math.sqrt(L),X=Math.sqrt(E),K=l*Math.tan((X2-Math.acos((L+E-R)/(2*U*X)))/2),re=K/X,W=K/U;Math.abs(re-1)>td&&this._append`L${e+re*w},${r+re*S}`,this._append`A${l},${l},0,0,${+(S*I>w*F)},${this._x1=e+W*m},${this._y1=r+W*y}`}}arc(e,r,n,i,l,u){if(e=+e,r=+r,n=+n,u=!!u,n<0)throw new Error(`negative radius: ${n}`);let s=n*Math.cos(i),m=n*Math.sin(i),y=e+s,w=r+m,S=1^u,E=u?i-l:l-i;this._x1===null?this._append`M${y},${w}`:(Math.abs(this._x1-y)>td||Math.abs(this._y1-w)>td)&&this._append`L${y},${w}`,n&&(E<0&&(E=E%K2+K2),E>EW?this._append`A${n},${n},0,1,${S},${e-s},${r-m}A${n},${n},0,1,${S},${this._x1=y},${this._y1=w}`:E>td&&this._append`A${n},${n},0,${+(E>=X2)},${S},${this._x1=e+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(e,r,n,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function BP(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new CW(e)}function NP(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function oj(t){this._context=t}oj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Y0(t){return new oj(t)}function sj(t){return t[0]}function lj(t){return t[1]}function uj(t,e){var r=Rn(!0),n=null,i=Y0,l=null,u=BP(s);t=typeof t=="function"?t:t===void 0?sj:Rn(t),e=typeof e=="function"?e:e===void 0?lj:Rn(e);function s(m){var y,w=(m=NP(m)).length,S,E=!1,I;for(n==null&&(l=i(I=u())),y=0;y<=w;++y)!(y<w&&r(S=m[y],y,m))===E&&((E=!E)?l.lineStart():l.lineEnd()),E&&l.point(+t(S,y,m),+e(S,y,m));if(I)return l=null,I+""||null}return s.x=function(m){return arguments.length?(t=typeof m=="function"?m:Rn(+m),s):t},s.y=function(m){return arguments.length?(e=typeof m=="function"?m:Rn(+m),s):e},s.defined=function(m){return arguments.length?(r=typeof m=="function"?m:Rn(!!m),s):r},s.curve=function(m){return arguments.length?(i=m,n!=null&&(l=i(n)),s):i},s.context=function(m){return arguments.length?(m==null?n=l=null:l=i(n=m),s):n},s}function i_(t,e,r){var n=null,i=Rn(!0),l=null,u=Y0,s=null,m=BP(y);t=typeof t=="function"?t:t===void 0?sj:Rn(+t),e=typeof e=="function"?e:Rn(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?lj:Rn(+r);function y(S){var E,I,F,L=(S=NP(S)).length,R,U=!1,X,K=new Array(L),re=new Array(L);for(l==null&&(s=u(X=m())),E=0;E<=L;++E){if(!(E<L&&i(R=S[E],E,S))===U)if(U=!U)I=E,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),F=E-1;F>=I;--F)s.point(K[F],re[F]);s.lineEnd(),s.areaEnd()}U&&(K[E]=+t(R,E,S),re[E]=+e(R,E,S),s.point(n?+n(R,E,S):K[E],r?+r(R,E,S):re[E]))}if(X)return s=null,X+""||null}function w(){return uj().defined(i).curve(u).context(l)}return y.x=function(S){return arguments.length?(t=typeof S=="function"?S:Rn(+S),n=null,y):t},y.x0=function(S){return arguments.length?(t=typeof S=="function"?S:Rn(+S),y):t},y.x1=function(S){return arguments.length?(n=S==null?null:typeof S=="function"?S:Rn(+S),y):n},y.y=function(S){return arguments.length?(e=typeof S=="function"?S:Rn(+S),r=null,y):e},y.y0=function(S){return arguments.length?(e=typeof S=="function"?S:Rn(+S),y):e},y.y1=function(S){return arguments.length?(r=S==null?null:typeof S=="function"?S:Rn(+S),y):r},y.lineX0=y.lineY0=function(){return w().x(t).y(e)},y.lineY1=function(){return w().x(t).y(r)},y.lineX1=function(){return w().x(n).y(e)},y.defined=function(S){return arguments.length?(i=typeof S=="function"?S:Rn(!!S),y):i},y.curve=function(S){return arguments.length?(u=S,l!=null&&(s=u(l)),y):u},y.context=function(S){return arguments.length?(S==null?l=s=null:s=u(l=S),y):l},y}class cj{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function OW(t){return new cj(t,!0)}function IW(t){return new cj(t,!1)}const $P={draw(t,e){const r=zl(e/j_);t.moveTo(r,0),t.arc(0,0,r,0,K0)}},DW={draw(t,e){const r=zl(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},hj=zl(1/3),zW=hj*2,RW={draw(t,e){const r=zl(e/zW),n=r*hj;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},LW={draw(t,e){const r=zl(e),n=-r/2;t.rect(n,n,r,r)}},FW=.8908130915292852,fj=F_(j_/10)/F_(7*j_/10),jW=F_(K0/10)*fj,BW=-ij(K0/10)*fj,NW={draw(t,e){const r=zl(e*FW),n=jW*r,i=BW*r;t.moveTo(0,-r),t.lineTo(n,i);for(let l=1;l<5;++l){const u=K0*l/5,s=ij(u),m=F_(u);t.lineTo(m*r,-s*r),t.lineTo(s*n-m*i,m*n+s*i)}t.closePath()}},z1=zl(3),$W={draw(t,e){const r=-zl(e/(z1*3));t.moveTo(0,r*2),t.lineTo(-z1*r,-r),t.lineTo(z1*r,-r),t.closePath()}},Us=-.5,Ws=zl(3)/2,Y2=1/zl(12),VW=(Y2/2+1)*3,qW={draw(t,e){const r=zl(e/VW),n=r/2,i=r*Y2,l=n,u=r*Y2+r,s=-l,m=u;t.moveTo(n,i),t.lineTo(l,u),t.lineTo(s,m),t.lineTo(Us*n-Ws*i,Ws*n+Us*i),t.lineTo(Us*l-Ws*u,Ws*l+Us*u),t.lineTo(Us*s-Ws*m,Ws*s+Us*m),t.lineTo(Us*n+Ws*i,Us*i-Ws*n),t.lineTo(Us*l+Ws*u,Us*u-Ws*l),t.lineTo(Us*s+Ws*m,Us*m-Ws*s),t.closePath()}};function UW(t,e){let r=null,n=BP(i);t=typeof t=="function"?t:Rn(t||$P),e=typeof e=="function"?e:Rn(e===void 0?64:+e);function i(){let l;if(r||(r=l=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),l)return r=null,l+""||null}return i.type=function(l){return arguments.length?(t=typeof l=="function"?l:Rn(l),i):t},i.size=function(l){return arguments.length?(e=typeof l=="function"?l:Rn(+l),i):e},i.context=function(l){return arguments.length?(r=l??null,i):r},i}function B_(){}function N_(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function dj(t){this._context=t}dj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function WW(t){return new dj(t)}function pj(t){this._context=t}pj.prototype={areaStart:B_,areaEnd:B_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:N_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function HW(t){return new pj(t)}function mj(t){this._context=t}mj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:N_(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function GW(t){return new mj(t)}function gj(t){this._context=t}gj.prototype={areaStart:B_,areaEnd:B_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function ZW(t){return new gj(t)}function PC(t){return t<0?-1:1}function AC(t,e,r){var n=t._x1-t._x0,i=e-t._x1,l=(t._y1-t._y0)/(n||i<0&&-0),u=(r-t._y1)/(i||n<0&&-0),s=(l*i+u*n)/(n+i);return(PC(l)+PC(u))*Math.min(Math.abs(l),Math.abs(u),.5*Math.abs(s))||0}function kC(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function R1(t,e,r){var n=t._x0,i=t._y0,l=t._x1,u=t._y1,s=(l-n)/3;t._context.bezierCurveTo(n+s,i+s*e,l-s,u-s*r,l,u)}function $_(t){this._context=t}$_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R1(this,this._t0,kC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,R1(this,kC(this,r=AC(this,t,e)),r);break;default:R1(this,this._t0,r=AC(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function yj(t){this._context=new vj(t)}(yj.prototype=Object.create($_.prototype)).point=function(t,e){$_.prototype.point.call(this,e,t)};function vj(t){this._context=t}vj.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,i,l){this._context.bezierCurveTo(e,t,n,r,l,i)}};function XW(t){return new $_(t)}function KW(t){return new yj(t)}function _j(t){this._context=t}_j.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=EC(t),i=EC(e),l=0,u=1;u<r;++l,++u)this._context.bezierCurveTo(n[0][l],i[0][l],n[1][l],i[1][l],t[u],e[u]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function EC(t){var e,r=t.length-1,n,i=new Array(r),l=new Array(r),u=new Array(r);for(i[0]=0,l[0]=2,u[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,l[e]=4,u[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,l[r-1]=7,u[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/l[e-1],l[e]-=n,u[e]-=n*u[e-1];for(i[r-1]=u[r-1]/l[r-1],e=r-2;e>=0;--e)i[e]=(u[e]-i[e+1])/l[e];for(l[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)l[e]=2*t[e+1]-i[e+1];return[i,l]}function YW(t){return new _j(t)}function J0(t,e){this._context=t,this._t=e}J0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function JW(t){return new J0(t,.5)}function QW(t){return new J0(t,0)}function eH(t){return new J0(t,1)}function Gp(t,e){if((u=t.length)>1)for(var r=1,n,i,l=t[e[0]],u,s=l.length;r<u;++r)for(i=l,l=t[e[r]],n=0;n<s;++n)l[n][1]+=l[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function J2(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function tH(t,e){return t[e]}function rH(t){const e=[];return e.key=t,e}function nH(){var t=Rn([]),e=J2,r=Gp,n=tH;function i(l){var u=Array.from(t.apply(this,arguments),rH),s,m=u.length,y=-1,w;for(const S of l)for(s=0,++y;s<m;++s)(u[s][y]=[0,+n(S,u[s].key,y,l)]).data=S;for(s=0,w=NP(e(u));s<m;++s)u[w[s]].index=s;return r(u,w),u}return i.keys=function(l){return arguments.length?(t=typeof l=="function"?l:Rn(Array.from(l)),i):t},i.value=function(l){return arguments.length?(n=typeof l=="function"?l:Rn(+l),i):n},i.order=function(l){return arguments.length?(e=l==null?J2:typeof l=="function"?l:Rn(Array.from(l)),i):e},i.offset=function(l){return arguments.length?(r=l??Gp,i):r},i}function iH(t,e){if((n=t.length)>0){for(var r,n,i=0,l=t[0].length,u;i<l;++i){for(u=r=0;r<n;++r)u+=t[r][i][1]||0;if(u)for(r=0;r<n;++r)t[r][i][1]/=u}Gp(t,e)}}function aH(t,e){if((i=t.length)>0){for(var r=0,n=t[e[0]],i,l=n.length;r<l;++r){for(var u=0,s=0;u<i;++u)s+=t[u][r][1]||0;n[r][1]+=n[r][0]=-s/2}Gp(t,e)}}function oH(t,e){if(!(!((u=t.length)>0)||!((l=(i=t[e[0]]).length)>0))){for(var r=0,n=1,i,l,u;n<l;++n){for(var s=0,m=0,y=0;s<u;++s){for(var w=t[e[s]],S=w[n][1]||0,E=w[n-1][1]||0,I=(S-E)/2,F=0;F<s;++F){var L=t[e[F]],R=L[n][1]||0,U=L[n-1][1]||0;I+=R-U}m+=S,y+=I*S}i[n-1][1]+=i[n-1][0]=r,m&&(r-=y/m)}i[n-1][1]+=i[n-1][0]=r,Gp(t,e)}}function Jg(t){"@babel/helpers - typeof";return Jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jg(t)}var sH=["type","size","sizeType"];function Q2(){return Q2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Q2.apply(this,arguments)}function MC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function CC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MC(Object(r),!0).forEach(function(n){lH(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lH(t,e,r){return e=uH(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uH(t){var e=cH(t,"string");return Jg(e)=="symbol"?e:e+""}function cH(t,e){if(Jg(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Jg(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hH(t,e){if(t==null)return{};var r=fH(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fH(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var xj={symbolCircle:$P,symbolCross:DW,symbolDiamond:RW,symbolSquare:LW,symbolStar:NW,symbolTriangle:$W,symbolWye:qW},dH=Math.PI/180,pH=function(e){var r="symbol".concat(X0(e));return xj[r]||$P},mH=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*dH;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gH=function(e,r){xj["symbol".concat(X0(e))]=r},VP=function(e){var r=e.type,n=r===void 0?"circle":r,i=e.size,l=i===void 0?64:i,u=e.sizeType,s=u===void 0?"area":u,m=hH(e,sH),y=CC(CC({},m),{},{type:n,size:l,sizeType:s}),w=function(){var R=pH(n),U=UW().type(R).size(mH(l,s,n));return U()},S=y.className,E=y.cx,I=y.cy,F=ln(y,!0);return E===+E&&I===+I&&l===+l?He.createElement("path",Q2({},F,{className:un("recharts-symbols",S),transform:"translate(".concat(E,", ").concat(I,")"),d:w()})):null};VP.registerSymbol=gH;function Zp(t){"@babel/helpers - typeof";return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(t)}function eT(){return eT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},eT.apply(this,arguments)}function OC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yH(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OC(Object(r),!0).forEach(function(n){Qg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wj(n.key),n)}}function xH(t,e,r){return e&&_H(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bH(t,e,r){return e=V_(e),wH(t,bj()?Reflect.construct(e,r||[],V_(t).constructor):e.apply(t,r))}function wH(t,e){if(e&&(Zp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SH(t)}function SH(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bj=function(){return!!t})()}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V_(t)}function TH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tT(t,e)}function tT(t,e){return tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tT(t,e)}function Qg(t,e,r){return e=wj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wj(t){var e=PH(t,"string");return Zp(e)=="symbol"?e:e+""}function PH(t,e){if(Zp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Zp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hs=32,qP=(function(t){function e(){return vH(this,e),bH(this,e,arguments)}return TH(e,t),xH(e,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,l=Hs/2,u=Hs/6,s=Hs/3,m=n.inactive?i:n.color;if(n.type==="plainline")return He.createElement("line",{strokeWidth:4,fill:"none",stroke:m,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:l,x2:Hs,y2:l,className:"recharts-legend-icon"});if(n.type==="line")return He.createElement("path",{strokeWidth:4,fill:"none",stroke:m,d:"M0,".concat(l,"h").concat(s,`
            A`).concat(u,",").concat(u,",0,1,1,").concat(2*s,",").concat(l,`
            H`).concat(Hs,"M").concat(2*s,",").concat(l,`
            A`).concat(u,",").concat(u,",0,1,1,").concat(s,",").concat(l),className:"recharts-legend-icon"});if(n.type==="rect")return He.createElement("path",{stroke:"none",fill:m,d:"M0,".concat(Hs/8,"h").concat(Hs,"v").concat(Hs*3/4,"h").concat(-Hs,"z"),className:"recharts-legend-icon"});if(He.isValidElement(n.legendIcon)){var y=yH({},n);return delete y.legendIcon,He.cloneElement(n.legendIcon,y)}return He.createElement(VP,{fill:m,cx:l,cy:l,size:Hs,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,l=i.payload,u=i.iconSize,s=i.layout,m=i.formatter,y=i.inactiveColor,w={x:0,y:0,width:Hs,height:Hs},S={display:s==="horizontal"?"inline-block":"block",marginRight:10},E={display:"inline-block",verticalAlign:"middle",marginRight:4};return l.map(function(I,F){var L=I.formatter||m,R=un(Qg(Qg({"recharts-legend-item":!0},"legend-item-".concat(F),!0),"inactive",I.inactive));if(I.type==="none")return null;var U=Lr(I.value)?null:I.value;Ac(!Lr(I.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var X=I.inactive?y:I.color;return He.createElement("li",eT({className:R,style:S,key:"legend-item-".concat(F)},L_(n.props,I,F)),He.createElement(G2,{width:u,height:u,viewBox:w,style:E},n.renderIcon(I)),He.createElement("span",{className:"recharts-legend-item-text",style:{color:X}},L?L(U,I,F):U))})}},{key:"render",value:function(){var n=this.props,i=n.payload,l=n.layout,u=n.align;if(!i||!i.length)return null;var s={padding:0,margin:0,textAlign:l==="horizontal"?u:"left"};return He.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}])})(it.PureComponent);Qg(qP,"displayName","Legend");Qg(qP,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var L1,IC;function AH(){if(IC)return L1;IC=1;var t=W0();function e(){this.__data__=new t,this.size=0}return L1=e,L1}var F1,DC;function kH(){if(DC)return F1;DC=1;function t(e){var r=this.__data__,n=r.delete(e);return this.size=r.size,n}return F1=t,F1}var j1,zC;function EH(){if(zC)return j1;zC=1;function t(e){return this.__data__.get(e)}return j1=t,j1}var B1,RC;function MH(){if(RC)return B1;RC=1;function t(e){return this.__data__.has(e)}return B1=t,B1}var N1,LC;function CH(){if(LC)return N1;LC=1;var t=W0(),e=DP(),r=zP(),n=200;function i(l,u){var s=this.__data__;if(s instanceof t){var m=s.__data__;if(!e||m.length<n-1)return m.push([l,u]),this.size=++s.size,this;s=this.__data__=new r(m)}return s.set(l,u),this.size=s.size,this}return N1=i,N1}var $1,FC;function Sj(){if(FC)return $1;FC=1;var t=W0(),e=AH(),r=kH(),n=EH(),i=MH(),l=CH();function u(s){var m=this.__data__=new t(s);this.size=m.size}return u.prototype.clear=e,u.prototype.delete=r,u.prototype.get=n,u.prototype.has=i,u.prototype.set=l,$1=u,$1}var V1,jC;function OH(){if(jC)return V1;jC=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return V1=e,V1}var q1,BC;function IH(){if(BC)return q1;BC=1;function t(e){return this.__data__.has(e)}return q1=t,q1}var U1,NC;function Tj(){if(NC)return U1;NC=1;var t=zP(),e=OH(),r=IH();function n(i){var l=-1,u=i==null?0:i.length;for(this.__data__=new t;++l<u;)this.add(i[l])}return n.prototype.add=n.prototype.push=e,n.prototype.has=r,U1=n,U1}var W1,$C;function Pj(){if($C)return W1;$C=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(e[n],n,e))return!0;return!1}return W1=t,W1}var H1,VC;function Aj(){if(VC)return H1;VC=1;function t(e,r){return e.has(r)}return H1=t,H1}var G1,qC;function kj(){if(qC)return G1;qC=1;var t=Tj(),e=Pj(),r=Aj(),n=1,i=2;function l(u,s,m,y,w,S){var E=m&n,I=u.length,F=s.length;if(I!=F&&!(E&&F>I))return!1;var L=S.get(u),R=S.get(s);if(L&&R)return L==s&&R==u;var U=-1,X=!0,K=m&i?new t:void 0;for(S.set(u,s),S.set(s,u);++U<I;){var re=u[U],W=s[U];if(y)var J=E?y(W,re,U,s,u,S):y(re,W,U,u,s,S);if(J!==void 0){if(J)continue;X=!1;break}if(K){if(!e(s,function(ie,he){if(!r(K,he)&&(re===ie||w(re,ie,m,y,S)))return K.push(he)})){X=!1;break}}else if(!(re===W||w(re,W,m,y,S))){X=!1;break}}return S.delete(u),S.delete(s),X}return G1=l,G1}var Z1,UC;function DH(){if(UC)return Z1;UC=1;var t=Ou(),e=t.Uint8Array;return Z1=e,Z1}var X1,WC;function zH(){if(WC)return X1;WC=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i,l){n[++r]=[l,i]}),n}return X1=t,X1}var K1,HC;function UP(){if(HC)return K1;HC=1;function t(e){var r=-1,n=Array(e.size);return e.forEach(function(i){n[++r]=i}),n}return K1=t,K1}var Y1,GC;function RH(){if(GC)return Y1;GC=1;var t=By(),e=DH(),r=IP(),n=kj(),i=zH(),l=UP(),u=1,s=2,m="[object Boolean]",y="[object Date]",w="[object Error]",S="[object Map]",E="[object Number]",I="[object RegExp]",F="[object Set]",L="[object String]",R="[object Symbol]",U="[object ArrayBuffer]",X="[object DataView]",K=t?t.prototype:void 0,re=K?K.valueOf:void 0;function W(J,ie,he,ve,Re,de,Oe){switch(he){case X:if(J.byteLength!=ie.byteLength||J.byteOffset!=ie.byteOffset)return!1;J=J.buffer,ie=ie.buffer;case U:return!(J.byteLength!=ie.byteLength||!de(new e(J),new e(ie)));case m:case y:case E:return r(+J,+ie);case w:return J.name==ie.name&&J.message==ie.message;case I:case L:return J==ie+"";case S:var Le=i;case F:var Ge=ve&u;if(Le||(Le=l),J.size!=ie.size&&!Ge)return!1;var Ne=Oe.get(J);if(Ne)return Ne==ie;ve|=s,Oe.set(J,ie);var Ue=n(Le(J),Le(ie),ve,Re,de,Oe);return Oe.delete(J),Ue;case R:if(re)return re.call(J)==re.call(ie)}return!1}return Y1=W,Y1}var J1,ZC;function Ej(){if(ZC)return J1;ZC=1;function t(e,r){for(var n=-1,i=r.length,l=e.length;++n<i;)e[l+n]=r[n];return e}return J1=t,J1}var Q1,XC;function LH(){if(XC)return Q1;XC=1;var t=Ej(),e=Uo();function r(n,i,l){var u=i(n);return e(n)?u:t(u,l(n))}return Q1=r,Q1}var ew,KC;function FH(){if(KC)return ew;KC=1;function t(e,r){for(var n=-1,i=e==null?0:e.length,l=0,u=[];++n<i;){var s=e[n];r(s,n,e)&&(u[l++]=s)}return u}return ew=t,ew}var tw,YC;function jH(){if(YC)return tw;YC=1;function t(){return[]}return tw=t,tw}var rw,JC;function BH(){if(JC)return rw;JC=1;var t=FH(),e=jH(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,l=i?function(u){return u==null?[]:(u=Object(u),t(i(u),function(s){return n.call(u,s)}))}:e;return rw=l,rw}var nw,QC;function NH(){if(QC)return nw;QC=1;function t(e,r){for(var n=-1,i=Array(e);++n<e;)i[n]=r(n);return i}return nw=t,nw}var iw,eO;function $H(){if(eO)return iw;eO=1;var t=Dc(),e=zc(),r="[object Arguments]";function n(i){return e(i)&&t(i)==r}return iw=n,iw}var aw,tO;function WP(){if(tO)return aw;tO=1;var t=$H(),e=zc(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,l=t((function(){return arguments})())?t:function(u){return e(u)&&n.call(u,"callee")&&!i.call(u,"callee")};return aw=l,aw}var Dg={exports:{}},ow,rO;function VH(){if(rO)return ow;rO=1;function t(){return!1}return ow=t,ow}Dg.exports;var nO;function Mj(){return nO||(nO=1,(function(t,e){var r=Ou(),n=VH(),i=e&&!e.nodeType&&e,l=i&&!0&&t&&!t.nodeType&&t,u=l&&l.exports===i,s=u?r.Buffer:void 0,m=s?s.isBuffer:void 0,y=m||n;t.exports=y})(Dg,Dg.exports)),Dg.exports}var sw,iO;function HP(){if(iO)return sw;iO=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(n,i){var l=typeof n;return i=i??t,!!i&&(l=="number"||l!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return sw=r,sw}var lw,aO;function GP(){if(aO)return lw;aO=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return lw=e,lw}var uw,oO;function qH(){if(oO)return uw;oO=1;var t=Dc(),e=GP(),r=zc(),n="[object Arguments]",i="[object Array]",l="[object Boolean]",u="[object Date]",s="[object Error]",m="[object Function]",y="[object Map]",w="[object Number]",S="[object Object]",E="[object RegExp]",I="[object Set]",F="[object String]",L="[object WeakMap]",R="[object ArrayBuffer]",U="[object DataView]",X="[object Float32Array]",K="[object Float64Array]",re="[object Int8Array]",W="[object Int16Array]",J="[object Int32Array]",ie="[object Uint8Array]",he="[object Uint8ClampedArray]",ve="[object Uint16Array]",Re="[object Uint32Array]",de={};de[X]=de[K]=de[re]=de[W]=de[J]=de[ie]=de[he]=de[ve]=de[Re]=!0,de[n]=de[i]=de[R]=de[l]=de[U]=de[u]=de[s]=de[m]=de[y]=de[w]=de[S]=de[E]=de[I]=de[F]=de[L]=!1;function Oe(Le){return r(Le)&&e(Le.length)&&!!de[t(Le)]}return uw=Oe,uw}var cw,sO;function Cj(){if(sO)return cw;sO=1;function t(e){return function(r){return e(r)}}return cw=t,cw}var zg={exports:{}};zg.exports;var lO;function UH(){return lO||(lO=1,(function(t,e){var r=KF(),n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,l=i&&i.exports===n,u=l&&r.process,s=(function(){try{var m=i&&i.require&&i.require("util").types;return m||u&&u.binding&&u.binding("util")}catch{}})();t.exports=s})(zg,zg.exports)),zg.exports}var hw,uO;function Oj(){if(uO)return hw;uO=1;var t=qH(),e=Cj(),r=UH(),n=r&&r.isTypedArray,i=n?e(n):t;return hw=i,hw}var fw,cO;function WH(){if(cO)return fw;cO=1;var t=NH(),e=WP(),r=Uo(),n=Mj(),i=HP(),l=Oj(),u=Object.prototype,s=u.hasOwnProperty;function m(y,w){var S=r(y),E=!S&&e(y),I=!S&&!E&&n(y),F=!S&&!E&&!I&&l(y),L=S||E||I||F,R=L?t(y.length,String):[],U=R.length;for(var X in y)(w||s.call(y,X))&&!(L&&(X=="length"||I&&(X=="offset"||X=="parent")||F&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||i(X,U)))&&R.push(X);return R}return fw=m,fw}var dw,hO;function HH(){if(hO)return dw;hO=1;var t=Object.prototype;function e(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||t;return r===i}return dw=e,dw}var pw,fO;function Ij(){if(fO)return pw;fO=1;function t(e,r){return function(n){return e(r(n))}}return pw=t,pw}var mw,dO;function GH(){if(dO)return mw;dO=1;var t=Ij(),e=t(Object.keys,Object);return mw=e,mw}var gw,pO;function ZH(){if(pO)return gw;pO=1;var t=HH(),e=GH(),r=Object.prototype,n=r.hasOwnProperty;function i(l){if(!t(l))return e(l);var u=[];for(var s in Object(l))n.call(l,s)&&s!="constructor"&&u.push(s);return u}return gw=i,gw}var yw,mO;function $y(){if(mO)return yw;mO=1;var t=OP(),e=GP();function r(n){return n!=null&&e(n.length)&&!t(n)}return yw=r,yw}var vw,gO;function Q0(){if(gO)return vw;gO=1;var t=WH(),e=ZH(),r=$y();function n(i){return r(i)?t(i):e(i)}return vw=n,vw}var _w,yO;function XH(){if(yO)return _w;yO=1;var t=LH(),e=BH(),r=Q0();function n(i){return t(i,r,e)}return _w=n,_w}var xw,vO;function KH(){if(vO)return xw;vO=1;var t=XH(),e=1,r=Object.prototype,n=r.hasOwnProperty;function i(l,u,s,m,y,w){var S=s&e,E=t(l),I=E.length,F=t(u),L=F.length;if(I!=L&&!S)return!1;for(var R=I;R--;){var U=E[R];if(!(S?U in u:n.call(u,U)))return!1}var X=w.get(l),K=w.get(u);if(X&&K)return X==u&&K==l;var re=!0;w.set(l,u),w.set(u,l);for(var W=S;++R<I;){U=E[R];var J=l[U],ie=u[U];if(m)var he=S?m(ie,J,U,u,l,w):m(J,ie,U,l,u,w);if(!(he===void 0?J===ie||y(J,ie,s,m,w):he)){re=!1;break}W||(W=U=="constructor")}if(re&&!W){var ve=l.constructor,Re=u.constructor;ve!=Re&&"constructor"in l&&"constructor"in u&&!(typeof ve=="function"&&ve instanceof ve&&typeof Re=="function"&&Re instanceof Re)&&(re=!1)}return w.delete(l),w.delete(u),re}return xw=i,xw}var bw,_O;function YH(){if(_O)return bw;_O=1;var t=Sd(),e=Ou(),r=t(e,"DataView");return bw=r,bw}var ww,xO;function JH(){if(xO)return ww;xO=1;var t=Sd(),e=Ou(),r=t(e,"Promise");return ww=r,ww}var Sw,bO;function Dj(){if(bO)return Sw;bO=1;var t=Sd(),e=Ou(),r=t(e,"Set");return Sw=r,Sw}var Tw,wO;function QH(){if(wO)return Tw;wO=1;var t=Sd(),e=Ou(),r=t(e,"WeakMap");return Tw=r,Tw}var Pw,SO;function e9(){if(SO)return Pw;SO=1;var t=YH(),e=DP(),r=JH(),n=Dj(),i=QH(),l=Dc(),u=YF(),s="[object Map]",m="[object Object]",y="[object Promise]",w="[object Set]",S="[object WeakMap]",E="[object DataView]",I=u(t),F=u(e),L=u(r),R=u(n),U=u(i),X=l;return(t&&X(new t(new ArrayBuffer(1)))!=E||e&&X(new e)!=s||r&&X(r.resolve())!=y||n&&X(new n)!=w||i&&X(new i)!=S)&&(X=function(K){var re=l(K),W=re==m?K.constructor:void 0,J=W?u(W):"";if(J)switch(J){case I:return E;case F:return s;case L:return y;case R:return w;case U:return S}return re}),Pw=X,Pw}var Aw,TO;function t9(){if(TO)return Aw;TO=1;var t=Sj(),e=kj(),r=RH(),n=KH(),i=e9(),l=Uo(),u=Mj(),s=Oj(),m=1,y="[object Arguments]",w="[object Array]",S="[object Object]",E=Object.prototype,I=E.hasOwnProperty;function F(L,R,U,X,K,re){var W=l(L),J=l(R),ie=W?w:i(L),he=J?w:i(R);ie=ie==y?S:ie,he=he==y?S:he;var ve=ie==S,Re=he==S,de=ie==he;if(de&&u(L)){if(!u(R))return!1;W=!0,ve=!1}if(de&&!ve)return re||(re=new t),W||s(L)?e(L,R,U,X,K,re):r(L,R,ie,U,X,K,re);if(!(U&m)){var Oe=ve&&I.call(L,"__wrapped__"),Le=Re&&I.call(R,"__wrapped__");if(Oe||Le){var Ge=Oe?L.value():L,Ne=Le?R.value():R;return re||(re=new t),K(Ge,Ne,U,X,re)}}return de?(re||(re=new t),n(L,R,U,X,K,re)):!1}return Aw=F,Aw}var kw,PO;function ZP(){if(PO)return kw;PO=1;var t=t9(),e=zc();function r(n,i,l,u,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:t(n,i,l,u,r,s)}return kw=r,kw}var Ew,AO;function r9(){if(AO)return Ew;AO=1;var t=Sj(),e=ZP(),r=1,n=2;function i(l,u,s,m){var y=s.length,w=y,S=!m;if(l==null)return!w;for(l=Object(l);y--;){var E=s[y];if(S&&E[2]?E[1]!==l[E[0]]:!(E[0]in l))return!1}for(;++y<w;){E=s[y];var I=E[0],F=l[I],L=E[1];if(S&&E[2]){if(F===void 0&&!(I in l))return!1}else{var R=new t;if(m)var U=m(F,L,I,l,u,R);if(!(U===void 0?e(L,F,r|n,m,R):U))return!1}}return!0}return Ew=i,Ew}var Mw,kO;function zj(){if(kO)return Mw;kO=1;var t=Lh();function e(r){return r===r&&!t(r)}return Mw=e,Mw}var Cw,EO;function n9(){if(EO)return Cw;EO=1;var t=zj(),e=Q0();function r(n){for(var i=e(n),l=i.length;l--;){var u=i[l],s=n[u];i[l]=[u,s,t(s)]}return i}return Cw=r,Cw}var Ow,MO;function Rj(){if(MO)return Ow;MO=1;function t(e,r){return function(n){return n==null?!1:n[e]===r&&(r!==void 0||e in Object(n))}}return Ow=t,Ow}var Iw,CO;function i9(){if(CO)return Iw;CO=1;var t=r9(),e=n9(),r=Rj();function n(i){var l=e(i);return l.length==1&&l[0][2]?r(l[0][0],l[0][1]):function(u){return u===i||t(u,i,l)}}return Iw=n,Iw}var Dw,OO;function a9(){if(OO)return Dw;OO=1;function t(e,r){return e!=null&&r in Object(e)}return Dw=t,Dw}var zw,IO;function o9(){if(IO)return zw;IO=1;var t=ej(),e=WP(),r=Uo(),n=HP(),i=GP(),l=G0();function u(s,m,y){m=t(m,s);for(var w=-1,S=m.length,E=!1;++w<S;){var I=l(m[w]);if(!(E=s!=null&&y(s,I)))break;s=s[I]}return E||++w!=S?E:(S=s==null?0:s.length,!!S&&i(S)&&n(I,S)&&(r(s)||e(s)))}return zw=u,zw}var Rw,DO;function s9(){if(DO)return Rw;DO=1;var t=a9(),e=o9();function r(n,i){return n!=null&&e(n,i,t)}return Rw=r,Rw}var Lw,zO;function l9(){if(zO)return Lw;zO=1;var t=ZP(),e=tj(),r=s9(),n=CP(),i=zj(),l=Rj(),u=G0(),s=1,m=2;function y(w,S){return n(w)&&i(S)?l(u(w),S):function(E){var I=e(E,w);return I===void 0&&I===S?r(E,w):t(S,I,s|m)}}return Lw=y,Lw}var Fw,RO;function xm(){if(RO)return Fw;RO=1;function t(e){return e}return Fw=t,Fw}var jw,LO;function u9(){if(LO)return jw;LO=1;function t(e){return function(r){return r?.[e]}}return jw=t,jw}var Bw,FO;function c9(){if(FO)return Bw;FO=1;var t=LP();function e(r){return function(n){return t(n,r)}}return Bw=e,Bw}var Nw,jO;function h9(){if(jO)return Nw;jO=1;var t=u9(),e=c9(),r=CP(),n=G0();function i(l){return r(l)?t(n(l)):e(l)}return Nw=i,Nw}var $w,BO;function Fh(){if(BO)return $w;BO=1;var t=i9(),e=l9(),r=xm(),n=Uo(),i=h9();function l(u){return typeof u=="function"?u:u==null?r:typeof u=="object"?n(u)?e(u[0],u[1]):t(u):i(u)}return $w=l,$w}var Vw,NO;function Lj(){if(NO)return Vw;NO=1;function t(e,r,n,i){for(var l=e.length,u=n+(i?1:-1);i?u--:++u<l;)if(r(e[u],u,e))return u;return-1}return Vw=t,Vw}var qw,$O;function f9(){if($O)return qw;$O=1;function t(e){return e!==e}return qw=t,qw}var Uw,VO;function d9(){if(VO)return Uw;VO=1;function t(e,r,n){for(var i=n-1,l=e.length;++i<l;)if(e[i]===r)return i;return-1}return Uw=t,Uw}var Ww,qO;function p9(){if(qO)return Ww;qO=1;var t=Lj(),e=f9(),r=d9();function n(i,l,u){return l===l?r(i,l,u):t(i,e,u)}return Ww=n,Ww}var Hw,UO;function m9(){if(UO)return Hw;UO=1;var t=p9();function e(r,n){var i=r==null?0:r.length;return!!i&&t(r,n,0)>-1}return Hw=e,Hw}var Gw,WO;function g9(){if(WO)return Gw;WO=1;function t(e,r,n){for(var i=-1,l=e==null?0:e.length;++i<l;)if(n(r,e[i]))return!0;return!1}return Gw=t,Gw}var Zw,HO;function y9(){if(HO)return Zw;HO=1;function t(){}return Zw=t,Zw}var Xw,GO;function v9(){if(GO)return Xw;GO=1;var t=Dj(),e=y9(),r=UP(),n=1/0,i=t&&1/r(new t([,-0]))[1]==n?function(l){return new t(l)}:e;return Xw=i,Xw}var Kw,ZO;function _9(){if(ZO)return Kw;ZO=1;var t=Tj(),e=m9(),r=g9(),n=Aj(),i=v9(),l=UP(),u=200;function s(m,y,w){var S=-1,E=e,I=m.length,F=!0,L=[],R=L;if(w)F=!1,E=r;else if(I>=u){var U=y?null:i(m);if(U)return l(U);F=!1,E=n,R=new t}else R=y?[]:L;e:for(;++S<I;){var X=m[S],K=y?y(X):X;if(X=w||X!==0?X:0,F&&K===K){for(var re=R.length;re--;)if(R[re]===K)continue e;y&&R.push(K),L.push(X)}else E(R,K,w)||(R!==L&&R.push(K),L.push(X))}return L}return Kw=s,Kw}var Yw,XO;function x9(){if(XO)return Yw;XO=1;var t=Fh(),e=_9();function r(n,i){return n&&n.length?e(n,t(i,2)):[]}return Yw=r,Yw}var b9=x9();const KO=An(b9);function Fj(t,e,r){return e===!0?KO(t,r):Lr(e)?KO(t,e):t}function Xp(t){"@babel/helpers - typeof";return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(t)}var w9=["ref"];function YO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function mc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YO(Object(r),!0).forEach(function(n){ex(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S9(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function JO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bj(n.key),n)}}function T9(t,e,r){return e&&JO(t.prototype,e),r&&JO(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function P9(t,e,r){return e=q_(e),A9(t,jj()?Reflect.construct(e,r||[],q_(t).constructor):e.apply(t,r))}function A9(t,e){if(e&&(Xp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k9(t)}function k9(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jj=function(){return!!t})()}function q_(t){return q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q_(t)}function E9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rT(t,e)}function rT(t,e){return rT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rT(t,e)}function ex(t,e,r){return e=Bj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bj(t){var e=M9(t,"string");return Xp(e)=="symbol"?e:e+""}function M9(t,e){if(Xp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function C9(t,e){if(t==null)return{};var r=O9(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function O9(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function I9(t){return t.value}function D9(t,e){if(He.isValidElement(t))return He.cloneElement(t,e);if(typeof t=="function")return He.createElement(t,e);e.ref;var r=C9(e,w9);return He.createElement(qP,r)}var QO=1,cd=(function(t){function e(){var r;S9(this,e);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r=P9(this,e,[].concat(i)),ex(r,"lastBoundingBox",{width:-1,height:-1}),r}return E9(e,t),T9(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>QO||Math.abs(i.height-this.lastBoundingBox.height)>QO)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?mc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,l=i.layout,u=i.align,s=i.verticalAlign,m=i.margin,y=i.chartWidth,w=i.chartHeight,S,E;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(u==="center"&&l==="vertical"){var I=this.getBBoxSnapshot();S={left:((y||0)-I.width)/2}}else S=u==="right"?{right:m&&m.right||0}:{left:m&&m.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(s==="middle"){var F=this.getBBoxSnapshot();E={top:((w||0)-F.height)/2}}else E=s==="bottom"?{bottom:m&&m.bottom||0}:{top:m&&m.top||0};return mc(mc({},S),E)}},{key:"render",value:function(){var n=this,i=this.props,l=i.content,u=i.width,s=i.height,m=i.wrapperStyle,y=i.payloadUniqBy,w=i.payload,S=mc(mc({position:"absolute",width:u||"auto",height:s||"auto"},this.getDefaultPosition(m)),m);return He.createElement("div",{className:"recharts-legend-wrapper",style:S,ref:function(I){n.wrapperNode=I}},D9(l,mc(mc({},this.props),{},{payload:Fj(w,y,I9)})))}}],[{key:"getWithHeight",value:function(n,i){var l=mc(mc({},this.defaultProps),n.props),u=l.layout;return u==="vertical"&&Dt(n.props.height)?{height:n.props.height}:u==="horizontal"?{width:n.props.width||i}:null}}])})(it.PureComponent);ex(cd,"displayName","Legend");ex(cd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Jw,eI;function z9(){if(eI)return Jw;eI=1;var t=By(),e=WP(),r=Uo(),n=t?t.isConcatSpreadable:void 0;function i(l){return r(l)||e(l)||!!(n&&l&&l[n])}return Jw=i,Jw}var Qw,tI;function Nj(){if(tI)return Qw;tI=1;var t=Ej(),e=z9();function r(n,i,l,u,s){var m=-1,y=n.length;for(l||(l=e),s||(s=[]);++m<y;){var w=n[m];i>0&&l(w)?i>1?r(w,i-1,l,u,s):t(s,w):u||(s[s.length]=w)}return s}return Qw=r,Qw}var eS,rI;function R9(){if(rI)return eS;rI=1;function t(e){return function(r,n,i){for(var l=-1,u=Object(r),s=i(r),m=s.length;m--;){var y=s[e?m:++l];if(n(u[y],y,u)===!1)break}return r}}return eS=t,eS}var tS,nI;function L9(){if(nI)return tS;nI=1;var t=R9(),e=t();return tS=e,tS}var rS,iI;function $j(){if(iI)return rS;iI=1;var t=L9(),e=Q0();function r(n,i){return n&&t(n,i,e)}return rS=r,rS}var nS,aI;function F9(){if(aI)return nS;aI=1;var t=$y();function e(r,n){return function(i,l){if(i==null)return i;if(!t(i))return r(i,l);for(var u=i.length,s=n?u:-1,m=Object(i);(n?s--:++s<u)&&l(m[s],s,m)!==!1;);return i}}return nS=e,nS}var iS,oI;function XP(){if(oI)return iS;oI=1;var t=$j(),e=F9(),r=e(t);return iS=r,iS}var aS,sI;function Vj(){if(sI)return aS;sI=1;var t=XP(),e=$y();function r(n,i){var l=-1,u=e(n)?Array(n.length):[];return t(n,function(s,m,y){u[++l]=i(s,m,y)}),u}return aS=r,aS}var oS,lI;function j9(){if(lI)return oS;lI=1;function t(e,r){var n=e.length;for(e.sort(r);n--;)e[n]=e[n].value;return e}return oS=t,oS}var sS,uI;function B9(){if(uI)return sS;uI=1;var t=vm();function e(r,n){if(r!==n){var i=r!==void 0,l=r===null,u=r===r,s=t(r),m=n!==void 0,y=n===null,w=n===n,S=t(n);if(!y&&!S&&!s&&r>n||s&&m&&w&&!y&&!S||l&&m&&w||!i&&w||!u)return 1;if(!l&&!s&&!S&&r<n||S&&i&&u&&!l&&!s||y&&i&&u||!m&&u||!w)return-1}return 0}return sS=e,sS}var lS,cI;function N9(){if(cI)return lS;cI=1;var t=B9();function e(r,n,i){for(var l=-1,u=r.criteria,s=n.criteria,m=u.length,y=i.length;++l<m;){var w=t(u[l],s[l]);if(w){if(l>=y)return w;var S=i[l];return w*(S=="desc"?-1:1)}}return r.index-n.index}return lS=e,lS}var uS,hI;function $9(){if(hI)return uS;hI=1;var t=RP(),e=LP(),r=Fh(),n=Vj(),i=j9(),l=Cj(),u=N9(),s=xm(),m=Uo();function y(w,S,E){S.length?S=t(S,function(L){return m(L)?function(R){return e(R,L.length===1?L[0]:L)}:L}):S=[s];var I=-1;S=t(S,l(r));var F=n(w,function(L,R,U){var X=t(S,function(K){return K(L)});return{criteria:X,index:++I,value:L}});return i(F,function(L,R){return u(L,R,E)})}return uS=y,uS}var cS,fI;function V9(){if(fI)return cS;fI=1;function t(e,r,n){switch(n.length){case 0:return e.call(r);case 1:return e.call(r,n[0]);case 2:return e.call(r,n[0],n[1]);case 3:return e.call(r,n[0],n[1],n[2])}return e.apply(r,n)}return cS=t,cS}var hS,dI;function q9(){if(dI)return hS;dI=1;var t=V9(),e=Math.max;function r(n,i,l){return i=e(i===void 0?n.length-1:i,0),function(){for(var u=arguments,s=-1,m=e(u.length-i,0),y=Array(m);++s<m;)y[s]=u[i+s];s=-1;for(var w=Array(i+1);++s<i;)w[s]=u[s];return w[i]=l(y),t(n,this,w)}}return hS=r,hS}var fS,pI;function U9(){if(pI)return fS;pI=1;function t(e){return function(){return e}}return fS=t,fS}var dS,mI;function qj(){if(mI)return dS;mI=1;var t=Sd(),e=(function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}})();return dS=e,dS}var pS,gI;function W9(){if(gI)return pS;gI=1;var t=U9(),e=qj(),r=xm(),n=e?function(i,l){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(l),writable:!0})}:r;return pS=n,pS}var mS,yI;function H9(){if(yI)return mS;yI=1;var t=800,e=16,r=Date.now;function n(i){var l=0,u=0;return function(){var s=r(),m=e-(s-u);if(u=s,m>0){if(++l>=t)return arguments[0]}else l=0;return i.apply(void 0,arguments)}}return mS=n,mS}var gS,vI;function G9(){if(vI)return gS;vI=1;var t=W9(),e=H9(),r=e(t);return gS=r,gS}var yS,_I;function Z9(){if(_I)return yS;_I=1;var t=xm(),e=q9(),r=G9();function n(i,l){return r(e(i,l,t),i+"")}return yS=n,yS}var vS,xI;function tx(){if(xI)return vS;xI=1;var t=IP(),e=$y(),r=HP(),n=Lh();function i(l,u,s){if(!n(s))return!1;var m=typeof u;return(m=="number"?e(s)&&r(u,s.length):m=="string"&&u in s)?t(s[u],l):!1}return vS=i,vS}var _S,bI;function X9(){if(bI)return _S;bI=1;var t=Nj(),e=$9(),r=Z9(),n=tx(),i=r(function(l,u){if(l==null)return[];var s=u.length;return s>1&&n(l,u[0],u[1])?u=[]:s>2&&n(u[0],u[1],u[2])&&(u=[u[0]]),e(l,t(u,1),[])});return _S=i,_S}var K9=X9();const KP=An(K9);function ey(t){"@babel/helpers - typeof";return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ey(t)}function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},nT.apply(this,arguments)}function Y9(t,e){return t7(t)||e7(t,e)||Q9(t,e)||J9()}function J9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9(t,e){if(t){if(typeof t=="string")return wI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wI(t,e)}}function wI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function e7(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function t7(t){if(Array.isArray(t))return t}function SI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xS(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(r),!0).forEach(function(n){r7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function r7(t,e,r){return e=n7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n7(t){var e=i7(t,"string");return ey(e)=="symbol"?e:e+""}function i7(t,e){if(ey(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ey(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function a7(t){return Array.isArray(t)&&Ui(t[0])&&Ui(t[1])?t.join(" ~ "):t}var o7=function(e){var r=e.separator,n=r===void 0?" : ":r,i=e.contentStyle,l=i===void 0?{}:i,u=e.itemStyle,s=u===void 0?{}:u,m=e.labelStyle,y=m===void 0?{}:m,w=e.payload,S=e.formatter,E=e.itemSorter,I=e.wrapperClassName,F=e.labelClassName,L=e.label,R=e.labelFormatter,U=e.accessibilityLayer,X=U===void 0?!1:U,K=function(){if(w&&w.length){var Oe={padding:0,margin:0},Le=(E?KP(w,E):w).map(function(Ge,Ne){if(Ge.type==="none")return null;var Ue=xS({display:"block",paddingTop:4,paddingBottom:4,color:Ge.color||"#000"},s),Qe=Ge.formatter||S||a7,$e=Ge.value,Ye=Ge.name,nt=$e,Se=Ye;if(Qe&&nt!=null&&Se!=null){var De=Qe($e,Ye,Ge,Ne,w);if(Array.isArray(De)){var ft=Y9(De,2);nt=ft[0],Se=ft[1]}else nt=De}return He.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Ne),style:Ue},Ui(Se)?He.createElement("span",{className:"recharts-tooltip-item-name"},Se):null,Ui(Se)?He.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,He.createElement("span",{className:"recharts-tooltip-item-value"},nt),He.createElement("span",{className:"recharts-tooltip-item-unit"},Ge.unit||""))});return He.createElement("ul",{className:"recharts-tooltip-item-list",style:Oe},Le)}return null},re=xS({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},l),W=xS({margin:0},y),J=!cn(L),ie=J?L:"",he=un("recharts-default-tooltip",I),ve=un("recharts-tooltip-label",F);J&&R&&w!==void 0&&w!==null&&(ie=R(L,w));var Re=X?{role:"status","aria-live":"assertive"}:{};return He.createElement("div",nT({className:he,style:re},Re),He.createElement("p",{className:ve,style:W},He.isValidElement(ie)?ie:"".concat(ie)),K())};function ty(t){"@babel/helpers - typeof";return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ty(t)}function a_(t,e,r){return e=s7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s7(t){var e=l7(t,"string");return ty(e)=="symbol"?e:e+""}function l7(t,e){if(ty(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ty(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yg="recharts-tooltip-wrapper",u7={visibility:"hidden"};function c7(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return un(yg,a_(a_(a_(a_({},"".concat(yg,"-right"),Dt(r)&&e&&Dt(e.x)&&r>=e.x),"".concat(yg,"-left"),Dt(r)&&e&&Dt(e.x)&&r<e.x),"".concat(yg,"-bottom"),Dt(n)&&e&&Dt(e.y)&&n>=e.y),"".concat(yg,"-top"),Dt(n)&&e&&Dt(e.y)&&n<e.y))}function TI(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,i=t.offsetTopLeft,l=t.position,u=t.reverseDirection,s=t.tooltipDimension,m=t.viewBox,y=t.viewBoxDimension;if(l&&Dt(l[n]))return l[n];var w=r[n]-s-i,S=r[n]+i;if(e[n])return u[n]?w:S;if(u[n]){var E=w,I=m[n];return E<I?Math.max(S,m[n]):Math.max(w,m[n])}var F=S+s,L=m[n]+y;return F>L?Math.max(w,m[n]):Math.max(S,m[n])}function h7(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function f7(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,i=t.position,l=t.reverseDirection,u=t.tooltipBox,s=t.useTranslate3d,m=t.viewBox,y,w,S;return u.height>0&&u.width>0&&r?(w=TI({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:l,tooltipDimension:u.width,viewBox:m,viewBoxDimension:m.width}),S=TI({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:l,tooltipDimension:u.height,viewBox:m,viewBoxDimension:m.height}),y=h7({translateX:w,translateY:S,useTranslate3d:s})):y=u7,{cssProperties:y,cssClasses:c7({translateX:w,translateY:S,coordinate:r})}}function Kp(t){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(t)}function PI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PI(Object(r),!0).forEach(function(n){aT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function d7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wj(n.key),n)}}function m7(t,e,r){return e&&p7(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function g7(t,e,r){return e=U_(e),y7(t,Uj()?Reflect.construct(e,r||[],U_(t).constructor):e.apply(t,r))}function y7(t,e){if(e&&(Kp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v7(t)}function v7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Uj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Uj=function(){return!!t})()}function U_(t){return U_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U_(t)}function _7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iT(t,e)}function iT(t,e){return iT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},iT(t,e)}function aT(t,e,r){return e=Wj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Wj(t){var e=x7(t,"string");return Kp(e)=="symbol"?e:e+""}function x7(t,e){if(Kp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var kI=1,b7=(function(t){function e(){var r;d7(this,e);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r=g7(this,e,[].concat(i)),aT(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),aT(r,"handleKeyDown",function(u){if(u.key==="Escape"){var s,m,y,w;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(s=(m=r.props.coordinate)===null||m===void 0?void 0:m.x)!==null&&s!==void 0?s:0,y:(y=(w=r.props.coordinate)===null||w===void 0?void 0:w.y)!==null&&y!==void 0?y:0}})}}),r}return _7(e,t),m7(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>kI||Math.abs(n.height-this.state.lastBoundingBox.height)>kI)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,l=i.active,u=i.allowEscapeViewBox,s=i.animationDuration,m=i.animationEasing,y=i.children,w=i.coordinate,S=i.hasPayload,E=i.isAnimationActive,I=i.offset,F=i.position,L=i.reverseDirection,R=i.useTranslate3d,U=i.viewBox,X=i.wrapperStyle,K=f7({allowEscapeViewBox:u,coordinate:w,offsetTopLeft:I,position:F,reverseDirection:L,tooltipBox:this.state.lastBoundingBox,useTranslate3d:R,viewBox:U}),re=K.cssClasses,W=K.cssProperties,J=AI(AI({transition:E&&l?"transform ".concat(s,"ms ").concat(m):void 0},W),{},{pointerEvents:"none",visibility:!this.state.dismissed&&l&&S?"visible":"hidden",position:"absolute",top:0,left:0},X);return He.createElement("div",{tabIndex:-1,className:re,style:J,ref:function(he){n.wrapperNode=he}},y)}}])})(it.PureComponent),w7=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Vy={isSsr:w7()};function Yp(t){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(t)}function EI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MI(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EI(Object(r),!0).forEach(function(n){YP(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function S7(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T7(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gj(n.key),n)}}function P7(t,e,r){return e&&T7(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function A7(t,e,r){return e=W_(e),k7(t,Hj()?Reflect.construct(e,r||[],W_(t).constructor):e.apply(t,r))}function k7(t,e){if(e&&(Yp(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E7(t)}function E7(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hj=function(){return!!t})()}function W_(t){return W_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W_(t)}function M7(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oT(t,e)}function oT(t,e){return oT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},oT(t,e)}function YP(t,e,r){return e=Gj(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gj(t){var e=C7(t,"string");return Yp(e)=="symbol"?e:e+""}function C7(t,e){if(Yp(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Yp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function O7(t){return t.dataKey}function I7(t,e){return He.isValidElement(t)?He.cloneElement(t,e):typeof t=="function"?He.createElement(t,e):He.createElement(o7,e)}var Su=(function(t){function e(){return S7(this,e),A7(this,e,arguments)}return M7(e,t),P7(e,[{key:"render",value:function(){var n=this,i=this.props,l=i.active,u=i.allowEscapeViewBox,s=i.animationDuration,m=i.animationEasing,y=i.content,w=i.coordinate,S=i.filterNull,E=i.isAnimationActive,I=i.offset,F=i.payload,L=i.payloadUniqBy,R=i.position,U=i.reverseDirection,X=i.useTranslate3d,K=i.viewBox,re=i.wrapperStyle,W=F??[];S&&W.length&&(W=Fj(F.filter(function(ie){return ie.value!=null&&(ie.hide!==!0||n.props.includeHidden)}),L,O7));var J=W.length>0;return He.createElement(b7,{allowEscapeViewBox:u,animationDuration:s,animationEasing:m,isAnimationActive:E,active:l,coordinate:w,hasPayload:J,offset:I,position:R,reverseDirection:U,useTranslate3d:X,viewBox:K,wrapperStyle:re},I7(y,MI(MI({},this.props),{},{payload:W})))}}])})(it.PureComponent);YP(Su,"displayName","Tooltip");YP(Su,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Vy.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var bS,CI;function D7(){if(CI)return bS;CI=1;var t=Ou(),e=function(){return t.Date.now()};return bS=e,bS}var wS,OI;function z7(){if(OI)return wS;OI=1;var t=/\s/;function e(r){for(var n=r.length;n--&&t.test(r.charAt(n)););return n}return wS=e,wS}var SS,II;function R7(){if(II)return SS;II=1;var t=z7(),e=/^\s+/;function r(n){return n&&n.slice(0,t(n)+1).replace(e,"")}return SS=r,SS}var TS,DI;function Zj(){if(DI)return TS;DI=1;var t=R7(),e=Lh(),r=vm(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;function m(y){if(typeof y=="number")return y;if(r(y))return n;if(e(y)){var w=typeof y.valueOf=="function"?y.valueOf():y;y=e(w)?w+"":w}if(typeof y!="string")return y===0?y:+y;y=t(y);var S=l.test(y);return S||u.test(y)?s(y.slice(2),S?2:8):i.test(y)?n:+y}return TS=m,TS}var PS,zI;function L7(){if(zI)return PS;zI=1;var t=Lh(),e=D7(),r=Zj(),n="Expected a function",i=Math.max,l=Math.min;function u(s,m,y){var w,S,E,I,F,L,R=0,U=!1,X=!1,K=!0;if(typeof s!="function")throw new TypeError(n);m=r(m)||0,t(y)&&(U=!!y.leading,X="maxWait"in y,E=X?i(r(y.maxWait)||0,m):E,K="trailing"in y?!!y.trailing:K);function re(Le){var Ge=w,Ne=S;return w=S=void 0,R=Le,I=s.apply(Ne,Ge),I}function W(Le){return R=Le,F=setTimeout(he,m),U?re(Le):I}function J(Le){var Ge=Le-L,Ne=Le-R,Ue=m-Ge;return X?l(Ue,E-Ne):Ue}function ie(Le){var Ge=Le-L,Ne=Le-R;return L===void 0||Ge>=m||Ge<0||X&&Ne>=E}function he(){var Le=e();if(ie(Le))return ve(Le);F=setTimeout(he,J(Le))}function ve(Le){return F=void 0,K&&w?re(Le):(w=S=void 0,I)}function Re(){F!==void 0&&clearTimeout(F),R=0,w=L=S=F=void 0}function de(){return F===void 0?I:ve(e())}function Oe(){var Le=e(),Ge=ie(Le);if(w=arguments,S=this,L=Le,Ge){if(F===void 0)return W(L);if(X)return clearTimeout(F),F=setTimeout(he,m),re(L)}return F===void 0&&(F=setTimeout(he,m)),I}return Oe.cancel=Re,Oe.flush=de,Oe}return PS=u,PS}var AS,RI;function F7(){if(RI)return AS;RI=1;var t=L7(),e=Lh(),r="Expected a function";function n(i,l,u){var s=!0,m=!0;if(typeof i!="function")throw new TypeError(r);return e(u)&&(s="leading"in u?!!u.leading:s,m="trailing"in u?!!u.trailing:m),t(i,l,{leading:s,maxWait:l,trailing:m})}return AS=n,AS}var j7=F7();const Xj=An(j7);function ry(t){"@babel/helpers - typeof";return ry=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ry(t)}function LI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function o_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LI(Object(r),!0).forEach(function(n){B7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function B7(t,e,r){return e=N7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N7(t){var e=$7(t,"string");return ry(e)=="symbol"?e:e+""}function $7(t,e){if(ry(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ry(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function V7(t,e){return H7(t)||W7(t,e)||U7(t,e)||q7()}function q7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U7(t,e){if(t){if(typeof t=="string")return FI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FI(t,e)}}function FI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function W7(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function H7(t){if(Array.isArray(t))return t}var G7=it.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,i=n===void 0?{width:-1,height:-1}:n,l=t.width,u=l===void 0?"100%":l,s=t.height,m=s===void 0?"100%":s,y=t.minWidth,w=y===void 0?0:y,S=t.minHeight,E=t.maxHeight,I=t.children,F=t.debounce,L=F===void 0?0:F,R=t.id,U=t.className,X=t.onResize,K=t.style,re=K===void 0?{}:K,W=it.useRef(null),J=it.useRef();J.current=X,it.useImperativeHandle(e,function(){return Object.defineProperty(W.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),W.current},configurable:!0})});var ie=it.useState({containerWidth:i.width,containerHeight:i.height}),he=V7(ie,2),ve=he[0],Re=he[1],de=it.useCallback(function(Le,Ge){Re(function(Ne){var Ue=Math.round(Le),Qe=Math.round(Ge);return Ne.containerWidth===Ue&&Ne.containerHeight===Qe?Ne:{containerWidth:Ue,containerHeight:Qe}})},[]);it.useEffect(function(){var Le=function(Ye){var nt,Se=Ye[0].contentRect,De=Se.width,ft=Se.height;de(De,ft),(nt=J.current)===null||nt===void 0||nt.call(J,De,ft)};L>0&&(Le=Xj(Le,L,{trailing:!0,leading:!1}));var Ge=new ResizeObserver(Le),Ne=W.current.getBoundingClientRect(),Ue=Ne.width,Qe=Ne.height;return de(Ue,Qe),Ge.observe(W.current),function(){Ge.disconnect()}},[de,L]);var Oe=it.useMemo(function(){var Le=ve.containerWidth,Ge=ve.containerHeight;if(Le<0||Ge<0)return null;Ac(id(u)||id(m),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,u,m),Ac(!r||r>0,"The aspect(%s) must be greater than zero.",r);var Ne=id(u)?Le:u,Ue=id(m)?Ge:m;r&&r>0&&(Ne?Ue=Ne/r:Ue&&(Ne=Ue*r),E&&Ue>E&&(Ue=E)),Ac(Ne>0||Ue>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Ne,Ue,u,m,w,S,r);var Qe=!Array.isArray(I)&&Pc(I.type).endsWith("Chart");return He.Children.map(I,function($e){return He.isValidElement($e)?it.cloneElement($e,o_({width:Ne,height:Ue},Qe?{style:o_({height:"100%",width:"100%",maxHeight:Ue,maxWidth:Ne},$e.props.style)}:{})):$e})},[r,I,m,E,S,w,ve,u]);return He.createElement("div",{id:R?"".concat(R):void 0,className:un("recharts-responsive-container",U),style:o_(o_({},re),{},{width:u,height:m,minWidth:w,minHeight:S,maxHeight:E}),ref:W},Oe)}),Kj=function(e){return null};Kj.displayName="Cell";function ny(t){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ny(t)}function jI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function sT(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jI(Object(r),!0).forEach(function(n){Z7(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Z7(t,e,r){return e=X7(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X7(t){var e=K7(t,"string");return ny(e)=="symbol"?e:e+""}function K7(t,e){if(ny(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ny(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cp={widthCache:{},cacheCount:0},Y7=2e3,J7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},BI="recharts_measurement_span";function Q7(t){var e=sT({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var $g=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Vy.isSsr)return{width:0,height:0};var n=Q7(r),i=JSON.stringify({text:e,copyStyle:n});if(Cp.widthCache[i])return Cp.widthCache[i];try{var l=document.getElementById(BI);l||(l=document.createElement("span"),l.setAttribute("id",BI),l.setAttribute("aria-hidden","true"),document.body.appendChild(l));var u=sT(sT({},J7),n);Object.assign(l.style,u),l.textContent="".concat(e);var s=l.getBoundingClientRect(),m={width:s.width,height:s.height};return Cp.widthCache[i]=m,++Cp.cacheCount>Y7&&(Cp.cacheCount=0,Cp.widthCache={}),m}catch{return{width:0,height:0}}},eG=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function iy(t){"@babel/helpers - typeof";return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iy(t)}function H_(t,e){return iG(t)||nG(t,e)||rG(t,e)||tG()}function tG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rG(t,e){if(t){if(typeof t=="string")return NI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NI(t,e)}}function NI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function iG(t){if(Array.isArray(t))return t}function aG(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sG(n.key),n)}}function oG(t,e,r){return e&&$I(t.prototype,e),r&&$I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sG(t){var e=lG(t,"string");return iy(e)=="symbol"?e:e+""}function lG(t,e){if(iy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(iy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var VI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Yj={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hG=Object.keys(Yj),zp="NaN";function fG(t,e){return t*Yj[e]}var s_=(function(){function t(e,r){aG(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!uG.test(r)&&(this.num=NaN,this.unit=""),hG.includes(r)&&(this.num=fG(e,r),this.unit="px")}return oG(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=cG.exec(r))!==null&&n!==void 0?n:[],l=H_(i,3),u=l[1],s=l[2];return new t(parseFloat(u),s??"")}}])})();function Jj(t){if(t.includes(zp))return zp;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=VI.exec(e))!==null&&r!==void 0?r:[],i=H_(n,4),l=i[1],u=i[2],s=i[3],m=s_.parse(l??""),y=s_.parse(s??""),w=u==="*"?m.multiply(y):m.divide(y);if(w.isNaN())return zp;e=e.replace(VI,w.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var S,E=(S=qI.exec(e))!==null&&S!==void 0?S:[],I=H_(E,4),F=I[1],L=I[2],R=I[3],U=s_.parse(F??""),X=s_.parse(R??""),K=L==="+"?U.add(X):U.subtract(X);if(K.isNaN())return zp;e=e.replace(qI,K.toString())}return e}var UI=/\(([^()]*)\)/;function dG(t){for(var e=t;e.includes("(");){var r=UI.exec(e),n=H_(r,2),i=n[1];e=e.replace(UI,Jj(i))}return e}function pG(t){var e=t.replace(/\s+/g,"");return e=dG(e),e=Jj(e),e}function mG(t){try{return pG(t)}catch{return zp}}function kS(t){var e=mG(t.slice(5,-1));return e===zp?"":e}var gG=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],yG=["dx","dy","angle","className","breakAll"];function lT(){return lT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},lT.apply(this,arguments)}function WI(t,e){if(t==null)return{};var r=vG(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vG(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function HI(t,e){return wG(t)||bG(t,e)||xG(t,e)||_G()}function _G(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xG(t,e){if(t){if(typeof t=="string")return GI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return GI(t,e)}}function GI(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bG(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;m=!1}else for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function wG(t){if(Array.isArray(t))return t}var Qj=/[ \f\n\r\t\v\u2028\u2029]+/,eB=function(e){var r=e.children,n=e.breakAll,i=e.style;try{var l=[];cn(r)||(n?l=r.toString().split(""):l=r.toString().split(Qj));var u=l.map(function(m){return{word:m,width:$g(m,i).width}}),s=n?0:$g(" ",i).width;return{wordsWithComputedWidth:u,spaceWidth:s}}catch{return null}},SG=function(e,r,n,i,l){var u=e.maxLines,s=e.children,m=e.style,y=e.breakAll,w=Dt(u),S=s,E=function(){var Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ne.reduce(function(Ue,Qe){var $e=Qe.word,Ye=Qe.width,nt=Ue[Ue.length-1];if(nt&&(i==null||l||nt.width+Ye+n<Number(i)))nt.words.push($e),nt.width+=Ye+n;else{var Se={words:[$e],width:Ye};Ue.push(Se)}return Ue},[])},I=E(r),F=function(Ne){return Ne.reduce(function(Ue,Qe){return Ue.width>Qe.width?Ue:Qe})};if(!w)return I;for(var L="…",R=function(Ne){var Ue=S.slice(0,Ne),Qe=eB({breakAll:y,style:m,children:Ue+L}).wordsWithComputedWidth,$e=E(Qe),Ye=$e.length>u||F($e).width>Number(i);return[Ye,$e]},U=0,X=S.length-1,K=0,re;U<=X&&K<=S.length-1;){var W=Math.floor((U+X)/2),J=W-1,ie=R(J),he=HI(ie,2),ve=he[0],Re=he[1],de=R(W),Oe=HI(de,1),Le=Oe[0];if(!ve&&!Le&&(U=W+1),ve&&Le&&(X=W-1),!ve&&Le){re=Re;break}K++}return re||I},ZI=function(e){var r=cn(e)?[]:e.toString().split(Qj);return[{words:r}]},TG=function(e){var r=e.width,n=e.scaleToFit,i=e.children,l=e.style,u=e.breakAll,s=e.maxLines;if((r||n)&&!Vy.isSsr){var m,y,w=eB({breakAll:u,children:i,style:l});if(w){var S=w.wordsWithComputedWidth,E=w.spaceWidth;m=S,y=E}else return ZI(i);return SG({breakAll:u,children:i,maxLines:s,style:l},m,y,r,n)}return ZI(i)},XI="#808080",G_=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,l=i===void 0?0:i,u=e.lineHeight,s=u===void 0?"1em":u,m=e.capHeight,y=m===void 0?"0.71em":m,w=e.scaleToFit,S=w===void 0?!1:w,E=e.textAnchor,I=E===void 0?"start":E,F=e.verticalAnchor,L=F===void 0?"end":F,R=e.fill,U=R===void 0?XI:R,X=WI(e,gG),K=it.useMemo(function(){return TG({breakAll:X.breakAll,children:X.children,maxLines:X.maxLines,scaleToFit:S,style:X.style,width:X.width})},[X.breakAll,X.children,X.maxLines,S,X.style,X.width]),re=X.dx,W=X.dy,J=X.angle,ie=X.className,he=X.breakAll,ve=WI(X,yG);if(!Ui(n)||!Ui(l))return null;var Re=n+(Dt(re)?re:0),de=l+(Dt(W)?W:0),Oe;switch(L){case"start":Oe=kS("calc(".concat(y,")"));break;case"middle":Oe=kS("calc(".concat((K.length-1)/2," * -").concat(s," + (").concat(y," / 2))"));break;default:Oe=kS("calc(".concat(K.length-1," * -").concat(s,")"));break}var Le=[];if(S){var Ge=K[0].width,Ne=X.width;Le.push("scale(".concat((Dt(Ne)?Ne/Ge:1)/Ge,")"))}return J&&Le.push("rotate(".concat(J,", ").concat(Re,", ").concat(de,")")),Le.length&&(ve.transform=Le.join(" ")),He.createElement("text",lT({},ln(ve,!0),{x:Re,y:de,className:un("recharts-text",ie),textAnchor:I,fill:U.includes("url")?XI:U}),K.map(function(Ue,Qe){var $e=Ue.words.join(he?"":" ");return He.createElement("tspan",{x:Re,dy:Qe===0?Oe:s,key:"".concat($e,"-").concat(Qe)},$e)}))};function Ch(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function PG(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JP(t){let e,r,n;t.length!==2?(e=Ch,r=(s,m)=>Ch(t(s),m),n=(s,m)=>t(s)-m):(e=t===Ch||t===PG?t:AG,r=t,n=t);function i(s,m,y=0,w=s.length){if(y<w){if(e(m,m)!==0)return w;do{const S=y+w>>>1;r(s[S],m)<0?y=S+1:w=S}while(y<w)}return y}function l(s,m,y=0,w=s.length){if(y<w){if(e(m,m)!==0)return w;do{const S=y+w>>>1;r(s[S],m)<=0?y=S+1:w=S}while(y<w)}return y}function u(s,m,y=0,w=s.length){const S=i(s,m,y,w-1);return S>y&&n(s[S-1],m)>-n(s[S],m)?S-1:S}return{left:i,center:u,right:l}}function AG(){return 0}function tB(t){return t===null?NaN:+t}function*kG(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const EG=JP(Ch),qy=EG.right;JP(tB).center;class KI extends Map{constructor(e,r=OG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,i]of e)this.set(n,i)}get(e){return super.get(YI(this,e))}has(e){return super.has(YI(this,e))}set(e,r){return super.set(MG(this,e),r)}delete(e){return super.delete(CG(this,e))}}function YI({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function MG({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function CG({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function OG(t){return t!==null&&typeof t=="object"?t.valueOf():t}function IG(t=Ch){if(t===Ch)return rB;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function rB(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const DG=Math.sqrt(50),zG=Math.sqrt(10),RG=Math.sqrt(2);function Z_(t,e,r){const n=(e-t)/Math.max(0,r),i=Math.floor(Math.log10(n)),l=n/Math.pow(10,i),u=l>=DG?10:l>=zG?5:l>=RG?2:1;let s,m,y;return i<0?(y=Math.pow(10,-i)/u,s=Math.round(t*y),m=Math.round(e*y),s/y<t&&++s,m/y>e&&--m,y=-y):(y=Math.pow(10,i)*u,s=Math.round(t/y),m=Math.round(e/y),s*y<t&&++s,m*y>e&&--m),m<s&&.5<=r&&r<2?Z_(t,e,r*2):[s,m,y]}function uT(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[i,l,u]=n?Z_(e,t,r):Z_(t,e,r);if(!(l>=i))return[];const s=l-i+1,m=new Array(s);if(n)if(u<0)for(let y=0;y<s;++y)m[y]=(l-y)/-u;else for(let y=0;y<s;++y)m[y]=(l-y)*u;else if(u<0)for(let y=0;y<s;++y)m[y]=(i+y)/-u;else for(let y=0;y<s;++y)m[y]=(i+y)*u;return m}function cT(t,e,r){return e=+e,t=+t,r=+r,Z_(t,e,r)[2]}function hT(t,e,r){e=+e,t=+t,r=+r;const n=e<t,i=n?cT(e,t,r):cT(t,e,r);return(n?-1:1)*(i<0?1/-i:i)}function JI(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function QI(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function nB(t,e,r=0,n=1/0,i){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(i=i===void 0?rB:IG(i);n>r;){if(n-r>600){const m=n-r+1,y=e-r+1,w=Math.log(m),S=.5*Math.exp(2*w/3),E=.5*Math.sqrt(w*S*(m-S)/m)*(y-m/2<0?-1:1),I=Math.max(r,Math.floor(e-y*S/m+E)),F=Math.min(n,Math.floor(e+(m-y)*S/m+E));nB(t,e,I,F,i)}const l=t[e];let u=r,s=n;for(vg(t,r,e),i(t[n],l)>0&&vg(t,r,n);u<s;){for(vg(t,u,s),++u,--s;i(t[u],l)<0;)++u;for(;i(t[s],l)>0;)--s}i(t[r],l)===0?vg(t,r,s):(++s,vg(t,s,n)),s<=e&&(r=s+1),e<=s&&(n=s-1)}return t}function vg(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function LG(t,e,r){if(t=Float64Array.from(kG(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return QI(t);if(e>=1)return JI(t);var n,i=(n-1)*e,l=Math.floor(i),u=JI(nB(t,l).subarray(0,l+1)),s=QI(t.subarray(l+1));return u+(s-u)*(i-l)}}function FG(t,e,r=tB){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,i=(n-1)*e,l=Math.floor(i),u=+r(t[l],l,t),s=+r(t[l+1],l+1,t);return u+(s-u)*(i-l)}}function jG(t,e,r){t=+t,e=+e,r=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((e-t)/r))|0,l=new Array(i);++n<i;)l[n]=t+n*r;return l}function Js(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Rc(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const fT=Symbol("implicit");function QP(){var t=new KI,e=[],r=[],n=fT;function i(l){let u=t.get(l);if(u===void 0){if(n!==fT)return n;t.set(l,u=e.push(l)-1)}return r[u%r.length]}return i.domain=function(l){if(!arguments.length)return e.slice();e=[],t=new KI;for(const u of l)t.has(u)||t.set(u,e.push(u)-1);return i},i.range=function(l){return arguments.length?(r=Array.from(l),i):r.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return QP(e,r).unknown(n)},Js.apply(i,arguments),i}function ay(){var t=QP().unknown(void 0),e=t.domain,r=t.range,n=0,i=1,l,u,s=!1,m=0,y=0,w=.5;delete t.unknown;function S(){var E=e().length,I=i<n,F=I?i:n,L=I?n:i;l=(L-F)/Math.max(1,E-m+y*2),s&&(l=Math.floor(l)),F+=(L-F-l*(E-m))*w,u=l*(1-m),s&&(F=Math.round(F),u=Math.round(u));var R=jG(E).map(function(U){return F+l*U});return r(I?R.reverse():R)}return t.domain=function(E){return arguments.length?(e(E),S()):e()},t.range=function(E){return arguments.length?([n,i]=E,n=+n,i=+i,S()):[n,i]},t.rangeRound=function(E){return[n,i]=E,n=+n,i=+i,s=!0,S()},t.bandwidth=function(){return u},t.step=function(){return l},t.round=function(E){return arguments.length?(s=!!E,S()):s},t.padding=function(E){return arguments.length?(m=Math.min(1,y=+E),S()):m},t.paddingInner=function(E){return arguments.length?(m=Math.min(1,E),S()):m},t.paddingOuter=function(E){return arguments.length?(y=+E,S()):y},t.align=function(E){return arguments.length?(w=Math.max(0,Math.min(1,E)),S()):w},t.copy=function(){return ay(e(),[n,i]).round(s).paddingInner(m).paddingOuter(y).align(w)},Js.apply(S(),arguments)}function iB(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return iB(e())},t}function Vg(){return iB(ay.apply(null,arguments).paddingInner(1))}function eA(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function aB(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Uy(){}var oy=.7,X_=1/oy,$p="\\s*([+-]?\\d+)\\s*",sy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BG=/^#([0-9a-f]{3,8})$/,NG=new RegExp(`^rgb\\(${$p},${$p},${$p}\\)$`),$G=new RegExp(`^rgb\\(${ku},${ku},${ku}\\)$`),VG=new RegExp(`^rgba\\(${$p},${$p},${$p},${sy}\\)$`),qG=new RegExp(`^rgba\\(${ku},${ku},${ku},${sy}\\)$`),UG=new RegExp(`^hsl\\(${sy},${ku},${ku}\\)$`),WG=new RegExp(`^hsla\\(${sy},${ku},${ku},${sy}\\)$`),eD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eA(Uy,ly,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tD,formatHex:tD,formatHex8:HG,formatHsl:GG,formatRgb:rD,toString:rD});function tD(){return this.rgb().formatHex()}function HG(){return this.rgb().formatHex8()}function GG(){return oB(this).formatHsl()}function rD(){return this.rgb().formatRgb()}function ly(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=BG.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?nD(e):r===3?new qo(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?l_(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?l_(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=NG.exec(t))?new qo(e[1],e[2],e[3],1):(e=$G.exec(t))?new qo(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=VG.exec(t))?l_(e[1],e[2],e[3],e[4]):(e=qG.exec(t))?l_(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=UG.exec(t))?oD(e[1],e[2]/100,e[3]/100,1):(e=WG.exec(t))?oD(e[1],e[2]/100,e[3]/100,e[4]):eD.hasOwnProperty(t)?nD(eD[t]):t==="transparent"?new qo(NaN,NaN,NaN,0):null}function nD(t){return new qo(t>>16&255,t>>8&255,t&255,1)}function l_(t,e,r,n){return n<=0&&(t=e=r=NaN),new qo(t,e,r,n)}function ZG(t){return t instanceof Uy||(t=ly(t)),t?(t=t.rgb(),new qo(t.r,t.g,t.b,t.opacity)):new qo}function dT(t,e,r,n){return arguments.length===1?ZG(t):new qo(t,e,r,n??1)}function qo(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}eA(qo,dT,aB(Uy,{brighter(t){return t=t==null?X_:Math.pow(X_,t),new qo(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?oy:Math.pow(oy,t),new qo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new qo(hd(this.r),hd(this.g),hd(this.b),K_(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iD,formatHex:iD,formatHex8:XG,formatRgb:aD,toString:aD}));function iD(){return`#${ad(this.r)}${ad(this.g)}${ad(this.b)}`}function XG(){return`#${ad(this.r)}${ad(this.g)}${ad(this.b)}${ad((isNaN(this.opacity)?1:this.opacity)*255)}`}function aD(){const t=K_(this.opacity);return`${t===1?"rgb(":"rgba("}${hd(this.r)}, ${hd(this.g)}, ${hd(this.b)}${t===1?")":`, ${t})`}`}function K_(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function hd(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ad(t){return t=hd(t),(t<16?"0":"")+t.toString(16)}function oD(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new El(t,e,r,n)}function oB(t){if(t instanceof El)return new El(t.h,t.s,t.l,t.opacity);if(t instanceof Uy||(t=ly(t)),!t)return new El;if(t instanceof El)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),l=Math.max(e,r,n),u=NaN,s=l-i,m=(l+i)/2;return s?(e===l?u=(r-n)/s+(r<n)*6:r===l?u=(n-e)/s+2:u=(e-r)/s+4,s/=m<.5?l+i:2-l-i,u*=60):s=m>0&&m<1?0:u,new El(u,s,m,t.opacity)}function KG(t,e,r,n){return arguments.length===1?oB(t):new El(t,e,r,n??1)}function El(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}eA(El,KG,aB(Uy,{brighter(t){return t=t==null?X_:Math.pow(X_,t),new El(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?oy:Math.pow(oy,t),new El(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new qo(ES(t>=240?t-240:t+120,i,n),ES(t,i,n),ES(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new El(sD(this.h),u_(this.s),u_(this.l),K_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=K_(this.opacity);return`${t===1?"hsl(":"hsla("}${sD(this.h)}, ${u_(this.s)*100}%, ${u_(this.l)*100}%${t===1?")":`, ${t})`}`}}));function sD(t){return t=(t||0)%360,t<0?t+360:t}function u_(t){return Math.max(0,Math.min(1,t||0))}function ES(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const tA=t=>()=>t;function YG(t,e){return function(r){return t+r*e}}function JG(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function QG(t){return(t=+t)==1?sB:function(e,r){return r-e?JG(e,r,t):tA(isNaN(e)?r:e)}}function sB(t,e){var r=e-t;return r?YG(t,r):tA(isNaN(t)?e:t)}const lD=(function t(e){var r=QG(e);function n(i,l){var u=r((i=dT(i)).r,(l=dT(l)).r),s=r(i.g,l.g),m=r(i.b,l.b),y=sB(i.opacity,l.opacity);return function(w){return i.r=u(w),i.g=s(w),i.b=m(w),i.opacity=y(w),i+""}}return n.gamma=t,n})(1);function eZ(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),i;return function(l){for(i=0;i<r;++i)n[i]=t[i]*(1-l)+e[i]*l;return n}}function tZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rZ(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,i=new Array(n),l=new Array(r),u;for(u=0;u<n;++u)i[u]=bm(t[u],e[u]);for(;u<r;++u)l[u]=e[u];return function(s){for(u=0;u<n;++u)l[u]=i[u](s);return l}}function nZ(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Y_(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function iZ(t,e){var r={},n={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?r[i]=bm(t[i],e[i]):n[i]=e[i];return function(l){for(i in r)n[i]=r[i](l);return n}}var pT=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,MS=new RegExp(pT.source,"g");function aZ(t){return function(){return t}}function oZ(t){return function(e){return t(e)+""}}function sZ(t,e){var r=pT.lastIndex=MS.lastIndex=0,n,i,l,u=-1,s=[],m=[];for(t=t+"",e=e+"";(n=pT.exec(t))&&(i=MS.exec(e));)(l=i.index)>r&&(l=e.slice(r,l),s[u]?s[u]+=l:s[++u]=l),(n=n[0])===(i=i[0])?s[u]?s[u]+=i:s[++u]=i:(s[++u]=null,m.push({i:u,x:Y_(n,i)})),r=MS.lastIndex;return r<e.length&&(l=e.slice(r),s[u]?s[u]+=l:s[++u]=l),s.length<2?m[0]?oZ(m[0].x):aZ(e):(e=m.length,function(y){for(var w=0,S;w<e;++w)s[(S=m[w]).i]=S.x(y);return s.join("")})}function bm(t,e){var r=typeof e,n;return e==null||r==="boolean"?tA(e):(r==="number"?Y_:r==="string"?(n=ly(e))?(e=n,lD):sZ:e instanceof ly?lD:e instanceof Date?nZ:tZ(e)?eZ:Array.isArray(e)?rZ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?iZ:Y_)(t,e)}function rA(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function lZ(t,e){e===void 0&&(e=t,t=bm);for(var r=0,n=e.length-1,i=e[0],l=new Array(n<0?0:n);r<n;)l[r]=t(i,i=e[++r]);return function(u){var s=Math.max(0,Math.min(n-1,Math.floor(u*=n)));return l[s](u-s)}}function uZ(t){return function(){return t}}function J_(t){return+t}var uD=[0,1];function ko(t){return t}function mT(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:uZ(isNaN(e)?NaN:.5)}function cZ(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function hZ(t,e,r){var n=t[0],i=t[1],l=e[0],u=e[1];return i<n?(n=mT(i,n),l=r(u,l)):(n=mT(n,i),l=r(l,u)),function(s){return l(n(s))}}function fZ(t,e,r){var n=Math.min(t.length,e.length)-1,i=new Array(n),l=new Array(n),u=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<n;)i[u]=mT(t[u],t[u+1]),l[u]=r(e[u],e[u+1]);return function(s){var m=qy(t,s,1,n)-1;return l[m](i[m](s))}}function Wy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function rx(){var t=uD,e=uD,r=bm,n,i,l,u=ko,s,m,y;function w(){var E=Math.min(t.length,e.length);return u!==ko&&(u=cZ(t[0],t[E-1])),s=E>2?fZ:hZ,m=y=null,S}function S(E){return E==null||isNaN(E=+E)?l:(m||(m=s(t.map(n),e,r)))(n(u(E)))}return S.invert=function(E){return u(i((y||(y=s(e,t.map(n),Y_)))(E)))},S.domain=function(E){return arguments.length?(t=Array.from(E,J_),w()):t.slice()},S.range=function(E){return arguments.length?(e=Array.from(E),w()):e.slice()},S.rangeRound=function(E){return e=Array.from(E),r=rA,w()},S.clamp=function(E){return arguments.length?(u=E?!0:ko,w()):u!==ko},S.interpolate=function(E){return arguments.length?(r=E,w()):r},S.unknown=function(E){return arguments.length?(l=E,S):l},function(E,I){return n=E,i=I,w()}}function nA(){return rx()(ko,ko)}function dZ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Q_(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Jp(t){return t=Q_(Math.abs(t)),t?t[1]:NaN}function pZ(t,e){return function(r,n){for(var i=r.length,l=[],u=0,s=t[0],m=0;i>0&&s>0&&(m+s+1>n&&(s=Math.max(1,n-m)),l.push(r.substring(i-=s,i+s)),!((m+=s+1)>n));)s=t[u=(u+1)%t.length];return l.reverse().join(e)}}function mZ(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var gZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uy(t){if(!(e=gZ.exec(t)))throw new Error("invalid format: "+t);var e;return new iA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}uy.prototype=iA.prototype;function iA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yZ(t){e:for(var e=t.length,r=1,n=-1,i;r<e;++r)switch(t[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(i+1):t}var lB;function vZ(t,e){var r=Q_(t,e);if(!r)return t+"";var n=r[0],i=r[1],l=i-(lB=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,u=n.length;return l===u?n:l>u?n+new Array(l-u+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Q_(t,Math.max(0,e+l-1))[0]}function cD(t,e){var r=Q_(t,e);if(!r)return t+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const hD={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:dZ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>cD(t*100,e),r:cD,s:vZ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function fD(t){return t}var dD=Array.prototype.map,pD=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function _Z(t){var e=t.grouping===void 0||t.thousands===void 0?fD:pZ(dD.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?fD:mZ(dD.call(t.numerals,String)),u=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",m=t.nan===void 0?"NaN":t.nan+"";function y(S){S=uy(S);var E=S.fill,I=S.align,F=S.sign,L=S.symbol,R=S.zero,U=S.width,X=S.comma,K=S.precision,re=S.trim,W=S.type;W==="n"?(X=!0,W="g"):hD[W]||(K===void 0&&(K=12),re=!0,W="g"),(R||E==="0"&&I==="=")&&(R=!0,E="0",I="=");var J=L==="$"?r:L==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",ie=L==="$"?n:/[%p]/.test(W)?u:"",he=hD[W],ve=/[defgprs%]/.test(W);K=K===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function Re(de){var Oe=J,Le=ie,Ge,Ne,Ue;if(W==="c")Le=he(de)+Le,de="";else{de=+de;var Qe=de<0||1/de<0;if(de=isNaN(de)?m:he(Math.abs(de),K),re&&(de=yZ(de)),Qe&&+de==0&&F!=="+"&&(Qe=!1),Oe=(Qe?F==="("?F:s:F==="-"||F==="("?"":F)+Oe,Le=(W==="s"?pD[8+lB/3]:"")+Le+(Qe&&F==="("?")":""),ve){for(Ge=-1,Ne=de.length;++Ge<Ne;)if(Ue=de.charCodeAt(Ge),48>Ue||Ue>57){Le=(Ue===46?i+de.slice(Ge+1):de.slice(Ge))+Le,de=de.slice(0,Ge);break}}}X&&!R&&(de=e(de,1/0));var $e=Oe.length+de.length+Le.length,Ye=$e<U?new Array(U-$e+1).join(E):"";switch(X&&R&&(de=e(Ye+de,Ye.length?U-Le.length:1/0),Ye=""),I){case"<":de=Oe+de+Le+Ye;break;case"=":de=Oe+Ye+de+Le;break;case"^":de=Ye.slice(0,$e=Ye.length>>1)+Oe+de+Le+Ye.slice($e);break;default:de=Ye+Oe+de+Le;break}return l(de)}return Re.toString=function(){return S+""},Re}function w(S,E){var I=y((S=uy(S),S.type="f",S)),F=Math.max(-8,Math.min(8,Math.floor(Jp(E)/3)))*3,L=Math.pow(10,-F),R=pD[8+F/3];return function(U){return I(L*U)+R}}return{format:y,formatPrefix:w}}var c_,aA,uB;xZ({thousands:",",grouping:[3],currency:["$",""]});function xZ(t){return c_=_Z(t),aA=c_.format,uB=c_.formatPrefix,c_}function bZ(t){return Math.max(0,-Jp(Math.abs(t)))}function wZ(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jp(e)/3)))*3-Jp(Math.abs(t)))}function SZ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jp(e)-Jp(t))+1}function cB(t,e,r,n){var i=hT(t,e,r),l;switch(n=uy(n??",f"),n.type){case"s":{var u=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(l=wZ(i,u))&&(n.precision=l),uB(n,u)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=SZ(i,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=bZ(i))&&(n.precision=l-(n.type==="%")*2);break}}return aA(n)}function jh(t){var e=t.domain;return t.ticks=function(r){var n=e();return uT(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var i=e();return cB(i[0],i[i.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),i=0,l=n.length-1,u=n[i],s=n[l],m,y,w=10;for(s<u&&(y=u,u=s,s=y,y=i,i=l,l=y);w-- >0;){if(y=cT(u,s,r),y===m)return n[i]=u,n[l]=s,e(n);if(y>0)u=Math.floor(u/y)*y,s=Math.ceil(s/y)*y;else if(y<0)u=Math.ceil(u*y)/y,s=Math.floor(s*y)/y;else break;m=y}return t},t}function e0(){var t=nA();return t.copy=function(){return Wy(t,e0())},Js.apply(t,arguments),jh(t)}function hB(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,J_),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return hB(t).unknown(e)},t=arguments.length?Array.from(t,J_):[0,1],jh(r)}function fB(t,e){t=t.slice();var r=0,n=t.length-1,i=t[r],l=t[n],u;return l<i&&(u=r,r=n,n=u,u=i,i=l,l=u),t[r]=e.floor(i),t[n]=e.ceil(l),t}function mD(t){return Math.log(t)}function gD(t){return Math.exp(t)}function TZ(t){return-Math.log(-t)}function PZ(t){return-Math.exp(-t)}function AZ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function kZ(t){return t===10?AZ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function EZ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function yD(t){return(e,r)=>-t(-e,r)}function oA(t){const e=t(mD,gD),r=e.domain;let n=10,i,l;function u(){return i=EZ(n),l=kZ(n),r()[0]<0?(i=yD(i),l=yD(l),t(TZ,PZ)):t(mD,gD),e}return e.base=function(s){return arguments.length?(n=+s,u()):n},e.domain=function(s){return arguments.length?(r(s),u()):r()},e.ticks=s=>{const m=r();let y=m[0],w=m[m.length-1];const S=w<y;S&&([y,w]=[w,y]);let E=i(y),I=i(w),F,L;const R=s==null?10:+s;let U=[];if(!(n%1)&&I-E<R){if(E=Math.floor(E),I=Math.ceil(I),y>0){for(;E<=I;++E)for(F=1;F<n;++F)if(L=E<0?F/l(-E):F*l(E),!(L<y)){if(L>w)break;U.push(L)}}else for(;E<=I;++E)for(F=n-1;F>=1;--F)if(L=E>0?F/l(-E):F*l(E),!(L<y)){if(L>w)break;U.push(L)}U.length*2<R&&(U=uT(y,w,R))}else U=uT(E,I,Math.min(I-E,R)).map(l);return S?U.reverse():U},e.tickFormat=(s,m)=>{if(s==null&&(s=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=uy(m)).precision==null&&(m.trim=!0),m=aA(m)),s===1/0)return m;const y=Math.max(1,n*s/e.ticks().length);return w=>{let S=w/l(Math.round(i(w)));return S*n<n-.5&&(S*=n),S<=y?m(w):""}},e.nice=()=>r(fB(r(),{floor:s=>l(Math.floor(i(s))),ceil:s=>l(Math.ceil(i(s)))})),e}function dB(){const t=oA(rx()).domain([1,10]);return t.copy=()=>Wy(t,dB()).base(t.base()),Js.apply(t,arguments),t}function vD(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function _D(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function sA(t){var e=1,r=t(vD(e),_D(e));return r.constant=function(n){return arguments.length?t(vD(e=+n),_D(e)):e},jh(r)}function pB(){var t=sA(rx());return t.copy=function(){return Wy(t,pB()).constant(t.constant())},Js.apply(t,arguments)}function xD(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function MZ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function CZ(t){return t<0?-t*t:t*t}function lA(t){var e=t(ko,ko),r=1;function n(){return r===1?t(ko,ko):r===.5?t(MZ,CZ):t(xD(r),xD(1/r))}return e.exponent=function(i){return arguments.length?(r=+i,n()):r},jh(e)}function uA(){var t=lA(rx());return t.copy=function(){return Wy(t,uA()).exponent(t.exponent())},Js.apply(t,arguments),t}function OZ(){return uA.apply(null,arguments).exponent(.5)}function bD(t){return Math.sign(t)*t*t}function IZ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function mB(){var t=nA(),e=[0,1],r=!1,n;function i(l){var u=IZ(t(l));return isNaN(u)?n:r?Math.round(u):u}return i.invert=function(l){return t.invert(bD(l))},i.domain=function(l){return arguments.length?(t.domain(l),i):t.domain()},i.range=function(l){return arguments.length?(t.range((e=Array.from(l,J_)).map(bD)),i):e.slice()},i.rangeRound=function(l){return i.range(l).round(!0)},i.round=function(l){return arguments.length?(r=!!l,i):r},i.clamp=function(l){return arguments.length?(t.clamp(l),i):t.clamp()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.copy=function(){return mB(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Js.apply(i,arguments),jh(i)}function gB(){var t=[],e=[],r=[],n;function i(){var u=0,s=Math.max(1,e.length);for(r=new Array(s-1);++u<s;)r[u-1]=FG(t,u/s);return l}function l(u){return u==null||isNaN(u=+u)?n:e[qy(r,u)]}return l.invertExtent=function(u){var s=e.indexOf(u);return s<0?[NaN,NaN]:[s>0?r[s-1]:t[0],s<r.length?r[s]:t[t.length-1]]},l.domain=function(u){if(!arguments.length)return t.slice();t=[];for(let s of u)s!=null&&!isNaN(s=+s)&&t.push(s);return t.sort(Ch),i()},l.range=function(u){return arguments.length?(e=Array.from(u),i()):e.slice()},l.unknown=function(u){return arguments.length?(n=u,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return gB().domain(t).range(e).unknown(n)},Js.apply(l,arguments)}function yB(){var t=0,e=1,r=1,n=[.5],i=[0,1],l;function u(m){return m!=null&&m<=m?i[qy(n,m,0,r)]:l}function s(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*e-(m-r)*t)/(r+1);return u}return u.domain=function(m){return arguments.length?([t,e]=m,t=+t,e=+e,s()):[t,e]},u.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,s()):i.slice()},u.invertExtent=function(m){var y=i.indexOf(m);return y<0?[NaN,NaN]:y<1?[t,n[0]]:y>=r?[n[r-1],e]:[n[y-1],n[y]]},u.unknown=function(m){return arguments.length&&(l=m),u},u.thresholds=function(){return n.slice()},u.copy=function(){return yB().domain([t,e]).range(i).unknown(l)},Js.apply(jh(u),arguments)}function vB(){var t=[.5],e=[0,1],r,n=1;function i(l){return l!=null&&l<=l?e[qy(t,l,0,n)]:r}return i.domain=function(l){return arguments.length?(t=Array.from(l),n=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(l){return arguments.length?(e=Array.from(l),n=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(l){var u=e.indexOf(l);return[t[u-1],t[u]]},i.unknown=function(l){return arguments.length?(r=l,i):r},i.copy=function(){return vB().domain(t).range(e).unknown(r)},Js.apply(i,arguments)}const CS=new Date,OS=new Date;function Wi(t,e,r,n){function i(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return i.floor=l=>(t(l=new Date(+l)),l),i.ceil=l=>(t(l=new Date(l-1)),e(l,1),t(l),l),i.round=l=>{const u=i(l),s=i.ceil(l);return l-u<s-l?u:s},i.offset=(l,u)=>(e(l=new Date(+l),u==null?1:Math.floor(u)),l),i.range=(l,u,s)=>{const m=[];if(l=i.ceil(l),s=s==null?1:Math.floor(s),!(l<u)||!(s>0))return m;let y;do m.push(y=new Date(+l)),e(l,s),t(l);while(y<l&&l<u);return m},i.filter=l=>Wi(u=>{if(u>=u)for(;t(u),!l(u);)u.setTime(u-1)},(u,s)=>{if(u>=u)if(s<0)for(;++s<=0;)for(;e(u,-1),!l(u););else for(;--s>=0;)for(;e(u,1),!l(u););}),r&&(i.count=(l,u)=>(CS.setTime(+l),OS.setTime(+u),t(CS),t(OS),Math.floor(r(CS,OS))),i.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?i.filter(n?u=>n(u)%l===0:u=>i.count(0,u)%l===0):i)),i}const t0=Wi(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);t0.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Wi(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):t0);t0.range;const wc=1e3,Xs=wc*60,Sc=Xs*60,Mc=Sc*24,cA=Mc*7,wD=Mc*30,IS=Mc*365,od=Wi(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*wc)},(t,e)=>(e-t)/wc,t=>t.getUTCSeconds());od.range;const hA=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wc)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getMinutes());hA.range;const fA=Wi(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Xs)},(t,e)=>(e-t)/Xs,t=>t.getUTCMinutes());fA.range;const dA=Wi(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*wc-t.getMinutes()*Xs)},(t,e)=>{t.setTime(+t+e*Sc)},(t,e)=>(e-t)/Sc,t=>t.getHours());dA.range;const pA=Wi(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Sc)},(t,e)=>(e-t)/Sc,t=>t.getUTCHours());pA.range;const Hy=Wi(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Xs)/Mc,t=>t.getDate()-1);Hy.range;const nx=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Mc,t=>t.getUTCDate()-1);nx.range;const _B=Wi(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Mc,t=>Math.floor(t/Mc));_B.range;function Td(t){return Wi(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*Xs)/cA)}const ix=Td(0),r0=Td(1),DZ=Td(2),zZ=Td(3),Qp=Td(4),RZ=Td(5),LZ=Td(6);ix.range;r0.range;DZ.range;zZ.range;Qp.range;RZ.range;LZ.range;function Pd(t){return Wi(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/cA)}const ax=Pd(0),n0=Pd(1),FZ=Pd(2),jZ=Pd(3),em=Pd(4),BZ=Pd(5),NZ=Pd(6);ax.range;n0.range;FZ.range;jZ.range;em.range;BZ.range;NZ.range;const mA=Wi(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mA.range;const gA=Wi(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gA.range;const Cc=Wi(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Cc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});Cc.range;const Oc=Wi(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Oc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Wi(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Oc.range;function xB(t,e,r,n,i,l){const u=[[od,1,wc],[od,5,5*wc],[od,15,15*wc],[od,30,30*wc],[l,1,Xs],[l,5,5*Xs],[l,15,15*Xs],[l,30,30*Xs],[i,1,Sc],[i,3,3*Sc],[i,6,6*Sc],[i,12,12*Sc],[n,1,Mc],[n,2,2*Mc],[r,1,cA],[e,1,wD],[e,3,3*wD],[t,1,IS]];function s(y,w,S){const E=w<y;E&&([y,w]=[w,y]);const I=S&&typeof S.range=="function"?S:m(y,w,S),F=I?I.range(y,+w+1):[];return E?F.reverse():F}function m(y,w,S){const E=Math.abs(w-y)/S,I=JP(([,,R])=>R).right(u,E);if(I===u.length)return t.every(hT(y/IS,w/IS,S));if(I===0)return t0.every(Math.max(hT(y,w,S),1));const[F,L]=u[E/u[I-1][2]<u[I][2]/E?I-1:I];return F.every(L)}return[s,m]}const[$Z,VZ]=xB(Oc,gA,ax,_B,pA,fA),[qZ,UZ]=xB(Cc,mA,ix,Hy,dA,hA);function DS(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function zS(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function _g(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function WZ(t){var e=t.dateTime,r=t.date,n=t.time,i=t.periods,l=t.days,u=t.shortDays,s=t.months,m=t.shortMonths,y=xg(i),w=bg(i),S=xg(l),E=bg(l),I=xg(u),F=bg(u),L=xg(s),R=bg(s),U=xg(m),X=bg(m),K={a:Qe,A:$e,b:Ye,B:nt,c:null,d:ED,e:ED,f:pX,g:TX,G:AX,H:hX,I:fX,j:dX,L:bB,m:mX,M:gX,p:Se,q:De,Q:OD,s:ID,S:yX,u:vX,U:_X,V:xX,w:bX,W:wX,x:null,X:null,y:SX,Y:PX,Z:kX,"%":CD},re={a:ft,A:At,b:jt,B:Nt,c:null,d:MD,e:MD,f:OX,g:$X,G:qX,H:EX,I:MX,j:CX,L:SB,m:IX,M:DX,p:or,q:er,Q:OD,s:ID,S:zX,u:RX,U:LX,V:FX,w:jX,W:BX,x:null,X:null,y:NX,Y:VX,Z:UX,"%":CD},W={a:Re,A:de,b:Oe,B:Le,c:Ge,d:AD,e:AD,f:sX,g:PD,G:TD,H:kD,I:kD,j:nX,L:oX,m:rX,M:iX,p:ve,q:tX,Q:uX,s:cX,S:aX,u:KZ,U:YZ,V:JZ,w:XZ,W:QZ,x:Ne,X:Ue,y:PD,Y:TD,Z:eX,"%":lX};K.x=J(r,K),K.X=J(n,K),K.c=J(e,K),re.x=J(r,re),re.X=J(n,re),re.c=J(e,re);function J(ct,Ht){return function(lr){var Je=[],rr=-1,Bt=0,Er=ct.length,Ve,Gr,Oi;for(lr instanceof Date||(lr=new Date(+lr));++rr<Er;)ct.charCodeAt(rr)===37&&(Je.push(ct.slice(Bt,rr)),(Gr=SD[Ve=ct.charAt(++rr)])!=null?Ve=ct.charAt(++rr):Gr=Ve==="e"?" ":"0",(Oi=Ht[Ve])&&(Ve=Oi(lr,Gr)),Je.push(Ve),Bt=rr+1);return Je.push(ct.slice(Bt,rr)),Je.join("")}}function ie(ct,Ht){return function(lr){var Je=_g(1900,void 0,1),rr=he(Je,ct,lr+="",0),Bt,Er;if(rr!=lr.length)return null;if("Q"in Je)return new Date(Je.Q);if("s"in Je)return new Date(Je.s*1e3+("L"in Je?Je.L:0));if(Ht&&!("Z"in Je)&&(Je.Z=0),"p"in Je&&(Je.H=Je.H%12+Je.p*12),Je.m===void 0&&(Je.m="q"in Je?Je.q:0),"V"in Je){if(Je.V<1||Je.V>53)return null;"w"in Je||(Je.w=1),"Z"in Je?(Bt=zS(_g(Je.y,0,1)),Er=Bt.getUTCDay(),Bt=Er>4||Er===0?n0.ceil(Bt):n0(Bt),Bt=nx.offset(Bt,(Je.V-1)*7),Je.y=Bt.getUTCFullYear(),Je.m=Bt.getUTCMonth(),Je.d=Bt.getUTCDate()+(Je.w+6)%7):(Bt=DS(_g(Je.y,0,1)),Er=Bt.getDay(),Bt=Er>4||Er===0?r0.ceil(Bt):r0(Bt),Bt=Hy.offset(Bt,(Je.V-1)*7),Je.y=Bt.getFullYear(),Je.m=Bt.getMonth(),Je.d=Bt.getDate()+(Je.w+6)%7)}else("W"in Je||"U"in Je)&&("w"in Je||(Je.w="u"in Je?Je.u%7:"W"in Je?1:0),Er="Z"in Je?zS(_g(Je.y,0,1)).getUTCDay():DS(_g(Je.y,0,1)).getDay(),Je.m=0,Je.d="W"in Je?(Je.w+6)%7+Je.W*7-(Er+5)%7:Je.w+Je.U*7-(Er+6)%7);return"Z"in Je?(Je.H+=Je.Z/100|0,Je.M+=Je.Z%100,zS(Je)):DS(Je)}}function he(ct,Ht,lr,Je){for(var rr=0,Bt=Ht.length,Er=lr.length,Ve,Gr;rr<Bt;){if(Je>=Er)return-1;if(Ve=Ht.charCodeAt(rr++),Ve===37){if(Ve=Ht.charAt(rr++),Gr=W[Ve in SD?Ht.charAt(rr++):Ve],!Gr||(Je=Gr(ct,lr,Je))<0)return-1}else if(Ve!=lr.charCodeAt(Je++))return-1}return Je}function ve(ct,Ht,lr){var Je=y.exec(Ht.slice(lr));return Je?(ct.p=w.get(Je[0].toLowerCase()),lr+Je[0].length):-1}function Re(ct,Ht,lr){var Je=I.exec(Ht.slice(lr));return Je?(ct.w=F.get(Je[0].toLowerCase()),lr+Je[0].length):-1}function de(ct,Ht,lr){var Je=S.exec(Ht.slice(lr));return Je?(ct.w=E.get(Je[0].toLowerCase()),lr+Je[0].length):-1}function Oe(ct,Ht,lr){var Je=U.exec(Ht.slice(lr));return Je?(ct.m=X.get(Je[0].toLowerCase()),lr+Je[0].length):-1}function Le(ct,Ht,lr){var Je=L.exec(Ht.slice(lr));return Je?(ct.m=R.get(Je[0].toLowerCase()),lr+Je[0].length):-1}function Ge(ct,Ht,lr){return he(ct,e,Ht,lr)}function Ne(ct,Ht,lr){return he(ct,r,Ht,lr)}function Ue(ct,Ht,lr){return he(ct,n,Ht,lr)}function Qe(ct){return u[ct.getDay()]}function $e(ct){return l[ct.getDay()]}function Ye(ct){return m[ct.getMonth()]}function nt(ct){return s[ct.getMonth()]}function Se(ct){return i[+(ct.getHours()>=12)]}function De(ct){return 1+~~(ct.getMonth()/3)}function ft(ct){return u[ct.getUTCDay()]}function At(ct){return l[ct.getUTCDay()]}function jt(ct){return m[ct.getUTCMonth()]}function Nt(ct){return s[ct.getUTCMonth()]}function or(ct){return i[+(ct.getUTCHours()>=12)]}function er(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var Ht=J(ct+="",K);return Ht.toString=function(){return ct},Ht},parse:function(ct){var Ht=ie(ct+="",!1);return Ht.toString=function(){return ct},Ht},utcFormat:function(ct){var Ht=J(ct+="",re);return Ht.toString=function(){return ct},Ht},utcParse:function(ct){var Ht=ie(ct+="",!0);return Ht.toString=function(){return ct},Ht}}}var SD={"-":"",_:" ",0:"0"},da=/^\s*\d+/,HZ=/^%/,GZ=/[\\^$*+?|[\]().{}]/g;function tn(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",l=i.length;return n+(l<r?new Array(r-l+1).join(e)+i:i)}function ZZ(t){return t.replace(GZ,"\\$&")}function xg(t){return new RegExp("^(?:"+t.map(ZZ).join("|")+")","i")}function bg(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function XZ(t,e,r){var n=da.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function KZ(t,e,r){var n=da.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function YZ(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function JZ(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function QZ(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function TD(t,e,r){var n=da.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function PD(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function eX(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function tX(t,e,r){var n=da.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function rX(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function AD(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function nX(t,e,r){var n=da.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function kD(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function iX(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function aX(t,e,r){var n=da.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function oX(t,e,r){var n=da.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function sX(t,e,r){var n=da.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function lX(t,e,r){var n=HZ.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function uX(t,e,r){var n=da.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function cX(t,e,r){var n=da.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function ED(t,e){return tn(t.getDate(),e,2)}function hX(t,e){return tn(t.getHours(),e,2)}function fX(t,e){return tn(t.getHours()%12||12,e,2)}function dX(t,e){return tn(1+Hy.count(Cc(t),t),e,3)}function bB(t,e){return tn(t.getMilliseconds(),e,3)}function pX(t,e){return bB(t,e)+"000"}function mX(t,e){return tn(t.getMonth()+1,e,2)}function gX(t,e){return tn(t.getMinutes(),e,2)}function yX(t,e){return tn(t.getSeconds(),e,2)}function vX(t){var e=t.getDay();return e===0?7:e}function _X(t,e){return tn(ix.count(Cc(t)-1,t),e,2)}function wB(t){var e=t.getDay();return e>=4||e===0?Qp(t):Qp.ceil(t)}function xX(t,e){return t=wB(t),tn(Qp.count(Cc(t),t)+(Cc(t).getDay()===4),e,2)}function bX(t){return t.getDay()}function wX(t,e){return tn(r0.count(Cc(t)-1,t),e,2)}function SX(t,e){return tn(t.getFullYear()%100,e,2)}function TX(t,e){return t=wB(t),tn(t.getFullYear()%100,e,2)}function PX(t,e){return tn(t.getFullYear()%1e4,e,4)}function AX(t,e){var r=t.getDay();return t=r>=4||r===0?Qp(t):Qp.ceil(t),tn(t.getFullYear()%1e4,e,4)}function kX(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tn(e/60|0,"0",2)+tn(e%60,"0",2)}function MD(t,e){return tn(t.getUTCDate(),e,2)}function EX(t,e){return tn(t.getUTCHours(),e,2)}function MX(t,e){return tn(t.getUTCHours()%12||12,e,2)}function CX(t,e){return tn(1+nx.count(Oc(t),t),e,3)}function SB(t,e){return tn(t.getUTCMilliseconds(),e,3)}function OX(t,e){return SB(t,e)+"000"}function IX(t,e){return tn(t.getUTCMonth()+1,e,2)}function DX(t,e){return tn(t.getUTCMinutes(),e,2)}function zX(t,e){return tn(t.getUTCSeconds(),e,2)}function RX(t){var e=t.getUTCDay();return e===0?7:e}function LX(t,e){return tn(ax.count(Oc(t)-1,t),e,2)}function TB(t){var e=t.getUTCDay();return e>=4||e===0?em(t):em.ceil(t)}function FX(t,e){return t=TB(t),tn(em.count(Oc(t),t)+(Oc(t).getUTCDay()===4),e,2)}function jX(t){return t.getUTCDay()}function BX(t,e){return tn(n0.count(Oc(t)-1,t),e,2)}function NX(t,e){return tn(t.getUTCFullYear()%100,e,2)}function $X(t,e){return t=TB(t),tn(t.getUTCFullYear()%100,e,2)}function VX(t,e){return tn(t.getUTCFullYear()%1e4,e,4)}function qX(t,e){var r=t.getUTCDay();return t=r>=4||r===0?em(t):em.ceil(t),tn(t.getUTCFullYear()%1e4,e,4)}function UX(){return"+0000"}function CD(){return"%"}function OD(t){return+t}function ID(t){return Math.floor(+t/1e3)}var Op,PB,AB;WX({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function WX(t){return Op=WZ(t),PB=Op.format,Op.parse,AB=Op.utcFormat,Op.utcParse,Op}function HX(t){return new Date(t)}function GX(t){return t instanceof Date?+t:+new Date(+t)}function yA(t,e,r,n,i,l,u,s,m,y){var w=nA(),S=w.invert,E=w.domain,I=y(".%L"),F=y(":%S"),L=y("%I:%M"),R=y("%I %p"),U=y("%a %d"),X=y("%b %d"),K=y("%B"),re=y("%Y");function W(J){return(m(J)<J?I:s(J)<J?F:u(J)<J?L:l(J)<J?R:n(J)<J?i(J)<J?U:X:r(J)<J?K:re)(J)}return w.invert=function(J){return new Date(S(J))},w.domain=function(J){return arguments.length?E(Array.from(J,GX)):E().map(HX)},w.ticks=function(J){var ie=E();return t(ie[0],ie[ie.length-1],J??10)},w.tickFormat=function(J,ie){return ie==null?W:y(ie)},w.nice=function(J){var ie=E();return(!J||typeof J.range!="function")&&(J=e(ie[0],ie[ie.length-1],J??10)),J?E(fB(ie,J)):w},w.copy=function(){return Wy(w,yA(t,e,r,n,i,l,u,s,m,y))},w}function ZX(){return Js.apply(yA(qZ,UZ,Cc,mA,ix,Hy,dA,hA,od,PB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function XX(){return Js.apply(yA($Z,VZ,Oc,gA,ax,nx,pA,fA,od,AB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ox(){var t=0,e=1,r,n,i,l,u=ko,s=!1,m;function y(S){return S==null||isNaN(S=+S)?m:u(i===0?.5:(S=(l(S)-r)*i,s?Math.max(0,Math.min(1,S)):S))}y.domain=function(S){return arguments.length?([t,e]=S,r=l(t=+t),n=l(e=+e),i=r===n?0:1/(n-r),y):[t,e]},y.clamp=function(S){return arguments.length?(s=!!S,y):s},y.interpolator=function(S){return arguments.length?(u=S,y):u};function w(S){return function(E){var I,F;return arguments.length?([I,F]=E,u=S(I,F),y):[u(0),u(1)]}}return y.range=w(bm),y.rangeRound=w(rA),y.unknown=function(S){return arguments.length?(m=S,y):m},function(S){return l=S,r=S(t),n=S(e),i=r===n?0:1/(n-r),y}}function Bh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function kB(){var t=jh(ox()(ko));return t.copy=function(){return Bh(t,kB())},Rc.apply(t,arguments)}function EB(){var t=oA(ox()).domain([1,10]);return t.copy=function(){return Bh(t,EB()).base(t.base())},Rc.apply(t,arguments)}function MB(){var t=sA(ox());return t.copy=function(){return Bh(t,MB()).constant(t.constant())},Rc.apply(t,arguments)}function vA(){var t=lA(ox());return t.copy=function(){return Bh(t,vA()).exponent(t.exponent())},Rc.apply(t,arguments)}function KX(){return vA.apply(null,arguments).exponent(.5)}function CB(){var t=[],e=ko;function r(n){if(n!=null&&!isNaN(n=+n))return e((qy(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let i of n)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(Ch),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,i)=>e(i/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,l)=>LG(t,l/n))},r.copy=function(){return CB(e).domain(t)},Rc.apply(r,arguments)}function sx(){var t=0,e=.5,r=1,n=1,i,l,u,s,m,y=ko,w,S=!1,E;function I(L){return isNaN(L=+L)?E:(L=.5+((L=+w(L))-l)*(n*L<n*l?s:m),y(S?Math.max(0,Math.min(1,L)):L))}I.domain=function(L){return arguments.length?([t,e,r]=L,i=w(t=+t),l=w(e=+e),u=w(r=+r),s=i===l?0:.5/(l-i),m=l===u?0:.5/(u-l),n=l<i?-1:1,I):[t,e,r]},I.clamp=function(L){return arguments.length?(S=!!L,I):S},I.interpolator=function(L){return arguments.length?(y=L,I):y};function F(L){return function(R){var U,X,K;return arguments.length?([U,X,K]=R,y=lZ(L,[U,X,K]),I):[y(0),y(.5),y(1)]}}return I.range=F(bm),I.rangeRound=F(rA),I.unknown=function(L){return arguments.length?(E=L,I):E},function(L){return w=L,i=L(t),l=L(e),u=L(r),s=i===l?0:.5/(l-i),m=l===u?0:.5/(u-l),n=l<i?-1:1,I}}function OB(){var t=jh(sx()(ko));return t.copy=function(){return Bh(t,OB())},Rc.apply(t,arguments)}function IB(){var t=oA(sx()).domain([.1,1,10]);return t.copy=function(){return Bh(t,IB()).base(t.base())},Rc.apply(t,arguments)}function DB(){var t=sA(sx());return t.copy=function(){return Bh(t,DB()).constant(t.constant())},Rc.apply(t,arguments)}function _A(){var t=lA(sx());return t.copy=function(){return Bh(t,_A()).exponent(t.exponent())},Rc.apply(t,arguments)}function YX(){return _A.apply(null,arguments).exponent(.5)}const DD=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ay,scaleDiverging:OB,scaleDivergingLog:IB,scaleDivergingPow:_A,scaleDivergingSqrt:YX,scaleDivergingSymlog:DB,scaleIdentity:hB,scaleImplicit:fT,scaleLinear:e0,scaleLog:dB,scaleOrdinal:QP,scalePoint:Vg,scalePow:uA,scaleQuantile:gB,scaleQuantize:yB,scaleRadial:mB,scaleSequential:kB,scaleSequentialLog:EB,scaleSequentialPow:vA,scaleSequentialQuantile:CB,scaleSequentialSqrt:KX,scaleSequentialSymlog:MB,scaleSqrt:OZ,scaleSymlog:pB,scaleThreshold:vB,scaleTime:ZX,scaleUtc:XX,tickFormat:cB},Symbol.toStringTag,{value:"Module"}));var RS,zD;function zB(){if(zD)return RS;zD=1;var t=vm();function e(r,n,i){for(var l=-1,u=r.length;++l<u;){var s=r[l],m=n(s);if(m!=null&&(y===void 0?m===m&&!t(m):i(m,y)))var y=m,w=s}return w}return RS=e,RS}var LS,RD;function JX(){if(RD)return LS;RD=1;function t(e,r){return e>r}return LS=t,LS}var FS,LD;function QX(){if(LD)return FS;LD=1;var t=zB(),e=JX(),r=xm();function n(i){return i&&i.length?t(i,r,e):void 0}return FS=n,FS}var eK=QX();const lx=An(eK);var jS,FD;function tK(){if(FD)return jS;FD=1;function t(e,r){return e<r}return jS=t,jS}var BS,jD;function rK(){if(jD)return BS;jD=1;var t=zB(),e=tK(),r=xm();function n(i){return i&&i.length?t(i,r,e):void 0}return BS=n,BS}var nK=rK();const ux=An(nK);var NS,BD;function iK(){if(BD)return NS;BD=1;var t=RP(),e=Fh(),r=Vj(),n=Uo();function i(l,u){var s=n(l)?t:r;return s(l,e(u,3))}return NS=i,NS}var $S,ND;function aK(){if(ND)return $S;ND=1;var t=Nj(),e=iK();function r(n,i){return t(e(n,i),1)}return $S=r,$S}var oK=aK();const sK=An(oK);var VS,$D;function lK(){if($D)return VS;$D=1;var t=ZP();function e(r,n){return t(r,n)}return VS=e,VS}var uK=lK();const xA=An(uK);var wm=1e9,cK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},wA,Zn=!0,Ys="[DecimalError] ",fd=Ys+"Invalid argument: ",bA=Ys+"Exponent out of range: ",Sm=Math.floor,rd=Math.pow,hK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_s,ca=1e7,Vn=7,RB=9007199254740991,i0=Sm(RB/Vn),Zt={};Zt.absoluteValue=Zt.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Zt.comparedTo=Zt.cmp=function(t){var e,r,n,i,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(n=l.d.length,i=t.d.length,e=0,r=n<i?n:i;e<r;++e)if(l.d[e]!==t.d[e])return l.d[e]>t.d[e]^l.s<0?1:-1;return n===i?0:n>i^l.s<0?1:-1};Zt.decimalPlaces=Zt.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Vn;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};Zt.dividedBy=Zt.div=function(t){return kc(this,new this.constructor(t))};Zt.dividedToIntegerBy=Zt.idiv=function(t){var e=this,r=e.constructor;return Cn(kc(e,new r(t),0,1),r.precision)};Zt.equals=Zt.eq=function(t){return!this.cmp(t)};Zt.exponent=function(){return Ci(this)};Zt.greaterThan=Zt.gt=function(t){return this.cmp(t)>0};Zt.greaterThanOrEqualTo=Zt.gte=function(t){return this.cmp(t)>=0};Zt.isInteger=Zt.isint=function(){return this.e>this.d.length-2};Zt.isNegative=Zt.isneg=function(){return this.s<0};Zt.isPositive=Zt.ispos=function(){return this.s>0};Zt.isZero=function(){return this.s===0};Zt.lessThan=Zt.lt=function(t){return this.cmp(t)<0};Zt.lessThanOrEqualTo=Zt.lte=function(t){return this.cmp(t)<1};Zt.logarithm=Zt.log=function(t){var e,r=this,n=r.constructor,i=n.precision,l=i+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(_s))throw Error(Ys+"NaN");if(r.s<1)throw Error(Ys+(r.s?"NaN":"-Infinity"));return r.eq(_s)?new n(0):(Zn=!1,e=kc(cy(r,l),cy(t,l),l),Zn=!0,Cn(e,i))};Zt.minus=Zt.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?jB(e,t):LB(e,(t.s=-t.s,t))};Zt.modulo=Zt.mod=function(t){var e,r=this,n=r.constructor,i=n.precision;if(t=new n(t),!t.s)throw Error(Ys+"NaN");return r.s?(Zn=!1,e=kc(r,t,0,1).times(t),Zn=!0,r.minus(e)):Cn(new n(r),i)};Zt.naturalExponential=Zt.exp=function(){return FB(this)};Zt.naturalLogarithm=Zt.ln=function(){return cy(this)};Zt.negated=Zt.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Zt.plus=Zt.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?LB(e,t):jB(e,(t.s=-t.s,t))};Zt.precision=Zt.sd=function(t){var e,r,n,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(fd+t);if(e=Ci(i)+1,n=i.d.length-1,r=n*Vn+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};Zt.squareRoot=Zt.sqrt=function(){var t,e,r,n,i,l,u,s=this,m=s.constructor;if(s.s<1){if(!s.s)return new m(0);throw Error(Ys+"NaN")}for(t=Ci(s),Zn=!1,i=Math.sqrt(+s),i==0||i==1/0?(e=Tu(s.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Sm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new m(e)):n=new m(i.toString()),r=m.precision,i=u=r+3;;)if(l=n,n=l.plus(kc(s,l,u+2)).times(.5),Tu(l.d).slice(0,u)===(e=Tu(n.d)).slice(0,u)){if(e=e.slice(u-3,u+1),i==u&&e=="4999"){if(Cn(l,r+1,0),l.times(l).eq(s)){n=l;break}}else if(e!="9999")break;u+=4}return Zn=!0,Cn(n,r)};Zt.times=Zt.mul=function(t){var e,r,n,i,l,u,s,m,y,w=this,S=w.constructor,E=w.d,I=(t=new S(t)).d;if(!w.s||!t.s)return new S(0);for(t.s*=w.s,r=w.e+t.e,m=E.length,y=I.length,m<y&&(l=E,E=I,I=l,u=m,m=y,y=u),l=[],u=m+y,n=u;n--;)l.push(0);for(n=y;--n>=0;){for(e=0,i=m+n;i>n;)s=l[i]+I[n]*E[i-n-1]+e,l[i--]=s%ca|0,e=s/ca|0;l[i]=(l[i]+e)%ca|0}for(;!l[--u];)l.pop();return e?++r:l.shift(),t.d=l,t.e=r,Zn?Cn(t,S.precision):t};Zt.toDecimalPlaces=Zt.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(Mu(t,0,wm),e===void 0?e=n.rounding:Mu(e,0,8),Cn(r,t+Ci(r)+1,e))};Zt.toExponential=function(t,e){var r,n=this,i=n.constructor;return t===void 0?r=vd(n,!0):(Mu(t,0,wm),e===void 0?e=i.rounding:Mu(e,0,8),n=Cn(new i(n),t+1,e),r=vd(n,!0,t+1)),r};Zt.toFixed=function(t,e){var r,n,i=this,l=i.constructor;return t===void 0?vd(i):(Mu(t,0,wm),e===void 0?e=l.rounding:Mu(e,0,8),n=Cn(new l(i),t+Ci(i)+1,e),r=vd(n.abs(),!1,t+Ci(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Zt.toInteger=Zt.toint=function(){var t=this,e=t.constructor;return Cn(new e(t),Ci(t)+1,e.rounding)};Zt.toNumber=function(){return+this};Zt.toPower=Zt.pow=function(t){var e,r,n,i,l,u,s=this,m=s.constructor,y=12,w=+(t=new m(t));if(!t.s)return new m(_s);if(s=new m(s),!s.s){if(t.s<1)throw Error(Ys+"Infinity");return s}if(s.eq(_s))return s;if(n=m.precision,t.eq(_s))return Cn(s,n);if(e=t.e,r=t.d.length-1,u=e>=r,l=s.s,u){if((r=w<0?-w:w)<=RB){for(i=new m(_s),e=Math.ceil(n/Vn+4),Zn=!1;r%2&&(i=i.times(s),qD(i.d,e)),r=Sm(r/2),r!==0;)s=s.times(s),qD(s.d,e);return Zn=!0,t.s<0?new m(_s).div(i):Cn(i,n)}}else if(l<0)throw Error(Ys+"NaN");return l=l<0&&t.d[Math.max(e,r)]&1?-1:1,s.s=1,Zn=!1,i=t.times(cy(s,n+y)),Zn=!0,i=FB(i),i.s=l,i};Zt.toPrecision=function(t,e){var r,n,i=this,l=i.constructor;return t===void 0?(r=Ci(i),n=vd(i,r<=l.toExpNeg||r>=l.toExpPos)):(Mu(t,1,wm),e===void 0?e=l.rounding:Mu(e,0,8),i=Cn(new l(i),t,e),r=Ci(i),n=vd(i,t<=r||r<=l.toExpNeg,t)),n};Zt.toSignificantDigits=Zt.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(Mu(t,1,wm),e===void 0?e=n.rounding:Mu(e,0,8)),Cn(new n(r),t,e)};Zt.toString=Zt.valueOf=Zt.val=Zt.toJSON=Zt[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ci(t),r=t.constructor;return vd(t,e<=r.toExpNeg||e>=r.toExpPos)};function LB(t,e){var r,n,i,l,u,s,m,y,w=t.constructor,S=w.precision;if(!t.s||!e.s)return e.s||(e=new w(t)),Zn?Cn(e,S):e;if(m=t.d,y=e.d,u=t.e,i=e.e,m=m.slice(),l=u-i,l){for(l<0?(n=m,l=-l,s=y.length):(n=y,i=u,s=m.length),u=Math.ceil(S/Vn),s=u>s?u+1:s+1,l>s&&(l=s,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(s=m.length,l=y.length,s-l<0&&(l=s,n=y,y=m,m=n),r=0;l;)r=(m[--l]=m[l]+y[l]+r)/ca|0,m[l]%=ca;for(r&&(m.unshift(r),++i),s=m.length;m[--s]==0;)m.pop();return e.d=m,e.e=i,Zn?Cn(e,S):e}function Mu(t,e,r){if(t!==~~t||t<e||t>r)throw Error(fd+t)}function Tu(t){var e,r,n,i=t.length-1,l="",u=t[0];if(i>0){for(l+=u,e=1;e<i;e++)n=t[e]+"",r=Vn-n.length,r&&(l+=bh(r)),l+=n;u=t[e],n=u+"",r=Vn-n.length,r&&(l+=bh(r))}else if(u===0)return"0";for(;u%10===0;)u/=10;return l+u}var kc=(function(){function t(n,i){var l,u=0,s=n.length;for(n=n.slice();s--;)l=n[s]*i+u,n[s]=l%ca|0,u=l/ca|0;return u&&n.unshift(u),n}function e(n,i,l,u){var s,m;if(l!=u)m=l>u?1:-1;else for(s=m=0;s<l;s++)if(n[s]!=i[s]){m=n[s]>i[s]?1:-1;break}return m}function r(n,i,l){for(var u=0;l--;)n[l]-=u,u=n[l]<i[l]?1:0,n[l]=u*ca+n[l]-i[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,l,u){var s,m,y,w,S,E,I,F,L,R,U,X,K,re,W,J,ie,he,ve=n.constructor,Re=n.s==i.s?1:-1,de=n.d,Oe=i.d;if(!n.s)return new ve(n);if(!i.s)throw Error(Ys+"Division by zero");for(m=n.e-i.e,ie=Oe.length,W=de.length,I=new ve(Re),F=I.d=[],y=0;Oe[y]==(de[y]||0);)++y;if(Oe[y]>(de[y]||0)&&--m,l==null?X=l=ve.precision:u?X=l+(Ci(n)-Ci(i))+1:X=l,X<0)return new ve(0);if(X=X/Vn+2|0,y=0,ie==1)for(w=0,Oe=Oe[0],X++;(y<W||w)&&X--;y++)K=w*ca+(de[y]||0),F[y]=K/Oe|0,w=K%Oe|0;else{for(w=ca/(Oe[0]+1)|0,w>1&&(Oe=t(Oe,w),de=t(de,w),ie=Oe.length,W=de.length),re=ie,L=de.slice(0,ie),R=L.length;R<ie;)L[R++]=0;he=Oe.slice(),he.unshift(0),J=Oe[0],Oe[1]>=ca/2&&++J;do w=0,s=e(Oe,L,ie,R),s<0?(U=L[0],ie!=R&&(U=U*ca+(L[1]||0)),w=U/J|0,w>1?(w>=ca&&(w=ca-1),S=t(Oe,w),E=S.length,R=L.length,s=e(S,L,E,R),s==1&&(w--,r(S,ie<E?he:Oe,E))):(w==0&&(s=w=1),S=Oe.slice()),E=S.length,E<R&&S.unshift(0),r(L,S,R),s==-1&&(R=L.length,s=e(Oe,L,ie,R),s<1&&(w++,r(L,ie<R?he:Oe,R))),R=L.length):s===0&&(w++,L=[0]),F[y++]=w,s&&L[0]?L[R++]=de[re]||0:(L=[de[re]],R=1);while((re++<W||L[0]!==void 0)&&X--)}return F[0]||F.shift(),I.e=m,Cn(I,u?l+Ci(I)+1:l)}})();function FB(t,e){var r,n,i,l,u,s,m=0,y=0,w=t.constructor,S=w.precision;if(Ci(t)>16)throw Error(bA+Ci(t));if(!t.s)return new w(_s);for(Zn=!1,s=S,u=new w(.03125);t.abs().gte(.1);)t=t.times(u),y+=5;for(n=Math.log(rd(2,y))/Math.LN10*2+5|0,s+=n,r=i=l=new w(_s),w.precision=s;;){if(i=Cn(i.times(t),s),r=r.times(++m),u=l.plus(kc(i,r,s)),Tu(u.d).slice(0,s)===Tu(l.d).slice(0,s)){for(;y--;)l=Cn(l.times(l),s);return w.precision=S,e==null?(Zn=!0,Cn(l,S)):l}l=u}}function Ci(t){for(var e=t.e*Vn,r=t.d[0];r>=10;r/=10)e++;return e}function qS(t,e,r){if(e>t.LN10.sd())throw Zn=!0,r&&(t.precision=r),Error(Ys+"LN10 precision limit exceeded");return Cn(new t(t.LN10),e)}function bh(t){for(var e="";t--;)e+="0";return e}function cy(t,e){var r,n,i,l,u,s,m,y,w,S=1,E=10,I=t,F=I.d,L=I.constructor,R=L.precision;if(I.s<1)throw Error(Ys+(I.s?"NaN":"-Infinity"));if(I.eq(_s))return new L(0);if(e==null?(Zn=!1,y=R):y=e,I.eq(10))return e==null&&(Zn=!0),qS(L,y);if(y+=E,L.precision=y,r=Tu(F),n=r.charAt(0),l=Ci(I),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)I=I.times(t),r=Tu(I.d),n=r.charAt(0),S++;l=Ci(I),n>1?(I=new L("0."+r),l++):I=new L(n+"."+r.slice(1))}else return m=qS(L,y+2,R).times(l+""),I=cy(new L(n+"."+r.slice(1)),y-E).plus(m),L.precision=R,e==null?(Zn=!0,Cn(I,R)):I;for(s=u=I=kc(I.minus(_s),I.plus(_s),y),w=Cn(I.times(I),y),i=3;;){if(u=Cn(u.times(w),y),m=s.plus(kc(u,new L(i),y)),Tu(m.d).slice(0,y)===Tu(s.d).slice(0,y))return s=s.times(2),l!==0&&(s=s.plus(qS(L,y+2,R).times(l+""))),s=kc(s,new L(S),y),L.precision=R,e==null?(Zn=!0,Cn(s,R)):s;s=m,i+=2}}function VD(t,e){var r,n,i;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(n,i),e){if(i-=n,r=r-n-1,t.e=Sm(r/Vn),t.d=[],n=(r+1)%Vn,r<0&&(n+=Vn),n<i){for(n&&t.d.push(+e.slice(0,n)),i-=Vn;n<i;)t.d.push(+e.slice(n,n+=Vn));e=e.slice(n),n=Vn-e.length}else n-=i;for(;n--;)e+="0";if(t.d.push(+e),Zn&&(t.e>i0||t.e<-i0))throw Error(bA+r)}else t.s=0,t.e=0,t.d=[0];return t}function Cn(t,e,r){var n,i,l,u,s,m,y,w,S=t.d;for(u=1,l=S[0];l>=10;l/=10)u++;if(n=e-u,n<0)n+=Vn,i=e,y=S[w=0];else{if(w=Math.ceil((n+1)/Vn),l=S.length,w>=l)return t;for(y=l=S[w],u=1;l>=10;l/=10)u++;n%=Vn,i=n-Vn+u}if(r!==void 0&&(l=rd(10,u-i-1),s=y/l%10|0,m=e<0||S[w+1]!==void 0||y%l,m=r<4?(s||m)&&(r==0||r==(t.s<0?3:2)):s>5||s==5&&(r==4||m||r==6&&(n>0?i>0?y/rd(10,u-i):0:S[w-1])%10&1||r==(t.s<0?8:7))),e<1||!S[0])return m?(l=Ci(t),S.length=1,e=e-l-1,S[0]=rd(10,(Vn-e%Vn)%Vn),t.e=Sm(-e/Vn)||0):(S.length=1,S[0]=t.e=t.s=0),t;if(n==0?(S.length=w,l=1,w--):(S.length=w+1,l=rd(10,Vn-n),S[w]=i>0?(y/rd(10,u-i)%rd(10,i)|0)*l:0),m)for(;;)if(w==0){(S[0]+=l)==ca&&(S[0]=1,++t.e);break}else{if(S[w]+=l,S[w]!=ca)break;S[w--]=0,l=1}for(n=S.length;S[--n]===0;)S.pop();if(Zn&&(t.e>i0||t.e<-i0))throw Error(bA+Ci(t));return t}function jB(t,e){var r,n,i,l,u,s,m,y,w,S,E=t.constructor,I=E.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new E(t),Zn?Cn(e,I):e;if(m=t.d,S=e.d,n=e.e,y=t.e,m=m.slice(),u=y-n,u){for(w=u<0,w?(r=m,u=-u,s=S.length):(r=S,n=y,s=m.length),i=Math.max(Math.ceil(I/Vn),s)+2,u>i&&(u=i,r.length=1),r.reverse(),i=u;i--;)r.push(0);r.reverse()}else{for(i=m.length,s=S.length,w=i<s,w&&(s=i),i=0;i<s;i++)if(m[i]!=S[i]){w=m[i]<S[i];break}u=0}for(w&&(r=m,m=S,S=r,e.s=-e.s),s=m.length,i=S.length-s;i>0;--i)m[s++]=0;for(i=S.length;i>u;){if(m[--i]<S[i]){for(l=i;l&&m[--l]===0;)m[l]=ca-1;--m[l],m[i]+=ca}m[i]-=S[i]}for(;m[--s]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(e.d=m,e.e=n,Zn?Cn(e,I):e):new E(0)}function vd(t,e,r){var n,i=Ci(t),l=Tu(t.d),u=l.length;return e?(r&&(n=r-u)>0?l=l.charAt(0)+"."+l.slice(1)+bh(n):u>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(i<0?"e":"e+")+i):i<0?(l="0."+bh(-i-1)+l,r&&(n=r-u)>0&&(l+=bh(n))):i>=u?(l+=bh(i+1-u),r&&(n=r-i-1)>0&&(l=l+"."+bh(n))):((n=i+1)<u&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-u)>0&&(i+1===u&&(l+="."),l+=bh(n))),t.s<0?"-"+l:l}function qD(t,e){if(t.length>e)return t.length=e,!0}function BB(t){var e,r,n;function i(l){var u=this;if(!(u instanceof i))return new i(l);if(u.constructor=i,l instanceof i){u.s=l.s,u.e=l.e,u.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(fd+l);if(l>0)u.s=1;else if(l<0)l=-l,u.s=-1;else{u.s=0,u.e=0,u.d=[0];return}if(l===~~l&&l<1e7){u.e=0,u.d=[l];return}return VD(u,l.toString())}else if(typeof l!="string")throw Error(fd+l);if(l.charCodeAt(0)===45?(l=l.slice(1),u.s=-1):u.s=1,hK.test(l))VD(u,l);else throw Error(fd+l)}if(i.prototype=Zt,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=BB,i.config=i.set=fK,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return i.config(t),i}function fK(t){if(!t||typeof t!="object")throw Error(Ys+"Object expected");var e,r,n,i=["precision",1,wm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((n=t[r=i[e]])!==void 0)if(Sm(n)===n&&n>=i[e+1]&&n<=i[e+2])this[r]=n;else throw Error(fd+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(fd+r+": "+n);return this}var wA=BB(cK);_s=new wA(1);const Pn=wA;function dK(t){return yK(t)||gK(t)||mK(t)||pK()}function pK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mK(t,e){if(t){if(typeof t=="string")return gT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gT(t,e)}}function gK(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function yK(t){if(Array.isArray(t))return gT(t)}function gT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vK=function(e){return e},NB={},$B=function(e){return e===NB},UD=function(e){return function r(){return arguments.length===0||arguments.length===1&&$B(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},_K=function t(e,r){return e===1?r:UD(function(){for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];var u=i.filter(function(s){return s!==NB}).length;return u>=e?r.apply(void 0,i):t(e-u,UD(function(){for(var s=arguments.length,m=new Array(s),y=0;y<s;y++)m[y]=arguments[y];var w=i.map(function(S){return $B(S)?m.shift():S});return r.apply(void 0,dK(w).concat(m))}))})},cx=function(e){return _K(e.length,e)},yT=function(e,r){for(var n=[],i=e;i<r;++i)n[i-e]=i;return n},xK=cx(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),bK=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return vK;var i=r.reverse(),l=i[0],u=i.slice(1);return function(){return u.reduce(function(s,m){return m(s)},l.apply(void 0,arguments))}},vT=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},VB=function(e){var r=null,n=null;return function(){for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];return r&&l.every(function(s,m){return s===r[m]})||(r=l,n=e.apply(void 0,l)),n}};function wK(t){var e;return t===0?e=1:e=Math.floor(new Pn(t).abs().log(10).toNumber())+1,e}function SK(t,e,r){for(var n=new Pn(t),i=0,l=[];n.lt(e)&&i<1e5;)l.push(n.toNumber()),n=n.add(r),i++;return l}var TK=cx(function(t,e,r){var n=+t,i=+e;return n+r*(i-n)}),PK=cx(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),AK=cx(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const hx={rangeStep:SK,getDigitCount:wK,interpolateNumber:TK,uninterpolateNumber:PK,uninterpolateTruncation:AK};function _T(t){return MK(t)||EK(t)||qB(t)||kK()}function kK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EK(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function MK(t){if(Array.isArray(t))return xT(t)}function hy(t,e){return IK(t)||OK(t,e)||qB(t,e)||CK()}function CK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qB(t,e){if(t){if(typeof t=="string")return xT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xT(t,e)}}function xT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OK(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,i=!1,l=void 0;try{for(var u=t[Symbol.iterator](),s;!(n=(s=u.next()).done)&&(r.push(s.value),!(e&&r.length===e));n=!0);}catch(m){i=!0,l=m}finally{try{!n&&u.return!=null&&u.return()}finally{if(i)throw l}}return r}}function IK(t){if(Array.isArray(t))return t}function UB(t){var e=hy(t,2),r=e[0],n=e[1],i=r,l=n;return r>n&&(i=n,l=r),[i,l]}function WB(t,e,r){if(t.lte(0))return new Pn(0);var n=hx.getDigitCount(t.toNumber()),i=new Pn(10).pow(n),l=t.div(i),u=n!==1?.05:.1,s=new Pn(Math.ceil(l.div(u).toNumber())).add(r).mul(u),m=s.mul(i);return e?m:new Pn(Math.ceil(m))}function DK(t,e,r){var n=1,i=new Pn(t);if(!i.isint()&&r){var l=Math.abs(t);l<1?(n=new Pn(10).pow(hx.getDigitCount(t)-1),i=new Pn(Math.floor(i.div(n).toNumber())).mul(n)):l>1&&(i=new Pn(Math.floor(t)))}else t===0?i=new Pn(Math.floor((e-1)/2)):r||(i=new Pn(Math.floor(t)));var u=Math.floor((e-1)/2),s=bK(xK(function(m){return i.add(new Pn(m-u).mul(n)).toNumber()}),yT);return s(0,e)}function HB(t,e,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new Pn(0),tickMin:new Pn(0),tickMax:new Pn(0)};var l=WB(new Pn(e).sub(t).div(r-1),n,i),u;t<=0&&e>=0?u=new Pn(0):(u=new Pn(t).add(e).div(2),u=u.sub(new Pn(u).mod(l)));var s=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Pn(e).sub(u).div(l).toNumber()),y=s+m+1;return y>r?HB(t,e,r,n,i+1):(y<r&&(m=e>0?m+(r-y):m,s=e>0?s:s+(r-y)),{step:l,tickMin:u.sub(new Pn(s).mul(l)),tickMax:u.add(new Pn(m).mul(l))})}function zK(t){var e=hy(t,2),r=e[0],n=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=Math.max(i,2),s=UB([r,n]),m=hy(s,2),y=m[0],w=m[1];if(y===-1/0||w===1/0){var S=w===1/0?[y].concat(_T(yT(0,i-1).map(function(){return 1/0}))):[].concat(_T(yT(0,i-1).map(function(){return-1/0})),[w]);return r>n?vT(S):S}if(y===w)return DK(y,i,l);var E=HB(y,w,u,l),I=E.step,F=E.tickMin,L=E.tickMax,R=hx.rangeStep(F,L.add(new Pn(.1).mul(I)),I);return r>n?vT(R):R}function RK(t,e){var r=hy(t,2),n=r[0],i=r[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,u=UB([n,i]),s=hy(u,2),m=s[0],y=s[1];if(m===-1/0||y===1/0)return[n,i];if(m===y)return[m];var w=Math.max(e,2),S=WB(new Pn(y).sub(m).div(w-1),l,0),E=[].concat(_T(hx.rangeStep(new Pn(m),new Pn(y).sub(new Pn(.99).mul(S)),S)),[y]);return n>i?vT(E):E}var LK=VB(zK),FK=VB(RK),jK="Invariant failed";function _d(t,e){throw new Error(jK)}var BK=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function tm(t){"@babel/helpers - typeof";return tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tm(t)}function a0(){return a0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a0.apply(this,arguments)}function NK(t,e){return UK(t)||qK(t,e)||VK(t,e)||$K()}function $K(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VK(t,e){if(t){if(typeof t=="string")return WD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WD(t,e)}}function WD(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qK(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function UK(t){if(Array.isArray(t))return t}function WK(t,e){if(t==null)return{};var r=HK(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function HK(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function GK(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XB(n.key),n)}}function XK(t,e,r){return e&&ZK(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function KK(t,e,r){return e=o0(e),YK(t,GB()?Reflect.construct(e,r||[],o0(t).constructor):e.apply(t,r))}function YK(t,e){if(e&&(tm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JK(t)}function JK(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function GB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GB=function(){return!!t})()}function o0(t){return o0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o0(t)}function QK(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bT(t,e)}function bT(t,e){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},bT(t,e)}function ZB(t,e,r){return e=XB(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function XB(t){var e=eY(t,"string");return tm(e)=="symbol"?e:e+""}function eY(t,e){if(tm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(tm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var fx=(function(t){function e(){return GK(this,e),KK(this,e,arguments)}return QK(e,t),XK(e,[{key:"render",value:function(){var n=this.props,i=n.offset,l=n.layout,u=n.width,s=n.dataKey,m=n.data,y=n.dataPointFormatter,w=n.xAxis,S=n.yAxis,E=WK(n,BK),I=ln(E,!1);this.props.direction==="x"&&w.type!=="number"&&_d();var F=m.map(function(L){var R=y(L,s),U=R.x,X=R.y,K=R.value,re=R.errorVal;if(!re)return null;var W=[],J,ie;if(Array.isArray(re)){var he=NK(re,2);J=he[0],ie=he[1]}else J=ie=re;if(l==="vertical"){var ve=w.scale,Re=X+i,de=Re+u,Oe=Re-u,Le=ve(K-J),Ge=ve(K+ie);W.push({x1:Ge,y1:de,x2:Ge,y2:Oe}),W.push({x1:Le,y1:Re,x2:Ge,y2:Re}),W.push({x1:Le,y1:de,x2:Le,y2:Oe})}else if(l==="horizontal"){var Ne=S.scale,Ue=U+i,Qe=Ue-u,$e=Ue+u,Ye=Ne(K-J),nt=Ne(K+ie);W.push({x1:Qe,y1:nt,x2:$e,y2:nt}),W.push({x1:Ue,y1:Ye,x2:Ue,y2:nt}),W.push({x1:Qe,y1:Ye,x2:$e,y2:Ye})}return He.createElement(ha,a0({className:"recharts-errorBar",key:"bar-".concat(W.map(function(Se){return"".concat(Se.x1,"-").concat(Se.x2,"-").concat(Se.y1,"-").concat(Se.y2)}))},I),W.map(function(Se){return He.createElement("line",a0({},Se,{key:"line-".concat(Se.x1,"-").concat(Se.x2,"-").concat(Se.y1,"-").concat(Se.y2)}))}))});return He.createElement(ha,{className:"recharts-errorBars"},F)}}])})(He.Component);ZB(fx,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZB(fx,"displayName","ErrorBar");function fy(t){"@babel/helpers - typeof";return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fy(t)}function HD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?HD(Object(r),!0).forEach(function(n){tY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function tY(t,e,r){return e=rY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rY(t){var e=nY(t,"string");return fy(e)=="symbol"?e:e+""}function nY(t,e){if(fy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KB=function(e){var r=e.children,n=e.formattedGraphicalItems,i=e.legendWidth,l=e.legendContent,u=vs(r,cd);if(!u)return null;var s=cd.defaultProps,m=s!==void 0?Jf(Jf({},s),u.props):{},y;return u.props&&u.props.payload?y=u.props&&u.props.payload:l==="children"?y=(n||[]).reduce(function(w,S){var E=S.item,I=S.props,F=I.sectors||I.data||[];return w.concat(F.map(function(L){return{type:u.props.iconType||E.props.legendType,value:L.name,color:L.fill,payload:L}}))},[]):y=(n||[]).map(function(w){var S=w.item,E=S.type.defaultProps,I=E!==void 0?Jf(Jf({},E),S.props):{},F=I.dataKey,L=I.name,R=I.legendType,U=I.hide;return{inactive:U,dataKey:F,type:m.iconType||R||"square",color:SA(S),value:L||F,payload:I}}),Jf(Jf(Jf({},m),cd.getWithHeight(u,i)),{},{payload:y,item:u})};function dy(t){"@babel/helpers - typeof";return dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dy(t)}function GD(t){return sY(t)||oY(t)||aY(t)||iY()}function iY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aY(t,e){if(t){if(typeof t=="string")return wT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wT(t,e)}}function oY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sY(t){if(Array.isArray(t))return wT(t)}function wT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ZD(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ZD(Object(r),!0).forEach(function(n){Vp(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ZD(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Vp(t,e,r){return e=lY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lY(t){var e=uY(t,"string");return dy(e)=="symbol"?e:e+""}function uY(t,e){if(dy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(dy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cu(t,e,r){return cn(t)||cn(e)?r:Ui(e)?Ks(t,e,r):Lr(e)?e(t):r}function qg(t,e,r,n){var i=sK(t,function(s){return Cu(s,e)});if(r==="number"){var l=i.filter(function(s){return Dt(s)||parseFloat(s)});return l.length?[ux(l),lx(l)]:[1/0,-1/0]}var u=n?i.filter(function(s){return!cn(s)}):i;return u.map(function(s){return Ui(s)||s instanceof Date?s:""})}var cY=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,u=-1,s=(r=n?.length)!==null&&r!==void 0?r:0;if(s<=1)return 0;if(l&&l.axisType==="angleAxis"&&Math.abs(Math.abs(l.range[1]-l.range[0])-360)<=1e-6)for(var m=l.range,y=0;y<s;y++){var w=y>0?i[y-1].coordinate:i[s-1].coordinate,S=i[y].coordinate,E=y>=s-1?i[0].coordinate:i[y+1].coordinate,I=void 0;if(Ol(S-w)!==Ol(E-S)){var F=[];if(Ol(E-S)===Ol(m[1]-m[0])){I=E;var L=S+m[1]-m[0];F[0]=Math.min(L,(L+w)/2),F[1]=Math.max(L,(L+w)/2)}else{I=w;var R=E+m[1]-m[0];F[0]=Math.min(S,(R+S)/2),F[1]=Math.max(S,(R+S)/2)}var U=[Math.min(S,(I+S)/2),Math.max(S,(I+S)/2)];if(e>U[0]&&e<=U[1]||e>=F[0]&&e<=F[1]){u=i[y].index;break}}else{var X=Math.min(w,E),K=Math.max(w,E);if(e>(X+S)/2&&e<=(K+S)/2){u=i[y].index;break}}}else for(var re=0;re<s;re++)if(re===0&&e<=(n[re].coordinate+n[re+1].coordinate)/2||re>0&&re<s-1&&e>(n[re].coordinate+n[re-1].coordinate)/2&&e<=(n[re].coordinate+n[re+1].coordinate)/2||re===s-1&&e>(n[re].coordinate+n[re-1].coordinate)/2){u=n[re].index;break}return u},SA=function(e){var r,n=e,i=n.type.displayName,l=(r=e.type)!==null&&r!==void 0&&r.defaultProps?hi(hi({},e.type.defaultProps),e.props):e.props,u=l.stroke,s=l.fill,m;switch(i){case"Line":m=u;break;case"Area":case"Radar":m=u&&u!=="none"?u:s;break;default:m=s;break}return m},hY=function(e){var r=e.barSize,n=e.totalSize,i=e.stackGroups,l=i===void 0?{}:i;if(!l)return{};for(var u={},s=Object.keys(l),m=0,y=s.length;m<y;m++)for(var w=l[s[m]].stackGroups,S=Object.keys(w),E=0,I=S.length;E<I;E++){var F=w[S[E]],L=F.items,R=F.cateAxisId,U=L.filter(function(ie){return Pc(ie.type).indexOf("Bar")>=0});if(U&&U.length){var X=U[0].type.defaultProps,K=X!==void 0?hi(hi({},X),U[0].props):U[0].props,re=K.barSize,W=K[R];u[W]||(u[W]=[]);var J=cn(re)?r:re;u[W].push({item:U[0],stackList:U.slice(1),barSize:cn(J)?void 0:yd(J,n,0)})}}return u},fY=function(e){var r=e.barGap,n=e.barCategoryGap,i=e.bandSize,l=e.sizeList,u=l===void 0?[]:l,s=e.maxBarSize,m=u.length;if(m<1)return null;var y=yd(r,i,0,!0),w,S=[];if(u[0].barSize===+u[0].barSize){var E=!1,I=i/m,F=u.reduce(function(re,W){return re+W.barSize||0},0);F+=(m-1)*y,F>=i&&(F-=(m-1)*y,y=0),F>=i&&I>0&&(E=!0,I*=.9,F=m*I);var L=(i-F)/2>>0,R={offset:L-y,size:0};w=u.reduce(function(re,W){var J={item:W.item,position:{offset:R.offset+R.size+y,size:E?I:W.barSize}},ie=[].concat(GD(re),[J]);return R=ie[ie.length-1].position,W.stackList&&W.stackList.length&&W.stackList.forEach(function(he){ie.push({item:he,position:R})}),ie},S)}else{var U=yd(n,i,0,!0);i-2*U-(m-1)*y<=0&&(y=0);var X=(i-2*U-(m-1)*y)/m;X>1&&(X>>=0);var K=s===+s?Math.min(X,s):X;w=u.reduce(function(re,W,J){var ie=[].concat(GD(re),[{item:W.item,position:{offset:U+(X+y)*J+(X-K)/2,size:K}}]);return W.stackList&&W.stackList.length&&W.stackList.forEach(function(he){ie.push({item:he,position:ie[ie.length-1].position})}),ie},S)}return w},dY=function(e,r,n,i){var l=n.children,u=n.width,s=n.margin,m=u-(s.left||0)-(s.right||0),y=KB({children:l,legendWidth:m});if(y){var w=i||{},S=w.width,E=w.height,I=y.align,F=y.verticalAlign,L=y.layout;if((L==="vertical"||L==="horizontal"&&F==="middle")&&I!=="center"&&Dt(e[I]))return hi(hi({},e),{},Vp({},I,e[I]+(S||0)));if((L==="horizontal"||L==="vertical"&&I==="center")&&F!=="middle"&&Dt(e[F]))return hi(hi({},e),{},Vp({},F,e[F]+(E||0)))}return e},pY=function(e,r,n){return cn(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},YB=function(e,r,n,i,l){var u=r.props.children,s=Il(u,fx).filter(function(y){return pY(i,l,y.props.direction)});if(s&&s.length){var m=s.map(function(y){return y.props.dataKey});return e.reduce(function(y,w){var S=Cu(w,n);if(cn(S))return y;var E=Array.isArray(S)?[ux(S),lx(S)]:[S,S],I=m.reduce(function(F,L){var R=Cu(w,L,0),U=E[0]-Math.abs(Array.isArray(R)?R[0]:R),X=E[1]+Math.abs(Array.isArray(R)?R[1]:R);return[Math.min(U,F[0]),Math.max(X,F[1])]},[1/0,-1/0]);return[Math.min(I[0],y[0]),Math.max(I[1],y[1])]},[1/0,-1/0])}return null},mY=function(e,r,n,i,l){var u=r.map(function(s){return YB(e,s,n,l,i)}).filter(function(s){return!cn(s)});return u&&u.length?u.reduce(function(s,m){return[Math.min(s[0],m[0]),Math.max(s[1],m[1])]},[1/0,-1/0]):null},JB=function(e,r,n,i,l){var u=r.map(function(m){var y=m.props.dataKey;return n==="number"&&y&&YB(e,m,y,i)||qg(e,y,n,l)});if(n==="number")return u.reduce(function(m,y){return[Math.min(m[0],y[0]),Math.max(m[1],y[1])]},[1/0,-1/0]);var s={};return u.reduce(function(m,y){for(var w=0,S=y.length;w<S;w++)s[y[w]]||(s[y[w]]=!0,m.push(y[w]));return m},[])},QB=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},e3=function(e,r,n,i){if(i)return e.map(function(m){return m.coordinate});var l,u,s=e.map(function(m){return m.coordinate===r&&(l=!0),m.coordinate===n&&(u=!0),m.coordinate});return l||s.push(r),u||s.push(n),s},Tc=function(e,r,n){if(!e)return null;var i=e.scale,l=e.duplicateDomain,u=e.type,s=e.range,m=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,y=(r||n)&&u==="category"&&i.bandwidth?i.bandwidth()/m:0;if(y=e.axisType==="angleAxis"&&s?.length>=2?Ol(s[0]-s[1])*2*y:y,r&&(e.ticks||e.niceTicks)){var w=(e.ticks||e.niceTicks).map(function(S){var E=l?l.indexOf(S):S;return{coordinate:i(E)+y,value:S,offset:y}});return w.filter(function(S){return!Ny(S.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(S,E){return{coordinate:i(S)+y,value:S,index:E,offset:y}}):i.ticks&&!n?i.ticks(e.tickCount).map(function(S){return{coordinate:i(S)+y,value:S,offset:y}}):i.domain().map(function(S,E){return{coordinate:i(S)+y,value:l?l[S]:S,index:E,offset:y}})},US=new WeakMap,h_=function(e,r){if(typeof r!="function")return e;US.has(e)||US.set(e,new WeakMap);var n=US.get(e);if(n.has(r))return n.get(r);var i=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},gY=function(e,r,n){var i=e.scale,l=e.type,u=e.layout,s=e.axisType;if(i==="auto")return u==="radial"&&s==="radiusAxis"?{scale:ay(),realScaleType:"band"}:u==="radial"&&s==="angleAxis"?{scale:e0(),realScaleType:"linear"}:l==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Vg(),realScaleType:"point"}:l==="category"?{scale:ay(),realScaleType:"band"}:{scale:e0(),realScaleType:"linear"};if(gd(i)){var m="scale".concat(X0(i));return{scale:(DD[m]||Vg)(),realScaleType:DD[m]?m:"point"}}return Lr(i)?{scale:i}:{scale:Vg(),realScaleType:"point"}},XD=1e-4,yY=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,i=e.range(),l=Math.min(i[0],i[1])-XD,u=Math.max(i[0],i[1])+XD,s=e(r[0]),m=e(r[n-1]);(s<l||s>u||m<l||m>u)&&e.domain([r[0],r[n-1]])}},vY=function(e,r){if(!e)return null;for(var n=0,i=e.length;n<i;n++)if(e[n].item===r)return e[n].position;return null},_Y=function(e,r){if(!r||r.length!==2||!Dt(r[0])||!Dt(r[1]))return e;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),l=[e[0],e[1]];return(!Dt(e[0])||e[0]<n)&&(l[0]=n),(!Dt(e[1])||e[1]>i)&&(l[1]=i),l[0]>i&&(l[0]=i),l[1]<n&&(l[1]=n),l},xY=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var l=0,u=0,s=0;s<r;++s){var m=Ny(e[s][n][1])?e[s][n][0]:e[s][n][1];m>=0?(e[s][n][0]=l,e[s][n][1]=l+m,l=e[s][n][1]):(e[s][n][0]=u,e[s][n][1]=u+m,u=e[s][n][1])}},bY=function(e){var r=e.length;if(!(r<=0))for(var n=0,i=e[0].length;n<i;++n)for(var l=0,u=0;u<r;++u){var s=Ny(e[u][n][1])?e[u][n][0]:e[u][n][1];s>=0?(e[u][n][0]=l,e[u][n][1]=l+s,l=e[u][n][1]):(e[u][n][0]=0,e[u][n][1]=0)}},wY={sign:xY,expand:iH,none:Gp,silhouette:aH,wiggle:oH,positive:bY},SY=function(e,r,n){var i=r.map(function(s){return s.props.dataKey}),l=wY[n],u=nH().keys(i).value(function(s,m){return+Cu(s,m,0)}).order(J2).offset(l);return u(e)},TY=function(e,r,n,i,l,u){if(!e)return null;var s=u?r.reverse():r,m={},y=s.reduce(function(S,E){var I,F=(I=E.type)!==null&&I!==void 0&&I.defaultProps?hi(hi({},E.type.defaultProps),E.props):E.props,L=F.stackId,R=F.hide;if(R)return S;var U=F[n],X=S[U]||{hasStack:!1,stackGroups:{}};if(Ui(L)){var K=X.stackGroups[L]||{numericAxisId:n,cateAxisId:i,items:[]};K.items.push(E),X.hasStack=!0,X.stackGroups[L]=K}else X.stackGroups[Z0("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[E]};return hi(hi({},S),{},Vp({},U,X))},m),w={};return Object.keys(y).reduce(function(S,E){var I=y[E];if(I.hasStack){var F={};I.stackGroups=Object.keys(I.stackGroups).reduce(function(L,R){var U=I.stackGroups[R];return hi(hi({},L),{},Vp({},R,{numericAxisId:n,cateAxisId:i,items:U.items,stackedData:SY(e,U.items,l)}))},F)}return hi(hi({},S),{},Vp({},E,I))},w)},PY=function(e,r){var n=r.realScaleType,i=r.type,l=r.tickCount,u=r.originalDomain,s=r.allowDecimals,m=n||r.scale;if(m!=="auto"&&m!=="linear")return null;if(l&&i==="number"&&u&&(u[0]==="auto"||u[1]==="auto")){var y=e.domain();if(!y.length)return null;var w=LK(y,l,s);return e.domain([ux(w),lx(w)]),{niceTicks:w}}if(l&&i==="number"){var S=e.domain(),E=FK(S,l,s);return{niceTicks:E}}return null},KD=function(e){var r=e.axis,n=e.ticks,i=e.offset,l=e.bandSize,u=e.entry,s=e.index;if(r.type==="category")return n[s]?n[s].coordinate+i:null;var m=Cu(u,r.dataKey,r.domain[s]);return cn(m)?null:r.scale(m)-l/2+i},AY=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return i<=0&&l>=0?0:l<0?l:i}return n[0]},kY=function(e,r){var n,i=(n=e.type)!==null&&n!==void 0&&n.defaultProps?hi(hi({},e.type.defaultProps),e.props):e.props,l=i.stackId;if(Ui(l)){var u=r[l];if(u){var s=u.items.indexOf(e);return s>=0?u.stackedData[s]:null}}return null},EY=function(e){return e.reduce(function(r,n){return[ux(n.concat([r[0]]).filter(Dt)),lx(n.concat([r[1]]).filter(Dt))]},[1/0,-1/0])},t3=function(e,r,n){return Object.keys(e).reduce(function(i,l){var u=e[l],s=u.stackedData,m=s.reduce(function(y,w){var S=EY(w.slice(r,n+1));return[Math.min(y[0],S[0]),Math.max(y[1],S[1])]},[1/0,-1/0]);return[Math.min(m[0],i[0]),Math.max(m[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},YD=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,JD=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ST=function(e,r,n){if(Lr(e))return e(r,n);if(!Array.isArray(e))return r;var i=[];if(Dt(e[0]))i[0]=n?e[0]:Math.min(e[0],r[0]);else if(YD.test(e[0])){var l=+YD.exec(e[0])[1];i[0]=r[0]-l}else Lr(e[0])?i[0]=e[0](r[0]):i[0]=r[0];if(Dt(e[1]))i[1]=n?e[1]:Math.max(e[1],r[1]);else if(JD.test(e[1])){var u=+JD.exec(e[1])[1];i[1]=r[1]+u}else Lr(e[1])?i[1]=e[1](r[1]):i[1]=r[1];return i},s0=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!n||i>0)return i}if(e&&r&&r.length>=2){for(var l=KP(r,function(S){return S.coordinate}),u=1/0,s=1,m=l.length;s<m;s++){var y=l[s],w=l[s-1];u=Math.min((y.coordinate||0)-(w.coordinate||0),u)}return u===1/0?0:u}return n?void 0:0},QD=function(e,r,n){return!e||!e.length||xA(e,Ks(n,"type.defaultProps.domain"))?r:e},r3=function(e,r){var n=e.type.defaultProps?hi(hi({},e.type.defaultProps),e.props):e.props,i=n.dataKey,l=n.name,u=n.unit,s=n.formatter,m=n.tooltipType,y=n.chartType,w=n.hide;return hi(hi({},ln(e,!1)),{},{dataKey:i,unit:u,formatter:s,name:l||i,color:SA(e),value:Cu(r,i),type:m,payload:r,chartType:y,hide:w})};function py(t){"@babel/helpers - typeof";return py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},py(t)}function ez(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function tz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ez(Object(r),!0).forEach(function(n){MY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ez(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function MY(t,e,r){return e=CY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CY(t){var e=OY(t,"string");return py(e)=="symbol"?e:e+""}function OY(t,e){if(py(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(py(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l0=Math.PI/180,IY=function(e){return e*180/Math.PI},Ca=function(e,r,n,i){return{x:e+Math.cos(-l0*i)*n,y:r+Math.sin(-l0*i)*n}},DY=function(e,r){var n=e.x,i=e.y,l=r.x,u=r.y;return Math.sqrt(Math.pow(n-l,2)+Math.pow(i-u,2))},zY=function(e,r){var n=e.x,i=e.y,l=r.cx,u=r.cy,s=DY({x:n,y:i},{x:l,y:u});if(s<=0)return{radius:s};var m=(n-l)/s,y=Math.acos(m);return i>u&&(y=2*Math.PI-y),{radius:s,angle:IY(y),angleInRadian:y}},RY=function(e){var r=e.startAngle,n=e.endAngle,i=Math.floor(r/360),l=Math.floor(n/360),u=Math.min(i,l);return{startAngle:r-u*360,endAngle:n-u*360}},LY=function(e,r){var n=r.startAngle,i=r.endAngle,l=Math.floor(n/360),u=Math.floor(i/360),s=Math.min(l,u);return e+s*360},rz=function(e,r){var n=e.x,i=e.y,l=zY({x:n,y:i},r),u=l.radius,s=l.angle,m=r.innerRadius,y=r.outerRadius;if(u<m||u>y)return!1;if(u===0)return!0;var w=RY(r),S=w.startAngle,E=w.endAngle,I=s,F;if(S<=E){for(;I>E;)I-=360;for(;I<S;)I+=360;F=I>=S&&I<=E}else{for(;I>S;)I-=360;for(;I<E;)I+=360;F=I>=E&&I<=S}return F?tz(tz({},r),{},{radius:u,angle:LY(I,r)}):null};function my(t){"@babel/helpers - typeof";return my=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},my(t)}var FY=["offset"];function jY(t){return VY(t)||$Y(t)||NY(t)||BY()}function BY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NY(t,e){if(t){if(typeof t=="string")return TT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TT(t,e)}}function $Y(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VY(t){if(Array.isArray(t))return TT(t)}function TT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qY(t,e){if(t==null)return{};var r=UY(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function UY(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function nz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Vi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nz(Object(r),!0).forEach(function(n){WY(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function WY(t,e,r){return e=HY(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function HY(t){var e=GY(t,"string");return my(e)=="symbol"?e:e+""}function GY(t,e){if(my(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(my(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gy(){return gy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},gy.apply(this,arguments)}var ZY=function(e){var r=e.value,n=e.formatter,i=cn(e.children)?r:e.children;return Lr(n)?n(i):i},XY=function(e,r){var n=Ol(r-e),i=Math.min(Math.abs(r-e),360);return n*i},KY=function(e,r,n){var i=e.position,l=e.viewBox,u=e.offset,s=e.className,m=l,y=m.cx,w=m.cy,S=m.innerRadius,E=m.outerRadius,I=m.startAngle,F=m.endAngle,L=m.clockWise,R=(S+E)/2,U=XY(I,F),X=U>=0?1:-1,K,re;i==="insideStart"?(K=I+X*u,re=L):i==="insideEnd"?(K=F-X*u,re=!L):i==="end"&&(K=F+X*u,re=L),re=U<=0?re:!re;var W=Ca(y,w,R,K),J=Ca(y,w,R,K+(re?1:-1)*359),ie="M".concat(W.x,",").concat(W.y,`
    A`).concat(R,",").concat(R,",0,1,").concat(re?0:1,`,
    `).concat(J.x,",").concat(J.y),he=cn(e.id)?Z0("recharts-radial-line-"):e.id;return He.createElement("text",gy({},n,{dominantBaseline:"central",className:un("recharts-radial-bar-label",s)}),He.createElement("defs",null,He.createElement("path",{id:he,d:ie})),He.createElement("textPath",{xlinkHref:"#".concat(he)},r))},YY=function(e){var r=e.viewBox,n=e.offset,i=e.position,l=r,u=l.cx,s=l.cy,m=l.innerRadius,y=l.outerRadius,w=l.startAngle,S=l.endAngle,E=(w+S)/2;if(i==="outside"){var I=Ca(u,s,y+n,E),F=I.x,L=I.y;return{x:F,y:L,textAnchor:F>=u?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:u,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:u,y:s,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:u,y:s,textAnchor:"middle",verticalAnchor:"end"};var R=(m+y)/2,U=Ca(u,s,R,E),X=U.x,K=U.y;return{x:X,y:K,textAnchor:"middle",verticalAnchor:"middle"}},JY=function(e){var r=e.viewBox,n=e.parentViewBox,i=e.offset,l=e.position,u=r,s=u.x,m=u.y,y=u.width,w=u.height,S=w>=0?1:-1,E=S*i,I=S>0?"end":"start",F=S>0?"start":"end",L=y>=0?1:-1,R=L*i,U=L>0?"end":"start",X=L>0?"start":"end";if(l==="top"){var K={x:s+y/2,y:m-S*i,textAnchor:"middle",verticalAnchor:I};return Vi(Vi({},K),n?{height:Math.max(m-n.y,0),width:y}:{})}if(l==="bottom"){var re={x:s+y/2,y:m+w+E,textAnchor:"middle",verticalAnchor:F};return Vi(Vi({},re),n?{height:Math.max(n.y+n.height-(m+w),0),width:y}:{})}if(l==="left"){var W={x:s-R,y:m+w/2,textAnchor:U,verticalAnchor:"middle"};return Vi(Vi({},W),n?{width:Math.max(W.x-n.x,0),height:w}:{})}if(l==="right"){var J={x:s+y+R,y:m+w/2,textAnchor:X,verticalAnchor:"middle"};return Vi(Vi({},J),n?{width:Math.max(n.x+n.width-J.x,0),height:w}:{})}var ie=n?{width:y,height:w}:{};return l==="insideLeft"?Vi({x:s+R,y:m+w/2,textAnchor:X,verticalAnchor:"middle"},ie):l==="insideRight"?Vi({x:s+y-R,y:m+w/2,textAnchor:U,verticalAnchor:"middle"},ie):l==="insideTop"?Vi({x:s+y/2,y:m+E,textAnchor:"middle",verticalAnchor:F},ie):l==="insideBottom"?Vi({x:s+y/2,y:m+w-E,textAnchor:"middle",verticalAnchor:I},ie):l==="insideTopLeft"?Vi({x:s+R,y:m+E,textAnchor:X,verticalAnchor:F},ie):l==="insideTopRight"?Vi({x:s+y-R,y:m+E,textAnchor:U,verticalAnchor:F},ie):l==="insideBottomLeft"?Vi({x:s+R,y:m+w-E,textAnchor:X,verticalAnchor:I},ie):l==="insideBottomRight"?Vi({x:s+y-R,y:m+w-E,textAnchor:U,verticalAnchor:I},ie):_m(l)&&(Dt(l.x)||id(l.x))&&(Dt(l.y)||id(l.y))?Vi({x:s+yd(l.x,y),y:m+yd(l.y,w),textAnchor:"end",verticalAnchor:"end"},ie):Vi({x:s+y/2,y:m+w/2,textAnchor:"middle",verticalAnchor:"middle"},ie)},QY=function(e){return"cx"in e&&Dt(e.cx)};function Qa(t){var e=t.offset,r=e===void 0?5:e,n=qY(t,FY),i=Vi({offset:r},n),l=i.viewBox,u=i.position,s=i.value,m=i.children,y=i.content,w=i.className,S=w===void 0?"":w,E=i.textBreakAll;if(!l||cn(s)&&cn(m)&&!it.isValidElement(y)&&!Lr(y))return null;if(it.isValidElement(y))return it.cloneElement(y,i);var I;if(Lr(y)){if(I=it.createElement(y,i),it.isValidElement(I))return I}else I=ZY(i);var F=QY(l),L=ln(i,!0);if(F&&(u==="insideStart"||u==="insideEnd"||u==="end"))return KY(i,I,L);var R=F?YY(i):JY(i);return He.createElement(G_,gy({className:un("recharts-label",S)},L,R,{breakAll:E}),I)}Qa.displayName="Label";var n3=function(e){var r=e.cx,n=e.cy,i=e.angle,l=e.startAngle,u=e.endAngle,s=e.r,m=e.radius,y=e.innerRadius,w=e.outerRadius,S=e.x,E=e.y,I=e.top,F=e.left,L=e.width,R=e.height,U=e.clockWise,X=e.labelViewBox;if(X)return X;if(Dt(L)&&Dt(R)){if(Dt(S)&&Dt(E))return{x:S,y:E,width:L,height:R};if(Dt(I)&&Dt(F))return{x:I,y:F,width:L,height:R}}return Dt(S)&&Dt(E)?{x:S,y:E,width:0,height:0}:Dt(r)&&Dt(n)?{cx:r,cy:n,startAngle:l||i||0,endAngle:u||i||0,innerRadius:y||0,outerRadius:w||m||s||0,clockWise:U}:e.viewBox?e.viewBox:{}},eJ=function(e,r){return e?e===!0?He.createElement(Qa,{key:"label-implicit",viewBox:r}):Ui(e)?He.createElement(Qa,{key:"label-implicit",viewBox:r,value:e}):it.isValidElement(e)?e.type===Qa?it.cloneElement(e,{key:"label-implicit",viewBox:r}):He.createElement(Qa,{key:"label-implicit",content:e,viewBox:r}):Lr(e)?He.createElement(Qa,{key:"label-implicit",content:e,viewBox:r}):_m(e)?He.createElement(Qa,gy({viewBox:r},e,{key:"label-implicit"})):null:null},tJ=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var i=e.children,l=n3(e),u=Il(i,Qa).map(function(m,y){return it.cloneElement(m,{viewBox:r||l,key:"label-".concat(y)})});if(!n)return u;var s=eJ(e.label,r||l);return[s].concat(jY(u))};Qa.parseViewBox=n3;Qa.renderCallByParent=tJ;var WS,iz;function rJ(){if(iz)return WS;iz=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return WS=t,WS}var nJ=rJ();const iJ=An(nJ);function yy(t){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yy(t)}var aJ=["valueAccessor"],oJ=["data","dataKey","clockWise","id","textBreakAll"];function sJ(t){return hJ(t)||cJ(t)||uJ(t)||lJ()}function lJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uJ(t,e){if(t){if(typeof t=="string")return PT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PT(t,e)}}function cJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hJ(t){if(Array.isArray(t))return PT(t)}function PT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u0(){return u0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u0.apply(this,arguments)}function az(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function oz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?az(Object(r),!0).forEach(function(n){fJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):az(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fJ(t,e,r){return e=dJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dJ(t){var e=pJ(t,"string");return yy(e)=="symbol"?e:e+""}function pJ(t,e){if(yy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(yy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sz(t,e){if(t==null)return{};var r=mJ(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function mJ(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var gJ=function(e){return Array.isArray(e.value)?iJ(e.value):e.value};function dd(t){var e=t.valueAccessor,r=e===void 0?gJ:e,n=sz(t,aJ),i=n.data,l=n.dataKey,u=n.clockWise,s=n.id,m=n.textBreakAll,y=sz(n,oJ);return!i||!i.length?null:He.createElement(ha,{className:"recharts-label-list"},i.map(function(w,S){var E=cn(l)?r(w,S):Cu(w&&w.payload,l),I=cn(s)?{}:{id:"".concat(s,"-").concat(S)};return He.createElement(Qa,u0({},ln(w,!0),y,I,{parentViewBox:w.parentViewBox,value:E,textBreakAll:m,viewBox:Qa.parseViewBox(cn(u)?w:oz(oz({},w),{},{clockWise:u})),key:"label-".concat(S),index:S}))}))}dd.displayName="LabelList";function yJ(t,e){return t?t===!0?He.createElement(dd,{key:"labelList-implicit",data:e}):He.isValidElement(t)||Lr(t)?He.createElement(dd,{key:"labelList-implicit",data:e,content:t}):_m(t)?He.createElement(dd,u0({data:e},t,{key:"labelList-implicit"})):null:null}function vJ(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,i=Il(n,dd).map(function(u,s){return it.cloneElement(u,{data:e,key:"labelList-".concat(s)})});if(!r)return i;var l=yJ(t.label,e);return[l].concat(sJ(i))}dd.renderCallByParent=vJ;function vy(t){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vy(t)}function AT(){return AT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},AT.apply(this,arguments)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lz(Object(r),!0).forEach(function(n){_J(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _J(t,e,r){return e=xJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xJ(t){var e=bJ(t,"string");return vy(e)=="symbol"?e:e+""}function bJ(t,e){if(vy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(vy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wJ=function(e,r){var n=Ol(r-e),i=Math.min(Math.abs(r-e),359.999);return n*i},f_=function(e){var r=e.cx,n=e.cy,i=e.radius,l=e.angle,u=e.sign,s=e.isExternal,m=e.cornerRadius,y=e.cornerIsExternal,w=m*(s?1:-1)+i,S=Math.asin(m/w)/l0,E=y?l:l+u*S,I=Ca(r,n,w,E),F=Ca(r,n,i,E),L=y?l-u*S:l,R=Ca(r,n,w*Math.cos(S*l0),L);return{center:I,circleTangency:F,lineTangency:R,theta:S}},i3=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,l=e.outerRadius,u=e.startAngle,s=e.endAngle,m=wJ(u,s),y=u+m,w=Ca(r,n,l,u),S=Ca(r,n,l,y),E="M ".concat(w.x,",").concat(w.y,`
    A `).concat(l,",").concat(l,`,0,
    `).concat(+(Math.abs(m)>180),",").concat(+(u>y),`,
    `).concat(S.x,",").concat(S.y,`
  `);if(i>0){var I=Ca(r,n,i,u),F=Ca(r,n,i,y);E+="L ".concat(F.x,",").concat(F.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(m)>180),",").concat(+(u<=y),`,
            `).concat(I.x,",").concat(I.y," Z")}else E+="L ".concat(r,",").concat(n," Z");return E},SJ=function(e){var r=e.cx,n=e.cy,i=e.innerRadius,l=e.outerRadius,u=e.cornerRadius,s=e.forceCornerRadius,m=e.cornerIsExternal,y=e.startAngle,w=e.endAngle,S=Ol(w-y),E=f_({cx:r,cy:n,radius:l,angle:y,sign:S,cornerRadius:u,cornerIsExternal:m}),I=E.circleTangency,F=E.lineTangency,L=E.theta,R=f_({cx:r,cy:n,radius:l,angle:w,sign:-S,cornerRadius:u,cornerIsExternal:m}),U=R.circleTangency,X=R.lineTangency,K=R.theta,re=m?Math.abs(y-w):Math.abs(y-w)-L-K;if(re<0)return s?"M ".concat(F.x,",").concat(F.y,`
        a`).concat(u,",").concat(u,",0,0,1,").concat(u*2,`,0
        a`).concat(u,",").concat(u,",0,0,1,").concat(-u*2,`,0
      `):i3({cx:r,cy:n,innerRadius:i,outerRadius:l,startAngle:y,endAngle:w});var W="M ".concat(F.x,",").concat(F.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(S<0),",").concat(I.x,",").concat(I.y,`
    A`).concat(l,",").concat(l,",0,").concat(+(re>180),",").concat(+(S<0),",").concat(U.x,",").concat(U.y,`
    A`).concat(u,",").concat(u,",0,0,").concat(+(S<0),",").concat(X.x,",").concat(X.y,`
  `);if(i>0){var J=f_({cx:r,cy:n,radius:i,angle:y,sign:S,isExternal:!0,cornerRadius:u,cornerIsExternal:m}),ie=J.circleTangency,he=J.lineTangency,ve=J.theta,Re=f_({cx:r,cy:n,radius:i,angle:w,sign:-S,isExternal:!0,cornerRadius:u,cornerIsExternal:m}),de=Re.circleTangency,Oe=Re.lineTangency,Le=Re.theta,Ge=m?Math.abs(y-w):Math.abs(y-w)-ve-Le;if(Ge<0&&u===0)return"".concat(W,"L").concat(r,",").concat(n,"Z");W+="L".concat(Oe.x,",").concat(Oe.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(S<0),",").concat(de.x,",").concat(de.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(Ge>180),",").concat(+(S>0),",").concat(ie.x,",").concat(ie.y,`
      A`).concat(u,",").concat(u,",0,0,").concat(+(S<0),",").concat(he.x,",").concat(he.y,"Z")}else W+="L".concat(r,",").concat(n,"Z");return W},TJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},a3=function(e){var r=uz(uz({},TJ),e),n=r.cx,i=r.cy,l=r.innerRadius,u=r.outerRadius,s=r.cornerRadius,m=r.forceCornerRadius,y=r.cornerIsExternal,w=r.startAngle,S=r.endAngle,E=r.className;if(u<l||w===S)return null;var I=un("recharts-sector",E),F=u-l,L=yd(s,F,0,!0),R;return L>0&&Math.abs(w-S)<360?R=SJ({cx:n,cy:i,innerRadius:l,outerRadius:u,cornerRadius:Math.min(L,F/2),forceCornerRadius:m,cornerIsExternal:y,startAngle:w,endAngle:S}):R=i3({cx:n,cy:i,innerRadius:l,outerRadius:u,startAngle:w,endAngle:S}),He.createElement("path",AT({},ln(r,!0),{className:I,d:R,role:"img"}))};function _y(t){"@babel/helpers - typeof";return _y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_y(t)}function kT(){return kT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},kT.apply(this,arguments)}function cz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cz(Object(r),!0).forEach(function(n){PJ(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function PJ(t,e,r){return e=AJ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function AJ(t){var e=kJ(t,"string");return _y(e)=="symbol"?e:e+""}function kJ(t,e){if(_y(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_y(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fz={curveBasisClosed:HW,curveBasisOpen:GW,curveBasis:WW,curveBumpX:OW,curveBumpY:IW,curveLinearClosed:ZW,curveLinear:Y0,curveMonotoneX:XW,curveMonotoneY:KW,curveNatural:YW,curveStep:JW,curveStepAfter:eH,curveStepBefore:QW},d_=function(e){return e.x===+e.x&&e.y===+e.y},wg=function(e){return e.x},Sg=function(e){return e.y},EJ=function(e,r){if(Lr(e))return e;var n="curve".concat(X0(e));return(n==="curveMonotone"||n==="curveBump")&&r?fz["".concat(n).concat(r==="vertical"?"Y":"X")]:fz[n]||Y0},MJ=function(e){var r=e.type,n=r===void 0?"linear":r,i=e.points,l=i===void 0?[]:i,u=e.baseLine,s=e.layout,m=e.connectNulls,y=m===void 0?!1:m,w=EJ(n,s),S=y?l.filter(function(L){return d_(L)}):l,E;if(Array.isArray(u)){var I=y?u.filter(function(L){return d_(L)}):u,F=S.map(function(L,R){return hz(hz({},L),{},{base:I[R]})});return s==="vertical"?E=i_().y(Sg).x1(wg).x0(function(L){return L.base.x}):E=i_().x(wg).y1(Sg).y0(function(L){return L.base.y}),E.defined(d_).curve(w),E(F)}return s==="vertical"&&Dt(u)?E=i_().y(Sg).x1(wg).x0(u):Dt(u)?E=i_().x(wg).y1(Sg).y0(u):E=uj().x(wg).y(Sg),E.defined(d_).curve(w),E(S)},dz=function(e){var r=e.className,n=e.points,i=e.path,l=e.pathRef;if((!n||!n.length)&&!i)return null;var u=n&&n.length?MJ(e):i;return it.createElement("path",kT({},ln(e,!1),R_(e),{className:un("recharts-curve",r),d:u,ref:l}))},HS={exports:{}},GS,pz;function CJ(){if(pz)return GS;pz=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return GS=t,GS}var ZS,mz;function OJ(){if(mz)return ZS;mz=1;var t=CJ();function e(){}function r(){}return r.resetWarningCache=e,ZS=function(){function n(u,s,m,y,w,S){if(S!==t){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}n.isRequired=n;function i(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:r,resetWarningCache:e};return l.PropTypes=l,l},ZS}var gz;function IJ(){return gz||(gz=1,HS.exports=OJ()()),HS.exports}var DJ=IJ();const gn=An(DJ);var zJ=Object.getOwnPropertyNames,RJ=Object.getOwnPropertySymbols,LJ=Object.prototype.hasOwnProperty;function yz(t,e){return function(n,i,l){return t(n,i,l)&&e(n,i,l)}}function p_(t){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,i);var l=i.cache,u=l.get(r),s=l.get(n);if(u&&s)return u===n&&s===r;l.set(r,n),l.set(n,r);var m=t(r,n,i);return l.delete(r),l.delete(n),m}}function vz(t){return zJ(t).concat(RJ(t))}var FJ=Object.hasOwn||(function(t,e){return LJ.call(t,e)});function Ad(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var jJ="__v",BJ="__o",NJ="_owner",_z=Object.getOwnPropertyDescriptor,xz=Object.keys;function $J(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function VJ(t,e){return Ad(t.getTime(),e.getTime())}function qJ(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function UJ(t,e){return t===e}function bz(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),l=t.entries(),u,s,m=0;(u=l.next())&&!u.done;){for(var y=e.entries(),w=!1,S=0;(s=y.next())&&!s.done;){if(i[S]){S++;continue}var E=u.value,I=s.value;if(r.equals(E[0],I[0],m,S,t,e,r)&&r.equals(E[1],I[1],E[0],I[0],t,e,r)){w=i[S]=!0;break}S++}if(!w)return!1;m++}return!0}var WJ=Ad;function HJ(t,e,r){var n=xz(t),i=n.length;if(xz(e).length!==i)return!1;for(;i-- >0;)if(!o3(t,e,r,n[i]))return!1;return!0}function Tg(t,e,r){var n=vz(t),i=n.length;if(vz(e).length!==i)return!1;for(var l,u,s;i-- >0;)if(l=n[i],!o3(t,e,r,l)||(u=_z(t,l),s=_z(e,l),(u||s)&&(!u||!s||u.configurable!==s.configurable||u.enumerable!==s.enumerable||u.writable!==s.writable)))return!1;return!0}function GJ(t,e){return Ad(t.valueOf(),e.valueOf())}function ZJ(t,e){return t.source===e.source&&t.flags===e.flags}function wz(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var i=new Array(n),l=t.values(),u,s;(u=l.next())&&!u.done;){for(var m=e.values(),y=!1,w=0;(s=m.next())&&!s.done;){if(!i[w]&&r.equals(u.value,s.value,u.value,s.value,t,e,r)){y=i[w]=!0;break}w++}if(!y)return!1}return!0}function XJ(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function KJ(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function o3(t,e,r,n){return(n===NJ||n===BJ||n===jJ)&&(t.$$typeof||e.$$typeof)?!0:FJ(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var YJ="[object Arguments]",JJ="[object Boolean]",QJ="[object Date]",eQ="[object Error]",tQ="[object Map]",rQ="[object Number]",nQ="[object Object]",iQ="[object RegExp]",aQ="[object Set]",oQ="[object String]",sQ="[object URL]",lQ=Array.isArray,Sz=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Tz=Object.assign,uQ=Object.prototype.toString.call.bind(Object.prototype.toString);function cQ(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,i=t.areFunctionsEqual,l=t.areMapsEqual,u=t.areNumbersEqual,s=t.areObjectsEqual,m=t.arePrimitiveWrappersEqual,y=t.areRegExpsEqual,w=t.areSetsEqual,S=t.areTypedArraysEqual,E=t.areUrlsEqual;return function(F,L,R){if(F===L)return!0;if(F==null||L==null)return!1;var U=typeof F;if(U!==typeof L)return!1;if(U!=="object")return U==="number"?u(F,L,R):U==="function"?i(F,L,R):!1;var X=F.constructor;if(X!==L.constructor)return!1;if(X===Object)return s(F,L,R);if(lQ(F))return e(F,L,R);if(Sz!=null&&Sz(F))return S(F,L,R);if(X===Date)return r(F,L,R);if(X===RegExp)return y(F,L,R);if(X===Map)return l(F,L,R);if(X===Set)return w(F,L,R);var K=uQ(F);return K===QJ?r(F,L,R):K===iQ?y(F,L,R):K===tQ?l(F,L,R):K===aQ?w(F,L,R):K===nQ?typeof F.then!="function"&&typeof L.then!="function"&&s(F,L,R):K===sQ?E(F,L,R):K===eQ?n(F,L,R):K===YJ?s(F,L,R):K===JJ||K===rQ||K===oQ?m(F,L,R):!1}}function hQ(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,i={areArraysEqual:n?Tg:$J,areDatesEqual:VJ,areErrorsEqual:qJ,areFunctionsEqual:UJ,areMapsEqual:n?yz(bz,Tg):bz,areNumbersEqual:WJ,areObjectsEqual:n?Tg:HJ,arePrimitiveWrappersEqual:GJ,areRegExpsEqual:ZJ,areSetsEqual:n?yz(wz,Tg):wz,areTypedArraysEqual:n?Tg:XJ,areUrlsEqual:KJ};if(r&&(i=Tz({},i,r(i))),e){var l=p_(i.areArraysEqual),u=p_(i.areMapsEqual),s=p_(i.areObjectsEqual),m=p_(i.areSetsEqual);i=Tz({},i,{areArraysEqual:l,areMapsEqual:u,areObjectsEqual:s,areSetsEqual:m})}return i}function fQ(t){return function(e,r,n,i,l,u,s){return t(e,r,s)}}function dQ(t){var e=t.circular,r=t.comparator,n=t.createState,i=t.equals,l=t.strict;if(n)return function(m,y){var w=n(),S=w.cache,E=S===void 0?e?new WeakMap:void 0:S,I=w.meta;return r(m,y,{cache:E,equals:i,meta:I,strict:l})};if(e)return function(m,y){return r(m,y,{cache:new WeakMap,equals:i,meta:void 0,strict:l})};var u={cache:void 0,equals:i,meta:void 0,strict:l};return function(m,y){return r(m,y,u)}}var pQ=Nh();Nh({strict:!0});Nh({circular:!0});Nh({circular:!0,strict:!0});Nh({createInternalComparator:function(){return Ad}});Nh({strict:!0,createInternalComparator:function(){return Ad}});Nh({circular:!0,createInternalComparator:function(){return Ad}});Nh({circular:!0,createInternalComparator:function(){return Ad},strict:!0});function Nh(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,i=t.createState,l=t.strict,u=l===void 0?!1:l,s=hQ(t),m=cQ(s),y=n?n(m):fQ(m);return dQ({circular:r,comparator:m,createState:i,equals:y,strict:u})}function mQ(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Pz(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(l){r<0&&(r=l),l-r>e?(t(l),r=-1):mQ(i)};requestAnimationFrame(n)}function ET(t){"@babel/helpers - typeof";return ET=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ET(t)}function gQ(t){return xQ(t)||_Q(t)||vQ(t)||yQ()}function yQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vQ(t,e){if(t){if(typeof t=="string")return Az(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Az(t,e)}}function Az(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _Q(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function xQ(t){if(Array.isArray(t))return t}function bQ(){var t={},e=function(){return null},r=!1,n=function i(l){if(!r){if(Array.isArray(l)){if(!l.length)return;var u=l,s=gQ(u),m=s[0],y=s.slice(1);if(typeof m=="number"){Pz(i.bind(null,y),m);return}i(m),Pz(i.bind(null,y));return}ET(l)==="object"&&(t=l,e(t)),typeof l=="function"&&l()}};return{stop:function(){r=!0},start:function(l){r=!1,n(l)},subscribe:function(l){return e=l,function(){e=function(){return null}}}}}function xy(t){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xy(t)}function kz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ez(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kz(Object(r),!0).forEach(function(n){s3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function s3(t,e,r){return e=wQ(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wQ(t){var e=SQ(t,"string");return xy(e)==="symbol"?e:String(e)}function SQ(t,e){if(xy(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xy(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TQ=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,i){return n.filter(function(l){return i.includes(l)})})},PQ=function(e){return e},AQ=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Ug=function(e,r){return Object.keys(r).reduce(function(n,i){return Ez(Ez({},n),{},s3({},i,e(i,r[i])))},{})},Mz=function(e,r,n){return e.map(function(i){return"".concat(AQ(i)," ").concat(r,"ms ").concat(n)}).join(",")};function kQ(t,e){return CQ(t)||MQ(t,e)||l3(t,e)||EQ()}function EQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function CQ(t){if(Array.isArray(t))return t}function OQ(t){return zQ(t)||DQ(t)||l3(t)||IQ()}function IQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l3(t,e){if(t){if(typeof t=="string")return MT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MT(t,e)}}function DQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zQ(t){if(Array.isArray(t))return MT(t)}function MT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c0=1e-4,u3=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},c3=function(e,r){return e.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Cz=function(e,r){return function(n){var i=u3(e,r);return c3(i,n)}},RQ=function(e,r){return function(n){var i=u3(e,r),l=[].concat(OQ(i.map(function(u,s){return u*s}).slice(1)),[0]);return c3(l,n)}},Oz=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0],l=r[1],u=r[2],s=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,l=0,u=1,s=1;break;case"ease":i=.25,l=.1,u=.25,s=1;break;case"ease-in":i=.42,l=0,u=1,s=1;break;case"ease-out":i=.42,l=0,u=.58,s=1;break;case"ease-in-out":i=0,l=0,u=.58,s=1;break;default:{var m=r[0].split("(");if(m[0]==="cubic-bezier"&&m[1].split(")")[0].split(",").length===4){var y=m[1].split(")")[0].split(",").map(function(R){return parseFloat(R)}),w=kQ(y,4);i=w[0],l=w[1],u=w[2],s=w[3]}}}var S=Cz(i,u),E=Cz(l,s),I=RQ(i,u),F=function(U){return U>1?1:U<0?0:U},L=function(U){for(var X=U>1?1:U,K=X,re=0;re<8;++re){var W=S(K)-X,J=I(K);if(Math.abs(W-X)<c0||J<c0)return E(K);K=F(K-W/J)}return E(K)};return L.isStepper=!1,L},LQ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,i=e.damping,l=i===void 0?8:i,u=e.dt,s=u===void 0?17:u,m=function(w,S,E){var I=-(w-S)*n,F=E*l,L=E+(I-F)*s/1e3,R=E*s/1e3+w;return Math.abs(R-S)<c0&&Math.abs(L)<c0?[S,0]:[R,L]};return m.isStepper=!0,m.dt=s,m},FQ=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Oz(i);case"spring":return LQ();default:if(i.split("(")[0]==="cubic-bezier")return Oz(i)}return typeof i=="function"?i:null};function by(t){"@babel/helpers - typeof";return by=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},by(t)}function Iz(t){return NQ(t)||BQ(t)||h3(t)||jQ()}function jQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function NQ(t){if(Array.isArray(t))return OT(t)}function Dz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ma(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(r),!0).forEach(function(n){CT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CT(t,e,r){return e=$Q(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $Q(t){var e=VQ(t,"string");return by(e)==="symbol"?e:String(e)}function VQ(t,e){if(by(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(by(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qQ(t,e){return HQ(t)||WQ(t,e)||h3(t,e)||UQ()}function UQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h3(t,e){if(t){if(typeof t=="string")return OT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(t,e)}}function OT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WQ(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function HQ(t){if(Array.isArray(t))return t}var h0=function(e,r,n){return e+(r-e)*n},IT=function(e){var r=e.from,n=e.to;return r!==n},GQ=function t(e,r,n){var i=Ug(function(l,u){if(IT(u)){var s=e(u.from,u.to,u.velocity),m=qQ(s,2),y=m[0],w=m[1];return Ma(Ma({},u),{},{from:y,velocity:w})}return u},r);return n<1?Ug(function(l,u){return IT(u)?Ma(Ma({},u),{},{velocity:h0(u.velocity,i[l].velocity,n),from:h0(u.from,i[l].from,n)}):u},r):t(e,i,n-1)};const ZQ=(function(t,e,r,n,i){var l=TQ(t,e),u=l.reduce(function(R,U){return Ma(Ma({},R),{},CT({},U,[t[U],e[U]]))},{}),s=l.reduce(function(R,U){return Ma(Ma({},R),{},CT({},U,{from:t[U],velocity:0,to:e[U]}))},{}),m=-1,y,w,S=function(){return null},E=function(){return Ug(function(U,X){return X.from},s)},I=function(){return!Object.values(s).filter(IT).length},F=function(U){y||(y=U);var X=U-y,K=X/r.dt;s=GQ(r,s,K),i(Ma(Ma(Ma({},t),e),E())),y=U,I()||(m=requestAnimationFrame(S))},L=function(U){w||(w=U);var X=(U-w)/n,K=Ug(function(W,J){return h0.apply(void 0,Iz(J).concat([r(X)]))},u);if(i(Ma(Ma(Ma({},t),e),K)),X<1)m=requestAnimationFrame(S);else{var re=Ug(function(W,J){return h0.apply(void 0,Iz(J).concat([r(1)]))},u);i(Ma(Ma(Ma({},t),e),re))}};return S=r.isStepper?F:L,function(){return requestAnimationFrame(S),function(){cancelAnimationFrame(m)}}});function rm(t){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rm(t)}var XQ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KQ(t,e){if(t==null)return{};var r=YQ(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function YQ(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function XS(t){return tee(t)||eee(t)||QQ(t)||JQ()}function JQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QQ(t,e){if(t){if(typeof t=="string")return DT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return DT(t,e)}}function eee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tee(t){if(Array.isArray(t))return DT(t)}function DT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function zz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Al(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zz(Object(r),!0).forEach(function(n){Rg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rg(t,e,r){return e=f3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ree(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f3(n.key),n)}}function iee(t,e,r){return e&&nee(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function f3(t){var e=aee(t,"string");return rm(e)==="symbol"?e:String(e)}function aee(t,e){if(rm(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(rm(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zT(t,e)}function zT(t,e){return zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zT(t,e)}function see(t){var e=lee();return function(){var n=f0(t),i;if(e){var l=f0(this).constructor;i=Reflect.construct(n,arguments,l)}else i=n.apply(this,arguments);return RT(this,i)}}function RT(t,e){if(e&&(rm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LT(t)}function LT(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lee(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f0(t){return f0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},f0(t)}var Dh=(function(t){oee(r,t);var e=see(r);function r(n,i){var l;ree(this,r),l=e.call(this,n,i);var u=l.props,s=u.isActive,m=u.attributeName,y=u.from,w=u.to,S=u.steps,E=u.children,I=u.duration;if(l.handleStyleChange=l.handleStyleChange.bind(LT(l)),l.changeStyle=l.changeStyle.bind(LT(l)),!s||I<=0)return l.state={style:{}},typeof E=="function"&&(l.state={style:w}),RT(l);if(S&&S.length)l.state={style:S[0].style};else if(y){if(typeof E=="function")return l.state={style:y},RT(l);l.state={style:m?Rg({},m,y):y}}else l.state={style:{}};return l}return iee(r,[{key:"componentDidMount",value:function(){var i=this.props,l=i.isActive,u=i.canBegin;this.mounted=!0,!(!l||!u)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var l=this.props,u=l.isActive,s=l.canBegin,m=l.attributeName,y=l.shouldReAnimate,w=l.to,S=l.from,E=this.state.style;if(s){if(!u){var I={style:m?Rg({},m,w):w};this.state&&E&&(m&&E[m]!==w||!m&&E!==w)&&this.setState(I);return}if(!(pQ(i.to,w)&&i.canBegin&&i.isActive)){var F=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var L=F||y?S:i.to;if(this.state&&E){var R={style:m?Rg({},m,L):L};(m&&E[m]!==L||!m&&E!==L)&&this.setState(R)}this.runAnimation(Al(Al({},this.props),{},{from:L,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var l=this,u=i.from,s=i.to,m=i.duration,y=i.easing,w=i.begin,S=i.onAnimationEnd,E=i.onAnimationStart,I=ZQ(u,s,FQ(y),m,this.changeStyle),F=function(){l.stopJSAnimation=I()};this.manager.start([E,w,F,m,S])}},{key:"runStepAnimation",value:function(i){var l=this,u=i.steps,s=i.begin,m=i.onAnimationStart,y=u[0],w=y.style,S=y.duration,E=S===void 0?0:S,I=function(L,R,U){if(U===0)return L;var X=R.duration,K=R.easing,re=K===void 0?"ease":K,W=R.style,J=R.properties,ie=R.onAnimationEnd,he=U>0?u[U-1]:R,ve=J||Object.keys(W);if(typeof re=="function"||re==="spring")return[].concat(XS(L),[l.runJSAnimation.bind(l,{from:he.style,to:W,duration:X,easing:re}),X]);var Re=Mz(ve,X,re),de=Al(Al(Al({},he.style),W),{},{transition:Re});return[].concat(XS(L),[de,X,ie]).filter(PQ)};return this.manager.start([m].concat(XS(u.reduce(I,[w,Math.max(E,s)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=bQ());var l=i.begin,u=i.duration,s=i.attributeName,m=i.to,y=i.easing,w=i.onAnimationStart,S=i.onAnimationEnd,E=i.steps,I=i.children,F=this.manager;if(this.unSubscribe=F.subscribe(this.handleStyleChange),typeof y=="function"||typeof I=="function"||y==="spring"){this.runJSAnimation(i);return}if(E.length>1){this.runStepAnimation(i);return}var L=s?Rg({},s,m):m,R=Mz(Object.keys(L),u,y);F.start([w,l,Al(Al({},L),{},{transition:R}),u,S])}},{key:"render",value:function(){var i=this.props,l=i.children;i.begin;var u=i.duration;i.attributeName,i.easing;var s=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var m=KQ(i,XQ),y=it.Children.count(l),w=this.state.style;if(typeof l=="function")return l(w);if(!s||y===0||u<=0)return l;var S=function(I){var F=I.props,L=F.style,R=L===void 0?{}:L,U=F.className,X=it.cloneElement(I,Al(Al({},m),{},{style:Al(Al({},R),w),className:U}));return X};return y===1?S(it.Children.only(l)):He.createElement("div",null,it.Children.map(l,function(E){return S(E)}))}}]),r})(it.PureComponent);Dh.displayName="Animate";Dh.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Dh.propTypes={from:gn.oneOfType([gn.object,gn.string]),to:gn.oneOfType([gn.object,gn.string]),attributeName:gn.string,duration:gn.number,begin:gn.number,easing:gn.oneOfType([gn.string,gn.func]),steps:gn.arrayOf(gn.shape({duration:gn.number.isRequired,style:gn.object.isRequired,easing:gn.oneOfType([gn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),gn.func]),properties:gn.arrayOf("string"),onAnimationEnd:gn.func})),children:gn.oneOfType([gn.node,gn.func]),isActive:gn.bool,canBegin:gn.bool,onAnimationEnd:gn.func,shouldReAnimate:gn.bool,onAnimationStart:gn.func,onAnimationReStart:gn.func};function wy(t){"@babel/helpers - typeof";return wy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wy(t)}function d0(){return d0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},d0.apply(this,arguments)}function uee(t,e){return dee(t)||fee(t,e)||hee(t,e)||cee()}function cee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hee(t,e){if(t){if(typeof t=="string")return Rz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rz(t,e)}}function Rz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fee(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function dee(t){if(Array.isArray(t))return t}function Lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Fz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Lz(Object(r),!0).forEach(function(n){pee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function pee(t,e,r){return e=mee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mee(t){var e=gee(t,"string");return wy(e)=="symbol"?e:e+""}function gee(t,e){if(wy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(wy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jz=function(e,r,n,i,l){var u=Math.min(Math.abs(n)/2,Math.abs(i)/2),s=i>=0?1:-1,m=n>=0?1:-1,y=i>=0&&n>=0||i<0&&n<0?1:0,w;if(u>0&&l instanceof Array){for(var S=[0,0,0,0],E=0,I=4;E<I;E++)S[E]=l[E]>u?u:l[E];w="M".concat(e,",").concat(r+s*S[0]),S[0]>0&&(w+="A ".concat(S[0],",").concat(S[0],",0,0,").concat(y,",").concat(e+m*S[0],",").concat(r)),w+="L ".concat(e+n-m*S[1],",").concat(r),S[1]>0&&(w+="A ".concat(S[1],",").concat(S[1],",0,0,").concat(y,`,
        `).concat(e+n,",").concat(r+s*S[1])),w+="L ".concat(e+n,",").concat(r+i-s*S[2]),S[2]>0&&(w+="A ".concat(S[2],",").concat(S[2],",0,0,").concat(y,`,
        `).concat(e+n-m*S[2],",").concat(r+i)),w+="L ".concat(e+m*S[3],",").concat(r+i),S[3]>0&&(w+="A ".concat(S[3],",").concat(S[3],",0,0,").concat(y,`,
        `).concat(e,",").concat(r+i-s*S[3])),w+="Z"}else if(u>0&&l===+l&&l>0){var F=Math.min(u,l);w="M ".concat(e,",").concat(r+s*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(y,",").concat(e+m*F,",").concat(r,`
            L `).concat(e+n-m*F,",").concat(r,`
            A `).concat(F,",").concat(F,",0,0,").concat(y,",").concat(e+n,",").concat(r+s*F,`
            L `).concat(e+n,",").concat(r+i-s*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(y,",").concat(e+n-m*F,",").concat(r+i,`
            L `).concat(e+m*F,",").concat(r+i,`
            A `).concat(F,",").concat(F,",0,0,").concat(y,",").concat(e,",").concat(r+i-s*F," Z")}else w="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return w},yee=function(e,r){if(!e||!r)return!1;var n=e.x,i=e.y,l=r.x,u=r.y,s=r.width,m=r.height;if(Math.abs(s)>0&&Math.abs(m)>0){var y=Math.min(l,l+s),w=Math.max(l,l+s),S=Math.min(u,u+m),E=Math.max(u,u+m);return n>=y&&n<=w&&i>=S&&i<=E}return!1},vee={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TA=function(e){var r=Fz(Fz({},vee),e),n=it.useRef(),i=it.useState(-1),l=uee(i,2),u=l[0],s=l[1];it.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var re=n.current.getTotalLength();re&&s(re)}catch{}},[]);var m=r.x,y=r.y,w=r.width,S=r.height,E=r.radius,I=r.className,F=r.animationEasing,L=r.animationDuration,R=r.animationBegin,U=r.isAnimationActive,X=r.isUpdateAnimationActive;if(m!==+m||y!==+y||w!==+w||S!==+S||w===0||S===0)return null;var K=un("recharts-rectangle",I);return X?He.createElement(Dh,{canBegin:u>0,from:{width:w,height:S,x:m,y},to:{width:w,height:S,x:m,y},duration:L,animationEasing:F,isActive:X},function(re){var W=re.width,J=re.height,ie=re.x,he=re.y;return He.createElement(Dh,{canBegin:u>0,from:"0px ".concat(u===-1?1:u,"px"),to:"".concat(u,"px 0px"),attributeName:"strokeDasharray",begin:R,duration:L,isActive:U,easing:F},He.createElement("path",d0({},ln(r,!0),{className:K,d:jz(ie,he,W,J,E),ref:n})))}):He.createElement("path",d0({},ln(r,!0),{className:K,d:jz(m,y,w,S,E)}))};function FT(){return FT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},FT.apply(this,arguments)}var d3=function(e){var r=e.cx,n=e.cy,i=e.r,l=e.className,u=un("recharts-dot",l);return r===+r&&n===+n&&i===+i?it.createElement("circle",FT({},ln(e,!1),R_(e),{className:u,cx:r,cy:n,r:i})):null};function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}var _ee=["x","y","top","left","width","height","className"];function jT(){return jT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},jT.apply(this,arguments)}function Bz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function xee(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bz(Object(r),!0).forEach(function(n){bee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function bee(t,e,r){return e=wee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wee(t){var e=See(t,"string");return Sy(e)=="symbol"?e:e+""}function See(t,e){if(Sy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Sy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tee(t,e){if(t==null)return{};var r=Pee(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Pee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Aee=function(e,r,n,i,l,u){return"M".concat(e,",").concat(l,"v").concat(i,"M").concat(u,",").concat(r,"h").concat(n)},kee=function(e){var r=e.x,n=r===void 0?0:r,i=e.y,l=i===void 0?0:i,u=e.top,s=u===void 0?0:u,m=e.left,y=m===void 0?0:m,w=e.width,S=w===void 0?0:w,E=e.height,I=E===void 0?0:E,F=e.className,L=Tee(e,_ee),R=xee({x:n,y:l,top:s,left:y,width:S,height:I},L);return!Dt(n)||!Dt(l)||!Dt(S)||!Dt(I)||!Dt(s)||!Dt(y)?null:He.createElement("path",jT({},ln(R,!0),{className:un("recharts-cross",F),d:Aee(n,l,S,I,s,y)}))},KS,Nz;function Eee(){if(Nz)return KS;Nz=1;var t=Ij(),e=t(Object.getPrototypeOf,Object);return KS=e,KS}var YS,$z;function Mee(){if($z)return YS;$z=1;var t=Dc(),e=Eee(),r=zc(),n="[object Object]",i=Function.prototype,l=Object.prototype,u=i.toString,s=l.hasOwnProperty,m=u.call(Object);function y(w){if(!r(w)||t(w)!=n)return!1;var S=e(w);if(S===null)return!0;var E=s.call(S,"constructor")&&S.constructor;return typeof E=="function"&&E instanceof E&&u.call(E)==m}return YS=y,YS}var Cee=Mee();const Oee=An(Cee);var JS,Vz;function Iee(){if(Vz)return JS;Vz=1;var t=Dc(),e=zc(),r="[object Boolean]";function n(i){return i===!0||i===!1||e(i)&&t(i)==r}return JS=n,JS}var Dee=Iee();const zee=An(Dee);function Ty(t){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ty(t)}function p0(){return p0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},p0.apply(this,arguments)}function Ree(t,e){return Bee(t)||jee(t,e)||Fee(t,e)||Lee()}function Lee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fee(t,e){if(t){if(typeof t=="string")return qz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qz(t,e)}}function qz(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jee(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function Bee(t){if(Array.isArray(t))return t}function Uz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Wz(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(r),!0).forEach(function(n){Nee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Nee(t,e,r){return e=$ee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ee(t){var e=Vee(t,"string");return Ty(e)=="symbol"?e:e+""}function Vee(t,e){if(Ty(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ty(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Hz=function(e,r,n,i,l){var u=n-i,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+n,",").concat(r),s+="L ".concat(e+n-u/2,",").concat(r+l),s+="L ".concat(e+n-u/2-i,",").concat(r+l),s+="L ".concat(e,",").concat(r," Z"),s},qee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Uee=function(e){var r=Wz(Wz({},qee),e),n=it.useRef(),i=it.useState(-1),l=Ree(i,2),u=l[0],s=l[1];it.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var K=n.current.getTotalLength();K&&s(K)}catch{}},[]);var m=r.x,y=r.y,w=r.upperWidth,S=r.lowerWidth,E=r.height,I=r.className,F=r.animationEasing,L=r.animationDuration,R=r.animationBegin,U=r.isUpdateAnimationActive;if(m!==+m||y!==+y||w!==+w||S!==+S||E!==+E||w===0&&S===0||E===0)return null;var X=un("recharts-trapezoid",I);return U?He.createElement(Dh,{canBegin:u>0,from:{upperWidth:0,lowerWidth:0,height:E,x:m,y},to:{upperWidth:w,lowerWidth:S,height:E,x:m,y},duration:L,animationEasing:F,isActive:U},function(K){var re=K.upperWidth,W=K.lowerWidth,J=K.height,ie=K.x,he=K.y;return He.createElement(Dh,{canBegin:u>0,from:"0px ".concat(u===-1?1:u,"px"),to:"".concat(u,"px 0px"),attributeName:"strokeDasharray",begin:R,duration:L,easing:F},He.createElement("path",p0({},ln(r,!0),{className:X,d:Hz(ie,he,re,W,J),ref:n})))}):He.createElement("g",null,He.createElement("path",p0({},ln(r,!0),{className:X,d:Hz(m,y,w,S,E)})))},Wee=["option","shapeType","propTransformer","activeClassName","isActive"];function Py(t){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Py(t)}function Hee(t,e){if(t==null)return{};var r=Gee(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gee(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Gz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(r),!0).forEach(function(n){Zee(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Gz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zee(t,e,r){return e=Xee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xee(t){var e=Kee(t,"string");return Py(e)=="symbol"?e:e+""}function Kee(t,e){if(Py(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Py(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yee(t,e){return m0(m0({},e),t)}function Jee(t,e){return t==="symbols"}function Zz(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return He.createElement(TA,r);case"trapezoid":return He.createElement(Uee,r);case"sector":return He.createElement(a3,r);case"symbols":if(Jee(e))return He.createElement(VP,r);break;default:return null}}function Qee(t){return it.isValidElement(t)?t.props:t}function ete(t){var e=t.option,r=t.shapeType,n=t.propTransformer,i=n===void 0?Yee:n,l=t.activeClassName,u=l===void 0?"recharts-active-shape":l,s=t.isActive,m=Hee(t,Wee),y;if(it.isValidElement(e))y=it.cloneElement(e,m0(m0({},m),Qee(e)));else if(Lr(e))y=e(m);else if(Oee(e)&&!zee(e)){var w=i(e,m);y=He.createElement(Zz,{shapeType:r,elementProps:w})}else{var S=m;y=He.createElement(Zz,{shapeType:r,elementProps:S})}return s?He.createElement(ha,{className:u},y):y}function dx(t,e){return e!=null&&"trapezoids"in t.props}function px(t,e){return e!=null&&"sectors"in t.props}function Ay(t,e){return e!=null&&"points"in t.props}function tte(t,e){var r,n,i=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,l=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return i&&l}function rte(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function nte(t,e){var r=t.x===e.x,n=t.y===e.y,i=t.z===e.z;return r&&n&&i}function ite(t,e){var r;return dx(t,e)?r=tte:px(t,e)?r=rte:Ay(t,e)&&(r=nte),r}function ate(t,e){var r;return dx(t,e)?r="trapezoids":px(t,e)?r="sectors":Ay(t,e)&&(r="points"),r}function ote(t,e){if(dx(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(px(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ay(t,e)?e.payload:{}}function ste(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,i=ate(r,e),l=ote(r,e),u=n.filter(function(m,y){var w=xA(l,m),S=r.props[i].filter(function(F){var L=ite(r,e);return L(F,e)}),E=r.props[i].indexOf(S[S.length-1]),I=y===E;return w&&I}),s=n.indexOf(u[u.length-1]);return s}var QS,Xz;function lte(){if(Xz)return QS;Xz=1;var t=Math.ceil,e=Math.max;function r(n,i,l,u){for(var s=-1,m=e(t((i-n)/(l||1)),0),y=Array(m);m--;)y[u?m:++s]=n,n+=l;return y}return QS=r,QS}var e2,Kz;function p3(){if(Kz)return e2;Kz=1;var t=Zj(),e=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var l=i<0?-1:1;return l*r}return i===i?i:0}return e2=n,e2}var t2,Yz;function ute(){if(Yz)return t2;Yz=1;var t=lte(),e=tx(),r=p3();function n(i){return function(l,u,s){return s&&typeof s!="number"&&e(l,u,s)&&(u=s=void 0),l=r(l),u===void 0?(u=l,l=0):u=r(u),s=s===void 0?l<u?1:-1:r(s),t(l,u,s,i)}}return t2=n,t2}var r2,Jz;function cte(){if(Jz)return r2;Jz=1;var t=ute(),e=t();return r2=e,r2}var hte=cte();const g0=An(hte);function ky(t){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ky(t)}function Qz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qz(Object(r),!0).forEach(function(n){m3(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m3(t,e,r){return e=fte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fte(t){var e=dte(t,"string");return ky(e)=="symbol"?e:e+""}function dte(t,e){if(ky(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ky(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pte=["Webkit","Moz","O","ms"],mte=function(e,r){var n=e.replace(/(\w)/,function(l){return l.toUpperCase()}),i=pte.reduce(function(l,u){return eR(eR({},l),{},m3({},u+n,r))},{});return i[e]=r,i};function nm(t){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nm(t)}function y0(){return y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},y0.apply(this,arguments)}function tR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function n2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tR(Object(r),!0).forEach(function(n){ys(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y3(n.key),n)}}function yte(t,e,r){return e&&rR(t.prototype,e),r&&rR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vte(t,e,r){return e=v0(e),_te(t,g3()?Reflect.construct(e,r||[],v0(t).constructor):e.apply(t,r))}function _te(t,e){if(e&&(nm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xte(t)}function xte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g3=function(){return!!t})()}function v0(t){return v0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},v0(t)}function bte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BT(t,e)}function BT(t,e){return BT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},BT(t,e)}function ys(t,e,r){return e=y3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function y3(t){var e=wte(t,"string");return nm(e)=="symbol"?e:e+""}function wte(t,e){if(nm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(nm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ste=function(e){var r=e.data,n=e.startIndex,i=e.endIndex,l=e.x,u=e.width,s=e.travellerWidth;if(!r||!r.length)return{};var m=r.length,y=Vg().domain(g0(0,m)).range([l,l+u-s]),w=y.domain().map(function(S){return y(S)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:y(n),endX:y(i),scale:y,scaleValues:w}},nR=function(e){return e.changedTouches&&!!e.changedTouches.length},im=(function(t){function e(r){var n;return gte(this,e),n=vte(this,e,[r]),ys(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ys(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ys(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,l=i.endIndex,u=i.onDragEnd,s=i.startIndex;u?.({endIndex:l,startIndex:s})}),n.detachDragEndListener()}),ys(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ys(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ys(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ys(n,"handleSlideDragStart",function(i){var l=nR(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:l.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return bte(e,t),yte(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,l=n.endX,u=this.state.scaleValues,s=this.props,m=s.gap,y=s.data,w=y.length-1,S=Math.min(i,l),E=Math.max(i,l),I=e.getIndexInRange(u,S),F=e.getIndexInRange(u,E);return{startIndex:I-I%m,endIndex:F===w?w:F-F%m}}},{key:"getTextOfTick",value:function(n){var i=this.props,l=i.data,u=i.tickFormatter,s=i.dataKey,m=Cu(l[n],s,n);return Lr(u)?u(m,n):m}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,l=i.slideMoveStartX,u=i.startX,s=i.endX,m=this.props,y=m.x,w=m.width,S=m.travellerWidth,E=m.startIndex,I=m.endIndex,F=m.onChange,L=n.pageX-l;L>0?L=Math.min(L,y+w-S-s,y+w-S-u):L<0&&(L=Math.max(L,y-u,y-s));var R=this.getIndex({startX:u+L,endX:s+L});(R.startIndex!==E||R.endIndex!==I)&&F&&F(R),this.setState({startX:u+L,endX:s+L,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var l=nR(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:l.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,l=i.brushMoveStartX,u=i.movingTravellerId,s=i.endX,m=i.startX,y=this.state[u],w=this.props,S=w.x,E=w.width,I=w.travellerWidth,F=w.onChange,L=w.gap,R=w.data,U={startX:this.state.startX,endX:this.state.endX},X=n.pageX-l;X>0?X=Math.min(X,S+E-I-y):X<0&&(X=Math.max(X,S-y)),U[u]=y+X;var K=this.getIndex(U),re=K.startIndex,W=K.endIndex,J=function(){var he=R.length-1;return u==="startX"&&(s>m?re%L===0:W%L===0)||s<m&&W===he||u==="endX"&&(s>m?W%L===0:re%L===0)||s>m&&W===he};this.setState(ys(ys({},u,y+X),"brushMoveStartX",n.pageX),function(){F&&J()&&F(K)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var l=this,u=this.state,s=u.scaleValues,m=u.startX,y=u.endX,w=this.state[i],S=s.indexOf(w);if(S!==-1){var E=S+n;if(!(E===-1||E>=s.length)){var I=s[E];i==="startX"&&I>=y||i==="endX"&&I<=m||this.setState(ys({},i,I),function(){l.props.onChange(l.getIndex({startX:l.state.startX,endX:l.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,l=n.y,u=n.width,s=n.height,m=n.fill,y=n.stroke;return He.createElement("rect",{stroke:y,fill:m,x:i,y:l,width:u,height:s})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,l=n.y,u=n.width,s=n.height,m=n.data,y=n.children,w=n.padding,S=it.Children.only(y);return S?He.cloneElement(S,{x:i,y:l,width:u,height:s,margin:w,compact:!0,data:m}):null}},{key:"renderTravellerLayer",value:function(n,i){var l,u,s=this,m=this.props,y=m.y,w=m.travellerWidth,S=m.height,E=m.traveller,I=m.ariaLabel,F=m.data,L=m.startIndex,R=m.endIndex,U=Math.max(n,this.props.x),X=n2(n2({},ln(this.props,!1)),{},{x:U,y,width:w,height:S}),K=I||"Min value: ".concat((l=F[L])===null||l===void 0?void 0:l.name,", Max value: ").concat((u=F[R])===null||u===void 0?void 0:u.name);return He.createElement(ha,{tabIndex:0,role:"slider","aria-label":K,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(W){["ArrowLeft","ArrowRight"].includes(W.key)&&(W.preventDefault(),W.stopPropagation(),s.handleTravellerMoveKeyboard(W.key==="ArrowRight"?1:-1,i))},onFocus:function(){s.setState({isTravellerFocused:!0})},onBlur:function(){s.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(E,X))}},{key:"renderSlide",value:function(n,i){var l=this.props,u=l.y,s=l.height,m=l.stroke,y=l.travellerWidth,w=Math.min(n,i)+y,S=Math.max(Math.abs(i-n)-y,0);return He.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:m,fillOpacity:.2,x:w,y:u,width:S,height:s})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,l=n.endIndex,u=n.y,s=n.height,m=n.travellerWidth,y=n.stroke,w=this.state,S=w.startX,E=w.endX,I=5,F={pointerEvents:"none",fill:y};return He.createElement(ha,{className:"recharts-brush-texts"},He.createElement(G_,y0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(S,E)-I,y:u+s/2},F),this.getTextOfTick(i)),He.createElement(G_,y0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(S,E)+m+I,y:u+s/2},F),this.getTextOfTick(l)))}},{key:"render",value:function(){var n=this.props,i=n.data,l=n.className,u=n.children,s=n.x,m=n.y,y=n.width,w=n.height,S=n.alwaysShowText,E=this.state,I=E.startX,F=E.endX,L=E.isTextActive,R=E.isSlideMoving,U=E.isTravellerMoving,X=E.isTravellerFocused;if(!i||!i.length||!Dt(s)||!Dt(m)||!Dt(y)||!Dt(w)||y<=0||w<=0)return null;var K=un("recharts-brush",l),re=He.Children.count(u)===1,W=mte("userSelect","none");return He.createElement(ha,{className:K,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:W},this.renderBackground(),re&&this.renderPanorama(),this.renderSlide(I,F),this.renderTravellerLayer(I,"startX"),this.renderTravellerLayer(F,"endX"),(L||R||U||X||S)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,l=n.y,u=n.width,s=n.height,m=n.stroke,y=Math.floor(l+s/2)-1;return He.createElement(He.Fragment,null,He.createElement("rect",{x:i,y:l,width:u,height:s,fill:m,stroke:"none"}),He.createElement("line",{x1:i+1,y1:y,x2:i+u-1,y2:y,fill:"none",stroke:"#fff"}),He.createElement("line",{x1:i+1,y1:y+2,x2:i+u-1,y2:y+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var l;return He.isValidElement(n)?l=He.cloneElement(n,i):Lr(n)?l=n(i):l=e.renderDefaultTraveller(i),l}},{key:"getDerivedStateFromProps",value:function(n,i){var l=n.data,u=n.width,s=n.x,m=n.travellerWidth,y=n.updateId,w=n.startIndex,S=n.endIndex;if(l!==i.prevData||y!==i.prevUpdateId)return n2({prevData:l,prevTravellerWidth:m,prevUpdateId:y,prevX:s,prevWidth:u},l&&l.length?Ste({data:l,width:u,x:s,travellerWidth:m,startIndex:w,endIndex:S}):{scale:null,scaleValues:null});if(i.scale&&(u!==i.prevWidth||s!==i.prevX||m!==i.prevTravellerWidth)){i.scale.range([s,s+u-m]);var E=i.scale.domain().map(function(I){return i.scale(I)});return{prevData:l,prevTravellerWidth:m,prevUpdateId:y,prevX:s,prevWidth:u,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:E}}return null}},{key:"getIndexInRange",value:function(n,i){for(var l=n.length,u=0,s=l-1;s-u>1;){var m=Math.floor((u+s)/2);n[m]>i?s=m:u=m}return i>=n[s]?s:u}}])})(it.PureComponent);ys(im,"displayName","Brush");ys(im,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var i2,iR;function Tte(){if(iR)return i2;iR=1;var t=XP();function e(r,n){var i;return t(r,function(l,u,s){return i=n(l,u,s),!i}),!!i}return i2=e,i2}var a2,aR;function Pte(){if(aR)return a2;aR=1;var t=Pj(),e=Fh(),r=Tte(),n=Uo(),i=tx();function l(u,s,m){var y=n(u)?t:r;return m&&i(u,s,m)&&(s=void 0),y(u,e(s,3))}return a2=l,a2}var Ate=Pte();const kte=An(Ate);var Eu=function(e,r){var n=e.alwaysShow,i=e.ifOverflow;return n&&(i="extendDomain"),i===r},o2,oR;function Ete(){if(oR)return o2;oR=1;var t=qj();function e(r,n,i){n=="__proto__"&&t?t(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return o2=e,o2}var s2,sR;function Mte(){if(sR)return s2;sR=1;var t=Ete(),e=$j(),r=Fh();function n(i,l){var u={};return l=r(l,3),e(i,function(s,m,y){t(u,m,l(s,m,y))}),u}return s2=n,s2}var Cte=Mte();const Ote=An(Cte);var l2,lR;function Ite(){if(lR)return l2;lR=1;function t(e,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(!r(e[n],n,e))return!1;return!0}return l2=t,l2}var u2,uR;function Dte(){if(uR)return u2;uR=1;var t=XP();function e(r,n){var i=!0;return t(r,function(l,u,s){return i=!!n(l,u,s),i}),i}return u2=e,u2}var c2,cR;function zte(){if(cR)return c2;cR=1;var t=Ite(),e=Dte(),r=Fh(),n=Uo(),i=tx();function l(u,s,m){var y=n(u)?t:e;return m&&i(u,s,m)&&(s=void 0),y(u,r(s,3))}return c2=l,c2}var Rte=zte();const v3=An(Rte);var Lte=["x","y"];function Ey(t){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(t)}function NT(){return NT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},NT.apply(this,arguments)}function hR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Pg(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(r),!0).forEach(function(n){Fte(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fte(t,e,r){return e=jte(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jte(t){var e=Bte(t,"string");return Ey(e)=="symbol"?e:e+""}function Bte(t,e){if(Ey(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Ey(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nte(t,e){if(t==null)return{};var r=$te(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function $te(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Vte(t,e){var r=t.x,n=t.y,i=Nte(t,Lte),l="".concat(r),u=parseInt(l,10),s="".concat(n),m=parseInt(s,10),y="".concat(e.height||i.height),w=parseInt(y,10),S="".concat(e.width||i.width),E=parseInt(S,10);return Pg(Pg(Pg(Pg(Pg({},e),i),u?{x:u}:{}),m?{y:m}:{}),{},{height:w,width:E,name:e.name,radius:e.radius})}function fR(t){return He.createElement(ete,NT({shapeType:"rectangle",propTransformer:Vte,activeClassName:"recharts-active-bar"},t))}var qte=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof e=="number")return e;var l=Dt(n)||QU(n);return l?e(n,i):(l||_d(),r)}},Ute=["value","background"],_3;function am(t){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},am(t)}function Wte(t,e){if(t==null)return{};var r=Hte(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hte(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function _0(){return _0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_0.apply(this,arguments)}function dR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ei(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dR(Object(r),!0).forEach(function(n){kh(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gte(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,b3(n.key),n)}}function Zte(t,e,r){return e&&pR(t.prototype,e),r&&pR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xte(t,e,r){return e=x0(e),Kte(t,x3()?Reflect.construct(e,r||[],x0(t).constructor):e.apply(t,r))}function Kte(t,e){if(e&&(am(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yte(t)}function Yte(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x3=function(){return!!t})()}function x0(t){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},x0(t)}function Jte(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}function $T(t,e){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$T(t,e)}function kh(t,e,r){return e=b3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b3(t){var e=Qte(t,"string");return am(e)=="symbol"?e:e+""}function Qte(t,e){if(am(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(am(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Pu=(function(t){function e(){var r;Gte(this,e);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return r=Xte(this,e,[].concat(i)),kh(r,"state",{isAnimationFinished:!1}),kh(r,"id",Z0("recharts-bar-")),kh(r,"handleAnimationEnd",function(){var u=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),u&&u()}),kh(r,"handleAnimationStart",function(){var u=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),u&&u()}),r}return Jte(e,t),Zte(e,[{key:"renderRectanglesStatically",value:function(n){var i=this,l=this.props,u=l.shape,s=l.dataKey,m=l.activeIndex,y=l.activeBar,w=ln(this.props,!1);return n&&n.map(function(S,E){var I=E===m,F=I?y:u,L=Ei(Ei(Ei({},w),S),{},{isActive:I,option:F,index:E,dataKey:s,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return He.createElement(ha,_0({className:"recharts-bar-rectangle"},L_(i.props,S,E),{key:"rectangle-".concat(S?.x,"-").concat(S?.y,"-").concat(S?.value,"-").concat(E)}),He.createElement(fR,L))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,l=i.data,u=i.layout,s=i.isAnimationActive,m=i.animationBegin,y=i.animationDuration,w=i.animationEasing,S=i.animationId,E=this.state.prevData;return He.createElement(Dh,{begin:m,duration:y,isActive:s,easing:w,from:{t:0},to:{t:1},key:"bar-".concat(S),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(I){var F=I.t,L=l.map(function(R,U){var X=E&&E[U];if(X){var K=Mp(X.x,R.x),re=Mp(X.y,R.y),W=Mp(X.width,R.width),J=Mp(X.height,R.height);return Ei(Ei({},R),{},{x:K(F),y:re(F),width:W(F),height:J(F)})}if(u==="horizontal"){var ie=Mp(0,R.height),he=ie(F);return Ei(Ei({},R),{},{y:R.y+R.height-he,height:he})}var ve=Mp(0,R.width),Re=ve(F);return Ei(Ei({},R),{},{width:Re})});return He.createElement(ha,null,n.renderRectanglesStatically(L))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,l=n.isAnimationActive,u=this.state.prevData;return l&&i&&i.length&&(!u||!xA(u,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,l=i.data,u=i.dataKey,s=i.activeIndex,m=ln(this.props.background,!1);return l.map(function(y,w){y.value;var S=y.background,E=Wte(y,Ute);if(!S)return null;var I=Ei(Ei(Ei(Ei(Ei({},E),{},{fill:"#eee"},S),m),L_(n.props,y,w)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:u,index:w,className:"recharts-bar-background-rectangle"});return He.createElement(fR,_0({key:"background-bar-".concat(w),option:n.props.background,isActive:w===s},I))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var l=this.props,u=l.data,s=l.xAxis,m=l.yAxis,y=l.layout,w=l.children,S=Il(w,fx);if(!S)return null;var E=y==="vertical"?u[0].height/2:u[0].width/2,I=function(R,U){var X=Array.isArray(R.value)?R.value[1]:R.value;return{x:R.x,y:R.y,value:X,errorVal:Cu(R,U)}},F={clipPath:n?"url(#clipPath-".concat(i,")"):null};return He.createElement(ha,F,S.map(function(L){return He.cloneElement(L,{key:"error-bar-".concat(i,"-").concat(L.props.dataKey),data:u,xAxis:s,yAxis:m,layout:y,offset:E,dataPointFormatter:I})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,l=n.data,u=n.className,s=n.xAxis,m=n.yAxis,y=n.left,w=n.top,S=n.width,E=n.height,I=n.isAnimationActive,F=n.background,L=n.id;if(i||!l||!l.length)return null;var R=this.state.isAnimationFinished,U=un("recharts-bar",u),X=s&&s.allowDataOverflow,K=m&&m.allowDataOverflow,re=X||K,W=cn(L)?this.id:L;return He.createElement(ha,{className:U},X||K?He.createElement("defs",null,He.createElement("clipPath",{id:"clipPath-".concat(W)},He.createElement("rect",{x:X?y:y-S/2,y:K?w:w-E/2,width:X?S:S*2,height:K?E:E*2}))):null,He.createElement(ha,{className:"recharts-bar-rectangles",clipPath:re?"url(#clipPath-".concat(W,")"):null},F?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(re,W),(!I||R)&&dd.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])})(it.PureComponent);_3=Pu;kh(Pu,"displayName","Bar");kh(Pu,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Vy.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});kh(Pu,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,i=t.bandSize,l=t.xAxis,u=t.yAxis,s=t.xAxisTicks,m=t.yAxisTicks,y=t.stackedData,w=t.dataStartIndex,S=t.displayedData,E=t.offset,I=vY(n,r);if(!I)return null;var F=e.layout,L=r.type.defaultProps,R=L!==void 0?Ei(Ei({},L),r.props):r.props,U=R.dataKey,X=R.children,K=R.minPointSize,re=F==="horizontal"?u:l,W=y?re.scale.domain():null,J=AY({numericAxis:re}),ie=Il(X,Kj),he=S.map(function(ve,Re){var de,Oe,Le,Ge,Ne,Ue;y?de=_Y(y[w+Re],W):(de=Cu(ve,U),Array.isArray(de)||(de=[J,de]));var Qe=qte(K,_3.defaultProps.minPointSize)(de[1],Re);if(F==="horizontal"){var $e,Ye=[u.scale(de[0]),u.scale(de[1])],nt=Ye[0],Se=Ye[1];Oe=KD({axis:l,ticks:s,bandSize:i,offset:I.offset,entry:ve,index:Re}),Le=($e=Se??nt)!==null&&$e!==void 0?$e:void 0,Ge=I.size;var De=nt-Se;if(Ne=Number.isNaN(De)?0:De,Ue={x:Oe,y:u.y,width:Ge,height:u.height},Math.abs(Qe)>0&&Math.abs(Ne)<Math.abs(Qe)){var ft=Ol(Ne||Qe)*(Math.abs(Qe)-Math.abs(Ne));Le-=ft,Ne+=ft}}else{var At=[l.scale(de[0]),l.scale(de[1])],jt=At[0],Nt=At[1];if(Oe=jt,Le=KD({axis:u,ticks:m,bandSize:i,offset:I.offset,entry:ve,index:Re}),Ge=Nt-jt,Ne=I.size,Ue={x:l.x,y:Le,width:l.width,height:Ne},Math.abs(Qe)>0&&Math.abs(Ge)<Math.abs(Qe)){var or=Ol(Ge||Qe)*(Math.abs(Qe)-Math.abs(Ge));Ge+=or}}return Ei(Ei(Ei({},ve),{},{x:Oe,y:Le,width:Ge,height:Ne,value:y?de:de[1],payload:ve,background:Ue},ie&&ie[Re]&&ie[Re].props),{},{tooltipPayload:[r3(r,ve)],tooltipPosition:{x:Oe+Ge/2,y:Le+Ne/2}})});return Ei({data:he,layout:F},E)});function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function ere(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w3(n.key),n)}}function tre(t,e,r){return e&&mR(t.prototype,e),r&&mR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function kl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gR(Object(r),!0).forEach(function(n){mx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mx(t,e,r){return e=w3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w3(t){var e=rre(t,"string");return My(e)=="symbol"?e:e+""}function rre(t,e){if(My(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(My(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nre=function(e,r,n,i,l){var u=e.width,s=e.height,m=e.layout,y=e.children,w=Object.keys(r),S={left:n.left,leftMirror:n.left,right:u-n.right,rightMirror:u-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},E=!!vs(y,Pu);return w.reduce(function(I,F){var L=r[F],R=L.orientation,U=L.domain,X=L.padding,K=X===void 0?{}:X,re=L.mirror,W=L.reversed,J="".concat(R).concat(re?"Mirror":""),ie,he,ve,Re,de;if(L.type==="number"&&(L.padding==="gap"||L.padding==="no-gap")){var Oe=U[1]-U[0],Le=1/0,Ge=L.categoricalDomain.sort(rW);if(Ge.forEach(function(At,jt){jt>0&&(Le=Math.min((At||0)-(Ge[jt-1]||0),Le))}),Number.isFinite(Le)){var Ne=Le/Oe,Ue=L.layout==="vertical"?n.height:n.width;if(L.padding==="gap"&&(ie=Ne*Ue/2),L.padding==="no-gap"){var Qe=yd(e.barCategoryGap,Ne*Ue),$e=Ne*Ue/2;ie=$e-Qe-($e-Qe)/Ue*Qe}}}i==="xAxis"?he=[n.left+(K.left||0)+(ie||0),n.left+n.width-(K.right||0)-(ie||0)]:i==="yAxis"?he=m==="horizontal"?[n.top+n.height-(K.bottom||0),n.top+(K.top||0)]:[n.top+(K.top||0)+(ie||0),n.top+n.height-(K.bottom||0)-(ie||0)]:he=L.range,W&&(he=[he[1],he[0]]);var Ye=gY(L,l,E),nt=Ye.scale,Se=Ye.realScaleType;nt.domain(U).range(he),yY(nt);var De=PY(nt,kl(kl({},L),{},{realScaleType:Se}));i==="xAxis"?(de=R==="top"&&!re||R==="bottom"&&re,ve=n.left,Re=S[J]-de*L.height):i==="yAxis"&&(de=R==="left"&&!re||R==="right"&&re,ve=S[J]-de*L.width,Re=n.top);var ft=kl(kl(kl({},L),De),{},{realScaleType:Se,x:ve,y:Re,scale:nt,width:i==="xAxis"?n.width:L.width,height:i==="yAxis"?n.height:L.height});return ft.bandSize=s0(ft,De),!L.hide&&i==="xAxis"?S[J]+=(de?-1:1)*ft.height:L.hide||(S[J]+=(de?-1:1)*ft.width),kl(kl({},I),{},mx({},F,ft))},{})},S3=function(e,r){var n=e.x,i=e.y,l=r.x,u=r.y;return{x:Math.min(n,l),y:Math.min(i,u),width:Math.abs(l-n),height:Math.abs(u-i)}},ire=function(e){var r=e.x1,n=e.y1,i=e.x2,l=e.y2;return S3({x:r,y:n},{x:i,y:l})},T3=(function(){function t(e){ere(this,t),this.scale=e}return tre(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,l=n.position;if(r!==void 0){if(l)switch(l){case"start":return this.scale(r);case"middle":{var u=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+u}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(r)+s}default:return this.scale(r)}if(i){var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+m}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],l=n[n.length-1];return i<=l?r>=i&&r<=l:r>=l&&r<=i}}],[{key:"create",value:function(r){return new t(r)}}])})();mx(T3,"EPS",1e-4);var PA=function(e){var r=Object.keys(e).reduce(function(n,i){return kl(kl({},n),{},mx({},i,T3.create(e[i])))},{});return kl(kl({},r),{},{apply:function(i){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=l.bandAware,s=l.position;return Ote(i,function(m,y){return r[y].apply(m,{bandAware:u,position:s})})},isInRange:function(i){return v3(i,function(l,u){return r[u].isInRange(l)})}})};function are(t){return(t%180+180)%180}var ore=function(e){var r=e.width,n=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=are(i),u=l*Math.PI/180,s=Math.atan(n/r),m=u>s&&u<Math.PI-s?n/Math.sin(u):r/Math.cos(u);return Math.abs(m)},h2,yR;function sre(){if(yR)return h2;yR=1;var t=Fh(),e=$y(),r=Q0();function n(i){return function(l,u,s){var m=Object(l);if(!e(l)){var y=t(u,3);l=r(l),u=function(S){return y(m[S],S,m)}}var w=i(l,u,s);return w>-1?m[y?l[w]:w]:void 0}}return h2=n,h2}var f2,vR;function lre(){if(vR)return f2;vR=1;var t=p3();function e(r){var n=t(r),i=n%1;return n===n?i?n-i:n:0}return f2=e,f2}var d2,_R;function ure(){if(_R)return d2;_R=1;var t=Lj(),e=Fh(),r=lre(),n=Math.max;function i(l,u,s){var m=l==null?0:l.length;if(!m)return-1;var y=s==null?0:r(s);return y<0&&(y=n(m+y,0)),t(l,e(u,3),y)}return d2=i,d2}var p2,xR;function cre(){if(xR)return p2;xR=1;var t=sre(),e=ure(),r=t(e);return p2=r,p2}var hre=cre();const fre=An(hre);var dre=JF();const pre=An(dre);var mre=pre(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),AA=it.createContext(void 0),kA=it.createContext(void 0),P3=it.createContext(void 0),A3=it.createContext({}),k3=it.createContext(void 0),E3=it.createContext(0),M3=it.createContext(0),bR=function(e){var r=e.state,n=r.xAxisMap,i=r.yAxisMap,l=r.offset,u=e.clipPathId,s=e.children,m=e.width,y=e.height,w=mre(l);return He.createElement(AA.Provider,{value:n},He.createElement(kA.Provider,{value:i},He.createElement(A3.Provider,{value:l},He.createElement(P3.Provider,{value:w},He.createElement(k3.Provider,{value:u},He.createElement(E3.Provider,{value:y},He.createElement(M3.Provider,{value:m},s)))))))},gre=function(){return it.useContext(k3)},C3=function(e){var r=it.useContext(AA);r==null&&_d();var n=r[e];return n==null&&_d(),n},yre=function(){var e=it.useContext(AA);return Sh(e)},vre=function(){var e=it.useContext(kA),r=fre(e,function(n){return v3(n.domain,Number.isFinite)});return r||Sh(e)},O3=function(e){var r=it.useContext(kA);r==null&&_d();var n=r[e];return n==null&&_d(),n},_re=function(){var e=it.useContext(P3);return e},xre=function(){return it.useContext(A3)},EA=function(){return it.useContext(M3)},MA=function(){return it.useContext(E3)};function om(t){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},om(t)}function bre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,D3(n.key),n)}}function Sre(t,e,r){return e&&wre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Tre(t,e,r){return e=b0(e),Pre(t,I3()?Reflect.construct(e,r||[],b0(t).constructor):e.apply(t,r))}function Pre(t,e){if(e&&(om(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Are(t)}function Are(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I3=function(){return!!t})()}function b0(t){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b0(t)}function kre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VT(t,e)}function VT(t,e){return VT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},VT(t,e)}function wR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function SR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wR(Object(r),!0).forEach(function(n){CA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function CA(t,e,r){return e=D3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function D3(t){var e=Ere(t,"string");return om(e)=="symbol"?e:e+""}function Ere(t,e){if(om(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(om(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Mre(t,e){return Dre(t)||Ire(t,e)||Ore(t,e)||Cre()}function Cre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ore(t,e){if(t){if(typeof t=="string")return TR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TR(t,e)}}function TR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ire(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function Dre(t){if(Array.isArray(t))return t}function qT(){return qT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qT.apply(this,arguments)}var zre=function(e,r){var n;return He.isValidElement(e)?n=He.cloneElement(e,r):Lr(e)?n=e(r):n=He.createElement("line",qT({},r,{className:"recharts-reference-line-line"})),n},Rre=function(e,r,n,i,l,u,s,m,y){var w=l.x,S=l.y,E=l.width,I=l.height;if(n){var F=y.y,L=e.y.apply(F,{position:u});if(Eu(y,"discard")&&!e.y.isInRange(L))return null;var R=[{x:w+E,y:L},{x:w,y:L}];return m==="left"?R.reverse():R}if(r){var U=y.x,X=e.x.apply(U,{position:u});if(Eu(y,"discard")&&!e.x.isInRange(X))return null;var K=[{x:X,y:S+I},{x:X,y:S}];return s==="top"?K.reverse():K}if(i){var re=y.segment,W=re.map(function(J){return e.apply(J,{position:u})});return Eu(y,"discard")&&kte(W,function(J){return!e.isInRange(J)})?null:W}return null};function Lre(t){var e=t.x,r=t.y,n=t.segment,i=t.xAxisId,l=t.yAxisId,u=t.shape,s=t.className,m=t.alwaysShow,y=gre(),w=C3(i),S=O3(l),E=_re();if(!y||!E)return null;Ac(m===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var I=PA({x:w.scale,y:S.scale}),F=Ui(e),L=Ui(r),R=n&&n.length===2,U=Rre(I,F,L,R,E,t.position,w.orientation,S.orientation,t);if(!U)return null;var X=Mre(U,2),K=X[0],re=K.x,W=K.y,J=X[1],ie=J.x,he=J.y,ve=Eu(t,"hidden")?"url(#".concat(y,")"):void 0,Re=SR(SR({clipPath:ve},ln(t,!0)),{},{x1:re,y1:W,x2:ie,y2:he});return He.createElement(ha,{className:un("recharts-reference-line",s)},zre(u,Re),Qa.renderCallByParent(t,ire({x1:re,y1:W,x2:ie,y2:he})))}var OA=(function(t){function e(){return bre(this,e),Tre(this,e,arguments)}return kre(e,t),Sre(e,[{key:"render",value:function(){return He.createElement(Lre,this.props)}}])})(He.Component);CA(OA,"displayName","ReferenceLine");CA(OA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function UT(){return UT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},UT.apply(this,arguments)}function sm(t){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sm(t)}function PR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function AR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PR(Object(r),!0).forEach(function(n){gx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Fre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R3(n.key),n)}}function Bre(t,e,r){return e&&jre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nre(t,e,r){return e=w0(e),$re(t,z3()?Reflect.construct(e,r||[],w0(t).constructor):e.apply(t,r))}function $re(t,e){if(e&&(sm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vre(t)}function Vre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z3=function(){return!!t})()}function w0(t){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w0(t)}function qre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WT(t,e)}function WT(t,e){return WT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},WT(t,e)}function gx(t,e,r){return e=R3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R3(t){var e=Ure(t,"string");return sm(e)=="symbol"?e:e+""}function Ure(t,e){if(sm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(sm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Wre=function(e){var r=e.x,n=e.y,i=e.xAxis,l=e.yAxis,u=PA({x:i.scale,y:l.scale}),s=u.apply({x:r,y:n},{bandAware:!0});return Eu(e,"discard")&&!u.isInRange(s)?null:s},yx=(function(t){function e(){return Fre(this,e),Nre(this,e,arguments)}return qre(e,t),Bre(e,[{key:"render",value:function(){var n=this.props,i=n.x,l=n.y,u=n.r,s=n.alwaysShow,m=n.clipPathId,y=Ui(i),w=Ui(l);if(Ac(s===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!y||!w)return null;var S=Wre(this.props);if(!S)return null;var E=S.x,I=S.y,F=this.props,L=F.shape,R=F.className,U=Eu(this.props,"hidden")?"url(#".concat(m,")"):void 0,X=AR(AR({clipPath:U},ln(this.props,!0)),{},{cx:E,cy:I});return He.createElement(ha,{className:un("recharts-reference-dot",R)},e.renderDot(L,X),Qa.renderCallByParent(this.props,{x:E-u,y:I-u,width:2*u,height:2*u}))}}])})(He.Component);gx(yx,"displayName","ReferenceDot");gx(yx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});gx(yx,"renderDot",function(t,e){var r;return He.isValidElement(t)?r=He.cloneElement(t,e):Lr(t)?r=t(e):r=He.createElement(d3,UT({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function HT(){return HT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},HT.apply(this,arguments)}function lm(t){"@babel/helpers - typeof";return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lm(t)}function kR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ER(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kR(Object(r),!0).forEach(function(n){vx(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Hre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F3(n.key),n)}}function Zre(t,e,r){return e&&Gre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xre(t,e,r){return e=S0(e),Kre(t,L3()?Reflect.construct(e,r||[],S0(t).constructor):e.apply(t,r))}function Kre(t,e){if(e&&(lm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yre(t)}function Yre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L3=function(){return!!t})()}function S0(t){return S0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S0(t)}function Jre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GT(t,e)}function GT(t,e){return GT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},GT(t,e)}function vx(t,e,r){return e=F3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function F3(t){var e=Qre(t,"string");return lm(e)=="symbol"?e:e+""}function Qre(t,e){if(lm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var ene=function(e,r,n,i,l){var u=l.x1,s=l.x2,m=l.y1,y=l.y2,w=l.xAxis,S=l.yAxis;if(!w||!S)return null;var E=PA({x:w.scale,y:S.scale}),I={x:e?E.x.apply(u,{position:"start"}):E.x.rangeMin,y:n?E.y.apply(m,{position:"start"}):E.y.rangeMin},F={x:r?E.x.apply(s,{position:"end"}):E.x.rangeMax,y:i?E.y.apply(y,{position:"end"}):E.y.rangeMax};return Eu(l,"discard")&&(!E.isInRange(I)||!E.isInRange(F))?null:S3(I,F)},_x=(function(t){function e(){return Hre(this,e),Xre(this,e,arguments)}return Jre(e,t),Zre(e,[{key:"render",value:function(){var n=this.props,i=n.x1,l=n.x2,u=n.y1,s=n.y2,m=n.className,y=n.alwaysShow,w=n.clipPathId;Ac(y===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var S=Ui(i),E=Ui(l),I=Ui(u),F=Ui(s),L=this.props.shape;if(!S&&!E&&!I&&!F&&!L)return null;var R=ene(S,E,I,F,this.props);if(!R&&!L)return null;var U=Eu(this.props,"hidden")?"url(#".concat(w,")"):void 0;return He.createElement(ha,{className:un("recharts-reference-area",m)},e.renderRect(L,ER(ER({clipPath:U},ln(this.props,!0)),R)),Qa.renderCallByParent(this.props,R))}}])})(He.Component);vx(_x,"displayName","ReferenceArea");vx(_x,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});vx(_x,"renderRect",function(t,e){var r;return He.isValidElement(t)?r=He.cloneElement(t,e):Lr(t)?r=t(e):r=He.createElement(TA,HT({},e,{className:"recharts-reference-area-rect"})),r});function j3(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function tne(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return ore(n,r)}function rne(t,e,r){var n=r==="width",i=t.x,l=t.y,u=t.width,s=t.height;return e===1?{start:n?i:l,end:n?i+u:l+s}:{start:n?i+u:l+s,end:n?i:l}}function T0(t,e,r,n,i){if(t*e<t*n||t*e>t*i)return!1;var l=r();return t*(e-t*l/2-n)>=0&&t*(e+t*l/2-i)<=0}function nne(t,e){return j3(t,e+1)}function ine(t,e,r,n,i){for(var l=(n||[]).slice(),u=e.start,s=e.end,m=0,y=1,w=u,S=function(){var F=n?.[m];if(F===void 0)return{v:j3(n,y)};var L=m,R,U=function(){return R===void 0&&(R=r(F,L)),R},X=F.coordinate,K=m===0||T0(t,X,U,w,s);K||(m=0,w=u,y+=1),K&&(w=X+t*(U()/2+i),m+=y)},E;y<=l.length;)if(E=S(),E)return E.v;return[]}function Cy(t){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cy(t)}function MR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Ka(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?MR(Object(r),!0).forEach(function(n){ane(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ane(t,e,r){return e=one(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function one(t){var e=sne(t,"string");return Cy(e)=="symbol"?e:e+""}function sne(t,e){if(Cy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Cy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lne(t,e,r,n,i){for(var l=(n||[]).slice(),u=l.length,s=e.start,m=e.end,y=function(E){var I=l[E],F,L=function(){return F===void 0&&(F=r(I,E)),F};if(E===u-1){var R=t*(I.coordinate+t*L()/2-m);l[E]=I=Ka(Ka({},I),{},{tickCoord:R>0?I.coordinate-R*t:I.coordinate})}else l[E]=I=Ka(Ka({},I),{},{tickCoord:I.coordinate});var U=T0(t,I.tickCoord,L,s,m);U&&(m=I.tickCoord-t*(L()/2+i),l[E]=Ka(Ka({},I),{},{isShow:!0}))},w=u-1;w>=0;w--)y(w);return l}function une(t,e,r,n,i,l){var u=(n||[]).slice(),s=u.length,m=e.start,y=e.end;if(l){var w=n[s-1],S=r(w,s-1),E=t*(w.coordinate+t*S/2-y);u[s-1]=w=Ka(Ka({},w),{},{tickCoord:E>0?w.coordinate-E*t:w.coordinate});var I=T0(t,w.tickCoord,function(){return S},m,y);I&&(y=w.tickCoord-t*(S/2+i),u[s-1]=Ka(Ka({},w),{},{isShow:!0}))}for(var F=l?s-1:s,L=function(X){var K=u[X],re,W=function(){return re===void 0&&(re=r(K,X)),re};if(X===0){var J=t*(K.coordinate-t*W()/2-m);u[X]=K=Ka(Ka({},K),{},{tickCoord:J<0?K.coordinate-J*t:K.coordinate})}else u[X]=K=Ka(Ka({},K),{},{tickCoord:K.coordinate});var ie=T0(t,K.tickCoord,W,m,y);ie&&(m=K.tickCoord+t*(W()/2+i),u[X]=Ka(Ka({},K),{},{isShow:!0}))},R=0;R<F;R++)L(R);return u}function IA(t,e,r){var n=t.tick,i=t.ticks,l=t.viewBox,u=t.minTickGap,s=t.orientation,m=t.interval,y=t.tickFormatter,w=t.unit,S=t.angle;if(!i||!i.length||!n)return[];if(Dt(m)||Vy.isSsr)return nne(i,typeof m=="number"&&Dt(m)?m:0);var E=[],I=s==="top"||s==="bottom"?"width":"height",F=w&&I==="width"?$g(w,{fontSize:e,letterSpacing:r}):{width:0,height:0},L=function(K,re){var W=Lr(y)?y(K.value,re):K.value;return I==="width"?tne($g(W,{fontSize:e,letterSpacing:r}),F,S):$g(W,{fontSize:e,letterSpacing:r})[I]},R=i.length>=2?Ol(i[1].coordinate-i[0].coordinate):1,U=rne(l,R,I);return m==="equidistantPreserveStart"?ine(R,U,L,i,u):(m==="preserveStart"||m==="preserveStartEnd"?E=une(R,U,L,i,u,m==="preserveStartEnd"):E=lne(R,U,L,i,u),E.filter(function(X){return X.isShow}))}var cne=["viewBox"],hne=["viewBox"],fne=["ticks"];function um(t){"@babel/helpers - typeof";return um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um(t)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rp.apply(this,arguments)}function CR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?CR(Object(r),!0).forEach(function(n){DA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):CR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function m2(t,e){if(t==null)return{};var r=dne(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function pne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function OR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,N3(n.key),n)}}function mne(t,e,r){return e&&OR(t.prototype,e),r&&OR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gne(t,e,r){return e=P0(e),yne(t,B3()?Reflect.construct(e,r||[],P0(t).constructor):e.apply(t,r))}function yne(t,e){if(e&&(um(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vne(t)}function vne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B3=function(){return!!t})()}function P0(t){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P0(t)}function _ne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZT(t,e)}function ZT(t,e){return ZT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ZT(t,e)}function DA(t,e,r){return e=N3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N3(t){var e=xne(t,"string");return um(e)=="symbol"?e:e+""}function xne(t,e){if(um(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Tm=(function(t){function e(r){var n;return pne(this,e),n=gne(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return _ne(e,t),mne(e,[{key:"shouldComponentUpdate",value:function(n,i){var l=n.viewBox,u=m2(n,cne),s=this.props,m=s.viewBox,y=m2(s,hne);return!Np(l,m)||!Np(u,y)||!Np(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,l=i.x,u=i.y,s=i.width,m=i.height,y=i.orientation,w=i.tickSize,S=i.mirror,E=i.tickMargin,I,F,L,R,U,X,K=S?-1:1,re=n.tickSize||w,W=Dt(n.tickCoord)?n.tickCoord:n.coordinate;switch(y){case"top":I=F=n.coordinate,R=u+ +!S*m,L=R-K*re,X=L-K*E,U=W;break;case"left":L=R=n.coordinate,F=l+ +!S*s,I=F-K*re,U=I-K*E,X=W;break;case"right":L=R=n.coordinate,F=l+ +S*s,I=F+K*re,U=I+K*E,X=W;break;default:I=F=n.coordinate,R=u+ +S*m,L=R+K*re,X=L+K*E,U=W;break}return{line:{x1:I,y1:L,x2:F,y2:R},tick:{x:U,y:X}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,l=n.mirror,u;switch(i){case"left":u=l?"start":"end";break;case"right":u=l?"end":"start";break;default:u="middle";break}return u}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,l=n.mirror,u="end";switch(i){case"left":case"right":u="middle";break;case"top":u=l?"start":"end";break;default:u=l?"end":"start";break}return u}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,l=n.y,u=n.width,s=n.height,m=n.orientation,y=n.mirror,w=n.axisLine,S=$i($i($i({},ln(this.props,!1)),ln(w,!1)),{},{fill:"none"});if(m==="top"||m==="bottom"){var E=+(m==="top"&&!y||m==="bottom"&&y);S=$i($i({},S),{},{x1:i,y1:l+E*s,x2:i+u,y2:l+E*s})}else{var I=+(m==="left"&&!y||m==="right"&&y);S=$i($i({},S),{},{x1:i+I*u,y1:l,x2:i+I*u,y2:l+s})}return He.createElement("line",Rp({},S,{className:un("recharts-cartesian-axis-line",Ks(w,"className"))}))}},{key:"renderTicks",value:function(n,i,l){var u=this,s=this.props,m=s.tickLine,y=s.stroke,w=s.tick,S=s.tickFormatter,E=s.unit,I=IA($i($i({},this.props),{},{ticks:n}),i,l),F=this.getTickTextAnchor(),L=this.getTickVerticalAnchor(),R=ln(this.props,!1),U=ln(w,!1),X=$i($i({},R),{},{fill:"none"},ln(m,!1)),K=I.map(function(re,W){var J=u.getTickLineCoord(re),ie=J.line,he=J.tick,ve=$i($i($i($i({textAnchor:F,verticalAnchor:L},R),{},{stroke:"none",fill:y},U),he),{},{index:W,payload:re,visibleTicksCount:I.length,tickFormatter:S});return He.createElement(ha,Rp({className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},L_(u.props,re,W)),m&&He.createElement("line",Rp({},X,ie,{className:un("recharts-cartesian-axis-tick-line",Ks(m,"className"))})),w&&e.renderTickItem(w,ve,"".concat(Lr(S)?S(re.value,W):re.value).concat(E||"")))});return He.createElement("g",{className:"recharts-cartesian-axis-ticks"},K)}},{key:"render",value:function(){var n=this,i=this.props,l=i.axisLine,u=i.width,s=i.height,m=i.ticksGenerator,y=i.className,w=i.hide;if(w)return null;var S=this.props,E=S.ticks,I=m2(S,fne),F=E;return Lr(m)&&(F=E&&E.length>0?m(this.props):m(I)),u<=0||s<=0||!F||!F.length?null:He.createElement(ha,{className:un("recharts-cartesian-axis",y),ref:function(R){n.layerReference=R}},l&&this.renderAxisLine(),this.renderTicks(F,this.state.fontSize,this.state.letterSpacing),Qa.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,l){var u,s=un(i.className,"recharts-cartesian-axis-tick-value");return He.isValidElement(n)?u=He.cloneElement(n,$i($i({},i),{},{className:s})):Lr(n)?u=n($i($i({},i),{},{className:s})):u=He.createElement(G_,Rp({},i,{className:"recharts-cartesian-axis-tick-value"}),l),u}}])})(it.Component);DA(Tm,"displayName","CartesianAxis");DA(Tm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var bne=["x1","y1","x2","y2","key"],wne=["offset"];function xd(t){"@babel/helpers - typeof";return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}function IR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function eo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(r),!0).forEach(function(n){Sne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sne(t,e,r){return e=Tne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Tne(t){var e=Pne(t,"string");return xd(e)=="symbol"?e:e+""}function Pne(t,e){if(xd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sd(){return sd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},sd.apply(this,arguments)}function DR(t,e){if(t==null)return{};var r=Ane(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ane(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var kne=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,i=e.x,l=e.y,u=e.width,s=e.height,m=e.ry;return He.createElement("rect",{x:i,y:l,ry:m,width:u,height:s,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function $3(t,e){var r;if(He.isValidElement(t))r=He.cloneElement(t,e);else if(Lr(t))r=t(e);else{var n=e.x1,i=e.y1,l=e.x2,u=e.y2,s=e.key,m=DR(e,bne),y=ln(m,!1);y.offset;var w=DR(y,wne);r=He.createElement("line",sd({},w,{x1:n,y1:i,x2:l,y2:u,fill:"none",key:s}))}return r}function Ene(t){var e=t.x,r=t.width,n=t.horizontal,i=n===void 0?!0:n,l=t.horizontalPoints;if(!i||!l||!l.length)return null;var u=l.map(function(s,m){var y=eo(eo({},t),{},{x1:e,y1:s,x2:e+r,y2:s,key:"line-".concat(m),index:m});return $3(i,y)});return He.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Mne(t){var e=t.y,r=t.height,n=t.vertical,i=n===void 0?!0:n,l=t.verticalPoints;if(!i||!l||!l.length)return null;var u=l.map(function(s,m){var y=eo(eo({},t),{},{x1:s,y1:e,x2:s,y2:e+r,key:"line-".concat(m),index:m});return $3(i,y)});return He.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Cne(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,i=t.y,l=t.width,u=t.height,s=t.horizontalPoints,m=t.horizontal,y=m===void 0?!0:m;if(!y||!e||!e.length)return null;var w=s.map(function(E){return Math.round(E+i-i)}).sort(function(E,I){return E-I});i!==w[0]&&w.unshift(0);var S=w.map(function(E,I){var F=!w[I+1],L=F?i+u-E:w[I+1]-E;if(L<=0)return null;var R=I%e.length;return He.createElement("rect",{key:"react-".concat(I),y:E,x:n,height:L,width:l,stroke:"none",fill:e[R],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return He.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},S)}function One(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,i=t.fillOpacity,l=t.x,u=t.y,s=t.width,m=t.height,y=t.verticalPoints;if(!r||!n||!n.length)return null;var w=y.map(function(E){return Math.round(E+l-l)}).sort(function(E,I){return E-I});l!==w[0]&&w.unshift(0);var S=w.map(function(E,I){var F=!w[I+1],L=F?l+s-E:w[I+1]-E;if(L<=0)return null;var R=I%n.length;return He.createElement("rect",{key:"react-".concat(I),x:E,y:u,width:L,height:m,stroke:"none",fill:n[R],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return He.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},S)}var Ine=function(e,r){var n=e.xAxis,i=e.width,l=e.height,u=e.offset;return e3(IA(eo(eo(eo({},Tm.defaultProps),n),{},{ticks:Tc(n,!0),viewBox:{x:0,y:0,width:i,height:l}})),u.left,u.left+u.width,r)},Dne=function(e,r){var n=e.yAxis,i=e.width,l=e.height,u=e.offset;return e3(IA(eo(eo(eo({},Tm.defaultProps),n),{},{ticks:Tc(n,!0),viewBox:{x:0,y:0,width:i,height:l}})),u.top,u.top+u.height,r)},Ip={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function V3(t){var e,r,n,i,l,u,s=EA(),m=MA(),y=xre(),w=eo(eo({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Ip.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Ip.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Ip.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:Ip.horizontalFill,vertical:(l=t.vertical)!==null&&l!==void 0?l:Ip.vertical,verticalFill:(u=t.verticalFill)!==null&&u!==void 0?u:Ip.verticalFill,x:Dt(t.x)?t.x:y.left,y:Dt(t.y)?t.y:y.top,width:Dt(t.width)?t.width:y.width,height:Dt(t.height)?t.height:y.height}),S=w.x,E=w.y,I=w.width,F=w.height,L=w.syncWithTicks,R=w.horizontalValues,U=w.verticalValues,X=yre(),K=vre();if(!Dt(I)||I<=0||!Dt(F)||F<=0||!Dt(S)||S!==+S||!Dt(E)||E!==+E)return null;var re=w.verticalCoordinatesGenerator||Ine,W=w.horizontalCoordinatesGenerator||Dne,J=w.horizontalPoints,ie=w.verticalPoints;if((!J||!J.length)&&Lr(W)){var he=R&&R.length,ve=W({yAxis:K?eo(eo({},K),{},{ticks:he?R:K.ticks}):void 0,width:s,height:m,offset:y},he?!0:L);Ac(Array.isArray(ve),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(xd(ve),"]")),Array.isArray(ve)&&(J=ve)}if((!ie||!ie.length)&&Lr(re)){var Re=U&&U.length,de=re({xAxis:X?eo(eo({},X),{},{ticks:Re?U:X.ticks}):void 0,width:s,height:m,offset:y},Re?!0:L);Ac(Array.isArray(de),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(xd(de),"]")),Array.isArray(de)&&(ie=de)}return He.createElement("g",{className:"recharts-cartesian-grid"},He.createElement(kne,{fill:w.fill,fillOpacity:w.fillOpacity,x:w.x,y:w.y,width:w.width,height:w.height,ry:w.ry}),He.createElement(Ene,sd({},w,{offset:y,horizontalPoints:J,xAxis:X,yAxis:K})),He.createElement(Mne,sd({},w,{offset:y,verticalPoints:ie,xAxis:X,yAxis:K})),He.createElement(Cne,sd({},w,{horizontalPoints:J})),He.createElement(One,sd({},w,{verticalPoints:ie})))}V3.displayName="CartesianGrid";function cm(t){"@babel/helpers - typeof";return cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cm(t)}function zne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rne(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W3(n.key),n)}}function Lne(t,e,r){return e&&Rne(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fne(t,e,r){return e=A0(e),jne(t,q3()?Reflect.construct(e,r||[],A0(t).constructor):e.apply(t,r))}function jne(t,e){if(e&&(cm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bne(t)}function Bne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q3=function(){return!!t})()}function A0(t){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},A0(t)}function Nne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},XT(t,e)}function U3(t,e,r){return e=W3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function W3(t){var e=$ne(t,"string");return cm(e)=="symbol"?e:e+""}function $ne(t,e){if(cm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(cm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function KT(){return KT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KT.apply(this,arguments)}function Vne(t){var e=t.xAxisId,r=EA(),n=MA(),i=C3(e);return i==null?null:it.createElement(Tm,KT({},i,{className:un("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(u){return Tc(u,!0)}}))}var xx=(function(t){function e(){return zne(this,e),Fne(this,e,arguments)}return Nne(e,t),Lne(e,[{key:"render",value:function(){return it.createElement(Vne,this.props)}}])})(it.Component);U3(xx,"displayName","XAxis");U3(xx,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function hm(t){"@babel/helpers - typeof";return hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hm(t)}function qne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Une(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z3(n.key),n)}}function Wne(t,e,r){return e&&Une(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Hne(t,e,r){return e=k0(e),Gne(t,H3()?Reflect.construct(e,r||[],k0(t).constructor):e.apply(t,r))}function Gne(t,e){if(e&&(hm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zne(t)}function Zne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H3=function(){return!!t})()}function k0(t){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k0(t)}function Xne(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YT(t,e)}function YT(t,e){return YT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},YT(t,e)}function G3(t,e,r){return e=Z3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z3(t){var e=Kne(t,"string");return hm(e)=="symbol"?e:e+""}function Kne(t,e){if(hm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(hm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function JT(){return JT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},JT.apply(this,arguments)}var Yne=function(e){var r=e.yAxisId,n=EA(),i=MA(),l=O3(r);return l==null?null:it.createElement(Tm,JT({},l,{className:un("recharts-".concat(l.axisType," ").concat(l.axisType),l.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(s){return Tc(s,!0)}}))},bx=(function(t){function e(){return qne(this,e),Hne(this,e,arguments)}return Xne(e,t),Wne(e,[{key:"render",value:function(){return it.createElement(Yne,this.props)}}])})(it.Component);G3(bx,"displayName","YAxis");G3(bx,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function zR(t){return tie(t)||eie(t)||Qne(t)||Jne()}function Jne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qne(t,e){if(t){if(typeof t=="string")return QT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QT(t,e)}}function eie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tie(t){if(Array.isArray(t))return QT(t)}function QT(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var eP=function(e,r,n,i,l){var u=Il(e,OA),s=Il(e,yx),m=[].concat(zR(u),zR(s)),y=Il(e,_x),w="".concat(i,"Id"),S=i[0],E=r;if(m.length&&(E=m.reduce(function(L,R){if(R.props[w]===n&&Eu(R.props,"extendDomain")&&Dt(R.props[S])){var U=R.props[S];return[Math.min(L[0],U),Math.max(L[1],U)]}return L},E)),y.length){var I="".concat(S,"1"),F="".concat(S,"2");E=y.reduce(function(L,R){if(R.props[w]===n&&Eu(R.props,"extendDomain")&&Dt(R.props[I])&&Dt(R.props[F])){var U=R.props[I],X=R.props[F];return[Math.min(L[0],U,X),Math.max(L[1],U,X)]}return L},E)}return l&&l.length&&(E=l.reduce(function(L,R){return Dt(R)?[Math.min(L[0],R),Math.max(L[1],R)]:L},E)),E},g2={exports:{}},RR;function rie(){return RR||(RR=1,(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,y,w){this.fn=m,this.context=y,this.once=w||!1}function l(m,y,w,S,E){if(typeof w!="function")throw new TypeError("The listener must be a function");var I=new i(w,S||m,E),F=r?r+y:y;return m._events[F]?m._events[F].fn?m._events[F]=[m._events[F],I]:m._events[F].push(I):(m._events[F]=I,m._eventsCount++),m}function u(m,y){--m._eventsCount===0?m._events=new n:delete m._events[y]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var y=[],w,S;if(this._eventsCount===0)return y;for(S in w=this._events)e.call(w,S)&&y.push(r?S.slice(1):S);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(w)):y},s.prototype.listeners=function(y){var w=r?r+y:y,S=this._events[w];if(!S)return[];if(S.fn)return[S.fn];for(var E=0,I=S.length,F=new Array(I);E<I;E++)F[E]=S[E].fn;return F},s.prototype.listenerCount=function(y){var w=r?r+y:y,S=this._events[w];return S?S.fn?1:S.length:0},s.prototype.emit=function(y,w,S,E,I,F){var L=r?r+y:y;if(!this._events[L])return!1;var R=this._events[L],U=arguments.length,X,K;if(R.fn){switch(R.once&&this.removeListener(y,R.fn,void 0,!0),U){case 1:return R.fn.call(R.context),!0;case 2:return R.fn.call(R.context,w),!0;case 3:return R.fn.call(R.context,w,S),!0;case 4:return R.fn.call(R.context,w,S,E),!0;case 5:return R.fn.call(R.context,w,S,E,I),!0;case 6:return R.fn.call(R.context,w,S,E,I,F),!0}for(K=1,X=new Array(U-1);K<U;K++)X[K-1]=arguments[K];R.fn.apply(R.context,X)}else{var re=R.length,W;for(K=0;K<re;K++)switch(R[K].once&&this.removeListener(y,R[K].fn,void 0,!0),U){case 1:R[K].fn.call(R[K].context);break;case 2:R[K].fn.call(R[K].context,w);break;case 3:R[K].fn.call(R[K].context,w,S);break;case 4:R[K].fn.call(R[K].context,w,S,E);break;default:if(!X)for(W=1,X=new Array(U-1);W<U;W++)X[W-1]=arguments[W];R[K].fn.apply(R[K].context,X)}}return!0},s.prototype.on=function(y,w,S){return l(this,y,w,S,!1)},s.prototype.once=function(y,w,S){return l(this,y,w,S,!0)},s.prototype.removeListener=function(y,w,S,E){var I=r?r+y:y;if(!this._events[I])return this;if(!w)return u(this,I),this;var F=this._events[I];if(F.fn)F.fn===w&&(!E||F.once)&&(!S||F.context===S)&&u(this,I);else{for(var L=0,R=[],U=F.length;L<U;L++)(F[L].fn!==w||E&&!F[L].once||S&&F[L].context!==S)&&R.push(F[L]);R.length?this._events[I]=R.length===1?R[0]:R:u(this,I)}return this},s.prototype.removeAllListeners=function(y){var w;return y?(w=r?r+y:y,this._events[w]&&u(this,w)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,t.exports=s})(g2)),g2.exports}var nie=rie();const iie=An(nie);var y2=new iie,v2="recharts.syncMouseEvents";function Oy(t){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oy(t)}function aie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,X3(n.key),n)}}function sie(t,e,r){return e&&oie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _2(t,e,r){return e=X3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function X3(t){var e=lie(t,"string");return Oy(e)=="symbol"?e:e+""}function lie(t,e){if(Oy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Oy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uie=(function(){function t(){aie(this,t),_2(this,"activeIndex",0),_2(this,"coordinateList",[]),_2(this,"layout","horizontal")}return sie(t,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,l=i===void 0?null:i,u=r.container,s=u===void 0?null:u,m=r.layout,y=m===void 0?null:m,w=r.offset,S=w===void 0?null:w,E=r.mouseHandlerCallback,I=E===void 0?null:E;this.coordinateList=(n=l??this.coordinateList)!==null&&n!==void 0?n:[],this.container=s??this.container,this.layout=y??this.layout,this.offset=S??this.offset,this.mouseHandlerCallback=I??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),l=i.x,u=i.y,s=i.height,m=this.coordinateList[this.activeIndex].coordinate,y=((r=window)===null||r===void 0?void 0:r.scrollX)||0,w=((n=window)===null||n===void 0?void 0:n.scrollY)||0,S=l+m+y,E=u+this.offset.top+s/2+w;this.mouseHandlerCallback({pageX:S,pageY:E})}}}])})();function cie(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t?.[0],i=t?.[1];if(n&&i&&Dt(n)&&Dt(i))return!0}return!1}function hie(t,e,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-i,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function K3(t){var e=t.cx,r=t.cy,n=t.radius,i=t.startAngle,l=t.endAngle,u=Ca(e,r,n,i),s=Ca(e,r,n,l);return{points:[u,s],cx:e,cy:r,radius:n,startAngle:i,endAngle:l}}function fie(t,e,r){var n,i,l,u;if(t==="horizontal")n=e.x,l=n,i=r.top,u=r.top+r.height;else if(t==="vertical")i=e.y,u=i,n=r.left,l=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var s=e.cx,m=e.cy,y=e.innerRadius,w=e.outerRadius,S=e.angle,E=Ca(s,m,y,S),I=Ca(s,m,w,S);n=E.x,i=E.y,l=I.x,u=I.y}else return K3(e);return[{x:n,y:i},{x:l,y:u}]}function Iy(t){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iy(t)}function LR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function m_(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(r),!0).forEach(function(n){die(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):LR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function die(t,e,r){return e=pie(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pie(t){var e=mie(t,"string");return Iy(e)=="symbol"?e:e+""}function mie(t,e){if(Iy(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Iy(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gie(t){var e,r,n=t.element,i=t.tooltipEventType,l=t.isActive,u=t.activeCoordinate,s=t.activePayload,m=t.offset,y=t.activeTooltipIndex,w=t.tooltipAxisBandSize,S=t.layout,E=t.chartName,I=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!I||!l||!u||E!=="ScatterChart"&&i!=="axis")return null;var F,L=dz;if(E==="ScatterChart")F=u,L=kee;else if(E==="BarChart")F=hie(S,u,m,w),L=TA;else if(S==="radial"){var R=K3(u),U=R.cx,X=R.cy,K=R.radius,re=R.startAngle,W=R.endAngle;F={cx:U,cy:X,startAngle:re,endAngle:W,innerRadius:K,outerRadius:K},L=a3}else F={points:fie(S,u,m)},L=dz;var J=m_(m_(m_(m_({stroke:"#ccc",pointerEvents:"none"},m),F),ln(I,!1)),{},{payload:s,payloadIndex:y,className:un("recharts-tooltip-cursor",I.className)});return it.isValidElement(I)?it.cloneElement(I,J):it.createElement(L,J)}var yie=["item"],vie=["children","className","width","height","style","compact","title","desc"];function fm(t){"@babel/helpers - typeof";return fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fm(t)}function Lp(){return Lp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lp.apply(this,arguments)}function FR(t,e){return bie(t)||xie(t,e)||J3(t,e)||_ie()}function _ie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xie(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,l,u,s=[],m=!0,y=!1;try{if(l=(r=r.call(t)).next,e!==0)for(;!(m=(n=l.call(r)).done)&&(s.push(n.value),s.length!==e);m=!0);}catch(w){y=!0,i=w}finally{try{if(!m&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(y)throw i}}return s}}function bie(t){if(Array.isArray(t))return t}function jR(t,e){if(t==null)return{};var r=wie(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wie(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Sie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q3(n.key),n)}}function Pie(t,e,r){return e&&Tie(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aie(t,e,r){return e=E0(e),kie(t,Y3()?Reflect.construct(e,r||[],E0(t).constructor):e.apply(t,r))}function kie(t,e){if(e&&(fm(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eie(t)}function Eie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y3(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y3=function(){return!!t})()}function E0(t){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E0(t)}function Mie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tP(t,e)}function tP(t,e){return tP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},tP(t,e)}function dm(t){return Iie(t)||Oie(t)||J3(t)||Cie()}function Cie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J3(t,e){if(t){if(typeof t=="string")return rP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rP(t,e)}}function Oie(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Iie(t){if(Array.isArray(t))return rP(t)}function rP(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function BR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function st(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BR(Object(r),!0).forEach(function(n){mr(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mr(t,e,r){return e=Q3(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q3(t){var e=Die(t,"string");return fm(e)=="symbol"?e:e+""}function Die(t,e){if(fm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zie={xAxis:["bottom","top"],yAxis:["left","right"]},Rie={width:"100%",height:"100%"},e5={x:0,y:0};function g_(t){return t}var Lie=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},Fie=function(e,r,n,i){var l=r.find(function(w){return w&&w.index===n});if(l){if(e==="horizontal")return{x:l.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:l.coordinate};if(e==="centric"){var u=l.coordinate,s=i.radius;return st(st(st({},i),Ca(i.cx,i.cy,s,u)),{},{angle:u,radius:s})}var m=l.coordinate,y=i.angle;return st(st(st({},i),Ca(i.cx,i.cy,m,y)),{},{angle:y,radius:m})}return e5},wx=function(e,r){var n=r.graphicalItems,i=r.dataStartIndex,l=r.dataEndIndex,u=(n??[]).reduce(function(s,m){var y=m.props.data;return y&&y.length?[].concat(dm(s),dm(y)):s},[]);return u.length>0?u:e&&e.length&&Dt(i)&&Dt(l)?e.slice(i,l+1):[]};function t5(t){return t==="number"?[0,"auto"]:void 0}var nP=function(e,r,n,i){var l=e.graphicalItems,u=e.tooltipAxis,s=wx(r,e);return n<0||!l||!l.length||n>=s.length?null:l.reduce(function(m,y){var w,S=(w=y.props.data)!==null&&w!==void 0?w:r;S&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(S=S.slice(e.dataStartIndex,e.dataEndIndex+1));var E;if(u.dataKey&&!u.allowDuplicatedCategory){var I=S===void 0?s:S;E=q2(I,u.dataKey,i)}else E=S&&S[n]||s[n];return E?[].concat(dm(m),[r3(y,E)]):m},[])},NR=function(e,r,n,i){var l=i||{x:e.chartX,y:e.chartY},u=Lie(l,n),s=e.orderedTooltipTicks,m=e.tooltipAxis,y=e.tooltipTicks,w=cY(u,s,y,m);if(w>=0&&y){var S=y[w]&&y[w].value,E=nP(e,r,w,S),I=Fie(n,s,w,l);return{activeTooltipIndex:w,activeLabel:S,activePayload:E,activeCoordinate:I}}return null},jie=function(e,r){var n=r.axes,i=r.graphicalItems,l=r.axisType,u=r.axisIdKey,s=r.stackGroups,m=r.dataStartIndex,y=r.dataEndIndex,w=e.layout,S=e.children,E=e.stackOffset,I=QB(w,l);return n.reduce(function(F,L){var R,U=L.type.defaultProps!==void 0?st(st({},L.type.defaultProps),L.props):L.props,X=U.type,K=U.dataKey,re=U.allowDataOverflow,W=U.allowDuplicatedCategory,J=U.scale,ie=U.ticks,he=U.includeHidden,ve=U[u];if(F[ve])return F;var Re=wx(e.data,{graphicalItems:i.filter(function(De){var ft,At=u in De.props?De.props[u]:(ft=De.type.defaultProps)===null||ft===void 0?void 0:ft[u];return At===ve}),dataStartIndex:m,dataEndIndex:y}),de=Re.length,Oe,Le,Ge;cie(U.domain,re,X)&&(Oe=ST(U.domain,null,re),I&&(X==="number"||J!=="auto")&&(Ge=qg(Re,K,"category")));var Ne=t5(X);if(!Oe||Oe.length===0){var Ue,Qe=(Ue=U.domain)!==null&&Ue!==void 0?Ue:Ne;if(K){if(Oe=qg(Re,K,X),X==="category"&&I){var $e=tW(Oe);W&&$e?(Le=Oe,Oe=g0(0,de)):W||(Oe=QD(Qe,Oe,L).reduce(function(De,ft){return De.indexOf(ft)>=0?De:[].concat(dm(De),[ft])},[]))}else if(X==="category")W?Oe=Oe.filter(function(De){return De!==""&&!cn(De)}):Oe=QD(Qe,Oe,L).reduce(function(De,ft){return De.indexOf(ft)>=0||ft===""||cn(ft)?De:[].concat(dm(De),[ft])},[]);else if(X==="number"){var Ye=mY(Re,i.filter(function(De){var ft,At,jt=u in De.props?De.props[u]:(ft=De.type.defaultProps)===null||ft===void 0?void 0:ft[u],Nt="hide"in De.props?De.props.hide:(At=De.type.defaultProps)===null||At===void 0?void 0:At.hide;return jt===ve&&(he||!Nt)}),K,l,w);Ye&&(Oe=Ye)}I&&(X==="number"||J!=="auto")&&(Ge=qg(Re,K,"category"))}else I?Oe=g0(0,de):s&&s[ve]&&s[ve].hasStack&&X==="number"?Oe=E==="expand"?[0,1]:t3(s[ve].stackGroups,m,y):Oe=JB(Re,i.filter(function(De){var ft=u in De.props?De.props[u]:De.type.defaultProps[u],At="hide"in De.props?De.props.hide:De.type.defaultProps.hide;return ft===ve&&(he||!At)}),X,w,!0);if(X==="number")Oe=eP(S,Oe,ve,l,ie),Qe&&(Oe=ST(Qe,Oe,re));else if(X==="category"&&Qe){var nt=Qe,Se=Oe.every(function(De){return nt.indexOf(De)>=0});Se&&(Oe=nt)}}return st(st({},F),{},mr({},ve,st(st({},U),{},{axisType:l,domain:Oe,categoricalDomain:Ge,duplicateDomain:Le,originalDomain:(R=U.domain)!==null&&R!==void 0?R:Ne,isCategorical:I,layout:w})))},{})},Bie=function(e,r){var n=r.graphicalItems,i=r.Axis,l=r.axisType,u=r.axisIdKey,s=r.stackGroups,m=r.dataStartIndex,y=r.dataEndIndex,w=e.layout,S=e.children,E=wx(e.data,{graphicalItems:n,dataStartIndex:m,dataEndIndex:y}),I=E.length,F=QB(w,l),L=-1;return n.reduce(function(R,U){var X=U.type.defaultProps!==void 0?st(st({},U.type.defaultProps),U.props):U.props,K=X[u],re=t5("number");if(!R[K]){L++;var W;return F?W=g0(0,I):s&&s[K]&&s[K].hasStack?(W=t3(s[K].stackGroups,m,y),W=eP(S,W,K,l)):(W=ST(re,JB(E,n.filter(function(J){var ie,he,ve=u in J.props?J.props[u]:(ie=J.type.defaultProps)===null||ie===void 0?void 0:ie[u],Re="hide"in J.props?J.props.hide:(he=J.type.defaultProps)===null||he===void 0?void 0:he.hide;return ve===K&&!Re}),"number",w),i.defaultProps.allowDataOverflow),W=eP(S,W,K,l)),st(st({},R),{},mr({},K,st(st({axisType:l},i.defaultProps),{},{hide:!0,orientation:Ks(zie,"".concat(l,".").concat(L%2),null),domain:W,originalDomain:re,isCategorical:F,layout:w})))}return R},{})},Nie=function(e,r){var n=r.axisType,i=n===void 0?"xAxis":n,l=r.AxisComp,u=r.graphicalItems,s=r.stackGroups,m=r.dataStartIndex,y=r.dataEndIndex,w=e.children,S="".concat(i,"Id"),E=Il(w,l),I={};return E&&E.length?I=jie(e,{axes:E,graphicalItems:u,axisType:i,axisIdKey:S,stackGroups:s,dataStartIndex:m,dataEndIndex:y}):u&&u.length&&(I=Bie(e,{Axis:l,graphicalItems:u,axisType:i,axisIdKey:S,stackGroups:s,dataStartIndex:m,dataEndIndex:y})),I},$ie=function(e){var r=Sh(e),n=Tc(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:KP(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:s0(r,n)}},$R=function(e){var r=e.children,n=e.defaultShowTooltip,i=vs(r,im),l=0,u=0;return e.data&&e.data.length!==0&&(u=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(l=i.props.startIndex),i.props.endIndex>=0&&(u=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:l,dataEndIndex:u,activeTooltipIndex:-1,isTooltipActive:!!n}},Vie=function(e){return!e||!e.length?!1:e.some(function(r){var n=Pc(r&&r.type);return n&&n.indexOf("Bar")>=0})},VR=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},qie=function(e,r){var n=e.props,i=e.graphicalItems,l=e.xAxisMap,u=l===void 0?{}:l,s=e.yAxisMap,m=s===void 0?{}:s,y=n.width,w=n.height,S=n.children,E=n.margin||{},I=vs(S,im),F=vs(S,cd),L=Object.keys(m).reduce(function(W,J){var ie=m[J],he=ie.orientation;return!ie.mirror&&!ie.hide?st(st({},W),{},mr({},he,W[he]+ie.width)):W},{left:E.left||0,right:E.right||0}),R=Object.keys(u).reduce(function(W,J){var ie=u[J],he=ie.orientation;return!ie.mirror&&!ie.hide?st(st({},W),{},mr({},he,Ks(W,"".concat(he))+ie.height)):W},{top:E.top||0,bottom:E.bottom||0}),U=st(st({},R),L),X=U.bottom;I&&(U.bottom+=I.props.height||im.defaultProps.height),F&&r&&(U=dY(U,i,n,r));var K=y-U.left-U.right,re=w-U.top-U.bottom;return st(st({brushBottom:X},U),{},{width:Math.max(K,0),height:Math.max(re,0)})},Uie=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},Wie=function(e){var r=e.chartName,n=e.GraphicalChild,i=e.defaultTooltipEventType,l=i===void 0?"axis":i,u=e.validateTooltipEventTypes,s=u===void 0?["axis"]:u,m=e.axisComponents,y=e.legendContent,w=e.formatAxisMap,S=e.defaultProps,E=function(U,X){var K=X.graphicalItems,re=X.stackGroups,W=X.offset,J=X.updateId,ie=X.dataStartIndex,he=X.dataEndIndex,ve=U.barSize,Re=U.layout,de=U.barGap,Oe=U.barCategoryGap,Le=U.maxBarSize,Ge=VR(Re),Ne=Ge.numericAxisName,Ue=Ge.cateAxisName,Qe=Vie(K),$e=[];return K.forEach(function(Ye,nt){var Se=wx(U.data,{graphicalItems:[Ye],dataStartIndex:ie,dataEndIndex:he}),De=Ye.type.defaultProps!==void 0?st(st({},Ye.type.defaultProps),Ye.props):Ye.props,ft=De.dataKey,At=De.maxBarSize,jt=De["".concat(Ne,"Id")],Nt=De["".concat(Ue,"Id")],or={},er=m.reduce(function(ri,ni){var Hi=X["".concat(ni.axisType,"Map")],Eo=De["".concat(ni.axisType,"Id")];Hi&&Hi[Eo]||ni.axisType==="zAxis"||_d();var xi=Hi[Eo];return st(st({},ri),{},mr(mr({},ni.axisType,xi),"".concat(ni.axisType,"Ticks"),Tc(xi)))},or),ct=er[Ue],Ht=er["".concat(Ue,"Ticks")],lr=re&&re[jt]&&re[jt].hasStack&&kY(Ye,re[jt].stackGroups),Je=Pc(Ye.type).indexOf("Bar")>=0,rr=s0(ct,Ht),Bt=[],Er=Qe&&hY({barSize:ve,stackGroups:re,totalSize:Uie(er,Ue)});if(Je){var Ve,Gr,Oi=cn(At)?Le:At,xr=(Ve=(Gr=s0(ct,Ht,!0))!==null&&Gr!==void 0?Gr:Oi)!==null&&Ve!==void 0?Ve:0;Bt=fY({barGap:de,barCategoryGap:Oe,bandSize:xr!==rr?xr:rr,sizeList:Er[Nt],maxBarSize:Oi}),xr!==rr&&(Bt=Bt.map(function(ri){return st(st({},ri),{},{position:st(st({},ri.position),{},{offset:ri.position.offset-xr/2})})}))}var jr=Ye&&Ye.type&&Ye.type.getComposedData;jr&&$e.push({props:st(st({},jr(st(st({},er),{},{displayedData:Se,props:U,dataKey:ft,item:Ye,bandSize:rr,barPosition:Bt,offset:W,stackedData:lr,layout:Re,dataStartIndex:ie,dataEndIndex:he}))),{},mr(mr(mr({key:Ye.key||"item-".concat(nt)},Ne,er[Ne]),Ue,er[Ue]),"animationId",J)),childIndex:dW(Ye,U.children),item:Ye})}),$e},I=function(U,X){var K=U.props,re=U.dataStartIndex,W=U.dataEndIndex,J=U.updateId;if(!pC({props:K}))return null;var ie=K.children,he=K.layout,ve=K.stackOffset,Re=K.data,de=K.reverseStackOrder,Oe=VR(he),Le=Oe.numericAxisName,Ge=Oe.cateAxisName,Ne=Il(ie,n),Ue=TY(Re,Ne,"".concat(Le,"Id"),"".concat(Ge,"Id"),ve,de),Qe=m.reduce(function(De,ft){var At="".concat(ft.axisType,"Map");return st(st({},De),{},mr({},At,Nie(K,st(st({},ft),{},{graphicalItems:Ne,stackGroups:ft.axisType===Le&&Ue,dataStartIndex:re,dataEndIndex:W}))))},{}),$e=qie(st(st({},Qe),{},{props:K,graphicalItems:Ne}),X?.legendBBox);Object.keys(Qe).forEach(function(De){Qe[De]=w(K,Qe[De],$e,De.replace("Map",""),r)});var Ye=Qe["".concat(Ge,"Map")],nt=$ie(Ye),Se=E(K,st(st({},Qe),{},{dataStartIndex:re,dataEndIndex:W,updateId:J,graphicalItems:Ne,stackGroups:Ue,offset:$e}));return st(st({formattedGraphicalItems:Se,graphicalItems:Ne,offset:$e,stackGroups:Ue},nt),Qe)},F=(function(R){function U(X){var K,re,W;return Sie(this,U),W=Aie(this,U,[X]),mr(W,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),mr(W,"accessibilityManager",new uie),mr(W,"handleLegendBBoxUpdate",function(J){if(J){var ie=W.state,he=ie.dataStartIndex,ve=ie.dataEndIndex,Re=ie.updateId;W.setState(st({legendBBox:J},I({props:W.props,dataStartIndex:he,dataEndIndex:ve,updateId:Re},st(st({},W.state),{},{legendBBox:J}))))}}),mr(W,"handleReceiveSyncEvent",function(J,ie,he){if(W.props.syncId===J){if(he===W.eventEmitterSymbol&&typeof W.props.syncMethod!="function")return;W.applySyncEvent(ie)}}),mr(W,"handleBrushChange",function(J){var ie=J.startIndex,he=J.endIndex;if(ie!==W.state.dataStartIndex||he!==W.state.dataEndIndex){var ve=W.state.updateId;W.setState(function(){return st({dataStartIndex:ie,dataEndIndex:he},I({props:W.props,dataStartIndex:ie,dataEndIndex:he,updateId:ve},W.state))}),W.triggerSyncEvent({dataStartIndex:ie,dataEndIndex:he})}}),mr(W,"handleMouseEnter",function(J){var ie=W.getMouseInfo(J);if(ie){var he=st(st({},ie),{},{isTooltipActive:!0});W.setState(he),W.triggerSyncEvent(he);var ve=W.props.onMouseEnter;Lr(ve)&&ve(he,J)}}),mr(W,"triggeredAfterMouseMove",function(J){var ie=W.getMouseInfo(J),he=ie?st(st({},ie),{},{isTooltipActive:!0}):{isTooltipActive:!1};W.setState(he),W.triggerSyncEvent(he);var ve=W.props.onMouseMove;Lr(ve)&&ve(he,J)}),mr(W,"handleItemMouseEnter",function(J){W.setState(function(){return{isTooltipActive:!0,activeItem:J,activePayload:J.tooltipPayload,activeCoordinate:J.tooltipPosition||{x:J.cx,y:J.cy}}})}),mr(W,"handleItemMouseLeave",function(){W.setState(function(){return{isTooltipActive:!1}})}),mr(W,"handleMouseMove",function(J){J.persist(),W.throttleTriggeredAfterMouseMove(J)}),mr(W,"handleMouseLeave",function(J){W.throttleTriggeredAfterMouseMove.cancel();var ie={isTooltipActive:!1};W.setState(ie),W.triggerSyncEvent(ie);var he=W.props.onMouseLeave;Lr(he)&&he(ie,J)}),mr(W,"handleOuterEvent",function(J){var ie=fW(J),he=Ks(W.props,"".concat(ie));if(ie&&Lr(he)){var ve,Re;/.*touch.*/i.test(ie)?Re=W.getMouseInfo(J.changedTouches[0]):Re=W.getMouseInfo(J),he((ve=Re)!==null&&ve!==void 0?ve:{},J)}}),mr(W,"handleClick",function(J){var ie=W.getMouseInfo(J);if(ie){var he=st(st({},ie),{},{isTooltipActive:!0});W.setState(he),W.triggerSyncEvent(he);var ve=W.props.onClick;Lr(ve)&&ve(he,J)}}),mr(W,"handleMouseDown",function(J){var ie=W.props.onMouseDown;if(Lr(ie)){var he=W.getMouseInfo(J);ie(he,J)}}),mr(W,"handleMouseUp",function(J){var ie=W.props.onMouseUp;if(Lr(ie)){var he=W.getMouseInfo(J);ie(he,J)}}),mr(W,"handleTouchMove",function(J){J.changedTouches!=null&&J.changedTouches.length>0&&W.throttleTriggeredAfterMouseMove(J.changedTouches[0])}),mr(W,"handleTouchStart",function(J){J.changedTouches!=null&&J.changedTouches.length>0&&W.handleMouseDown(J.changedTouches[0])}),mr(W,"handleTouchEnd",function(J){J.changedTouches!=null&&J.changedTouches.length>0&&W.handleMouseUp(J.changedTouches[0])}),mr(W,"handleDoubleClick",function(J){var ie=W.props.onDoubleClick;if(Lr(ie)){var he=W.getMouseInfo(J);ie(he,J)}}),mr(W,"handleContextMenu",function(J){var ie=W.props.onContextMenu;if(Lr(ie)){var he=W.getMouseInfo(J);ie(he,J)}}),mr(W,"triggerSyncEvent",function(J){W.props.syncId!==void 0&&y2.emit(v2,W.props.syncId,J,W.eventEmitterSymbol)}),mr(W,"applySyncEvent",function(J){var ie=W.props,he=ie.layout,ve=ie.syncMethod,Re=W.state.updateId,de=J.dataStartIndex,Oe=J.dataEndIndex;if(J.dataStartIndex!==void 0||J.dataEndIndex!==void 0)W.setState(st({dataStartIndex:de,dataEndIndex:Oe},I({props:W.props,dataStartIndex:de,dataEndIndex:Oe,updateId:Re},W.state)));else if(J.activeTooltipIndex!==void 0){var Le=J.chartX,Ge=J.chartY,Ne=J.activeTooltipIndex,Ue=W.state,Qe=Ue.offset,$e=Ue.tooltipTicks;if(!Qe)return;if(typeof ve=="function")Ne=ve($e,J);else if(ve==="value"){Ne=-1;for(var Ye=0;Ye<$e.length;Ye++)if($e[Ye].value===J.activeLabel){Ne=Ye;break}}var nt=st(st({},Qe),{},{x:Qe.left,y:Qe.top}),Se=Math.min(Le,nt.x+nt.width),De=Math.min(Ge,nt.y+nt.height),ft=$e[Ne]&&$e[Ne].value,At=nP(W.state,W.props.data,Ne),jt=$e[Ne]?{x:he==="horizontal"?$e[Ne].coordinate:Se,y:he==="horizontal"?De:$e[Ne].coordinate}:e5;W.setState(st(st({},J),{},{activeLabel:ft,activeCoordinate:jt,activePayload:At,activeTooltipIndex:Ne}))}else W.setState(J)}),mr(W,"renderCursor",function(J){var ie,he=W.state,ve=he.isTooltipActive,Re=he.activeCoordinate,de=he.activePayload,Oe=he.offset,Le=he.activeTooltipIndex,Ge=he.tooltipAxisBandSize,Ne=W.getTooltipEventType(),Ue=(ie=J.props.active)!==null&&ie!==void 0?ie:ve,Qe=W.props.layout,$e=J.key||"_recharts-cursor";return He.createElement(gie,{key:$e,activeCoordinate:Re,activePayload:de,activeTooltipIndex:Le,chartName:r,element:J,isActive:Ue,layout:Qe,offset:Oe,tooltipAxisBandSize:Ge,tooltipEventType:Ne})}),mr(W,"renderPolarAxis",function(J,ie,he){var ve=Ks(J,"type.axisType"),Re=Ks(W.state,"".concat(ve,"Map")),de=J.type.defaultProps,Oe=de!==void 0?st(st({},de),J.props):J.props,Le=Re&&Re[Oe["".concat(ve,"Id")]];return it.cloneElement(J,st(st({},Le),{},{className:un(ve,Le.className),key:J.key||"".concat(ie,"-").concat(he),ticks:Tc(Le,!0)}))}),mr(W,"renderPolarGrid",function(J){var ie=J.props,he=ie.radialLines,ve=ie.polarAngles,Re=ie.polarRadius,de=W.state,Oe=de.radiusAxisMap,Le=de.angleAxisMap,Ge=Sh(Oe),Ne=Sh(Le),Ue=Ne.cx,Qe=Ne.cy,$e=Ne.innerRadius,Ye=Ne.outerRadius;return it.cloneElement(J,{polarAngles:Array.isArray(ve)?ve:Tc(Ne,!0).map(function(nt){return nt.coordinate}),polarRadius:Array.isArray(Re)?Re:Tc(Ge,!0).map(function(nt){return nt.coordinate}),cx:Ue,cy:Qe,innerRadius:$e,outerRadius:Ye,key:J.key||"polar-grid",radialLines:he})}),mr(W,"renderLegend",function(){var J=W.state.formattedGraphicalItems,ie=W.props,he=ie.children,ve=ie.width,Re=ie.height,de=W.props.margin||{},Oe=ve-(de.left||0)-(de.right||0),Le=KB({children:he,formattedGraphicalItems:J,legendWidth:Oe,legendContent:y});if(!Le)return null;var Ge=Le.item,Ne=jR(Le,yie);return it.cloneElement(Ge,st(st({},Ne),{},{chartWidth:ve,chartHeight:Re,margin:de,onBBoxUpdate:W.handleLegendBBoxUpdate}))}),mr(W,"renderTooltip",function(){var J,ie=W.props,he=ie.children,ve=ie.accessibilityLayer,Re=vs(he,Su);if(!Re)return null;var de=W.state,Oe=de.isTooltipActive,Le=de.activeCoordinate,Ge=de.activePayload,Ne=de.activeLabel,Ue=de.offset,Qe=(J=Re.props.active)!==null&&J!==void 0?J:Oe;return it.cloneElement(Re,{viewBox:st(st({},Ue),{},{x:Ue.left,y:Ue.top}),active:Qe,label:Ne,payload:Qe?Ge:[],coordinate:Le,accessibilityLayer:ve})}),mr(W,"renderBrush",function(J){var ie=W.props,he=ie.margin,ve=ie.data,Re=W.state,de=Re.offset,Oe=Re.dataStartIndex,Le=Re.dataEndIndex,Ge=Re.updateId;return it.cloneElement(J,{key:J.key||"_recharts-brush",onChange:h_(W.handleBrushChange,J.props.onChange),data:ve,x:Dt(J.props.x)?J.props.x:de.left,y:Dt(J.props.y)?J.props.y:de.top+de.height+de.brushBottom-(he.bottom||0),width:Dt(J.props.width)?J.props.width:de.width,startIndex:Oe,endIndex:Le,updateId:"brush-".concat(Ge)})}),mr(W,"renderReferenceElement",function(J,ie,he){if(!J)return null;var ve=W,Re=ve.clipPathId,de=W.state,Oe=de.xAxisMap,Le=de.yAxisMap,Ge=de.offset,Ne=J.type.defaultProps||{},Ue=J.props,Qe=Ue.xAxisId,$e=Qe===void 0?Ne.xAxisId:Qe,Ye=Ue.yAxisId,nt=Ye===void 0?Ne.yAxisId:Ye;return it.cloneElement(J,{key:J.key||"".concat(ie,"-").concat(he),xAxis:Oe[$e],yAxis:Le[nt],viewBox:{x:Ge.left,y:Ge.top,width:Ge.width,height:Ge.height},clipPathId:Re})}),mr(W,"renderActivePoints",function(J){var ie=J.item,he=J.activePoint,ve=J.basePoint,Re=J.childIndex,de=J.isRange,Oe=[],Le=ie.props.key,Ge=ie.item.type.defaultProps!==void 0?st(st({},ie.item.type.defaultProps),ie.item.props):ie.item.props,Ne=Ge.activeDot,Ue=Ge.dataKey,Qe=st(st({index:Re,dataKey:Ue,cx:he.x,cy:he.y,r:4,fill:SA(ie.item),strokeWidth:2,stroke:"#fff",payload:he.payload,value:he.value},ln(Ne,!1)),R_(Ne));return Oe.push(U.renderActiveDot(Ne,Qe,"".concat(Le,"-activePoint-").concat(Re))),ve?Oe.push(U.renderActiveDot(Ne,st(st({},Qe),{},{cx:ve.x,cy:ve.y}),"".concat(Le,"-basePoint-").concat(Re))):de&&Oe.push(null),Oe}),mr(W,"renderGraphicChild",function(J,ie,he){var ve=W.filterFormatItem(J,ie,he);if(!ve)return null;var Re=W.getTooltipEventType(),de=W.state,Oe=de.isTooltipActive,Le=de.tooltipAxis,Ge=de.activeTooltipIndex,Ne=de.activeLabel,Ue=W.props.children,Qe=vs(Ue,Su),$e=ve.props,Ye=$e.points,nt=$e.isRange,Se=$e.baseLine,De=ve.item.type.defaultProps!==void 0?st(st({},ve.item.type.defaultProps),ve.item.props):ve.item.props,ft=De.activeDot,At=De.hide,jt=De.activeBar,Nt=De.activeShape,or=!!(!At&&Oe&&Qe&&(ft||jt||Nt)),er={};Re!=="axis"&&Qe&&Qe.props.trigger==="click"?er={onClick:h_(W.handleItemMouseEnter,J.props.onClick)}:Re!=="axis"&&(er={onMouseLeave:h_(W.handleItemMouseLeave,J.props.onMouseLeave),onMouseEnter:h_(W.handleItemMouseEnter,J.props.onMouseEnter)});var ct=it.cloneElement(J,st(st({},ve.props),er));function Ht(ni){return typeof Le.dataKey=="function"?Le.dataKey(ni.payload):null}if(or)if(Ge>=0){var lr,Je;if(Le.dataKey&&!Le.allowDuplicatedCategory){var rr=typeof Le.dataKey=="function"?Ht:"payload.".concat(Le.dataKey.toString());lr=q2(Ye,rr,Ne),Je=nt&&Se&&q2(Se,rr,Ne)}else lr=Ye?.[Ge],Je=nt&&Se&&Se[Ge];if(Nt||jt){var Bt=J.props.activeIndex!==void 0?J.props.activeIndex:Ge;return[it.cloneElement(J,st(st(st({},ve.props),er),{},{activeIndex:Bt})),null,null]}if(!cn(lr))return[ct].concat(dm(W.renderActivePoints({item:ve,activePoint:lr,basePoint:Je,childIndex:Ge,isRange:nt})))}else{var Er,Ve=(Er=W.getItemByXY(W.state.activeCoordinate))!==null&&Er!==void 0?Er:{graphicalItem:ct},Gr=Ve.graphicalItem,Oi=Gr.item,xr=Oi===void 0?J:Oi,jr=Gr.childIndex,ri=st(st(st({},ve.props),er),{},{activeIndex:jr});return[it.cloneElement(xr,ri),null,null]}return nt?[ct,null,null]:[ct,null]}),mr(W,"renderCustomized",function(J,ie,he){return it.cloneElement(J,st(st({key:"recharts-customized-".concat(he)},W.props),W.state))}),mr(W,"renderMap",{CartesianGrid:{handler:g_,once:!0},ReferenceArea:{handler:W.renderReferenceElement},ReferenceLine:{handler:g_},ReferenceDot:{handler:W.renderReferenceElement},XAxis:{handler:g_},YAxis:{handler:g_},Brush:{handler:W.renderBrush,once:!0},Bar:{handler:W.renderGraphicChild},Line:{handler:W.renderGraphicChild},Area:{handler:W.renderGraphicChild},Radar:{handler:W.renderGraphicChild},RadialBar:{handler:W.renderGraphicChild},Scatter:{handler:W.renderGraphicChild},Pie:{handler:W.renderGraphicChild},Funnel:{handler:W.renderGraphicChild},Tooltip:{handler:W.renderCursor,once:!0},PolarGrid:{handler:W.renderPolarGrid,once:!0},PolarAngleAxis:{handler:W.renderPolarAxis},PolarRadiusAxis:{handler:W.renderPolarAxis},Customized:{handler:W.renderCustomized}}),W.clipPathId="".concat((K=X.id)!==null&&K!==void 0?K:Z0("recharts"),"-clip"),W.throttleTriggeredAfterMouseMove=Xj(W.triggeredAfterMouseMove,(re=X.throttleDelay)!==null&&re!==void 0?re:1e3/60),W.state={},W}return Mie(U,R),Pie(U,[{key:"componentDidMount",value:function(){var K,re;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(K=this.props.margin.left)!==null&&K!==void 0?K:0,top:(re=this.props.margin.top)!==null&&re!==void 0?re:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var K=this.props,re=K.children,W=K.data,J=K.height,ie=K.layout,he=vs(re,Su);if(he){var ve=he.props.defaultIndex;if(!(typeof ve!="number"||ve<0||ve>this.state.tooltipTicks.length-1)){var Re=this.state.tooltipTicks[ve]&&this.state.tooltipTicks[ve].value,de=nP(this.state,W,ve,Re),Oe=this.state.tooltipTicks[ve].coordinate,Le=(this.state.offset.top+J)/2,Ge=ie==="horizontal",Ne=Ge?{x:Oe,y:Le}:{y:Oe,x:Le},Ue=this.state.formattedGraphicalItems.find(function($e){var Ye=$e.item;return Ye.type.name==="Scatter"});Ue&&(Ne=st(st({},Ne),Ue.props.points[ve].tooltipPosition),de=Ue.props.points[ve].tooltipPayload);var Qe={activeTooltipIndex:ve,isTooltipActive:!0,activeLabel:Re,activePayload:de,activeCoordinate:Ne};this.setState(Qe),this.renderCursor(he),this.accessibilityManager.setIndex(ve)}}}},{key:"getSnapshotBeforeUpdate",value:function(K,re){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==re.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==K.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==K.margin){var W,J;this.accessibilityManager.setDetails({offset:{left:(W=this.props.margin.left)!==null&&W!==void 0?W:0,top:(J=this.props.margin.top)!==null&&J!==void 0?J:0}})}return null}},{key:"componentDidUpdate",value:function(K){W2([vs(K.children,Su)],[vs(this.props.children,Su)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var K=vs(this.props.children,Su);if(K&&typeof K.props.shared=="boolean"){var re=K.props.shared?"axis":"item";return s.indexOf(re)>=0?re:l}return l}},{key:"getMouseInfo",value:function(K){if(!this.container)return null;var re=this.container,W=re.getBoundingClientRect(),J=eG(W),ie={chartX:Math.round(K.pageX-J.left),chartY:Math.round(K.pageY-J.top)},he=W.width/re.offsetWidth||1,ve=this.inRange(ie.chartX,ie.chartY,he);if(!ve)return null;var Re=this.state,de=Re.xAxisMap,Oe=Re.yAxisMap,Le=this.getTooltipEventType(),Ge=NR(this.state,this.props.data,this.props.layout,ve);if(Le!=="axis"&&de&&Oe){var Ne=Sh(de).scale,Ue=Sh(Oe).scale,Qe=Ne&&Ne.invert?Ne.invert(ie.chartX):null,$e=Ue&&Ue.invert?Ue.invert(ie.chartY):null;return st(st({},ie),{},{xValue:Qe,yValue:$e},Ge)}return Ge?st(st({},ie),Ge):null}},{key:"inRange",value:function(K,re){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,J=this.props.layout,ie=K/W,he=re/W;if(J==="horizontal"||J==="vertical"){var ve=this.state.offset,Re=ie>=ve.left&&ie<=ve.left+ve.width&&he>=ve.top&&he<=ve.top+ve.height;return Re?{x:ie,y:he}:null}var de=this.state,Oe=de.angleAxisMap,Le=de.radiusAxisMap;if(Oe&&Le){var Ge=Sh(Oe);return rz({x:ie,y:he},Ge)}return null}},{key:"parseEventsOfWrapper",value:function(){var K=this.props.children,re=this.getTooltipEventType(),W=vs(K,Su),J={};W&&re==="axis"&&(W.props.trigger==="click"?J={onClick:this.handleClick}:J={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var ie=R_(this.props,this.handleOuterEvent);return st(st({},ie),J)}},{key:"addListener",value:function(){y2.on(v2,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){y2.removeListener(v2,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(K,re,W){for(var J=this.state.formattedGraphicalItems,ie=0,he=J.length;ie<he;ie++){var ve=J[ie];if(ve.item===K||ve.props.key===K.key||re===Pc(ve.item.type)&&W===ve.childIndex)return ve}return null}},{key:"renderClipPath",value:function(){var K=this.clipPathId,re=this.state.offset,W=re.left,J=re.top,ie=re.height,he=re.width;return He.createElement("defs",null,He.createElement("clipPath",{id:K},He.createElement("rect",{x:W,y:J,height:ie,width:he})))}},{key:"getXScales",value:function(){var K=this.state.xAxisMap;return K?Object.entries(K).reduce(function(re,W){var J=FR(W,2),ie=J[0],he=J[1];return st(st({},re),{},mr({},ie,he.scale))},{}):null}},{key:"getYScales",value:function(){var K=this.state.yAxisMap;return K?Object.entries(K).reduce(function(re,W){var J=FR(W,2),ie=J[0],he=J[1];return st(st({},re),{},mr({},ie,he.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(K){var re;return(re=this.state.xAxisMap)===null||re===void 0||(re=re[K])===null||re===void 0?void 0:re.scale}},{key:"getYScaleByAxisId",value:function(K){var re;return(re=this.state.yAxisMap)===null||re===void 0||(re=re[K])===null||re===void 0?void 0:re.scale}},{key:"getItemByXY",value:function(K){var re=this.state,W=re.formattedGraphicalItems,J=re.activeItem;if(W&&W.length)for(var ie=0,he=W.length;ie<he;ie++){var ve=W[ie],Re=ve.props,de=ve.item,Oe=de.type.defaultProps!==void 0?st(st({},de.type.defaultProps),de.props):de.props,Le=Pc(de.type);if(Le==="Bar"){var Ge=(Re.data||[]).find(function($e){return yee(K,$e)});if(Ge)return{graphicalItem:ve,payload:Ge}}else if(Le==="RadialBar"){var Ne=(Re.data||[]).find(function($e){return rz(K,$e)});if(Ne)return{graphicalItem:ve,payload:Ne}}else if(dx(ve,J)||px(ve,J)||Ay(ve,J)){var Ue=ste({graphicalItem:ve,activeTooltipItem:J,itemData:Oe.data}),Qe=Oe.activeIndex===void 0?Ue:Oe.activeIndex;return{graphicalItem:st(st({},ve),{},{childIndex:Qe}),payload:Ay(ve,J)?Oe.data[Ue]:ve.props.data[Ue]}}}return null}},{key:"render",value:function(){var K=this;if(!pC(this))return null;var re=this.props,W=re.children,J=re.className,ie=re.width,he=re.height,ve=re.style,Re=re.compact,de=re.title,Oe=re.desc,Le=jR(re,vie),Ge=ln(Le,!1);if(Re)return He.createElement(bR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},He.createElement(G2,Lp({},Ge,{width:ie,height:he,title:de,desc:Oe}),this.renderClipPath(),gC(W,this.renderMap)));if(this.props.accessibilityLayer){var Ne,Ue;Ge.tabIndex=(Ne=this.props.tabIndex)!==null&&Ne!==void 0?Ne:0,Ge.role=(Ue=this.props.role)!==null&&Ue!==void 0?Ue:"application",Ge.onKeyDown=function($e){K.accessibilityManager.keyboardEvent($e)},Ge.onFocus=function(){K.accessibilityManager.focus()}}var Qe=this.parseEventsOfWrapper();return He.createElement(bR,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},He.createElement("div",Lp({className:un("recharts-wrapper",J),style:st({position:"relative",cursor:"default",width:ie,height:he},ve)},Qe,{ref:function(Ye){K.container=Ye}}),He.createElement(G2,Lp({},Ge,{width:ie,height:he,title:de,desc:Oe,style:Rie}),this.renderClipPath(),gC(W,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(it.Component);mr(F,"displayName",r),mr(F,"defaultProps",st({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},S)),mr(F,"getDerivedStateFromProps",function(R,U){var X=R.dataKey,K=R.data,re=R.children,W=R.width,J=R.height,ie=R.layout,he=R.stackOffset,ve=R.margin,Re=U.dataStartIndex,de=U.dataEndIndex;if(U.updateId===void 0){var Oe=$R(R);return st(st(st({},Oe),{},{updateId:0},I(st(st({props:R},Oe),{},{updateId:0}),U)),{},{prevDataKey:X,prevData:K,prevWidth:W,prevHeight:J,prevLayout:ie,prevStackOffset:he,prevMargin:ve,prevChildren:re})}if(X!==U.prevDataKey||K!==U.prevData||W!==U.prevWidth||J!==U.prevHeight||ie!==U.prevLayout||he!==U.prevStackOffset||!Np(ve,U.prevMargin)){var Le=$R(R),Ge={chartX:U.chartX,chartY:U.chartY,isTooltipActive:U.isTooltipActive},Ne=st(st({},NR(U,K,ie)),{},{updateId:U.updateId+1}),Ue=st(st(st({},Le),Ge),Ne);return st(st(st({},Ue),I(st({props:R},Ue),U)),{},{prevDataKey:X,prevData:K,prevWidth:W,prevHeight:J,prevLayout:ie,prevStackOffset:he,prevMargin:ve,prevChildren:re})}if(!W2(re,U.prevChildren)){var Qe,$e,Ye,nt,Se=vs(re,im),De=Se&&(Qe=($e=Se.props)===null||$e===void 0?void 0:$e.startIndex)!==null&&Qe!==void 0?Qe:Re,ft=Se&&(Ye=(nt=Se.props)===null||nt===void 0?void 0:nt.endIndex)!==null&&Ye!==void 0?Ye:de,At=De!==Re||ft!==de,jt=!cn(K),Nt=jt&&!At?U.updateId:U.updateId+1;return st(st({updateId:Nt},I(st(st({props:R},U),{},{updateId:Nt,dataStartIndex:De,dataEndIndex:ft}),U)),{},{prevChildren:re,dataStartIndex:De,dataEndIndex:ft})}return null}),mr(F,"renderActiveDot",function(R,U,X){var K;return it.isValidElement(R)?K=it.cloneElement(R,U):Lr(R)?K=R(U):K=He.createElement(d3,U),He.createElement(ha,{className:"recharts-active-dot",key:X},K)});var L=it.forwardRef(function(U,X){return He.createElement(F,Lp({},U,{ref:X}))});return L.displayName=F.displayName,L},Hie=Wie({chartName:"BarChart",GraphicalChild:Pu,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:xx},{axisType:"yAxis",AxisComp:bx}],formatAxisMap:nre});const Gie=({cities:t,darkMode:e,shouldFetch:r=!1})=>{const[n,i]=it.useState([]),[l,u]=it.useState(!1),[s,m]=it.useState({}),[y,w]=it.useState(null),[S,E]=it.useState(!1);if(it.useEffect(()=>{const F=async R=>{if(s[R])return s[R];try{const U=await fetch(`https://city-sense.vercel.app/api/iqv?city=${encodeURIComponent(R)}`);if(!U.ok){if(U.status===404)return w(`Cidade "${R}" não encontrada`),null;throw new Error(`Erro ${U.status}`)}const X=await U.json();return m(K=>({...K,[R]:X})),X}catch(U){return console.error("Erro ao buscar dados:",U),w("Erro ao carregar dados de comparação"),null}},L=async()=>{if(!(!r&&!S))try{u(!0),w(null);const R=t.map(re=>F(re)),X=(await Promise.all(R)).filter(Boolean);if(X.length<2){w("Dados insuficientes para comparação");return}const K=X.map(re=>({city:re.city,iqv_overall:Number(re.iqv_overall),iqv_climate:Number(re.iqv_climate),iqv_humidity:Number(re.iqv_humidity),iqv_traffic:Number(re.iqv_traffic)}));i(K),console.log("Dados formatados:",K),E(!0)}catch(R){console.error("Erro ao buscar dados:",R),w("Erro ao processar comparação")}finally{u(!1)}};t.length>1&&L()},[t,r]),t.length<2&&!S)return null;if(l)return We.jsx("div",{style:{padding:"20px",textAlign:"center",color:e?"#e2e8f0":"#1e293b"},children:"Carregando comparação..."});if(y)return We.jsx("div",{style:{padding:"20px",textAlign:"center",color:e?"#ef4444":"#dc2626"},children:y});if(n.length===0&&S)return We.jsx("div",{style:{padding:"20px",textAlign:"center",color:e?"#e2e8f0":"#1e293b"},children:"Nenhum dado disponível para comparação"});const I={iqv_overall:e?"#3b82f6":"#2563eb",iqv_climate:e?"#10b981":"#059669",iqv_humidity:e?"#eab308":"#d97706",iqv_traffic:e?"#f97316":"#ea580c"};return We.jsxs("div",{style:{backgroundColor:e?"#1e293b":"white",borderRadius:"12px",padding:"20px",boxShadow:e?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",marginTop:"24px",color:e?"#e2e8f0":"#1e293b"},children:[We.jsx("h2",{style:{marginBottom:"16px",color:e?"#e2e8f0":"#1e293b",fontSize:"1.25rem",fontWeight:"600"},children:"Comparação Detalhada"}),We.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:We.jsxs("div",{children:[We.jsx("h3",{style:{marginBottom:"12px",color:e?"#e2e8f0":"#1e293b",fontSize:"1rem",fontWeight:"500"},children:"Índice de Qualidade de Vida (IQV)"}),We.jsx(G7,{width:"100%",height:400,style:{zIndex:100,position:"relative",overflow:"visible"},children:We.jsxs(Hie,{data:n,margin:{top:20,right:30,left:20,bottom:50},layout:"horizontal",children:[We.jsx(V3,{strokeDasharray:"3 3",stroke:e?"#334155":"#e2e8f0"}),We.jsx(xx,{dataKey:"city",stroke:e?"#94a3b8":"#64748b",angle:-45,textAnchor:"end",height:60}),We.jsx(bx,{domain:[0,10],stroke:e?"#94a3b8":"#64748b",tickCount:11}),We.jsx(Su,{contentStyle:e?{backgroundColor:"#1e293b",borderColor:"#334155",color:"#e2e8f0"}:{backgroundColor:"white",borderColor:"#e2e8f0",color:"#1e293b"},formatter:F=>[`${Number(F).toFixed(1)}`,"IQV"],labelFormatter:F=>`Cidade: ${F}`,wrapperStyle:{zIndex:101}}),We.jsx(cd,{wrapperStyle:e?{color:"#e2e8f0"}:{color:"#1e293b"}}),We.jsx(Pu,{dataKey:"iqv_overall",name:"IQV Geral",fill:I.iqv_overall,radius:[4,4,0,0]}),We.jsx(Pu,{dataKey:"iqv_climate",name:"IQV Clima",fill:I.iqv_climate,radius:[4,4,0,0]}),We.jsx(Pu,{dataKey:"iqv_humidity",name:"IQV Umidade",fill:I.iqv_humidity,radius:[4,4,0,0]}),We.jsx(Pu,{dataKey:"iqv_traffic",name:"IQV Trânsito",fill:I.iqv_traffic,radius:[4,4,0,0]})]})})]})})]})},Zie=()=>{const{darkMode:t,toggleDarkMode:e}=it.useContext(GF),[r,n]=it.useState(null),[i,l]=it.useState(!1),[u,s]=it.useState(null),[m,y]=it.useState(null),[w,S]=it.useState("São Paulo"),[E,I]=it.useState(!1),[F,L]=it.useState(null),[R,U]=it.useState(!1),[X,K]=it.useState(!0),[re,W]=it.useState(!1),[J,ie]=it.useState(!1),[he,ve]=it.useState([]),Re=it.useRef(null),de=it.useRef(null),[Oe,Le]=it.useState([]),[Ge,Ne]=it.useState(null),[Ue,Qe]=it.useState(""),[$e,Ye]=it.useState(null),[nt,Se]=it.useState(!1),De=(Je,rr)=>Je>=8?rr?"#10b981":"#047857":Je>=6?rr?"#84cc16":"#65a30d":Je>=4?rr?"#eab308":"#ca8a04":Je>=2?rr?"#f97316":"#c2410c":rr?"#ef4444":"#b91c1c",ft=r?Sr.fromISO(r.updated_at).setZone("America/Sao_Paulo").toFormat("dd/MM/yyyy 'às' HH:mm"):"",At=Je=>{Qe(Je),Le([])},jt=Je=>{S(Je),W(!1),Nt(Je)},Nt=async Je=>{const rr=Je.trim().replace(/\s+/g," ");if(!rr){s("Por favor, insira uma cidade válida"),l(!1);return}try{l(!0),s(null),U(!0),console.log(`🔍 Buscando dados para: ${rr}`);const Bt=await fetch(`/api/iqv?city=${encodeURIComponent(rr)}`,{signal:AbortSignal.timeout(1e4)});if(!Bt.ok){const Gr=(await Bt.json().catch(()=>null))?.detail||`Erro ${Bt.status}: ${Bt.statusText}`;Bt.status===404&&Gr.toLowerCase().includes("não encontrada")?s(`❌ Cidade "${rr}" não encontrada. Verifique o nome e tente novamente.`):s(`⚠️ ${Gr}`),n(null);return}const Er=await Bt.json();console.log("✅ Dados recebidos:",Er),n(Er),y(rr)}catch(Bt){console.error("🚨 Erro na busca:",Bt),Bt.name==="AbortError"?s("⏳ Tempo limite excedido. Tente novamente."):Bt.message.includes("Failed to fetch")?s("🔌 Erro de conexão. Verifique se o backend está rodando em http://localhost:8000"):s(`⚠️ ${Bt.message||"Erro inesperado ao carregar os dados"}`),n(null)}finally{l(!1)}},or=async Je=>{const rr=Je||m;if(rr)try{console.log(`🌤️ Buscando previsão para: ${rr}`);const Bt=await fetch(`/api/forecast?city=${encodeURIComponent(rr)}`,{signal:AbortSignal.timeout(8e3)});if(!Bt.ok){const Gr=(await Bt.json().catch(()=>null))?.detail||`Erro ${Bt.status}: ${Bt.statusText}`;console.warn("⚠️ Previsão não disponível:",Gr),Je===Ue?Ye(null):L(null);return}const Er=await Bt.json();console.log("🌤️ Previsão carregada:",Er.forecast),Je===Ue?Ye(Er.forecast):L(Er.forecast)}catch(Bt){console.error("⚠️ Erro na previsão:",Bt),Je===Ue?Ye(null):L(null)}};it.useEffect(()=>{const Je=rr=>{Re.current&&!Re.current.contains(rr.target)&&W(!1),de.current&&!de.current.contains(rr.target)&&ie(!1)};return document.addEventListener("mousedown",Je),()=>document.removeEventListener("mousedown",Je)},[]),it.useEffect(()=>{R||Nt("São Paulo");const Je=setInterval(()=>{m&&Nt(m)},6e4);return()=>clearInterval(Je)},[m,R]),it.useEffect(()=>{if(m){or();const Je=setInterval(()=>{or(),Ue&&or(Ue)},3e5);return()=>clearInterval(Je)}},[m,Ue]);const er=async Je=>{if(Je.preventDefault(),!w.trim()){s("Por favor, insira uma cidade");return}l(!0),s(null),await Nt(w)},ct=Je=>{S(Je),Nt(Je),I(!1)},Ht=()=>{Ue.trim()&&r&&(Se(!0),or(Ue),console.log(`Comparando ${r.city} com ${Ue}`),setTimeout(()=>Se(!1),3e3))},lr=Je=>Je<=0?"0 minutos":`${Math.round(Je)} minutos`;return r&&(r.longitude,r.latitude,r.iqv_overall,r.city,r.country),it.useEffect(()=>{if(m&&r){const Je=async()=>{try{const Bt=await fetch(`/api/predict/iqv?city=${encodeURIComponent(m)}`);if(Bt.ok){const Er=await Bt.json();Ne(Er)}}catch(Bt){console.error("Erro ao buscar previsão do ML:",Bt)}};Je();const rr=setInterval(Je,18e5);return()=>clearInterval(rr)}},[m,r]),We.jsx(We.Fragment,{children:We.jsx("div",{style:{width:"100%",backgroundColor:t?"#1e293b":"#f8fafc",minHeight:"100vh",transition:"background-color 0.3s ease, color 0.3s ease"},children:We.jsxs("div",{style:{fontFamily:'"Segoe UI", -apple-system, BlinkMacSystemFont, Roboto, sans-serif',maxWidth:"1200px",width:"100%",margin:"0 auto",padding:"20px",color:t?"#e2e8f0":"#1e293b"},children:[We.jsx(tU,{data:r,city:m||"Carregando...",darkMode:t,toggleDarkMode:e}),We.jsx(rU,{inputCity:w,showSuggestions:re,suggestedCities:he,setInputCity:S,setShowSuggestions:W,handleSearch:er,handleCitySelect:ct,isSearching:i,darkMode:t,searchRef:Re,onSelectSuggestion:jt}),!R&&We.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"50vh",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)"},children:[We.jsx("div",{style:{fontSize:"3rem",marginBottom:"16px",animation:"pulse 2s infinite"},children:"🌍"}),We.jsx("h2",{style:{fontSize:"1.5rem",color:t?"#cbd5e1":"#475569",marginBottom:"8px"},children:"Carregando cidade inicial"}),We.jsx("p",{style:{color:t?"#94a3b8":"#64748b"},children:"Buscando dados para São Paulo..."}),We.jsx("style",{children:"@keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }"})]}),i&&R&&!r&&We.jsx(nU,{darkMode:t}),u&&We.jsx(iU,{error:u,onRetry:()=>Nt(m||w),darkMode:t}),r&&!i&&!u&&We.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 350px",gap:"24px",marginBottom:"32px"},children:[We.jsxs("div",{children:[We.jsx(aU,{data:r,dataFormatada:ft,getWeatherIcon:()=>{const Je=r.description.toLowerCase();return Je.includes("chuva")||Je.includes("storm")?"⛈️":Je.includes("nublado")||Je.includes("cloud")?"☁️":Je.includes("sol")||Je.includes("clear")?"☀️":Je.includes("neve")?"❄️":"🌤️"},darkMode:t}),We.jsx(oU,{data:r,formatTrafficDelay:lr,darkMode:t})]}),We.jsxs("div",{children:[We.jsx(sU,{data:r,darkMode:t}),We.jsx(lU,{data:r,darkMode:t})]})]}),r&&!i&&!u&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:"Previsão de IQV com M.L."})}),We.jsx("div",{style:{padding:"16px"},children:Ge?We.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[We.jsxs("div",{children:[We.jsx("h3",{style:{color:t?"#cbd5e1":"#1e293b",marginBottom:"10px"},children:"IQV Atual"}),We.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:De(r.iqv_overall,t)},children:r.iqv_overall.toFixed(1)})]}),We.jsxs("div",{children:[We.jsx("h3",{style:{color:t?"#cbd5e1":"#1e293b",marginBottom:"10px"},children:"IQV Previsto"}),We.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"bold",color:De(Ge.predicted_iqv,t)},children:Ge.predicted_iqv.toFixed(1)}),We.jsx("p",{style:{color:t?"#94a3b8":"#64748b",marginTop:"5px"},children:Ge.predicted_iqv>r.iqv_overall?"📈 Tendência positiva":Ge.predicted_iqv<r.iqv_overall?"📉 Tendência negativa":"➡️ Estabilidade"})]})]}):We.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[We.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px",color:t?"#94a3b8":"#64748b"},children:"🤖"}),We.jsx("p",{style:{color:t?"#94a3b8":"#64748b",textAlign:"center"},children:"Processando previsão do IQV com machine learning..."})]})})]}),r&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:"Comparação de Cidades"})}),We.jsx("div",{style:{padding:"16px"},children:We.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px",marginBottom:"16px"},children:We.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[We.jsx("span",{style:{fontWeight:"600",color:t?"#e2e8f0":"#1e293b"},children:"Digite a cidade para comparação:"}),We.jsx("div",{ref:de,style:{position:"relative",flex:1},children:We.jsx("input",{type:"text",value:Ue,onChange:Je=>At(Je.target.value),placeholder:"Ex: Rio de Janeiro",style:{padding:"8px 12px",borderRadius:"6px",border:t?"1px solid #334155":"1px solid #e2e8f0",backgroundColor:t?"#334155":"#f1f5f9",color:t?"#e2e8f0":"#1e293b",width:"100%"}})}),We.jsx("button",{onClick:Ht,disabled:nt,style:{padding:"8px 16px",backgroundColor:t?"#3b82f6":"#2563eb",color:"white",border:"none",borderRadius:"6px",cursor:nt?"not-allowed":"pointer",fontWeight:"600"},children:nt?"Carregando...":"Comparar"})]})})})]}),r&&Ue.trim()!==""&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:"Comparação de Cidades"})}),We.jsx("div",{style:{padding:"16px"},children:nt?We.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",textAlign:"center"},children:[We.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px",color:t?"#94a3b8":"#64748b"},children:"🔄"}),We.jsx("p",{style:{color:t?"#94a3b8":"#64748b",textAlign:"center"},children:"Carregando comparação..."})]}):We.jsx("div",{style:{marginTop:"16px"},children:We.jsx(Gie,{cities:r?[r.city,Ue]:["São Paulo",Ue],darkMode:t,shouldFetch:!0})})})]}),r&&F&&F.length>0&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:["Temperaturas Previstas - ",r.city]})}),We.jsx("div",{style:{padding:"16px"},children:We.jsx(EE,{data:F||[],darkMode:t})})]}),Ue&&$e&&$e.length>0&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:["Temperaturas Previstas - ",Ue]})}),We.jsx("div",{style:{padding:"16px"},children:We.jsx(EE,{data:$e||[],darkMode:t})})]}),Ue&&!$e&&$e!==null&&We.jsxs("div",{style:{marginBottom:"32px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",overflow:"hidden"},children:[We.jsx("div",{style:{padding:"16px",borderBottom:t?"1px solid #334155":"1px solid #e2e8f0"},children:We.jsxs("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:t?"#cbd5e1":"#1e293b"},children:["Temperaturas Previstas - ",Ue]})}),We.jsxs("div",{style:{padding:"16px",textAlign:"center"},children:[We.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px",color:t?"#94a3b8":"#64748b"},children:"🌤️"}),We.jsxs("p",{style:{color:t?"#94a3b8":"#64748b",textAlign:"center"},children:["Previsão do tempo não disponível para ",Ue]})]})]}),!r&&R&&!i&&!u&&We.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",backgroundColor:t?"#1e293b":"white",borderRadius:"12px",boxShadow:t?"0 4px 6px rgba(0, 0, 0, 0.3)":"0 4px 6px rgba(0, 0, 0, 0.05)",marginTop:"24px"},children:[We.jsx("h2",{style:{fontSize:"1.5rem",color:t?"#cbd5e1":"#1e293b",marginBottom:"16px"},children:"Nenhuma cidade selecionada"}),We.jsx("p",{style:{color:t?"#94a3b8":"#64748b",fontSize:"1.1rem",maxWidth:"600px",margin:"0 auto"},children:"Digite o nome de uma cidade no campo acima para ver sua qualidade de vida urbana"})]}),We.jsx(uU,{darkMode:t})]})})})},Xie=()=>We.jsx(cU,{children:We.jsx(Zie,{})});M5.createRoot(document.getElementById("root")).render(We.jsx(He.StrictMode,{children:We.jsx(Xie,{})}));
